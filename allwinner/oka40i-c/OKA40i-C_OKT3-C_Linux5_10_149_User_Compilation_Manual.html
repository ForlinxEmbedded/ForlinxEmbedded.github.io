

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Linux5.10.149_User’s Compilation Manual_V1.3 &mdash; Forlinx Embedded A40i Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=562fc538" />

  
    <link rel="shortcut icon" href="_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/allwinner/oka40i-c/OKA40i-C_OKT3-C_Linux5_10_149_User_Compilation_Manual.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Linux5.10.149_User’s Manual_V1.2" href="OKA40i-C_OKT3-C_Linux5_10_149_User_Manual.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">HARDWARE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OKA40i-C_OKT3-C_User_Hardware_Manual.html">User’s Hardware Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SOFTWARE</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="OKA40i-C_OKT3-C_Linux5_10_149_User_Manual.html">Linux5.10.149_User’s Manual_V1.2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Linux5.10.149_User’s Compilation Manual_V1.3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#copyright">Copyright</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-scope">Application Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#revision-history">Revision History</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vmware-virtual-machine-software-installation">1. VMware Virtual Machine Software Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vmware-software-download-and-purchase">1.1 VMware Software Download and Purchase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vmware-software-installation">1.2 VMware Software Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#loading-the-existing-ubuntu-development-environment">2. Loading the Existing Ubuntu Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#new-ubuntu-development-environment-setup">3. New Ubuntu Development Environment Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ubuntu-system-setup">3.1 Ubuntu System Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ubuntu-virtual-machine-setup">3.1.1 Ubuntu Virtual Machine Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ubuntu-basic-configuration">3.1.3 Ubuntu Basic Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-settings-for-virtual-machine">3.1.4 Network Settings for Virtual Machine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#toolkit-installation">3.2 Toolkit Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#qt-creator-installation">3.3 Qt Creator Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solutions-to-vmware-errors">3.4 Solutions to VMware Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#linux-compilation">4. Linux Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparation-before-compilation">4.1 Preparation Before Compilation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#versions">4.1.1 Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-code-copy-and-release">4.1.2 Source Code Copy and Release</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-code-directory-structure">4.1.3 Source Code Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#source-code-compilation">4.2 Source Code Compilation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-compilation-options">4.2.1 Configuration Compilation Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#full-compilation-test">4.2.2 Full Compilation Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-kernel-separately">4.2.3 Compiling Kernel Separately</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-buildroot-separately">4.2.4 Compiling Buildroot Separately</a></li>
<li class="toctree-l4"><a class="reference internal" href="#image-packaging">4.2.5 Image Packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-image-modification">4.2.6 Boot Image Modification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-and-adding-applications-separately">4.2.7 Compiling and Adding Applications Separately</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#qt-environment-configuration">5. QT Environment Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#qt-creator-operation">5.1 Qt Creator Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#qt-compilation-environment-configuration">5.2 QT Compilation Environment Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cross-compiler-configuration">5.2.1 Cross Compiler Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qt-version-library-configuration">5.2.2 QT Version Library Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kit-configuration">5.2.3 Kit Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#application-compilation-and-operation">5.3 Application Compilation and Operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#backlight-test-program-configuration">5.3.1 Backlight Test Program Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#terminal-cross-compilation-environment-setup">6. Terminal Cross-compilation Environment Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#forlinx-development-environment">6.1 Forlinx Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-environment-manually">6.2 Setting up the Environment Manually</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Forlinx Embedded A40i Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Linux5.10.149_User’s Compilation Manual_V1.3</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="linux5-10-149-users-compilation-manual-v1-3">
<h1>Linux5.10.149_User’s Compilation Manual_V1.3<a class="headerlink" href="#linux5-10-149-users-compilation-manual-v1-3" title="Link to this heading"></a></h1>
<p>Document classification: □ Top secret □ Secret □ Internal information ■ Open</p>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Link to this heading"></a></h2>
<p>The copyright of this manual belongs to Baoding Folinx Embedded Technology Co., Ltd. Without the written permission of our company, no organizations or individuals have the right to copy, distribute, or reproduce any part of this manual in any form, and violators will be held legally responsible.</p>
<p>Forlinx adheres to copyrights of all graphics and texts used in all publications in original or license-free forms.</p>
<p>The drivers and utilities used for the components are subject to the copyrights of the respective manufacturers. The license conditions of the respective manufacturer are to be adhered to. Related license expenses for the operating system and applications should be calculated/declared separately by the related party or its representatives.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This manual is designed to help you quickly familiarize yourselves with the product, and understand the interface functions and testing methods. It primarily covers the testing of interface functions on the development board, the methods for flashing images, and troubleshooting procedures for common issues encountered in use. In the process of testing, some commands are annotated to facilitate the your understanding, mainly for practical use. Please refer to “OKA40i-C_Linux5.10.149+Qt5.15.8 User’s Compilation Manual” provided by Forlinx for kernel compilation, related application compilation methods and development environment construction.</p>
<p>There are total six parts:</p>
<ul class="simple">
<li><p>Chapter 1. is about the installation of virtual machine software, providing a brief introduction to the download and installation of VMware software.</p></li>
<li><p>Chapter 2. offers the loading of the Ubuntu system;</p></li>
<li><p>Chapter 3. is about the setup, configuration and installation of necessary tools for the Ubuntu system, as well as common issues related to the development environment;</p></li>
<li><p>Chapter 4. is the data and compilation method required for the compilation of the source code of the product;</p></li>
<li><p>Chapter 5. is about the configuration of the Qt compilation environment and methods for compiling programs;</p></li>
<li><p>Chapter 6. is the method of building the terminal cross compiling environment.</p></li>
</ul>
</section>
<section id="application-scope">
<h2>Application Scope<a class="headerlink" href="#application-scope" title="Link to this heading"></a></h2>
<p>This software manual is applicable to the OKA40i platform Linux 5.10 operating system of Forlinx.</p>
</section>
<section id="revision-history">
<h2>Revision History<a class="headerlink" href="#revision-history" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Date</p></th>
<th class="head text-center"><p>User Manual Version</p></th>
<th class="head"><p>Revision History</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>15/04/2025</p></td>
<td class="text-center"><p>V1.0</p></td>
<td><p>OKA40i_Linux5.10.149+Qt5.15.8_User’s Compilation Manual Initial Version</p></td>
</tr>
<tr class="row-odd"><td><p>07/11/2023</p></td>
<td class="text-center"><p>V1.1</p></td>
<td><p>1. Modifying the path of common source code files;<br/> 2. Adding a separate compilation method for the application;<br/> 3. Adding an adding method for the application.</p></td>
</tr>
<tr class="row-even"><td><p>21/03/2024</p></td>
<td class="text-center"><p>V1.2</p></td>
<td><p>1. Modifying the compilation description and code path; <br/> 2. Canceling the./build. sh. config selection configuration step.</p></td>
</tr>
<tr class="row-odd"><td><p>19/06/2024</p></td>
<td class="text-center"><p>V1.3</p></td>
<td><p>1. Replacing some pictures in the manual;<br/> 2. Correcting the layout of the manual.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="vmware-virtual-machine-software-installation">
<h2>1. VMware Virtual Machine Software Installation<a class="headerlink" href="#vmware-virtual-machine-software-installation" title="Link to this heading"></a></h2>
<p>This chapter mainly introduces the installation of VMware virtual machines, using VMware Workstation 15 Pro v15.1.0 as an example to demonstrate the installation and configuration process of the operating system.</p>
<section id="vmware-software-download-and-purchase">
<h3>1.1 VMware Software Download and Purchase<a class="headerlink" href="#vmware-software-download-and-purchase" title="Link to this heading"></a></h3>
<p>Visit Vmware official website <a class="reference external" href="https://www.vmware.com/cn.html">https://www.vmware.com/cn.html</a> for downloading Workstation Pro and obtaining the product key. VMware is a paid software that requires purchasing, or you can choose to use a trial version.</p>
<p><img alt="Image" src="_images/1718955852144_1098ddb4_a89e_4250_a2f3_9f8996653ddd.png" /></p>
<p>After the download is complete, double-click the installation file to start the installation program.</p>
</section>
<section id="vmware-software-installation">
<h3>1.2 VMware Software Installation<a class="headerlink" href="#vmware-software-installation" title="Link to this heading"></a></h3>
<p>Double-click the startup program to enter the installation wizard.</p>
<p><img alt="Image" src="_images/1718955852506_7a56d2f3_fce5_4c35_8ae4_de9d48859758.png" /></p>
<p>Click on “Next”.</p>
<p><img alt="Image" src="_images/1718955852903_6616208d_8229_442f_9d66_f51c9b53183c.png" /></p>
<p>Check the terms in the license agreement that I accept, then click “Next”.</p>
<p><img alt="Image" src="_images/1718955853225_500c7e5b_da2f_4e84_a10e_898529816248.png" /></p>
<p>Modify the installation location to the partition where you want to install the software on your computer, then click ‘“Next”.</p>
<p><img alt="Image" src="_images/1718955853614_ac2af311_9771_4cca_a0f4_b2d72dadd502.png" /></p>
<p>Check and click on “Next”.</p>
<p><img alt="Image" src="_images/1718955853947_9ceb1cf6_66ad_42e8_99a2_902e70053444.png" /></p>
<p>Check the box to add a shortcut, then click “Next”.</p>
<p><img alt="Image" src="_images/1718955854230_c72a072d_830c_4a30_8f47_0a132acd673f.png" /></p>
<p>Click “Installation”.</p>
<p><img alt="Image" src="_images/1718955854544_10472fff_95b5_4870_b279_c0faa0993997.png" /></p>
<p>Wait for the installation to complete.</p>
<p><img alt="Image" src="_images/1718955854740_73ae8b27_8cdc_48f4_82ff_aeb01a6be7a5.png" /></p>
<p>Click “Finish” to try it out. If users need to use it for a long time, they need to buy it from the official and fill in the license.</p>
</section>
</section>
<section id="loading-the-existing-ubuntu-development-environment">
<h2>2. Loading the Existing Ubuntu Development Environment<a class="headerlink" href="#loading-the-existing-ubuntu-development-environment" title="Link to this heading"></a></h2>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>It is recommended for beginners to directly use the pre-built virtual machine environment provided by Forlinx, which already includes installed cross-compiler and Qt environment. After understanding this chapter, you can directly jump to the compilation chapter for further study;</strong></p></li>
<li><p><strong>The development environment provided for general users is: forlinx (username), forlinx (password). The superuser is: root (username), root (password).</strong></p></li>
</ul>
<p>There are two ways to use a virtual machine environment in VMware: one is to directly load an existing environment, and the other is to create a new environment. First talk about how to load an existing environment.</p>
<p>First, download the development environment provided by Forlinx. In the development environment documentation, there should be an MD5 checksum file. After downloading the development environment, you should verify the integrity of the compressed package using the MD5 checksum. (You can use an on-line MD5 checksum tool or download a specific MD5 checksum tool for this purpose). To check if the checksum in the verification file matches the checksum of the file itself. If they match, the file download is successful. If they don’t match, it suggests that the file may be corrupt, and you should consider downloading it again.</p>
<p><img alt="Image" src="_images/1718955860898_5cd1fec1_9e01_4d8e_8899_e28205da078c.png" /></p>
<p>Select all compressed files, right-click and extract to the current folder or your own directory:</p>
<p><img alt="Image" src="_images/1718955861255_44ef4d46_c5a6_4825_abb1_2405e059e62b.png" /></p>
<p>Unzip it and get the development environment 18.04. Ubuntu 64-bit.vmx in the 18.04 folder is the file to open for the virtual machine.</p>
<p>Open the installed virtual machine.</p>
<p><img alt="Image" src="_images/1718955861467_c0ae5534_31d1_4031_a118_b4d288854395.png" /></p>
<p>Select the directory where the 18.04 virtual machine file just extracted is located, and double-click to open the startup file.</p>
<p><img alt="Image" src="_images/1718955861677_43f42161_940a_4833_abf0_5358e0a7fa01.png" /></p>
<p>After loading, click to open the virtual machine to run and enter the system interface.</p>
<p><img alt="Image" src="_images/1718955861916_fc9726a4_44a0_4736_a4cf_75db7ee249fb.png" /></p>
<p>The default login account for automatic login in the development environment is “forlinx”.</p>
<p><img alt="Image" src="_images/1718955862254_6f0531dd_b252_431c_b950_2028de48b256.png" /></p>
</section>
<section id="new-ubuntu-development-environment-setup">
<h2>3. New Ubuntu Development Environment Setup<a class="headerlink" href="#new-ubuntu-development-environment-setup" title="Link to this heading"></a></h2>
<p><strong>Note: Beginners are not recommended to set up a system on their own. It is recommended to use an existing virtual machine environment. If you do not need to set up the environment, you can skip this section.</strong></p>
<p>This chapter mainly explains the process of setting up the Ubuntu system and installing Qt Creator. If the user is not using Qt, the installation of Qt Creator can be ignored.</p>
<section id="ubuntu-system-setup">
<h3>3.1 Ubuntu System Setup<a class="headerlink" href="#ubuntu-system-setup" title="Link to this heading"></a></h3>
<section id="ubuntu-virtual-machine-setup">
<h4>3.1.1 Ubuntu Virtual Machine Setup<a class="headerlink" href="#ubuntu-virtual-machine-setup" title="Link to this heading"></a></h4>
<p>Step 1: Open the VMware software and click [File]/ [New Virtual Machine]. Enter the following interface:</p>
<p><img alt="Image" src="_images/1718955871290_0b8eedce_1c60_465f_8eeb_8f9b0a3a2ad9.png" /></p>
<p>Step 2: Select Custom and click “Next”.</p>
<p><img alt="Image" src="_images/1718955871629_700231bc_97ae_4772_bd6a_13cdb71361bf.png" /></p>
<p>Select the compatibility with the corresponding version of VMware, which can be found in Help-&gt;About VMware Workstation, and click “Next”.</p>
<p><img alt="Image" src="_images/1718955871999_e7c4c335_bb06_42fd_9f35_6dace9c09788.png" /></p>
<p>Select Install the operating system later and click “Next”.</p>
<p><img alt="Image" src="_images/1718955872325_d619ecd8_a96b_4e86_85ff_dd3acd4c5659.png" /></p>
<p>Keep the default settings and click “Next”.</p>
<p><img alt="Image" src="_images/1718955872708_4349d847_8151_4ed7_813b_28d66978c5ea.png" /></p>
<p>Modify the name and installation location of your virtual machine, and click “Next”.</p>
<p><img alt="Image" src="_images/1718955872990_37aebe96_45df_4448_92f2_ee5c1c677cf8.png" /></p>
<p>Configure the number of CPU based on your computer’s actual specifications.</p>
<p><img alt="Image" src="_images/1718955873226_677c6787_a757_4ee7_930a_56b53953fb75.png" /></p>
<p>Set the memory size according to your actual specifications (For Linux kernel compilation, a memory size of 4GB is sufficient, while Android source code compilation requires higher memory requirements).</p>
<p><img alt="Image" src="_images/1718955873511_cf2584b7_9280_4f88_8aae_6eee26c16c53.png" /></p>
<p>Set the network type, default to NAT mode then click “Next”. Keep the default values for the remaining steps until you reach the step to specify the disk capacity.</p>
<p><img alt="Image" src="_images/1718955873833_2eff1b93_d71e_49db_9762_39d1d4eb73a6.png" /></p>
<p>The default selection for the IO controller type here is LSI.</p>
<p><img alt="Image" src="_images/1718955874165_ca8894d9_facd_47cc_92c7_bf05303967c9.png" /></p>
<p>The default selection here is also SCSI.</p>
<p><img alt="Image" src="_images/1718955874400_736be129_b033_440b_9102_017bbcb1d58f.png" /></p>
<p>Choose to create a new virtual disk here.</p>
<p><img alt="Image" src="_images/1718955874758_c542d266_3ddf_4336_b164_292da62e9d80.png" /></p>
<p>Set the disk size to 200GB, select the disk provisioning format, and then click “Next”.</p>
<p><img alt="Image" src="_images/1718955875118_075776d4_b623_4538_a057_3c61c9c708ef.png" /></p>
<p>Specify the disk file, the default one here is fine.</p>
<p><img alt="Image" src="_images/1718955875413_ffbf7a80_26b6_40dc_ad99_5088375bfae6.png" /></p>
<p>By default, you can click “Finish” and wait for the installation to complete, so that the virtual machine creation is complete.</p>
<p>3.1.2 System Installation</p>
<p>In the previous section, we have created a virtual machine, but we haven’t installed the operating system yet, so the virtual machine cannot be started. Next, we will install the Ubuntu operating system in the newly created virtual machine.</p>
<p>Step 1: Go to the Ubuntu official website to obtain the Ubuntu 18.04 image. The download address for Ubuntu 18.04 is:</p>
<p><a class="reference external" href="https://www.ubuntu.com/download/desktop">https://www.ubuntu.com/download/desktop</a></p>
<p>The installed Ubuntu version is 18.04. One of the reasons for choosing 18.04 is that all the source code compilation operations have been compiled and verified on Ubuntu 18.04. There may be slight differences when performing these operations on different Ubuntu system versions.</p>
<p>Download address: <a class="reference external" href="http://releases.ubuntu.com/18.04/">http://releases.ubuntu.com/18.04/</a></p>
<p><img alt="Image" src="_images/1718955875705_d8ebaa7a_084c_462c_8483_c4effedaa633.png" /></p>
<p>Download “ubuntu-18.04.5-desktop-amd64.iso”. After downloading the mirror image, you can proceed with the system installation operation.</p>
<p>Right-click on the created virtual machine name and select “Settings” from the pop-up menu.</p>
<p><img alt="Image" src="_images/1718955875924_d83985d4_ac8a_4e0e_93ad_c522ed9d4662.png" /></p>
<p>The “Virtual Machine Settings” menu will pop up.</p>
<p><img alt="Image" src="_images/1718955876231_3922f5d7_a3f8_400e_b8b5_d90f9fbe8d19.png" /></p>
<p>Click on CD/DVD (SATA), select “Use ISO image file,” browse and choose the previously downloaded Ubuntu image, then click “OK” to confirm.</p>
<p><img alt="Image" src="_images/1718955876544_029037c6_634e_4d6d_890d_e648e0a314ab.png" /></p>
<p>After setting up the image, ensure that the network is available. Then, start the virtual machine and proceed with the installation of the Ubuntu image.</p>
<p><img alt="Image" src="_images/1718955876797_961567cd_d17a_443b_ae5d_3a8db54cb3ca.png" /></p>
<p>After starting the virtual machine, wait for the installation interface to appear as shown below.</p>
<p><img alt="Image" src="_images/1718955877076_ceab67b8_9c4d_41ab_84d7_f8a5dbe5a494.png" /></p>
<p>After selecting the language on the left side as shown in the image, click “Install Ubuntu”, and the language selection interface will pop up. The default language of Ubuntu is English, but of course, you can also choose Others.</p>
<p><img alt="Image" src="_images/1718955877293_263a494f_fb32_4c47_a26b_22db62bbab69.png" /></p>
<p>The default selected language can also be reset at a later stage, after the selection is complete continue.</p>
<p><img alt="Image" src="_images/1718955877500_2630c936_7a0a_49c2_a2eb_280c7f75514b.png" /></p>
<p>Next, select “Continue” as the default option to proceed with the installation. The installation process might be slow. Then, click “Continue” again.</p>
<p><img alt="Image" src="_images/1718955877731_0bdf0dee_4f58_4456_add4_6c12b1226c25.png" /></p>
<p>By default, when you click on “Install Now”, a dialog box will appear as shown in the image. Simply click “Continue” to proceed.</p>
<p><img alt="Image" src="_images/1718955877936_25d0090d_96c6_4154_b083_79b87f5601bb.png" /></p>
<p>Next, select the timezone. You can either click on the Shanghai timezone or enter “Shanghai” (or choose the appropriate timezone based on your location). Then, click “Continue” to proceed. Finally, set your username and password. You can choose either automatic login or login with a username and password. Click “Continue” to start the automatic installation.</p>
<p>If the internet connection is poor, you can Skip without affecting the installation process.</p>
<p><img alt="Image" src="_images/1718955878429_920ac9a2_2102_444a_bd9d_0177f0de88c5.png" /></p>
<p>Click “Restart” Now to reboot.</p>
<p><img alt="Image" src="_images/1718955878736_e7577fdd_ebe2_48ff_a684_4f13a3ca4a4f.png" /></p>
<p><img alt="Image" src="_images/1718955879017_bec36ffe_6cf4_404f_a9d0_744428b97d17.png" /></p>
<p>The system interface after the reboot is complete.</p>
<p><img alt="Image" src="_images/1718955879308_6909ab33_9f2a_46d0_abea_2804109901af.png" /></p>
<p>The ubuntu system installation is complete.</p>
</section>
<section id="ubuntu-basic-configuration">
<h4>3.1.3 Ubuntu Basic Configuration<a class="headerlink" href="#ubuntu-basic-configuration" title="Link to this heading"></a></h4>
<p>After installing the Ubuntu 18.04 operating system, there are a few configurations to make.</p>
<p>VMware Tools Installation:</p>
<p>Next, install VMware Tools. Without installing this tool, you won’t be able to copy and paste and drag file between the Windows host and the virtual machine. First click on “Virtual Machine” on the VMware navigation bar, then click “Install VMware Tools” in the drop-down box.</p>
<p><img alt="Image" src="_images/1718955879647_84ac6b41_7c96_47a3_8497_53e7e4d7c5ef.png" /></p>
<p>Once done, enter Ubuntu and the VMware Tools CD will appear on your desktop and click into it.</p>
<p><img alt="Image" src="_images/1718955879949_d23f7ed0_497f_4fde_8900_5b321d9de0e1.png" /></p>
<p>Enter and see a compressed file VMwareTools-10.3.10-12406962.tar.gz (it may be different for different VM versions); copy the file under the home directory (i.e. the directory with the home personal username)</p>
<p><img alt="Image" src="_images/1718955880149_3dfaa63c_9a38_451a_b6a6_de5ac513aadf.png" /></p>
<p>Press [Ctrl+Alt+T] to bring up the Terminal Command Interface and enter the command:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ sudo tar xvf VMwareTools-10.3.10-12406962.tar.gz
</pre></div>
</div>
<p><img alt="Image" src="_images/1718955880355_500bafa7_4ad6_4884_8b35_45077444380a.png" /></p>
<p>After the extraction is complete, a file named “vmware-tools-distrib” will appear</p>
<p><img alt="Image" src="_images/1718955880598_fca0e081_a6e0_417d_b92c_a40acaa4b80a.png" /></p>
<p>Go back to the terminal and type cd vmware-tools-distrib to enter the directory.</p>
<p>Enter: sudo ./vmware-install.pl followed by pressing Enter. Then, enter your password and the installation process will begin. When prompted, you can input “yes” and press Enter to proceed. For any other inquiries, simply press Enter to go with the default installation settings.</p>
<p><img alt="Image" src="_images/1718955880797_f7161cfa_530b_4087_a3dc_e9845ad0b587.png" /></p>
<p>Once the VMware tools is complete, we can implement file copy and paste between Windows and Ubuntu.</p>
<p>The virtual machine is displayed full screen:</p>
<p>If the virtual machine is not able to be displayed in full screen, you can resolve this issue by clicking on “View” and selecting “Autofit Guest.” This will adjust the display to fit the screen automatically, enabling you to have a full-screen experience in the virtual machine.</p>
<p><img alt="Image" src="_images/1718955880980_2f8e90cc_ff16_4578_9f0e_f7e5cbd66419.png" /></p>
<p>Make most of the system settings in the location shown. A lot of the setup requirements on Ubuntu can be done here.</p>
<p><img alt="Image" src="_images/1718955881181_f7e58fb6_af55_4d49_bc19_8746442012f4.png" /></p>
<p>Virtual machine hibernation settings:</p>
<p>Also, the default hibernation is 5min, if you don’t want to set hibernation, just set it to Never by setting Power-&gt;Blank screen.</p>
<p><img alt="Image" src="_images/1718955881370_8afb5807_cb30_4d34_9aaf_dc0642e3d194.png" /></p>
</section>
<section id="network-settings-for-virtual-machine">
<h4>3.1.4 Network Settings for Virtual Machine<a class="headerlink" href="#network-settings-for-virtual-machine" title="Link to this heading"></a></h4>
<section id="nat-connection-method">
<h5>3.1.4.1 NAT Connection Method<a class="headerlink" href="#nat-connection-method" title="Link to this heading"></a></h5>
<p>By default, after the virtual machine is installed, the network connection method is set to NAT, which shares the host machine’s IP address. This configuration does not need to be changed when performing tasks like installing dependencies or compiling code.</p>
<p>When the VMware virtual NIC is set to NAT mode in a virtual machine, the network in the Ubuntu environment can be set to dynamic IP. In this mode the virtual NAT device and the host NIC are connected to communicate for Internet access. This is the most common way for our VM to access the external network.</p>
<p><img alt="Image" src="_images/1718955881655_be494039_559d_4b12_a2a8_282cd8a76fe7.png" /></p>
</section>
<section id="connections-for-bridges">
<h5>3.1.4.2 Connections for Bridges<a class="headerlink" href="#connections-for-bridges" title="Link to this heading"></a></h5>
<p>When the VMware virtual NIC device is in bridge mode, the host NIC and the virtual machine NIC communicate through the virtual bridge, and the network IP and the host need to be set in the same network segment in the Ubuntu environment. If accessing an external network, you need to set the DNS to be consistent with the host NIC. If TFTP, SFTP and other servers are used, the network contact mode of the virtual machine needs to be set as the bridge mode.</p>
<p><img alt="Image" src="_images/1718955881979_f0278279_78c8_453a_9613_2bd97457826d.png" /></p>
</section>
</section>
</section>
<section id="toolkit-installation">
<h3>3.2 Toolkit Installation<a class="headerlink" href="#toolkit-installation" title="Link to this heading"></a></h3>
<p>The development environment provided by us has been installed and can be skipped.</p>
<p>To install Linux dependencies, it is required to have the Ubuntu 18.04 64-bit version installed and an internet connection.</p>
<p>Step 1: Copy the file setup_env.sh to the Ubuntu home directory;</p>
<p>User Profile \tools\setup_env.sh</p>
<p>Step 2: Add executable permissions to the setup _ env. sh and run it;</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ chmod u+x setup_env.sh
forlinx@ubuntu:~$ ./setup_env.sh
</pre></div>
</div>
<p>The following prompts appear during the installation process, and you need to take corresponding actions:</p>
<p><img alt="Image" src="_images/1718955882238_3e5c19ac_b84a_4164_8825_e40f03df41c8.jpeg" /></p>
<p>Press Enter at this prompt.</p>
<p><img alt="Image" src="_images/1718955882435_e0118ed6_6dea_4e78_9f28_5e2196496490.jpeg" /></p>
<p>Enter “Y” at this prompt and press Enter.</p>
</section>
<section id="qt-creator-installation">
<h3>3.3 Qt Creator Installation<a class="headerlink" href="#qt-creator-installation" title="Link to this heading"></a></h3>
<p>Download the qt-creator 4.5.2 package from the qt-creator website <a class="reference external" href="https://download.qt.io/official_releases/qtcreator/">https://download.qt.io/official_releases/qtcreator/</a></p>
<p>Download and copy [qt-creator-opensource-linux-x8](https://download.qt.io/official_releases/qtcreator/4.5/4.5.2/qt-creator-opensource-linux-x86_64-4.5.2.run <a class="reference internal" href="#"><span class="xref myst">6_64-4.5.2.run</span></a> to the home directory of the current user, attach the executable permission and execute:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ chmod 777 qt-creator-opensource-linux-x86_64-4.5.2.run
forlinx@ubuntu:~$ ./qt-creator-opensource-linux-x86_64-4.5.2.run
</pre></div>
</div>
<p>The following screen will pop up, click “Next” to proceed to the next step:</p>
<p><img alt="Image" src="_images/1718955882676_a50cd8ff_23f3_4dbb_bae3_f588f2a8b996.png" /></p>
<p>In the following screen, register or log in to your account and click “Next” to proceed to the next step:</p>
<p><img alt="Image" src="_images/1718955882866_299de589_cc08_484b_b06e_57bd7c2e4065.png" /></p>
<p>In the following screen, click “Next” to proceed to the next step:</p>
<p><img alt="Image" src="_images/1718955883068_348cfafd_4888_41c4_ad3d_33b77452369a.png" /></p>
<p>In the following interface, click “Browse…” to select the installation path of Qtcreator, after the selection is complete, click “Next” to enter the next step:</p>
<p><img alt="Image" src="_images/1718955883293_3263d020_b0b1_4ed8_8fb4_5c8fcf781896.png" /></p>
<p>In the following screen, check the first item and click “Next” to proceed to the next step:</p>
<p><img alt="Image" src="_images/1718955883503_111e0899_17d5_4b72_b270_3798b1112291.png" /></p>
<p>Select the radio box “I have read and agree to the terms contained in the license agreement” button in the following screen, before clicking “Next”:</p>
<p><img alt="Image" src="_images/1718955883685_4035034e_8bce_44fe_a4f1_e02b9b52c530.png" /></p>
<p>In the following screen, click “Install” to install Qt.</p>
<p><img alt="Image" src="_images/1718955883881_ea67f737_5f66_4eef_be69_b938c8f72e33.png" /></p>
<p>After the installation is complete, the following interface will be displayed, uncheck the option “Launch Qt Creator” and click “Finish” to complete the installation of Qtcreator:</p>
<p><img alt="Image" src="_images/1718955884134_f3287178_dfdf_4a20_ac65_198832b5d19b.png" /></p>
<p>When opening the software, execute:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ cd /home/forlinx/qtcreator-4.7.0/bin
forlinx@ubuntu:~/qtcreator-4.5.2/bin$ ./qtcreator
</pre></div>
</div>
</section>
<section id="solutions-to-vmware-errors">
<h3>3.4 Solutions to VMware Errors<a class="headerlink" href="#solutions-to-vmware-errors" title="Link to this heading"></a></h3>
<p>Error 1: Unable to connect to MKS. Too many socket connection attempts; giving up.</p>
<p><img alt="Image" src="_images/1718955884406_29abb00c_dd78_4b90_b470_32ceff8b1e0f.png" /></p>
<p>Solution: My Computer-&gt; Right click-&gt; Manage-&gt; Services and Applications-&gt; Services: Turn on all services related to VMware</p>
<p><img alt="Image" src="_images/1718955884709_bebdf44e_5df1_4879_b670_477de83886ee.png" /></p>
<p>After the service starts successfully, restart the virtual machine; or hang the virtual machine first, and when the service starts, continue to run the hung virtual machine;</p>
<p>Error 2: Internal error</p>
<p><img alt="Image" src="_images/1718955884990_49e34f35_ab85_451a_97ed_3c5bd7734475.png" /></p>
<p>Solution: Refer to solution 1</p>
<p>Error 3: Unable to install service VMware Authorization Service (VMAuthdService)</p>
<p><img alt="Image" src="_images/1718955885240_1ad1d24f_f1aa_48a8_a340_96d11c0587e9.png" /></p>
<p>Solution: win+R Enter the services. Msc.</p>
<p><img alt="Image" src="_images/1718955885422_3ea7587c_49b9_4891_9de6_d34d945e3140.png" /></p>
<p>Then find the service and start it up as an authorization and authentication service for starting and accessing virtual machines.</p>
<p><img alt="Image" src="_images/1718955885646_b5e6fbc7_c879_4479_9599_15362971fe8e.png" /></p>
<p>WMI must start first.</p>
<p><img alt="Image" src="_images/1718955886013_5b703cb9_3527_4e6f_9926_feb249602716.png" /></p>
<hr class="docutils" />
<p>Error 4：Failed to install the hcmon driver</p>
<p><img alt="Image" src="_images/1718955886331_019f50d5_6376_49a7_8969_2d606de8aca9.png" /></p>
<p>Solution: Delete C:\Windows\System32\drivers\hcmon.sys, then install again.</p>
<p>Error 5: Intel VT-x in disabled state</p>
<p><img alt="Image" src="_images/1718955886547_1f1921b7_b150_4c20_9c90_1b43389ae61d.png" /></p>
<p>Solution:</p>
<ul class="simple">
<li><p>Enter the BIOS interface (F2 or F12) when booting;</p></li>
<li><p>configuration–&gt;intel virtual technology–&gt;change sabled to enabled–&gt;save the settings, exit and restart;</p></li>
<li><p>Reopen VMware and power on the virtual machine. If that doesn’t work, just turn the firewall off and reopen the VM. (varies by machine).</p></li>
</ul>
<hr class="docutils" />
<p>Error 6: The virtual machine appears to be in use… Acquiring Ownership (T)</p>
<p><img alt="Image" src="_images/1718955886776_ed34d87b_2176_4b70_932b_eaa849660372.png" /></p>
<p>Solution:</p>
<ul class="simple">
<li><p>Shut down the virtual machine;</p></li>
<li><p>Enter the storage directory of the virtual machine and delete the *.lck file. The lck represents the locked file;</p></li>
<li><p>Open the Windows Task Manager and kill the VMware process.</p></li>
</ul>
<p><img alt="Image" src="_images/1718955886965_a22c4d91_c150_41d1_bd1c_c05332cec932.png" /></p>
<ul class="simple">
<li><p>Restart the virtual machine.</p></li>
</ul>
<hr class="docutils" />
<p>Error 7: Failed to lock file</p>
<p><img alt="Image" src="_images/1718955887222_283b7a59_653d_4ab4_a6cc_4c65fce63b83.png" /></p>
<p>Solution:</p>
<ul class="simple">
<li><p>Enter the storage directory of the virtual machine;</p></li>
<li><p>Delete .vmem.lck，.vmdk.lck，*.vmx.lck;</p></li>
<li><p>Restart the virtual machine and enter the virtual machine normally.</p></li>
</ul>
<hr class="docutils" />
<p>Error 8：The virtual machine could not be started because there was not enough memory available on the host.</p>
<p>Solution: The virtual machine does not have enough memory to run the maximum requirement of the image. Increase the memory of the virtual machine and restart the virtual machine.</p>
<p><img alt="Image" src="_images/1718955887468_307bc58b_69b7_4741_9721_94b583f64c86.png" /></p>
</section>
</section>
<section id="linux-compilation">
<h2>4. Linux Compilation<a class="headerlink" href="#linux-compilation" title="Link to this heading"></a></h2>
<p><strong>Note: Please do not skip this paragraph：</strong></p>
<p>The development environment is the hardware and software platform that developers need during the development process. The development environment is not a fixed style.</p>
<p>The previous section explained in detail how to build an embedded Linux development environment. If you already know a lot about embedded development, you can build the environment according to your needs. If the environment is not the same as this manual and an error occurs, you can resolve it by searching for relevant information from some of the big Linux forums and websites. The environment described in this manual is a pre-built development environment provided by us. If you are not very familiar with embedded development, we recommend using the development environment provided by Forlinx. The development environment provided for general users is: forlinx (username), forlinx (password). The superuser is: root (username), root (password).</p>
<section id="preparation-before-compilation">
<h3>4.1 Preparation Before Compilation<a class="headerlink" href="#preparation-before-compilation" title="Link to this heading"></a></h3>
<section id="versions">
<h4>4.1.1 Versions<a class="headerlink" href="#versions" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Virtual Machine Software: Vmware 15.1.0;</p></li>
<li><p>Recommended OS: Ubuntu 18.04 64-bit Edition;</p></li>
<li><p>Buildroot cross tool chain: arm-linux-gnueabi-gcc-7.3.1;</p></li>
<li><p>Bootloader version: u-boot-2018.07;</p></li>
<li><p>Kernel version: linux-5.10.149;</p></li>
<li><p>Development board QT version: qt5.15.8.</p></li>
</ul>
</section>
<section id="source-code-copy-and-release">
<h4>4.1.2 Source Code Copy and Release<a class="headerlink" href="#source-code-copy-and-release" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Kernel source path: user profile \ Linux \ source \</p></li>
</ul>
<p>1. Copy Source Code</p>
<p>The A40i source package includes the toolchain, user sdk, Linux kernel, filesystem, test program source code, and some tools.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ mkdir /home/forlinx/work							//Create working directory
</pre></div>
</div>
<p>Copy the source package to the virtual machine /home/forlinx/work directory.</p>
<p>You can directly drag and drop the source package from your computer to a folder on the desktop of the virtual machine, or use a shared folder to copy it using the command; here please focus on the use of shared folders.</p>
<p>There are many kinds of file transfers between ubuntu and Windows hosts. After installing VMware Tools, you can set up a virtual machine shared folder to mount the file directory of the Windows host to ubuntu for file sharing.</p>
<p>Click “Virtual Machine” on the menu bar and select “Settings”.</p>
<p><img alt="Image" src="_images/1718955891157_792c9964_0a2c_4ce6_b497_c3a07a5ee4fc.png" /></p>
<p>Click “Options”, enable “Shared Folders”, set the shared directory on the Windows host, and click “OK”.</p>
<p><img alt="Image" src="_images/1718955891444_42f0e11b_459a_4279_8e69_9f65b11c5af9.png" /></p>
<p>After the file sharing setup of the virtual machine is complete, put the source package OKA40i-linux-sdk.tar.bz2 into the shared folder of the Windows host; here please name it share.</p>
<p>The shared folder is in the mount directory /mnt/hgfs/share in ubuntu; view the files in the mount directory.</p>
<p>Copy the source code from the shared folder to the Ubuntu/home/forlinx/work directory and verify it.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ sudo cp /mnt/hgfs/share/OKA40i-linux-sdk.tar.bz2 /home/forlinx/work/      
[sudo] password for forlinx: forlinx
forlinx@ubuntu:~$ cd /home/forlinx/work
forlinx@ubuntu:~/work$ md5sum OKA40i-linux-sdk.tar.bz2		//Verify the source code packet
*******************************	OKA40i-linux-sdk.tar.bz2
forlinx@ubuntu:~/work$ tar xvf OKA40i-linux-sdk.tar.bz2
</pre></div>
</div>
</section>
<section id="source-code-directory-structure">
<h4>4.1.3 Source Code Directory Structure<a class="headerlink" href="#source-code-directory-structure" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Structure</p></li>
</ul>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>OKA40i-linux-sdk					// Unzipped source code folder
├── brandy							// Contains source code related to boot0 and uboot (currently not open-sourced)
├── bsp								// Tina5.0 independent repository architecture, which includes most of Allwinner&#39;s drivers
├── build							// Compilation script directory
├── buildroot						// buildroot version 202205
├── build.sh -&gt; build/top_build.sh 
├── device							// Mainly contains board-level configuration files
├── kernel							// Linux kernel
├── platform						// Allwinner application layer software packages
├── prebuilt
├── test
└── tools							// Compilation and packaging tools
</pre></div>
</div>
<ul class="simple">
<li><p>Introduction to Main Directories and Files</p></li>
</ul>
<p>buildroot</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>buildroot/config/buildroot	// Storage path for configuration files of some source codes in the file system
├──custom								// Files added by Forlinx to the file system (these files will be included in the image)
├──forlinx								// Compilation configurations of software packages added by Forlinx
└──allwinner							// Compilation configurations of software packages added by Allwinner

buildroot/package						// Storage path for application source codes
├──auto									// Self-developed software packages of Allwinner buildroot
├──cedarx								// Allwinner aw multimedia cedarx framework code
├──libcedarc						    // Allwinner aw multimedia cedarc framework code
└──forlinx								// Forlinx test demos
</pre></div>
</div>
<p>device:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>device/config/chips/a40i_h/bin // Storage path for uboot files

device/config/chips/a40i_h/boot-resource/boot-resource/bootlogo.bmp  // Boot logo

device/config/chips/a40i_h/configs/OKA40i-C/buildroot // Storage path for buildroot solution configurations
├──BoardConfig.mk // Board type configuration for the buildroot solution
├──env.cfg // uboot environment variables
├──sys_partition.fex // Partition table configuration for the buildroot solution, default is AB system
└──env-ab.cfg // Env configuration for the AB system solution

device/config/chips/a40i_h/configs/OKA40i-C/board.dts // Symbolic link file of the device tree involved in compilation

device/config/chips/a40i_h/configs/OKA40i-C/linux-5.10 // Storage path for device tree and file system configurations
├──board-lcd1024x600.dts // Device tree for the lcd screen
├──board-lvds.dts // Device tree for the lvds screen
├──board-mipi.dts // Device tree for the mipi screen
├──board-1000M-100M.dts // Device tree for the dual network ports (1000M and 100M)
└──buildroot_bsp_defconfig // buildroot configuration file

device/config/chips/a40i_h/configs/OKA40i-C/sys_config.fex // boot0 configuration file

device/config/chips/a40i_h/configs/OKA40i-C/uboot-board.dts // uboot device tree file involved in compilation

device/config/chips/a40i_h/configs/OKA40i-C/uboot // Storage path for uboot screen device trees
├──uboot-board-lcd1024x600.dts // uboot device tree for the lcd screen
├──uboot-board-lvds.dts // uboot device tree for the lvds screen
└──uboot-board-mipi.dts // uboot device tree for the mipi screen
</pre></div>
</div>
<p>bsp</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>bsp // Storage path for Allwinner drivers and other files
├──configs/linux-5.10/sun8iw11p1.dtsi // Kernel underlying device tree file
├── drivers // Kernel drivers
├── include // Kernel header files
├── modules // Code for the main nand and gpu modules
├── platform
└── ramfs // Source code of the ramfs file system
</pre></div>
</div>
<p>Other files are less likely to be modified and can be viewed by yourself.</p>
</section>
</section>
<section id="source-code-compilation">
<h3>4.2 Source Code Compilation<a class="headerlink" href="#source-code-compilation" title="Link to this heading"></a></h3>
<p>Before compiling, make sure that the development environment has been set up and the source code has been decompressed.</p>
<section id="configuration-compilation-options">
<h4>4.2.1 Configuration Compilation Options<a class="headerlink" href="#configuration-compilation-options" title="Link to this heading"></a></h4>
<p>Execute the following command to configure</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ cd /home/forlinx/work/OKA40i-linux-sdk
forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh config
</pre></div>
</div>
<p>Different screens are used, and the corresponding device tree files are different. The default device tree for U-Boot is uboot-board-lcd1024x600.dts, and the default device tree for the kernel is board-lcd1024x600.dts.</p>
<p>The device tree file path is: OKA40i-linux-sdk/device/config/chips/a40i_h/configs/OKA40i-C/</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Screen</p></th>
<th class="head"><p>Uboot Device Tree</p></th>
<th class="head"><p>Kernel device tree</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Lcd1024*600</p></td>
<td><p>uboot-board-lcd1024x600.dts</p></td>
<td><p>board-lcd1024x600.dts</p></td>
</tr>
<tr class="row-odd"><td><p>Mipi1024*600</p></td>
<td><p>uboot-board-mipi.dts</p></td>
<td><p>board-mipi.dts</p></td>
</tr>
<tr class="row-even"><td><p>Lvds1280*800</p></td>
<td><p>uboot-board-lvds.dts</p></td>
<td><p>board-lvds.dts</p></td>
</tr>
</tbody>
</table>
<p>By default, the compiled image supports Forlinx lcd1024 * 600 screen display. If mipi or LVDS display is required, it is necessary to modify the device tree link file, replace uboot, and recompile. Take the mipi screen as an example:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ cd OKA40i-linux-sdk/device/config/chips/a40i_h/configs/OKA40i-C
forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ln -snf linux-5.10/board-mipi.dts board.dts
forlinx@ubuntu:~/work/OKA40i-linux-sdk$ cd OKA40i-linux-sdk/device/product/bin
forlinx@ubuntu:~/work/OKA40i-linux-sdk$ cp u-boot-sun8iw11p1_mipi.bin u-boot-sun8iw11p1.bin
forlinx@ubuntu:~/work/OKA40i-linux-sdk$ cd OKA40i-linux-sdk
forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh dts
forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh pack
</pre></div>
</div>
</section>
<section id="full-compilation-test">
<h4>4.2.2 Full Compilation Test<a class="headerlink" href="#full-compilation-test" title="Link to this heading"></a></h4>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh
</pre></div>
</div>
<p><strong>Note: The following commands are for individual compilation and can be skipped after a full./build. sh. It will be used for subsequent source code modification.</strong></p>
</section>
<section id="compiling-kernel-separately">
<h4>4.2.3 Compiling Kernel Separately<a class="headerlink" href="#compiling-kernel-separately" title="Link to this heading"></a></h4>
<p>Linux kernel configuration:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh menuconfig
</pre></div>
</div>
<p>The Linux save configuration:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh saveconfig
</pre></div>
</div>
<p>Linux kernel compilation:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh kernel
</pre></div>
</div>
<p>Linux device tree compilation:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh dts
</pre></div>
</div>
<p>Generated files location: OKA40i-linux-sdk/out/a40i_h/OKA40i-C/buildroot/</p>
<p>Generated intermediate file location: OKA40i-linux-sdk/out/kernel/build</p>
</section>
<section id="compiling-buildroot-separately">
<h4>4.2.4 Compiling Buildroot Separately<a class="headerlink" href="#compiling-buildroot-separately" title="Link to this heading"></a></h4>
<p>Buildroot configuration:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh buildroot_menuconfig
</pre></div>
</div>
<p>Buildroot configuration save:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh buildroot_saveconfig
</pre></div>
</div>
<p>Buildroot compilation:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh buildroot_rootfs
</pre></div>
</div>
<p>Compile output directory: OKA40i-linux-sdk/out/a40i_h/OKA40i-C/buildroot/buildroot/build</p>
<p>Note: If you want to compile a software package separately, you can delete the corresponding software package directory in the output directory, or delete the files beginning with.stamp in the corresponding software package directory, and then recompile</p>
</section>
<section id="image-packaging">
<h4>4.2.5 Image Packaging<a class="headerlink" href="#image-packaging" title="Link to this heading"></a></h4>
<p>The above compilation process can be completed after the image generation, we will generate the file packaged into an image.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OKA40i-linux-sdk$ ./build.sh pack
</pre></div>
</div>
<p>Generated image location:</p>
<p><img alt="Image" src="_images/1718955891648_706090f8_c426_4407_a41b_fbebaa6aaf7e.png" /></p>
</section>
<section id="boot-image-modification">
<h4>4.2.6 Boot Image Modification<a class="headerlink" href="#boot-image-modification" title="Link to this heading"></a></h4>
<p><strong>Note: You can choose to do it according to your own requirements. After the operation, you need to recompile and package.</strong></p>
<p>Modify the bootlogo. bmp startup logo under the OKA40i-linux-sdk/device/product/boot-resource/boot-resource/directory. The default is a 24bit color logo of 800x480, which is displayed in the center. If the resolution does not match the size of the logo, please change it yourself.</p>
</section>
<section id="compiling-and-adding-applications-separately">
<h4>4.2.7 Compiling and Adding Applications Separately<a class="headerlink" href="#compiling-and-adding-applications-separately" title="Link to this heading"></a></h4>
<p>If you compile the application separately, you need to configure the cross-compilation environment (cross-compiler and qmake).</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ export PATH=$PATH:/home/forlinx/work/OKA40i-linux-sdk/out/a40i_h/OKA40i-C/buildroot/buildroot/host/bin:/home/forlinx/work/OKA40i-linux-sdk/out/a40i_h/OKA40i-C/buildroot/buildroot/build/qt5base-f31e001a9399e4e620847ea2c3e90749350140ae/bin
</pre></div>
</div>
<p>Sysroot path:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>/home/forlinx/work/OKA40i-linux-sdk/out/a40i_h/OKA40i-C/buildroot/buildroot/host/arm-buildroot-linux-gnueabihf/sysroot
</pre></div>
</div>
<p><strong>Note: The cross-compilation environment does not need to be configured to use the build. Sh to compile the source code. The script has already been configured.</strong></p>
<p><strong>Separate Compilation Method:</strong></p>
<p>A method for compiling a cmd application independently is provided. For the compilation of the Qt program, please refer to Chapter 5.</p>
<p>You can copy a cmd application from the application source code Forlinx provided for independent compilation. For example, for the 4G dial - up program quectel - CM, copy the project folder to your own directory.</p>
<p>First, you need to set the environment variables before compilation. The environment variables are shown in the environment variable settings at the beginning of Section 4.2 Source Code Compilation (you need to reset them every time you open a shell window).</p>
<p>Then modify the cross-compiler configuration in the Makefile.</p>
<p>Modify		CC	?= arm-linux-gcc to CC	= arm-linux-gnueabihf-gcc</p>
<p>Finally, execute make in the quectel-CM directory and wait for the compilation to complete. Copy the executable file generated by compilation to the development board for testing.</p>
<p><strong>Add application to source code</strong>:</p>
<p>First, prepare your application and add the application source code to the buildroot/config/buildroot/forlinx directory.</p>
<p>Then add the configuration file to the buildroot/config/buildroot/forlinx directory. For the specific content of the configuration file, refer to the configuration files of other existing applications for modification.</p>
<p>Then modify the platform. mk and Config. in under the buildroot/config/buildroot directory, and configure the file path just added to these two files.</p>
<p>Finally, the whole source code can be compiled and applied to the image.</p>
</section>
</section>
</section>
<section id="qt-environment-configuration">
<h2>5. QT Environment Configuration<a class="headerlink" href="#qt-environment-configuration" title="Link to this heading"></a></h2>
<p>The Forlinx forum provides virtual machines with installed environments for users to use. If you want to set up the environment by yourselves, please refer to the method in “3.3 Qt Creator Installation” to install Qt Creator.</p>
<section id="qt-creator-operation">
<h3>5.1 Qt Creator Operation<a class="headerlink" href="#qt-creator-operation" title="Link to this heading"></a></h3>
<p>Click the qtcreator icon in the left startup menu, or click show applications in the lower left corner to find the qtcreator icon and open it.</p>
<p><img alt="Image" src="_images/1718955901665_709a919b_a8a0_4de3_a42d_d0ced3227d33.jpeg" /></p>
</section>
<section id="qt-compilation-environment-configuration">
<h3>5.2 QT Compilation Environment Configuration<a class="headerlink" href="#qt-compilation-environment-configuration" title="Link to this heading"></a></h3>
<p>Here, only the paths in the provided development environment are introduced. The cross - compiler, Qt libraries, relevant tools, and the sysroot required for setting up the compilation environment have been placed in the /opt/host directory. Please refer to your own file storage paths.</p>
<p>If you set up the environment by yourself, the cross - compiler, Qt libraries, relevant tools, and the sysroot are separately provided in the user materials. They are located in User Materials/Tools/host.tar.bz2. You can extract them to the development environment and configure them on your own.</p>
<section id="cross-compiler-configuration">
<h4>5.2.1 Cross Compiler Configuration<a class="headerlink" href="#cross-compiler-configuration" title="Link to this heading"></a></h4>
<p><img alt="Image" src="_images/1718955901971_ba711fc0_ff19_4117_b603_a8ab4209f6a7.png" /></p>
<p><img alt="Image" src="_images/1718955902286_ef5434e4_e977_45b7_93d6_3aa3152d45d3.png" /></p>
<p><img alt="Image" src="_images/1718955902544_7799cf61_2f5e_46c0_a283_22e77fc3bae9.png" /></p>
</section>
<section id="qt-version-library-configuration">
<h4>5.2.2 QT Version Library Configuration<a class="headerlink" href="#qt-version-library-configuration" title="Link to this heading"></a></h4>
<p><img alt="Image" src="_images/1718955902879_f5134359_b51d_474e_804a_2984b702a0da.png" /></p>
</section>
<section id="kit-configuration">
<h4>5.2.3 Kit Configuration<a class="headerlink" href="#kit-configuration" title="Link to this heading"></a></h4>
<p><img alt="Image" src="_images/1718955903107_f3b8ade9_115f_4b62_88a7_9c89cf57dff1.png" /></p>
<p><img alt="Image" src="_images/1718955903444_eba4adac_8200_4386_8ce0_981913a9a17d.png" /></p>
</section>
</section>
<section id="application-compilation-and-operation">
<h3>5.3 Application Compilation and Operation<a class="headerlink" href="#application-compilation-and-operation" title="Link to this heading"></a></h3>
<p>This chapter uses the backlight test program provided by Forlinx as an example to illustrate how to compile and run the application program.</p>
<section id="backlight-test-program-configuration">
<h4>5.3.1 Backlight Test Program Configuration<a class="headerlink" href="#backlight-test-program-configuration" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>User profile\Linux\test program\forlinx_demo.tar.bz2;</p></li>
<li><p>Copy the backlight _ gui to the ~/Desktop directory;</p></li>
<li><p>Click “File” -&gt; “Open File or Project” in Qt Creator. In the pop - up window, select “~/Desktop/backlight/backlight.pro”. Click open. The principle is as follows:</p></li>
</ul>
<p><img alt="Image" src="_images/1718955903723_8f792216_543f_4fb5_9f1a_683670eab76d.png" /></p>
<ul class="simple">
<li><p>A pop-up window will appear to indicate whether to keep the original environment settings, select no, as follows:</p></li>
</ul>
<p><img alt="Image" src="_images/1718955903920_6ad8799e_1d62_4ecc_b4f8_f91564f65675.png" /></p>
<ul class="simple">
<li><p>The Configure Project window pops up, check the kit: arm (or the name defined by yourself) just configured, and click Configure Project to automatically enter the Edit interface, as shown below:</p></li>
</ul>
<p><img alt="Image" src="_images/1718955904113_23c1bcd6_c72d_481b_8ef5_c3247e98a4b6.png" /></p>
<ul class="simple">
<li><p>Click projects on the left side, add the version of Qt used according to the actual situation, and select the path to generate the compiled file.</p></li>
</ul>
<p><img alt="Image" src="_images/1718955904370_f7f86f0d_ee03_46c3_9234_271feb548fb6.png" /></p>
<ul class="simple">
<li><p>Click Build-&gt;Build All to compile, or click the hammer icon in the lower left corner.</p></li>
</ul>
<p>The Build progress bar in the lower right corner indicates that the compilation is complete, as follows:</p>
<p><img alt="Image" src="_images/1718955904678_f6b9dad6_ffae_40ef_baf8_d6bc4811a3c2.png" /></p>
<p>At this point, you will see the newly generated binary file backlight_gui under the file generation path:</p>
<p><img alt="Image" src="_images/1718955904934_5f834c1f_d5c6_484d_be60_a9e43426385b.png" /></p>
</section>
</section>
</section>
<section id="terminal-cross-compilation-environment-setup">
<h2>6. Terminal Cross-compilation Environment Setup<a class="headerlink" href="#terminal-cross-compilation-environment-setup" title="Link to this heading"></a></h2>
<section id="forlinx-development-environment">
<h3>6.1 Forlinx Development Environment<a class="headerlink" href="#forlinx-development-environment" title="Link to this heading"></a></h3>
<p>If you are only engaged in application development, there is no need to copy the SDK to the virtual machine. You can configure the cross-compilation environment by following the operations shown in the figure below.</p>
<p><img alt="Image" src="_images/1718955910541_931fbbe0_635f_4a5d_a376_4c6cbca85823.png" /></p>
</section>
<section id="setting-up-the-environment-manually">
<h3>6.2 Setting up the Environment Manually<a class="headerlink" href="#setting-up-the-environment-manually" title="Link to this heading"></a></h3>
<p>Copy User Materials/Tools/host.tar.bz2 to the development environment, extract it to any directory, and then perform the following operations.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ export PATH=$PATH:Decompress path/host/bin						
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>