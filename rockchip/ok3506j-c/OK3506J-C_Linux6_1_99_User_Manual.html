

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OK3506J-C_Linux6.1.99_User’s Manual_V1.2 &mdash; Forlinx Embedded RK3506 Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=30170994" />

  
    <link rel="shortcut icon" href="_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/rockchip/ok3506j-c/OK3506J-C_Linux6_1_99_User_Manual.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="OK3506J-C_User’s Hardware Manual_V1.0" href="OK3506J-C_User_Hardware_Manual.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">HARDWARE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OK3506J-C_User_Hardware_Manual.html">OK3506J-C_User’s Hardware Manual_V1.0</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SOFTWARE</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">OK3506J-C_Linux6.1.99_User’s Manual_V1.2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#copyright">Copyright</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview"><font style="color:#000000;">Overview</font></a></li>
<li class="toctree-l2"><a class="reference internal" href="#revision-history">Revision History</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development-board-description">1. Development Board Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ok3506j-s-ok3506j-c-development-board-description"><strong><font style="color:rgb(51, 51, 51);">1.1 OK3506J-S/OK3506J-C Development Board Description</font></strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-linux-6-1-99-system-software-resources"><strong><font style="color:rgb(51, 51, 51);">1.2 Introduction to Linux 6.1.99 System Software Resources</font></strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emmc-memory-partition-table">1.3 EMMC Memory Partition Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nand-memory-partition-table">1.4 NAND Memory Partition Table</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fast-startup">2. Fast Startup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparation-before-startup"><font style="color:rgb(51, 51, 51);">2.1 Preparation Before Startup</font></a></li>
<li class="toctree-l3"><a class="reference internal" href="#related-driver-installation"><font style="color:rgb(51, 51, 51);">2.2 Related Driver Installation</font></a></li>
<li class="toctree-l3"><a class="reference internal" href="#serial-login"><font style="color:rgb(51, 51, 51);">2.3 Serial Login</font></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#serial-port-connection-settings"><font style="color:rgb(51, 51, 51);">2.3.1 Serial Port Connection Settings</font></a></li>
<li class="toctree-l4"><a class="reference internal" href="#serial-port-login-faq"><font style="color:rgb(51, 51, 51);">2.3.2 Serial Port Login FAQ</font></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#network-login-methods">2.4 Network Login Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#network-connection-test"><font style="color:rgb(51, 51, 51);">2.4.1 Network Connection Test</font></a></li>
<li class="toctree-l4"><a class="reference internal" href="#ssh-server">2.4.2 SSH Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sftp"><font style="color:rgb(51, 51, 51);">2.4.3 SFTP</font></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#screen-switching">2.5 Screen Switching</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-control-of-uboot-menu">2.5.1 Dynamic Control of Uboot Menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kernel-device-tree-specification">2.5.2 Kernel Device Tree Specification</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#system-shutdown"><font style="color:rgb(51, 51, 51);">2.6 System Shutdown</font></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#qt-platform-function-test">3. QT Platform Function Test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#g-test">3.1 4G Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wifi-test">3.2 WIFI Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-configuration-test">3.3 Network Configuration Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ping-test">3.4 Ping test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#watchdog-test">3.5 Watchdog Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key-test">3.6 Key Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rtc-test">3.7 RTC Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uart-test">3.8 UART Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database-test">3.9 Database Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backlight-test">3.10 Backlight Test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-function-test">4. Command Line Function Test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#system-information-query">4.1 System Information Query</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequency-test">4.2 Frequency Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temperature-test">4.3 Temperature Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ddr-bandwidth-test">4.4 DDR Bandwidth Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">4.5 Watchdog Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rtc-function-test">4.6 RTC Function Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">4.7 Key Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">4.8 UART Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tf-test">4.9 TF Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storage-test">4.10 Storage Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#emmc-test">4.10.1 EMMC Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nand-test">4.10.2 Nand Test</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#usb2-0">4.11 USB2.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usb-to-four-serial-port-conversion-test">4.12 USB to Four Serial Port Conversion Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#otg-test">4.13 OTG Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#host-mode">4.13.1 Host Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#device-mode">4.13.2 Device Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ethernet-configuration">4.14 Ethernet Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">4.15 WIFI Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sta-mode">4.15.1 STA Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ap-mode">4.15.2 AP Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#bluetooth-test">4.16 Bluetooth Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">4.17 4G Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#play-record-test">4.18 Play/Record Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lcd-backlight-adjustment">4.19 LCD Backlight Adjustment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can-test">4.20 CAN Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sqlite3-test">4.21 SQLite3 Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-boot-scripts">4.22 Adding Boot Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uboot-menu">4.23 Uboot Menu</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#system-flashing">5. System Flashing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#otg-system-flashing">5.1 OTG System Flashing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#otg-driver-installation">5.1.1 OTG Driver Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#otg-full-burning-test">5.1.2 OTG Full Burning Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#otg-step-programming-test">5.1.3 OTG Step Programming Test</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Forlinx Embedded RK3506 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">OK3506J-C_Linux6.1.99_User’s Manual_V1.2</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ok3506j-c-linux6-1-99-users-manual-v1-2">
<h1>OK3506J-C_Linux6.1.99_User’s Manual_V1.2<a class="headerlink" href="#ok3506j-c-linux6-1-99-users-manual-v1-2" title="Link to this heading"></a></h1>
<p>Document classification: □ Top secret □ Secret □ Internal information ■ Open</p>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Link to this heading"></a></h2>
<p>The copyright of this manual belongs to Baoding Folinx Embedded Technology Co., Ltd. Without the written permission of our company, no organizations or individuals have the right to copy, distribute, or reproduce any part of this manual in any form, and violators will be held legally responsible.</p>
<p>Forlinx adheres to copyrights of all graphics and texts used in all publications in original or license-free forms.</p>
<p>The drivers and utilities used for the components are subject to the copyrights of the respective manufacturers. The license conditions of the respective manufacturer are to be adhered to. Related license expenses for the operating system and applications should be calculated/declared separately by the related party or its representatives.</p>
</section>
<section id="overview">
<h2><font style="color:#000000;">Overview</font><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This manual is designed to help you quickly familiarize yourself with the product, and understand the interface functions and testing methods. It primarily covers the testing of interface functions on the development board, the methods for flashing images, and troubleshooting procedures for common issues encountered in use. During the testing process, some commands are annotated for easy understanding, focusing on practicality and sufficiency. For kernel compilation, related application compilation methods, and development environment setup, please refer to the “OK3506J - S/OK3506J-C User Compilation Manual” provided by Forlinx.</p>
<p>There are total five chapters:</p>
<p>● Chapter 1. is mainly an overall overview of the product, briefly introducing the development board’s interface resources, the relevant driver paths in the kernel source code, and explanations of the key parts in the materials;</p>
<p>● Chapter 2. focuses on the fast startup of the product, which can be achieved through two methods: serial port login and network login;</p>
<p>● Chapter 3. is mainly about the QT function test of the product;</p>
<p>● Chapter 4. mainly introduces the command function tests;</p>
<p>● Chapter 5. is about the image update of the product, mainly describing the method of updating the image to the storage device. You can choose the corresponding flashing method according to the actual situation.</p>
<p>A description of some of the symbols and formats associated with this manual:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Format</strong></p></th>
<th class="head"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Note</strong></p></td>
<td><p>Note or information that requires special attention, be sure to read carefully.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>📚</p></td>
<td><p>Relevant notes on the test chapters.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>🛤️️</p></td>
<td><p>Indicates the related path.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><font style="color:blue;">Blue font on gray background</font></p></td>
<td><p><font style="color:#000000;">Refers to commands entered at the command line (Manual input required).</font></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><font style="color:black;">Black font</font></p></td>
<td><p>Serial port output message after entering a command</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><strong><font style="color:black;">Bold black</font></strong></p></td>
<td><p><font style="color:#000000;">Key information in the serial port output message</font></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><font style="color:#000000;">//</font></p></td>
<td><p><font style="color:#000000;">Interpretation of input instructions or output information</font></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Username&#64;Hostname</p></td>
<td><p>root&#64;ok3506-buildroot: Development board serial port login account information;                                                       forlinx&#64;ok3506-buildroot: Development board network login account information;                                                     forlinx&#64;ubuntu: Development environment Ubuntu account information. You can determine the environment for function operation through this information.</p></td>
</tr>
</tbody>
</table>
<p><font style="color:#000000;">After packaging the file system, you can use the “ls” command to view the generated files.</font></p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/3506$ ls                                  //List the files in this directory
OK3506_Linux_Source  OK3506_Linux_Source.tar.bz2.00 OK3506_Linux_Source.tar.bz2.01
</pre></div>
</div>
<ul class="simple">
<li><p><font style="color:#000000;">forlinx&#64;ubuntu: the username is forlinx and the hostname is ubuntu, indicating that the operation is performed in the development environment ubuntu.</font></p></li>
<li><p><font style="color:#000000;">// ：Explanation of operation commands is required, but command input is not needed.</font></p></li>
<li><p><font style="color:#0000ff;">ls</font> <font style="color:#000000;">blue font on a gray background, indicating relevant commands that need to be entered manually.</font></p></li>
<li><p><strong>OK3506_Linux_Source：</strong><font style="color:#000000;">The bottom black font represents the output information after entering the command, with the bold font indicating the key information, and the packed file system is here.</font></p></li>
</ul>
</section>
<section id="revision-history">
<h2>Revision History<a class="headerlink" href="#revision-history" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Date</strong></p></th>
<th class="head"><p><strong>Manual Version</strong></p></th>
<th class="head"><p><strong>Revision History</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><font style="color:rgb(38, 38, 38);">26/02/2025</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">V1.0</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">OK3506-C/OK3506-S_Linux6.1.99 User’s Manual Initial Version.   </font></p></td>
</tr>
<tr class="row-odd"><td><p>08/05/2025</p></td>
<td><p>V1.1</p></td>
<td><p>Adding qt function test in chapter 3.</p></td>
</tr>
<tr class="row-even"><td><p>31/07/2025</p></td>
<td><p>V1.2</p></td>
<td><p>Adding OK3506-C description.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="development-board-description">
<h2>1. Development Board Description<a class="headerlink" href="#development-board-description" title="Link to this heading"></a></h2>
<section id="ok3506j-s-ok3506j-c-development-board-description">
<h3><strong><font style="color:rgb(51, 51, 51);">1.1 OK3506J-S/OK3506J-C Development Board Description</font></strong><a class="headerlink" href="#ok3506j-s-ok3506j-c-development-board-description" title="Link to this heading"></a></h3>
<p><font style="color:rgb(51, 51, 51);">The RK3506J is a high - performance triple - core Cortex - A7 application processor, specifically designed for intelligent voice interaction, audio input/output processing, image output processing, and other digital multimedia applications. It is equipped with a 2D hardware engine and a display output engine, which are used to minimize CPU overhead to meet image display requirements. It has a rich set of peripheral interfaces, such as SAI, PDM, SPDIF, Audio DSM, Audio ADC, USB2 OTG, RMII, CAN, etc., which can meet different application development needs, reducing the complexity and cost of hardware development. It also features a high - performance external memory interface (DDR2/DDR3/DDR3L), capable of maintaining the demanding memory bandwidth.</font></p>
<p>Connection method for is OK3506-S edging connection, and for OK3506-C is board-to-board.</p>
<p>The main interfaces are shown in the figure below:</p>
<p><strong><font style="color:rgb(51, 51, 51);">OK3506J-S Front</font></strong></p>
<p><img alt="Image" src="_images/1747882782209_3892a1c7_5a1a_4780_8419_04ea72a306ed.jpeg" /></p>
<p><strong><font style="color:rgb(51, 51, 51);">OK3506J-C Front</font></strong></p>
<p><img alt="Image" src="_images/1753926502435_9040b0e0_b493_4910_985a_5c90ec4b9183.jpeg" /></p>
<p><strong>Note: The hardware parameters will not be described in this software manual. Before referring to this manual for software development, please read the “OK3506 - S/OK3506 - C Hardware Manual” to understand the product naming rules and the hardware configuration information of the product you are using. This will be helpful for your use of the product.</strong></p>
</section>
<section id="introduction-to-linux-6-1-99-system-software-resources">
<h3><strong><font style="color:rgb(51, 51, 51);">1.2 Introduction to Linux 6.1.99 System Software Resources</font></strong><a class="headerlink" href="#introduction-to-linux-6-1-99-system-software-resources" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p><strong>Device</strong></p></th>
<th class="head text-left"><p><strong>Location of driver source code in the kernel</strong></p></th>
<th class="head text-left"><p><strong>Device Name</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><font style="color:rgb(51, 51, 51);">LCD Backlight Driver/PWM</font></p></td>
<td class="text-left"><p><font style="color:rgb(51, 51, 51);">drivers/video/backlight/pwm_bl.c</font></p></td>
<td class="text-left"><p><font style="color:rgb(51, 51, 51);">/sys/class/backlight</font></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><font style="color:rgb(51, 51, 51);">USB interface U disk</font></p></td>
<td class="text-left"><p><font style="color:rgb(51, 51, 51);">drivers/usb/storage/</font></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><font style="color:rgb(51, 51, 51);">USB mouse</font></p></td>
<td class="text-left"><p><font style="color:rgb(51, 51, 51);">drivers/hid/usbhid/</font></p></td>
<td class="text-left"><p><font style="color:rgb(51, 51, 51);">/dev/input/mice</font></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Ethernet</p></td>
<td class="text-left"><p>drivers/net/ethernet/stmicro/stmmac</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>EMMC/SD/micro TF card driver</p></td>
<td class="text-left"><p>drivers/mmc/host/dw_mmc-rockchip.c</p></td>
<td class="text-left"><p>/dev/block/mmcblk0pX</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>LCD Controller</p></td>
<td class="text-left"><p>drivers/gpu/drm/rockchip/rockchip_drm_vop.c</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>MIPI DSI</p></td>
<td class="text-left"><p>drivers/phy/rockchip/phy-rockchip-inno-dsidphy.c</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>LCD Touch Driver</p></td>
<td class="text-left"><p>drivers/input/touchscreen/goodix.c drivers/input/touchscreen/edt-ft5x06.c</p></td>
<td class="text-left"><p>/dev/input/eventX</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>RTC Real Time Clock Driver</p></td>
<td class="text-left"><p>drivers/rtc/rtc-rx8010.c drivers/rtc/rtc-pcf8563.c</p></td>
<td class="text-left"><p>/dev/rtc0</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>serial port</p></td>
<td class="text-left"><p>drivers/tty/serial/8250/8250_dw.c</p></td>
<td class="text-left"><p>/dev/ttySX</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Key Driver</p></td>
<td class="text-left"><p>drivers/input/keyboard/adc-keys.c</p></td>
<td class="text-left"><p>/dev/input/eventX</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>LED</p></td>
<td class="text-left"><p>drivers/leds/leds-gpio.c</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>SAI</p></td>
<td class="text-left"><p>sound/soc/rockchip/rockchip_sai.c</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Watchdog</p></td>
<td class="text-left"><p>drivers/watchdog/dw_wdt.c</p></td>
<td class="text-left"><p>/dev/watchdog</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>SPI</p></td>
<td class="text-left"><p>drivers/spi/spi-rockchip.c</p></td>
<td class="text-left"><p>/dev/spidev2.0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="emmc-memory-partition-table">
<h3>1.3 EMMC Memory Partition Table<a class="headerlink" href="#emmc-memory-partition-table" title="Link to this heading"></a></h3>
<p>The following table shows the eMMC memory partition information for the Linux operating system (calculated with a block size of 512 bit):</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p><strong>Partition Index</strong></p></th>
<th class="head text-left"><p><strong>Name</strong></p></th>
<th class="head text-left"><p><strong>Offset / block</strong></p></th>
<th class="head text-left"><p><strong>Size/block</strong></p></th>
<th class="head text-left"><p><strong>content</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>N/A</p></td>
<td class="text-left"><p>security</p></td>
<td class="text-left"><p>0x00000000</p></td>
<td class="text-left"><p>0x00004000</p></td>
<td class="text-left"><p>MiniLoaderAll.bin</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>1</p></td>
<td class="text-left"><p>uboot</p></td>
<td class="text-left"><p>0x00004000</p></td>
<td class="text-left"><p>0x00002000</p></td>
<td class="text-left"><p>uboot.img</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>2</p></td>
<td class="text-left"><p>misc</p></td>
<td class="text-left"><p>0x00006000</p></td>
<td class="text-left"><p>0x00002000</p></td>
<td class="text-left"><p>misc.img</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>3</p></td>
<td class="text-left"><p>boot</p></td>
<td class="text-left"><p>0x00008000</p></td>
<td class="text-left"><p>0x00020000</p></td>
<td class="text-left"><p>boot.img</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>4</p></td>
<td class="text-left"><p>recovery</p></td>
<td class="text-left"><p>0x00028000</p></td>
<td class="text-left"><p>0x00040000</p></td>
<td class="text-left"><p>recovery.img</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>5</p></td>
<td class="text-left"><p>rootfs</p></td>
<td class="text-left"><p>0x00068000</p></td>
<td class="text-left"><p>0x00c00000</p></td>
<td class="text-left"><p>rootfs.img</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>6</p></td>
<td class="text-left"><p>oem</p></td>
<td class="text-left"><p>0x00C68000</p></td>
<td class="text-left"><p>0x00040000</p></td>
<td class="text-left"><p>oem.img</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>7</p></td>
<td class="text-left"><p>userdata</p></td>
<td class="text-left"><p>0x00CA8000</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>userdata.img</p></td>
</tr>
</tbody>
</table>
</section>
<section id="nand-memory-partition-table">
<h3>1.4 NAND Memory Partition Table<a class="headerlink" href="#nand-memory-partition-table" title="Link to this heading"></a></h3>
<p>The following table shows the NAND memory partition information for the Linux operating system (calculated with a block size of 512 bit)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p><strong>Partition Index</strong></p></th>
<th class="head text-left"><p><strong>Name</strong></p></th>
<th class="head text-left"><p><strong>Offset / block</strong></p></th>
<th class="head text-left"><p><strong>Size/block</strong></p></th>
<th class="head text-left"><p><strong>content</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>N/A</p></td>
<td class="text-left"><p>security</p></td>
<td class="text-left"><p>0x00000000</p></td>
<td class="text-left"><p>0x00002000</p></td>
<td class="text-left"><p>MiniLoaderAll.bin</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>1</p></td>
<td class="text-left"><p>uboot</p></td>
<td class="text-left"><p>0x00002000</p></td>
<td class="text-left"><p>0x00002000</p></td>
<td class="text-left"><p>uboot.img</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>2</p></td>
<td class="text-left"><p>misc</p></td>
<td class="text-left"><p>0x00004000</p></td>
<td class="text-left"><p>0x00000800</p></td>
<td class="text-left"><p>misc.img</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>3</p></td>
<td class="text-left"><p>boot</p></td>
<td class="text-left"><p>0x00004800</p></td>
<td class="text-left"><p>0x00005000</p></td>
<td class="text-left"><p>recovery.img</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>4</p></td>
<td class="text-left"><p>recovery</p></td>
<td class="text-left"><p>0x00009800</p></td>
<td class="text-left"><p>0x00008000</p></td>
<td class="text-left"><p>boot.img</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>5</p></td>
<td class="text-left"><p>rootfs</p></td>
<td class="text-left"><p>0x00011800</p></td>
<td class="text-left"><p>0x00040000</p></td>
<td class="text-left"><p>rootfs.img</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>6</p></td>
<td class="text-left"><p>oem</p></td>
<td class="text-left"><p>0x00051800</p></td>
<td class="text-left"><p>0x00008000</p></td>
<td class="text-left"><p>oem.img</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>7</p></td>
<td class="text-left"><p>userdata</p></td>
<td class="text-left"><p>0x00059800</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>userdata.img</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="fast-startup">
<h2>2. Fast Startup<a class="headerlink" href="#fast-startup" title="Link to this heading"></a></h2>
<section id="preparation-before-startup">
<h3><font style="color:rgb(51, 51, 51);">2.1 Preparation Before Startup</font><a class="headerlink" href="#preparation-before-startup" title="Link to this heading"></a></h3>
<p>OK3506J-S/OK3506J-C development board has two system login methods, serial and network login.</p>
<p>Hardware preparation before system startup:</p>
<ul class="simple">
<li><p><font style="color:rgb(51, 51, 51);">12V3A DC power</font></p></li>
<li><p>Debugging serial cable (serial login use)</p></li>
</ul>
<p>The debug serial port on the development board is a Type-C USB jack, so you can use a USB to Type-C cable to connect the development board to a PC and then check the board’s status.</p>
<ul class="simple">
<li><p><font style="color:rgb(51, 51, 51);">Network cable (for network login)</font></p></li>
<li><p>Screen: Connect the screen according to the development board interface (optional if display is not needed).</p></li>
</ul>
<p><img alt="Image" src="_images/1735029237085_da123d7a_635a_4358_8599_42f463467e5e.jpeg" /></p>
<p><strong>Note: OK3506J-S/OK3506J-C The positions of the above interfaces are consistent.</strong></p>
</section>
<section id="related-driver-installation">
<h3><font style="color:rgb(51, 51, 51);">2.2 Related Driver Installation</font><a class="headerlink" href="#related-driver-installation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Use “User data \ Software data \ 3-tools \ DriverAssitant _ v5.13.zip to install the rockchip driver”;</p></li>
<li><p>Run DriverInstall.exe directly after the unzipping is completed; in order to ensure the driver is the latest version, please unstall the driver first, then install again.&lt;/font;</p></li>
<li><p><font style="color:rgb(51, 51, 51);">Use “User Data\Software Data\3-Tools\CH343SER.EXE to install the serial port driver</font>”.</p></li>
</ul>
</section>
<section id="serial-login">
<h3><font style="color:rgb(51, 51, 51);">2.3 Serial Login</font><a class="headerlink" href="#serial-login" title="Link to this heading"></a></h3>
<p>OK3506J-S/OK3506J-C platform uses a Type-C interface for debugging serial port, with an on-board USB to UART chip. You do not need to purchase USB to serial debugging tools; it is extremely simple and convenient to use.</p>
<section id="serial-port-connection-settings">
<h4><font style="color:rgb(51, 51, 51);">2.3.1 Serial Port Connection Settings</font><a class="headerlink" href="#serial-port-connection-settings" title="Link to this heading"></a></h4>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p><strong><font style="color:rgb(51, 51, 51);">Serial port settings: Baud rate 115200, data bit 8, stop bit 1, no parity bit, no flow control;</font></strong></p></li>
<li><p><strong><font style="color:rgb(51, 51, 51);">Serial port terminal login without account;</font></strong></p></li>
<li><p><strong><font style="color:rgb(51, 51, 51);">Software Requirement: The Windows system on the PC end needs to install serial port terminal software. There are multiple options available, and you can choose the software you are familiar with for installation.</font></strong></p></li>
</ul>
<p><font style="color:rgb(51, 51, 51);">Take putty as an example to introduce the login method of serial port:</font></p>
<p><strong>Step 1:</strong> Connect the serial port number of the computer—check the serial port number from the device manager (Based on the port actually recognized by the computer );</p>
<p><img alt="Image" src="_images/1735029360193_d064cec3_c29b_4931_93d7_837a464359d5.png" /></p>
<p><strong>Step 2:</strong> Open and set up putty, then set the“ serial line according to the COM port of the computer used, baud rate 115200;</p>
<p><img alt="Image" src="_images/1736730512384_873b6eed_2f4f_4c7e_a0c6_74559ee3ba64.png" /></p>
<p><strong>Step 3:</strong> After the setting, input the COM port used by the computer in Saved Sessions. The following figure takes COM85 as an example, save the settings, open the serial port again later, and click on the saved port number;</p>
<p><img alt="Image" src="_images/1736730550283_79cf2052_3505_4631_828e_5f7c6735f691.png" /></p>
<p><strong>Step 4:</strong> Turn on the power switch of the development board, then there will be a print message output from the serial port (no need to login).</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/#
</pre></div>
</div>
</section>
<section id="serial-port-login-faq">
<h4><font style="color:rgb(51, 51, 51);">2.3.2 Serial Port Login FAQ</font><a class="headerlink" href="#serial-port-login-faq" title="Link to this heading"></a></h4>
<p>USB to Serial Port Requires Driver Installation (02-User Information\01-Software Information\3-Tools\CH343SER.EXE)</p>
<p>It is better to use a good quality cable to avoid error codes.</p>
</section>
</section>
<section id="network-login-methods">
<h3>2.4 Network Login Methods<a class="headerlink" href="#network-login-methods" title="Link to this heading"></a></h3>
<section id="network-connection-test">
<h4><font style="color:rgb(51, 51, 51);">2.4.1 Network Connection Test</font><a class="headerlink" href="#network-connection-test" title="Link to this heading"></a></h4>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p><strong>The factory default configuration of the card is static IP; the IP address is 192.168.0.232. Please refer to “3.2.17 Ethernet Configuration” chapter for the static IP changing method;</strong></p></li>
<li><p><strong>The computer and the board need to be on the same network segment for testing.</strong></p></li>
</ul>
<p>Before logging into the network, ensure that the direct network connection between the computer and the development board is functioning properly. You can test the connection status via pin command. The specific method is as follows:</p>
<p>1. Connect the development board’s eth0 interface to the computer using an Ethernet cable. Power on the development board and boot the kernel. Confirm the blue heartbeat LED is blinking. Check the network card connection, ensuring its LED flashes rapidly. Once confirmed, proceed with testing the network connection;</p>
<p>2. Close the computer firewall (General computer operations, not described here in detail), then open the computer’s run command;</p>
<p>3. Use cmd to open the administrator interface , and the ping command to test the network connection status of the computer and the development board.</p>
<p><img alt="Image" src="_images/1.png" /></p>
<p><img alt="Image" src="_images/2.png" /></p>
<p>A data return indicates a normal network connection.</p>
</section>
<section id="ssh-server">
<h4>2.4.2 SSH Server<a class="headerlink" href="#ssh-server" title="Link to this heading"></a></h4>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p><strong>The default SSH login account is root, with no password;</strong></p></li>
<li><p><strong>The factory default configuration of the card is static IP; the IP address is 192.168.0.232. Please refer to “3.2.17 Ethernet Configuration” chapter for the static IP changing method.</strong></p></li>
</ul>
<p>1. Use ssh to log in the development board;</p>
<p><img alt="Image" src="_images/1735030561381_30515e56_282f_4641_9f6e_3ab5bc5e3a99.png" /></p>
<p>Click “Open”, the following dialog box will appear, click “Yes” to enter the login screen.</p>
<p><img alt="Image" src="_images/1720417654059_94355051_1e28_4cfd_8a4b_f559d4ff136a.png" /></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>Login as：root
forlinx@ok3506-buildroot:~#
</pre></div>
</div>
</section>
<section id="sftp">
<h4><font style="color:rgb(51, 51, 51);">2.4.3 SFTP</font><a class="headerlink" href="#sftp" title="Link to this heading"></a></h4>
<p><font style="color:rgb(51, 51, 51);">️</font><font style="color:rgb(51, 51, 51);">Software Materials \ 3-Tools \ FileZilla*</font></p>
<p>OK3506J-S/ OK3506J-C development board supports SFTP service and it is automatically enabled at startup, so it can be used as an SFTP server after setting the IP address.</p>
<p>Here’s how to use the filezilla tool for file transfer.</p>
<p>Install the FileZilla tool on Windows and follow the steps shown in the image below to configure it. Use “forlinx” as both the username and password.</p>
<p>Open the filezilla tool, click on File and select Site Manager.</p>
<p><img alt="Image" src="_images/1736821815147_143e5974_7597_4afc_8d80_0717468acfee.png" /></p>
<p>After successful login, you can upload and download.</p>
<p><img alt="Image" src="_images/1720417654928_2b604387_bb81_4ac6_a13d_02437d5c0800.png" /></p>
</section>
</section>
<section id="screen-switching">
<h3>2.5 Screen Switching<a class="headerlink" href="#screen-switching" title="Link to this heading"></a></h3>
<p>OK3506J-S/OK3506J-C supports MIPI DSI and RGB screen interfaces, and can only support display on one screen. Currently there are two methods for controlling screen switching: Specify through the device tree in the kernel and dynamically control through the Uboot menu.</p>
<section id="dynamic-control-of-uboot-menu">
<h4>2.5.1 Dynamic Control of Uboot Menu<a class="headerlink" href="#dynamic-control-of-uboot-menu" title="Link to this heading"></a></h4>
<p>The solution is based on the existing screen support system and does not require recompilation of code or flashing to achieve the screen switching function.</p>
<p>During the uboot self-boot process, press the space bar at the serial terminal to bring up the control options:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>Hit key to stop autoboot(&#39;Spacebar&#39;):  0 
---------------------------------------------
0:Exit to console
1:Reboot
2:Display type:mipi 
---------------------------------------------
</pre></div>
</div>
<p>Enter 2 in the terminal to switch screens. Refer to 3.2.29 Uboot Menu</p>
</section>
<section id="kernel-device-tree-specification">
<h4>2.5.2 Kernel Device Tree Specification<a class="headerlink" href="#kernel-device-tree-specification" title="Link to this heading"></a></h4>
<p>This method does not require the connection of a serial terminal, and the system image defaults to the desired configuration selection, which is suitable for mass production. However, you need to modify the device tree and regenerate the system image once again.</p>
<p><strong>Note: This method has higher priority than the uboot screen selection, and the uboot selection will not take effect after the device tree is modified.</strong></p>
<p><font style="color:rgb(51, 51, 51);">Device tree path: kernel/arch/arm/boot/dts/OK3506-S-common.dtsi </font></p>
<p>In the kernel source code, open the device dtsi file and find the forlinx-control node as follows:</p>
<p><img alt="Image" src="_images/1735267237067_055b5f5b_9a27_4bba_9e6e_25c8d373b549.png" /></p>
<p>The node has a default disabled state and needs to be changed to an okay enabled node. Change according to screen requirements.</p>
<p><strong>Parameter Description:</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p><strong>Parameter</strong></p></th>
<th class="head text-left"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><font style="color:rgb(51, 51, 51);">status</font></p></td>
<td class="text-left"><p>Describe the node state: disabled is for off, okay is for on</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><font style="color:rgb(51, 51, 51);">disp_type</font></p></td>
<td class="text-left"><p>Specify the mipi or lvds screen display.</p></td>
</tr>
</tbody>
</table>
<p>Settings can be changed as needed, and after saving, recompilation is required to generate the image.</p>
<p><strong>Examples</strong>:</p>
<p>Use the RGB screen display.</p>
<p><img alt="Image" src="_images/1735267291478_382e2a8e_cdb8_4837_abfc_f679a91eae4c.png" /></p>
<p>After saving, recompile to generate the image.</p>
</section>
</section>
<section id="system-shutdown">
<h3><font style="color:rgb(51, 51, 51);">2.6 System Shutdown</font><a class="headerlink" href="#system-shutdown" title="Link to this heading"></a></h3>
<p>In general, you can simply turn off the power. However, if you’re working with data storage or using specific functions, avoid unplugging the power to prevent potential irreversible file damage. To ensure the data is completely written, enter the sync command to synchronize the data before turning off the power.</p>
<p><strong>Note: For products designed based on the SoM, if there are scenarios where accidental power loss causes the system to shut down unexpectedly, measures such as adding power-loss protection can be incorporated into the design.</strong></p>
</section>
</section>
<section id="qt-platform-function-test">
<h2>3. QT Platform Function Test<a class="headerlink" href="#qt-platform-function-test" title="Link to this heading"></a></h2>
<p>OK3506J-S/OK3506J-C platform 512 + 8G configuration (EMMC version) supports QT 5.15.11, and some QT applications are built in for testing.</p>
<p>Before the test, please configure the corresponding screen through the uboot menu, and execute to close the lvgl application that starts by default after starting the machine.</p>
<section id="g-test">
<h3>3.1 4G Test<a class="headerlink" href="#g-test" title="Link to this heading"></a></h3>
<p>It supports 4G module (EC20). Insert the 4G module and SIM card while the power is off.</p>
<p>Execute:</p>
<p><img alt="Image" src="_images/1746750778140_61034987_41b2_463c_818b_eb546567686d.png" /></p>
<p>Click the connect button, the program will automatically enter the dial-up process and get IP to set DNS, etc.</p>
<p><img alt="Image" src="_images/1746750778210_47542d01_eed0_42d8_b578_29ab5cdc5c66.png" /></p>
<p>Click the ping to test.</p>
<p><img alt="Image" src="_images/1746750778276_ea4c18bc_2761_4b7c_a95f_67acb06b5bb6.png" /></p>
</section>
<section id="wifi-test">
<h3>3.2 WIFI Test<a class="headerlink" href="#wifi-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p><img alt="Image" src="_images/1746750778345_17963653_d4c2_4724_afb1_bf02e625e7f9.png" /></p>
<p>Select wlan0, enter the router name (the one connected to wifi) in the SSID column, enter the router password in the PAWD column, click CONNECT to the router via wifi, enter a valid ip in the IP column, and then click ping to see if the currently used wifi network is smooth.</p>
<p><img alt="Image" src="_images/1746750778409_d2228127_f2ab_4535_972b_9bf2174c0735.png" /></p>
<p>Click ping to test the network after a successful connection.</p>
<p><img alt="Image" src="_images/1746750778486_37f39c91_727a_4122_a4ee_7005ab4f3401.png" /></p>
</section>
<section id="network-configuration-test">
<h3>3.3 Network Configuration Test<a class="headerlink" href="#network-configuration-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p>The DHCP mode interface is as follows:</p>
<p><img alt="Image" src="_images/1746750778559_a8571e8e_1b3a_4344_bd6a_7f49434514c1.png" /></p>
<p>Check DHCP, select the NIC device needing to be configured, and click Apply and Restart Network at the bottom of the interface to restart the network and get the ip automatically.</p>
<p>The STATIC mode interface is as follows:</p>
<p><img alt="Image" src="_images/1746750778626_7fa06d67_ae1c_4a6b_bde3_8018c7b19744.png" /></p>
<p>Select the NIC device to be configured in the interface, and enter the ip to be set in the ip field, enter the subnet mask in the netmask field, the gateway in the geteway field, and DNS in the dns field.</p>
<p><strong>Note: In STATIC mode, the information such as the IP address you set will be saved in the relevant configuration files of the system. Therefore, the network information you set this time will be used every time the system is restarted. However, when configuring network information in DHCP mode, you don’t need to worry about this. Every time the system restarts, an IP address will be dynamically assigned.</strong></p>
</section>
<section id="ping-test">
<h3>3.4 Ping test<a class="headerlink" href="#ping-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p>Write the target IP address in the “hostname” column. Click the “ping” button, and the “result” column will display the ping outcome. Click “stop” to end the ping test, and “clear” to erase the information in the “result” column.</p>
<p><img alt="Image" src="_images/1746750778716_bdf4cec5_95eb_4c16_a89d_dbc171d203f2.png" /></p>
</section>
<section id="watchdog-test">
<h3>3.5 Watchdog Test<a class="headerlink" href="#watchdog-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p><img alt="Image" src="_images/1746750778788_81724e42_fce5_4a4b_aa3e_a6b641657bbd.png" /></p>
<p>Check feed dog and click the open watchdog key, then the watchdog will be activated, the program will carry out the feeding operation, and the system will not reboot under normal circumstances; when unchecking feed dog and clicking open watchdog key, the watchdog function will be activated, the program will not carry out the feeding operation, and the system enters into a reboot after the watchdog is activated for about 10s, which indicates that the watchdog function is normal.</p>
</section>
<section id="key-test">
<h3>3.6 Key Test<a class="headerlink" href="#key-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p><img alt="Image" src="_images/1746750778849_6d481a85_0490_402a_b8a8_8e1ee9ff4543.png" /></p>
<p>The corresponding key in the test application will turn blue when pressing the key, indicating that the key is in normal status.</p>
</section>
<section id="rtc-test">
<h3>3.7 RTC Test<a class="headerlink" href="#rtc-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p><img alt="Image" src="_images/1746750778935_ad58dfe0_3a18_4864_bf69_d8f3a8348fc2.png" /></p>
<p>After Set, you can set the time and click Save to finish the setting.</p>
<p>With the RTC backup battery installed, power down and restart the development board to confirm that the RTC clock is set successfully.</p>
</section>
<section id="uart-test">
<h3>3.8 UART Test<a class="headerlink" href="#uart-test" title="Link to this heading"></a></h3>
<p>In this test, two boards (hereinafter referred to as Board A and Board B) are used. The RS485 serial ports of Board A and Board B are connected for the test. You can also replace Board B with a computer.</p>
<p>Board A execute:</p>
<p><img alt="Image" src="_images/1746750778997_22c3eb3d_7194_49b1_8af7_8e7aa7c2c2ee.png" /></p>
<p>Click the settings button (the third small gear) in the upper - left corner and set the serial port parameters to be consistent with those of Board B, as shown in the following figure:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Relevant Parameter</strong></p></th>
<th class="head"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Select Serial Port</p></td>
<td><p>Setting the serial port (select UART2, i.e. ttyS2)</p></td>
</tr>
<tr class="row-odd"><td><p>BaudRate</p></td>
<td><p>Set baud rate (115200)</p></td>
</tr>
<tr class="row-even"><td><p>Data bits</p></td>
<td><p>Set data bits (8 bits)</p></td>
</tr>
<tr class="row-odd"><td><p>Parity</p></td>
<td><p>Set parity bit (no parity)</p></td>
</tr>
<tr class="row-even"><td><p>Stop bits</p></td>
<td><p>Set stop bit (1 bit)</p></td>
</tr>
<tr class="row-odd"><td><p>Flow control</p></td>
<td><p>Set flow control (no flow control)</p></td>
</tr>
</tbody>
</table>
<p><img alt="Image" src="_images/1746750779072_51e0bd3a_8d0a_4def_aca6_8ee94ab8b5b9.png" /></p>
<p>After setting the serial port parameters, click the connection button (the first button) in the upper - left corner. At this time, the test program can perform data sending and receiving tests.</p>
<p>Run fltest_uarttest on Board B to send data. At this time, the data received by the serial port will be displayed on the screen of Board A.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_uarttest -d /dev/ttyS2 -w
tx_0: jaBZgUQxZ5FSxFqQSBqVXHTROSfRZzqJ
</pre></div>
</div>
<p><img alt="Image" src="_images/1746750779145_46bbc6b4_f30f_4fd8_80db_be3866dc1f05.png" /></p>
<p>Run fltest_uarttest on Board B to receive data. Click on the black - screen area in the middle of the screen on Board A, and a soft keyboard will pop up. After continuously entering 32 characters, the information printed on the command - line terminal of Board B is the data sent by the Qt program on Board A.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_uarttest -d /dev/ttyS2 -r
rx_0: 12345678901234567890123456789012
</pre></div>
</div>
<p><img alt="Image" src="_images/1746750779218_05c204c6_f7aa_417e_a886_f2f6bdd2c474.png" /></p>
</section>
<section id="database-test">
<h3>3.9 Database Test<a class="headerlink" href="#database-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p><img alt="Image" src="_images/1746750779305_7647b5c6_11c4_4b71_93b1_2a5781fd991a.png" /></p>
</section>
<section id="backlight-test">
<h3>3.10 Backlight Test<a class="headerlink" href="#backlight-test" title="Link to this heading"></a></h3>
<p>Execute:</p>
<p><img alt="Image" src="_images/1746750779388_6776ccd4_4b2d_4568_8fc4_30360c6b2a9c.png" /></p>
<p>Adjust the brightness of the LCD backlight by sliding the slider in the interface; level 0 is the lowest brightness, and level 255 is the highest brightness.</p>
<p>This test procedure limits the minimum brightness, and the minimum value can be set to 1 on the QT interface. If the backlight needs to be turned off, refer to “3.2.20 LCD Backlight Adjustment”, and set the backlight brightness to 0.</p>
</section>
</section>
<section id="command-line-function-test">
<h2>4. Command Line Function Test<a class="headerlink" href="#command-line-function-test" title="Link to this heading"></a></h2>
<p>OK3506J-S/OK3506J-C platform has various built-in command line tools available to use.</p>
<section id="system-information-query">
<h3>4.1 System Information Query<a class="headerlink" href="#system-information-query" title="Link to this heading"></a></h3>
<p>View kernel information:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# uname -a
Linux ok3506-buildroot 6.1.99 #1 SMP PREEMPT Mon Jan 13 14:50:26 CST 2025 armv7l GNU/Linux
</pre></div>
</div>
<p>View CPU information:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /proc/cpuinfo
processor	: 0
model name	: ARMv7 Processor rev 5 (v7l)
BogoMIPS	: 56.00
Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae 
CPU implementer	: 0x41
CPU architecture: 7
CPU variant	: 0x0
CPU part	: 0xc07
CPU revision	: 5

processor	: 1
model name	: ARMv7 Processor rev 5 (v7l)
BogoMIPS	: 56.00
Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae 
CPU implementer	: 0x41
CPU architecture: 7
CPU variant	: 0x0
CPU part	: 0xc07
CPU revision	: 5

processor	: 2
model name	: ARMv7 Processor rev 5 (v7l)
BogoMIPS	: 56.00
Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae 
CPU implementer	: 0x41
CPU architecture: 7
CPU variant	: 0x0
CPU part	: 0xc07
CPU revision	: 5

Hardware	: Generic DT based system
Revision	: 0000
Serial		: 0
</pre></div>
</div>
<p>View environment variable information (EMMC version):</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# env
SHELL=/bin/sh
RUNLEVEL=#z-01/13/2025
EDITOR=/bin/vi
PWD=/
HOME=/
LANG=en_US.UTF-8
ADB_TCP_PORT=5555
USB_FW_VERSION=0x0310
TERM=vt102
USER=root
ADBD_SHELL=/bin/bash
SHLVL=1
USB_FUNCS=adb
USB_MANUFACTURER=Rockchip
USB_PRODUCT=rk3xxx
XDG_RUNTIME_DIR=/var/run
USB_VENDOR_ID=0x2207
PATH=/usr/bin:/usr/sbin
storagemedia=emmc
_=/usr/bin/env
</pre></div>
</div>
<p>View environment variable information (NAND version):</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# env
SHELL=/bin/sh
RUNLEVEL=#z-01/10/2025
EDITOR=/bin/vi
PWD=/
HOME=/
LANG=en_US.UTF-8
ADB_TCP_PORT=5555
USB_FW_VERSION=0x0310
TERM=vt102
USER=root
ADBD_SHELL=/bin/bash
SHLVL=1
USB_FUNCS=adb
USB_MANUFACTURER=Rockchip
USB_PRODUCT=rk3xxx
XDG_RUNTIME_DIR=/var/run
USB_VENDOR_ID=0x2207
PATH=/usr/bin:/usr/sbin
storagemedia=mtd
_=/usr/bin/env
</pre></div>
</div>
</section>
<section id="frequency-test">
<h3>4.2 Frequency Test<a class="headerlink" href="#frequency-test" title="Link to this heading"></a></h3>
<p><strong>Note: This process takes cpu0 as an example, and the actual process of cpu1, and cpu2 will be changed at the same time.</strong></p>
<p>1. All cpufreq governor types supported in the current kernel:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors
ondemand userspace performance
</pre></div>
</div>
<p>“userspace” refers to user mode, in which user programs are allowed to adjust the CPU frequency.</p>
<p>2. View the frequency gear supported by the current CPU:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
600000 800000 1008000 1200000 1296000 1416000 1512000
</pre></div>
</div>
<p>3. Set to user mode and modify the frequency to 1200000:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# echo userspace &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
root@ok3506-buildroot:/# echo 1200000 &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed
</pre></div>
</div>
<p>4. View the current frequency after modification:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
1200000
</pre></div>
</div>
</section>
<section id="temperature-test">
<h3>4.3 Temperature Test<a class="headerlink" href="#temperature-test" title="Link to this heading"></a></h3>
<p>View the temperature value:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /sys/class/thermal/thermal_zone0/temp
35693
</pre></div>
</div>
<p>The temperature value is 35.7°C.</p>
</section>
<section id="ddr-bandwidth-test">
<h3>4.4 DDR Bandwidth Test<a class="headerlink" href="#ddr-bandwidth-test" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_memory_bandwidth.sh
L1 cache bandwidth rd test with # process
0.008192 9451.28
0.008192 8459.10
0.008192 9496.09
0.008192 9489.91
0.008192 8435.44
L2 cache bandwidth rd test
0.131072 1465.02
0.131072 1438.77
0.131072 1429.70
0.131072 1431.72
0.131072 1442.32
Main mem bandwidth rd test
52.43 1136.19
52.43 1253.14
52.43 1248.01
52.43 1235.92
52.43 1244.04
L1 cache bandwidth wr test with # process
0.008192 11361.59
0.008192 11368.80
0.008192 11362.81
0.008192 11341.06
0.008192 11349.27
L2 cache bandwidth wr test
0.131072 1567.85
0.131072 1498.65
0.131072 1466.94
0.131072 1498.23
0.131072 1420.71
Main mem bandwidth wr test
52.43 622.40
52.43 621.86
52.43 621.30
52.43 621.47
52.43 636.10
</pre></div>
</div>
<p><font style="color:rgb(51, 51, 51);">The DDR3 write bandwidth of OK3506-S/OK3506-C is approximately 620M/s, and the read bandwidth is approximately 1230M/s.</font></p>
</section>
<section id="id1">
<h3>4.5 Watchdog Test<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>Watchdog is a function often used in embedded systems. The device node of watchdog in OK3506-S/OK3506-C is /dev/watchdog.</p>
<p>Start the watchdog, set the reset time for 10s, and feed the dog regularly. The system will not restart.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_watchdog -t 10 -c
Watchdog Ticking Away!
</pre></div>
</div>
<p>When using ctrl+c to end the test program, kicking the dog is stopped, the watchdog is on, and the system is reset after 10s.</p>
<p>If you do not want to reset, enter the shutdown watchdog command within 10s after finishing the program:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_watchdog -d
Watchdog disabled.
</pre></div>
</div>
<p>Start the watchdog, set the reset time for 10s, but do not feed the dog, the system will restart after 10 seconds.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_watchdog -t 10
Watchdog Ticking Away!
[   39.114587] watchdog: watchdog0: watchdog did not stop!
</pre></div>
</div>
</section>
<section id="rtc-function-test">
<h3>4.6 RTC Function Test<a class="headerlink" href="#rtc-function-test" title="Link to this heading"></a></h3>
<p><font style="color:rgb(51, 51, 51);">Note: Make sure that the coin cell battery has been installed on the board and that the battery voltage is normal.</p>
<p>RTC test: The main way to set the software and hardware time is by using the date and hwclock utilities. When performing the board power-down and power-up test, the software clock reads whether the RTC clock is synchronized or not.</p>
<p>Time setting</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# date -s &quot;2022-12-12 17:23:00&quot;	//Set software time
Mon Dec 12 17:23:00 UTC 2022
root@ok3506-buildroot:/# hwclock -w											//Synchronize software time to hardware time
root@ok3506-buildroot:/# hwclock -r											//Display hardware time
Mon Dec 12 17:23:23 2022  0.000000 seconds
</pre></div>
</div>
<p><font style="color:rgb(51, 51, 51);">Then power down and power up the board, enter the system, and read the system time. After that, we can see that the time has synchronized.</font></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# date
Mon Dec 12 17:26:10 UTC 2022
</pre></div>
</div>
</section>
<section id="id2">
<h3>4.7 Key Test<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>Use the fltest_keytest command line tool to test the keys. fltest_keytest currently supports the test of four keys on the carrier board, VOL+, VOL-, MENU, and ESC, with key codes 115, 114, 139, and 1, respectively.</p>
<p>Execute the following command. Note that when there is a touch screen, it is event1. At this time, press the lift button in turn, and the following content can be output on the terminal:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_keytest /dev/input/event1
press  ESC MENU VOL- VOL+
key1 Presse
key1 Released
key139 Presse
key139 Released
key114 Presse
key114 Released
key115 Presse
key115 Released
</pre></div>
</div>
</section>
<section id="id3">
<h3>4.8 UART Test<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<p>OK3506-S/ OK3506-C development board is equipped with 2 x UART, which are labeled on the board as follows：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>UART</strong></p></th>
<th class="head text-center"><p><strong>Device Nodes</strong></p></th>
<th class="head text-left"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">UART0</font></p></td>
<td class="text-center"><p><font style="color:rgb(51, 51, 51);">/dev/ttyFIQ0</font></p></td>
<td class="text-left"><p>Debugging serial port cannot be used directly for this test.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">UART2</font></p></td>
<td class="text-center"><p><font style="color:rgb(51, 51, 51);">/dev/ttyS2</font></p></td>
<td class="text-left"><p><font style="color:rgb(51, 51, 51);">RS485</font></p></td>
</tr>
</tbody>
</table>
<p>The UART2 test is used in this test. Connect 485 _ A1, 485 _ B1 and GND _ 485 _ 1 in the P25 port to the computer through the USB to 485 module, as shown in the figure:</p>
<p><img alt="Image" src="_images/1731476692246_f0d61523_da10_4ae6_b6e5_a404c239372c.png" /></p>
<p>Enter the following command in the serial port of the development board for UART receiving test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_uarttest -d /dev/ttyS2 -b 115200 -r &amp;
[1] 2845
root@ok3506-buildroot:/# rx_0: forlinxforlinxforlinxforlinxforl
</pre></div>
</div>
<p>Enter the send information on the PC side:</p>
<p><img alt="Image" src="_images/1731479246005_405d8865_c1fd_4cf1_99f5_30c51e5eab15.png" /></p>
<p>Enter the following command in the serial port of the development board for UART sending test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_uarttest -d /dev/ttyS2 -b 115200 -w
tx_0: KaLKchczYFbc21YbhV5xYf2SotoVobK8
</pre></div>
</div>
<p>Observe the received information on the PC side:</p>
<p><img alt="Image" src="_images/1731479131378_e4020ca2_1068_415e_91f1_e89b9f7c7bfd.png" /></p>
</section>
<section id="tf-test">
<h3>4.9 TF Test<a class="headerlink" href="#tf-test" title="Link to this heading"></a></h3>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p><strong>The SD card mounts at /run/media/, allowing hot-plugging. Terminal displays SD card information;</strong></p></li>
<li><p><strong>It supports file system in formats such as FAT32 and EXT4. If you are unsure about the TF card format, it is recommended to format it as FAT32 before use;</strong></p></li>
<li><p><strong>Only the Nand version supports TF cards, the eMMC version does not support TF cards.</strong></p></li>
</ul>
<p>1. Insert the TF card into the card slot on the carrier board. Under normal circumstances, the development board terminal will display the following printing information:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[ 3496.124630] mmc_host mmc0: Bus speed (slot 0) = 50000000Hz (slot req 50000000Hz, actual 50000000HZ div = 0)
[ 3496.124875] mmc0: new high speed SDHC card at address aaaa
[ 3496.127596] mmcblk0: mmc0:aaaa SC16G 14.8 GiB 
[ 3496.133906]  mmcblk0: p1
[ 3496.268275] EXT4-fs (mmcblk0): VFS: Can&#39;t find ext4 filesystem
[ 3496.269290] EXT4-fs (mmcblk0): VFS: Can&#39;t find ext4 filesystem
[ 3496.270072] EXT2-fs (mmcblk0): error: can&#39;t find an ext2 filesystem on dev mmcblk0.
[ 3496.271600] FAT-fs (mmcblk0): bogus number of reserved sectors
[ 3496.271691] FAT-fs (mmcblk0): Can&#39;t find a valid FAT filesystem
[ 3496.271957] FAT-fs (mmcblk0): bogus number of reserved sectors
[ 3496.271996] FAT-fs (mmcblk0): Can&#39;t find a valid FAT filesystem
[ 3496.619184] FAT-fs (mmcblk0p1): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.
</pre></div>
</div>
<p>2. Check the mount directory:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ls /run/media/
mmcblk0p1
</pre></div>
</div>
<p>3. Write test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/dev/zero of=/run/media/mmcblk0p1/test bs=1M count=500 conv=fsync
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 41.3072 s, 12.7 MB/s
</pre></div>
</div>
<p>4. Read the test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/run/media/mmcblk0p1/test of=/dev/null bs=1M count=500 iflag=direct
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 22.4557 s, 23.3 MB/s
</pre></div>
</div>
<p>5. After using the TF card, uninstall it with umount before ejecting it.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# umount /run/media/mmcblk0p1
</pre></div>
</div>
<p><strong>Note: Plug and unplug the TF card after exiting the TF card mounting path.</strong></p>
</section>
<section id="storage-test">
<h3>4.10 Storage Test<a class="headerlink" href="#storage-test" title="Link to this heading"></a></h3>
<section id="emmc-test">
<h4>4.10.1 EMMC Test<a class="headerlink" href="#emmc-test" title="Link to this heading"></a></h4>
<p>OK3506-S/ The eMMC speed of OK3506-S platform is 50MHz. The following is a simple test of the reading and writing speed of eMMC. Take reading and writing ext4 file system as an example.</p>
<p>Write test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/dev/zero of=/test bs=1M count=500 conv=fsync
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 23.8119 s, 22.0 MB/s
</pre></div>
</div>
<p>Read test：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/test of=/dev/null bs=1M iflag=direct
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 22.2584 s, 23.6 MB/s
</pre></div>
</div>
</section>
<section id="nand-test">
<h4>4.10.2 Nand Test<a class="headerlink" href="#nand-test" title="Link to this heading"></a></h4>
<p>OK3506-S/OK3506-S platform is configured with SPI Nand driver by default, the root file system uses squashfs file system (read-only), and the userdata partition uses ubifs file system.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00400000 00020000 &quot;uboot&quot;
mtd1: 00100000 00020000 &quot;misc&quot;
mtd2: 00a00000 00020000 &quot;boot&quot;
mtd3: 01000000 00020000 &quot;recovery&quot;
mtd4: 08000000 00020000 &quot;rootfs&quot;
mtd5: 01000000 00020000 &quot;oem&quot;
mtd6: 04c60000 00020000 &quot;userdata&quot;
</pre></div>
</div>
<p>Note that the mtd4 partition is the current root file system.</p>
<p>Write test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/dev/zero of=/userdata/test bs=1M count=20 conv=fsync
20+0 records in
20+0 records out
20971520 bytes (21 MB, 20 MiB) copied, 0.651586 s, 32.2 MB/s
</pre></div>
</div>
<p>Read test：</p>
<p><strong>Note: To ensure accurate data, restart the board and test the read speed.</strong></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/userdata/test of=/dev/null bs=1M
20+0 records in
20+0 records out
20971520 bytes (21 MB, 20 MiB) copied, 1.11805 s, 18.8 MB/s
</pre></div>
</div>
</section>
</section>
<section id="usb2-0">
<h3>4.11 USB2.0<a class="headerlink" href="#usb2-0" title="Link to this heading"></a></h3>
<p>OK3506-S/OK3506-C supports two USB2.0 interfaces. You can connect USB mice, USB keyboards, U disks and other devices to any on-board USB HOST interface, and support hot plugging of these devices. Demonstration with a mounting USB flash drive; the current USB flash drive test supports up to 32G, but no test for 32G above.</p>
<p>The terminal will print information about the USB flash drive, but due to the many types of USB flash drives, the displayed information may vary:</p>
<p>1. After the development board booting, connect the USB interface disk to the USB host interface of the development board. The default log print information is low, so there will be no print information; You can use the dmesg command to view and find information about the U disk.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[ 1524.297550] usb 2-1.3: new high-speed USB device number 4 using dwc2
[ 1524.493923] usb-storage 2-1.3:1.0: USB Mass Storage device detected
[ 1524.496615] scsi host0: usb-storage 2-1.3:1.0
[ 1525.522210] scsi 0:0:0:0: Direct-Access     SanDisk  Cruzer Blade     1.00 PQ: 0 ANSI: 6
[ 1525.535539] sd 0:0:0:0: [sda] 60125184 512-byte logical blocks: (30.8 GB/28.7 GiB)
[ 1525.536834] sd 0:0:0:0: [sda] Write Protect is off
[ 1525.538522] sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#39;t support DPO or FUA
[ 1525.546982]  sda: sda1
[ 1525.547581] sd 0:0:0:0: [sda] Attached SCSI removable disk
[ 1525.893709] EXT4-fs (sda): VFS: Can&#39;t find ext4 filesystem
[ 1525.895579] EXT4-fs (sda): VFS: Can&#39;t find ext4 filesystem
[ 1525.897325] EXT2-fs (sda): error: can&#39;t find an ext2 filesystem on dev sda.
[ 1525.901082] FAT-fs (sda): bogus number of reserved sectors
[ 1525.901131] FAT-fs (sda): Can&#39;t find a valid FAT filesystem
[ 1525.901873] FAT-fs (sda): bogus number of reserved sectors
[ 1525.901912] FAT-fs (sda): Can&#39;t find a valid FAT filesystem
[ 1526.517667] FAT-fs (sda1): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.
</pre></div>
</div>
<p>2. Check the mount directory:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ls /run/media/
mmcblk0p5 sda1
</pre></div>
</div>
<p>You can see the USB mount directory: /run/media/sda1.</p>
<p>3. View the contents of the U disk (sda1 is based on the actual USB flash drive partition name);</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ls -l /run/media/sda1/
total 512000
-rwxrwx--- 1 root disk 524288000 Dec 12 20:25 test
</pre></div>
</div>
<p>4. Write test: Write speeds are limited by the specific storage device:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/dev/zero of=/run/media/sda1/test bs=1M count=500 conv=fsync
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 45.6879 s, 11.5 MB/s
</pre></div>
</div>
<p>5. Read the test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/run/media/sda1/test of=/dev/null bs=1M iflag=direct
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 18.8926 s, 27.8 MB/s
</pre></div>
</div>
<p>6. After using a USB flash drive, before removing the USB flash drive, you need to use the “umount” command to unmount it.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# umount /run/media/sda1
</pre></div>
</div>
<p><strong>Note: Exit the USB flash drive mount path before plugging and unplugging the USB flash drive.</strong></p>
</section>
<section id="usb-to-four-serial-port-conversion-test">
<h3>4.12 USB to Four Serial Port Conversion Test<a class="headerlink" href="#usb-to-four-serial-port-conversion-test" title="Link to this heading"></a></h3>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p><strong>It supports XR21V1414 USB to serial port chip driver.</strong></p></li>
<li><p><strong>USB to four serial port conversion is an optional module. If you have the need for it, please contact the sales personnel.</strong></p></li>
</ul>
<p>1. After powering on the development board, connect the USB to quad port module through the USB HOST interface, and the following printed information will appear on the terminal:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[   36.441352] usb 2-1.3: new full-speed USB device number 4 using dwc2
[   36.651832] cdc_xr_usb_serial 2-1.3:1.0: This device cannot do calls on its own. It is not a modem.
[   36.652115] cdc_xr_usb_serial 2-1.3:1.0: ttyXR_USB_SERIAL0: USB XR_USB_SERIAL device
[   36.657220] cdc_xr_usb_serial 2-1.3:1.2: This device cannot do calls on its own. It is not a modem.
[   36.657499] cdc_xr_usb_serial 2-1.3:1.2: ttyXR_USB_SERIAL1: USB XR_USB_SERIAL device
[   36.664388] cdc_xr_usb_serial 2-1.3:1.4: This device cannot do calls on its own. It is not a modem.
[   36.665096] cdc_xr_usb_serial 2-1.3:1.4: ttyXR_USB_SERIAL2: USB XR_USB_SERIAL device
[   36.671332] cdc_xr_usb_serial 2-1.3:1.6: This device cannot do calls on its own. It is not a modem.
[   36.671795] cdc_xr_usb_serial 2-1.3:1.6: ttyXR_USB_SERIAL3: USB XR_USB_SERIAL device
</pre></div>
</div>
<p>2. Check the usb device status by lsusb:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# lsusb
Bus 002 Device 002: ID 1a40:0101
Bus 001 Device 001: ID 1d6b:0002
Bus 002 Device 004: ID 04e2:1414                             //The VID and PID of the conversion chip
Bus 002 Device 001: ID 1d6b:0002
Bus 002 Device 003: ID 0bda:d723
</pre></div>
</div>
<p>Check whether a serial port node is generated under dev:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ls /dev/ttyXRUSB*
/dev/ttyXRUSB0	/dev/ttyXRUSB1	/dev/ttyXRUSB2	/dev/ttyXRUSB3
</pre></div>
</div>
<p>3. The mapping between the four extended serial ports and their corresponding device nodes is shown in the diagram below:</p>
<p><img alt="Image" src="_images/1720417684392_b4febc8c_5724_401d_a9a4_20165a269a9c.png" /></p>
<p>4. Refer to “4.8 UART Port Test” for the test methods.</p>
</section>
<section id="otg-test">
<h3>4.13 OTG Test<a class="headerlink" href="#otg-test" title="Link to this heading"></a></h3>
<p>OK3506-S/OK3506-C has an OTG port, in host mode, it can be plugged into a normal USB device, and Device mode can be used for flashing, ADB file transfer, and debugging. The switch between Host mode and Device mode is controlled by the S2 DIP switch. When the switch is set to ON, the Host mode is selected, and when the switch is set to OFF, the Device mode is selected.</p>
<section id="host-mode">
<h4>4.13.1 Host Mode<a class="headerlink" href="#host-mode" title="Link to this heading"></a></h4>
<p>1. Toggle the S2 dial switch to ON, and insert the USB flash disk through the OTG cable. The serial port information is as follows:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[ 1287.317785] usb 1-1: new high-speed USB device number 2 using dwc2
[ 1287.520098] usb-storage 1-1:1.0: USB Mass Storage device detected
[ 1287.523033] scsi host0: usb-storage 1-1:1.0
[ 1288.538969] scsi 0:0:0:0: Direct-Access     SanDisk  Cruzer Blade     1.00 PQ: 0 ANSI: 6
[ 1288.552018] sd 0:0:0:0: [sda] 60125184 512-byte logical blocks: (30.8 GB/28.7 GiB)
[ 1288.552945] sd 0:0:0:0: [sda] Write Protect is off
[ 1288.553348] sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#39;t support DPO or FUA
[ 1288.559711]  sda: sda1
[ 1288.560429] sd 0:0:0:0: [sda] Attached SCSI removable disk
[ 1288.734631] EXT4-fs (sda): VFS: Can&#39;t find ext4 filesystem
[ 1288.735982] EXT4-fs (sda): VFS: Can&#39;t find ext4 filesystem
[ 1288.737352] EXT2-fs (sda): error: can&#39;t find an ext2 filesystem on dev sda.
[ 1288.741354] FAT-fs (sda): bogus number of reserved sectors
[ 1288.741411] FAT-fs (sda): Can&#39;t find a valid FAT filesystem
[ 1288.742018] FAT-fs (sda): bogus number of reserved sectors
[ 1288.742065] FAT-fs (sda): Can&#39;t find a valid FAT filesystem
[ 1289.200452] FAT-fs (sda1): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.
</pre></div>
</div>
<p>2. Check the mount directory:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ls /run/media/
mmcblk0p5 sda1
</pre></div>
</div>
<p>You can see the USB mount directory: /run/media/sda1..</p>
<p>3. View the contents of the USB drive (replace “sda” with the actual partition name of the USB drive);</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ls -l /run/media/sda1/
total 512000
-rwxrwx--- 1 root disk 524288000 Dec 12 20:25 test
</pre></div>
</div>
<p>4. Write test: Write speeds are limited by the specific storage device:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/dev/zero of=/run/media/sda1/test bs=1M count=500 conv=fsync
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 46.2425 s, 11.3 MB/s
</pre></div>
</div>
<p>5. Read the test:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# dd if=/run/media/sda1/test of=/dev/null bs=1M count=500 iflag=direct
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 17.781 s, 29.5 MB/s
</pre></div>
</div>
<p>6. After using a USB flash drive, before removing the USB flash drive, you need to use the “umount” command to unmount it.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# umount /run/media/sda1
</pre></div>
</div>
<p><strong>Note: Exit the USB flash drive mount path before plugging and unplugging the USB flash drive.</strong></p>
</section>
<section id="device-mode">
<h4>4.13.2 Device Mode<a class="headerlink" href="#device-mode" title="Link to this heading"></a></h4>
<ol class="arabic simple">
<li><p>Set the S2 DIP switch to OFF and connect the PC via Type-C cable, the serial port information is as follows:</p></li>
</ol>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[ 1811.539300] dwc2 ff740000.usb: new device is full-speed
[ 1811.747607] dwc2 ff740000.usb: new device is high-speed
[ 1812.013915] dwc2 ff740000.usb: new device is high-speed
[ 1812.047658] dwc2 ff740000.usb: new address 44
[ 1812.076229] dwc2 ff740000.usb: dwc2_hsotg_ep_sethalt(ep b210f0b8 ep1in, 0)
[ 1812.076341] dwc2 ff740000.usb: dwc2_hsotg_ep_sethalt(ep 34e64b59 ep2out, 0)
[ 1812.076382] android_work: sent uevent USB_STATE=CONFIGURED
</pre></div>
</div>
<p>Rockchip Development Tool displays “An ADB device was found”. Debugging can be done using the ADB tool.</p>
<p><img alt="Image" src="_images/1731548994367_66e6de27_538b_4c85_846f_8b31ffcf140d.png" /></p>
</section>
</section>
<section id="ethernet-configuration">
<h3>4.14 Ethernet Configuration<a class="headerlink" href="#ethernet-configuration" title="Link to this heading"></a></h3>
<p>The OK3506 - S/OK3506 - C boards are equipped with two 100 - Mbps network cards. The default configuration for eth0 at the factory is static IP 192.168.0.232.</p>
<p>The path to the configuration file is: /etc/network/interfaces.</p>
<p><strong>Note: Since the root file system in the NAND configuration is read - only, the default IP cannot be modified by editing the configuration file. It can only be modified by manually executing commands.</strong></p>
<p>The configuration file for setting a dynamic IP is:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp
</pre></div>
</div>
<p>Set a static IP configuration. The following takes setting the IP of eth0 to 192.168.0.232 as an example:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
address 192.168.0.232
netmask 255.255.255.0
gateway 192.168.0.1
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Parameter</strong></p></th>
<th class="head text-left"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">iface</font></p></td>
<td class="text-left"><p>Used to specify a network card that requires a fixed IP.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">address</font></p></td>
<td class="text-left"><p>Used to specify an IP address that needs to be fixed.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">netmask</font></p></td>
<td class="text-left"><p>Used to set the subnet mask.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">gateway</font></p></td>
<td class="text-left"><p>Used to specify a gateway.</p></td>
</tr>
</tbody>
</table>
<p>After setting up, use the sync file synchronization command to reboot the development board or restart the service for the configuration to take effect.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ifdown -a
root@ok3506-buildroot:/# ifup -a
</pre></div>
</div>
</section>
<section id="id4">
<h3>4.15 WIFI Test<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p><strong>The network environment is different, so please set it according to the actual situation when you do this test;</strong></p></li>
<li><p><strong>The board only supports connection to 2.4G hotspots;</strong></p></li>
<li><p><strong>OK3506-S/OK3506-C platform supports WIFI Bluetooth 2-in-1 modules: RTL8723DU.</strong></p></li>
</ul>
<section id="sta-mode">
<h4>4.15.1 STA Mode<a class="headerlink" href="#sta-mode" title="Link to this heading"></a></h4>
<p>This mode is to connect to the wireless network as a station. In the following test, the router uses WPA encryption, the connected wifi hotspot name is: forlinx-wlan, and the password is: fl03123102650. Due to the different network environments, users should set up according to the actual situation when conducting this test:</p>
<ol class="arabic simple">
<li><p>Enter the following command in the development board terminal:</p></li>
</ol>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_wifi.sh -i wlan0 -s &quot;forlinx-wlan&quot; -p fl03123102650
</pre></div>
</div>
<p>The meanings of relevant parameters in the command are as follow:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Parameter</strong></p></th>
<th class="head text-left"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">-i</font></p></td>
<td class="text-left"><p>Different wifi modules use different parameters and specify the name of the WIFI device.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">-s</font></p></td>
<td class="text-left"><p>The actual WiFi hotspot name connected.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><font style="color:rgb(51, 51, 51);">-p</font></p></td>
<td class="text-left"><p>The following parameter Password refers to the password of the actual WiFi hotspot to be connected; If the current hotspot does not have a password, write NONE as the parameter after - p.</p></td>
</tr>
</tbody>
</table>
<p>The serial port prints as follows:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_wifi.sh -i wlan0 -s &quot;forlinx-wlan&quot; -p fl03123102650
wifi wlan0
ssid forlinx-wlan
pasw fl03123102650
waiting...
/usr/bin/fltest_wifi.sh: line 69: rfkill: command not found
udhcpc: started, v1.36.1
udhcpc: broadcasting discover
udhcpc: broadcasting select for 10.10.21.72, server 10.10.23.254
udhcpc: lease of 10.10.21.72 obtained from 10.10.23.254, lease time 1800
deleting routers
adding dns 119.29.29.29
adding dns 114.114.114.114
connect ok
</pre></div>
</div>
<p>2. Check whether it can ping the external network and enter the following command in the terminal:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ping www.baidu.com -c 4
PING www.a.shifen.com (220.181.38.149) 56(84) bytes of data.
64 bytes from 220.181.38.149: icmp_seq=1 ttl=51 time=11.7 ms
64 bytes from 220.181.38.149: icmp_seq=2 ttl=51 time=13.5 ms
64 bytes from 220.181.38.149: icmp_seq=3 ttl=51 time=13.8 ms
64 bytes from 220.181.38.149: icmp_seq=4 ttl=51 time=11.5 ms

--- www.a.shifen.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 11.485/12.601/13.761/1.017 ms
</pre></div>
</div>
</section>
<section id="ap-mode">
<h4>4.15.2 AP Mode<a class="headerlink" href="#ap-mode" title="Link to this heading"></a></h4>
<p><strong>Description:</strong></p>
<p><strong>Before conducting this test, ensure that the network card eth0 is connected and the network is functioning properly, so that the phone can access the Internet after connecting to the hotspot.</strong></p>
<p>Check the driver loading status:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# lsmod 
Module                  Size  Used by    Not tainted
8723du               1040261  0
</pre></div>
</div>
<p>Configuration Hotspot</p>
<p>WiFi Hotspot Name: OK3506_WIFI_2.4G_AP</p>
<p>Password: 12345678</p>
<p>The hotspot name and password can be viewed through the/etc/hostapd-2.4g.conf file.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_hostap.sh
Stopping dnsmasq: FAIL
Starting dnsmasq: OK
done!
wlan0: interface state UNINITIALIZED-&gt;ENABLED
wlan0: AP-ENABLED
</pre></div>
</div>
</section>
</section>
<section id="bluetooth-test">
<h3>4.16 Bluetooth Test<a class="headerlink" href="#bluetooth-test" title="Link to this heading"></a></h3>
<p>RTL8723DU module on the carrier board of the OK3506-S/OK3506-C development board integrates Bluetooth functionality. This section demonstrates how to perform data sending between a mobile phone and the development board via Bluetooth.</p>
<p>1. Bluetooth Configuration</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# bluetoothctl
hci0 new_settings: powered bondable ssp br/edr le secure-conn 
Agent registered
[CHG] Controller 78:22:88:03:AB:76 Pairable: yes
[bluetooth]# power on
Changing power on succeeded
[bluetooth]# agent on
Agent is already registered
[bluetooth]# default-agent
Default agent request successful
[bluetooth]# discoverable on
hci0 new_settings: powered connectable bondable ssp br/edr le secure-conn 
hci0 new_settings: powered connectable discoverable bondable ssp br/edr le secure-conn 
Changing discoverable on succeeded
[CHG] Controller 78:22:88:03:AB:76 Discoverable: yes
</pre></div>
</div>
<p>2. Development Board Passive Pairing</p>
<p>At this time, open the mobile phone Bluetooth search, a “BlueZ 5.77” device will appear, and select pairing.</p>
<p><img alt="Image" src="_images/1731916438329_0c67448f_cbc7_4119_85ef_ac6a1f1613b8.png" /></p>
<p>At the same time the printing message displays on the development board as follows, enter yes.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>hci0 14:99:3E:03:1B:E4 type BR/EDR connected eir_len 25
[NEW] Device 14:99:3E:03:1B:E4 滑天下之大稽
Request confirmation
[agent] Confirm passkey 216676 (yes/no): yes
hci0 new_link_key 14:99:3E:03:1B:E4 type 0x05 pin_len 0 store_hint 1
hci0 device_flags_changed: 14:99:3E:03:1B:E4 (BR/EDR)
     supp: 0x00000001  curr: 0x00000000
[CHG] Device 14:99:3E:03:1B:E4 Bonded: yes
[CHG] Device 14:99:3E:03:1B:E4 Modalias: bluetooth:v038Fp1200d1436
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001105-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 0000110a-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 0000110c-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001112-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001115-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001116-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 0000111f-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 0000112f-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001132-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001200-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001800-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 00001801-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 0000fcc0-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 0000fcc0-36a2-11ea-8467-484d7e99a198
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 0000fdaa-0000-1000-8000-00805f9b34fb
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: 98b97136-36a2-11ea-8467-484d7e99a198
[CHG] Device 14:99:3E:03:1B:E4 UUIDs: ada499be-27d6-11ec-9427-0a80ff2603de
[CHG] Device 14:99:3E:03:1B:E4 ServicesResolved: yes
[CHG] Device 14:99:3E:03:1B:E4 Paired: yes
hci0 14:99:3E:03:1B:E4 type BR/EDR disconnected with reason 3
[CHG] Device 14:99:3E:03:1B:E4 ServicesResolved: no
[CHG] Device 14:99:3E:03:1B:E4 Connected: no
</pre></div>
</div>
<p>View and remove connected devices:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[bluetooth]# devices                       // View connected Bluetooth devices
Device 14:99:3E:03:1B:E4 It’s extremely ridiculous.
[bluetooth]# remove 14:99:3E:03:1B:E4                  // Remove the device
[DEL] Device 14:99:3E:03:1B:E4  It’s extremely ridiculous.
Device has been removed
hci0 new_settings: powered connectable bondable ssp br/edr le secure - conn
[CHG] Controller 78:22:88:03:AB:76 Discoverable: no
</pre></div>
</div>
<p>3. Development board active pairing</p>
<p>In addition to passive pairing, it is also possible to send an active pairing request from the development board terminal.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[bluetooth]# scan on	                                              //Search for discoverable Bluetooth
SetDiscoveryFilter success
hci0 type 7 discovering on
Discovery started
[CHG] Controller 78:22:88:03:AB:76 Discovering: yes
[NEW] Device 14:99:3E:03:1B:E4 滑天下之大稽
[bluetooth]# scan off		                                         	 	//Stop searching
[bluetooth]# pair 14:99:3E:03:1B:E4                                 //Pair the bluetooth
Attempting to pair with 14:99:3E:03:1B:E4
hci0 device_flags_changed: 14:99:3E:03:1B:E4 (BR/EDR)
     supp: 0x00000001  curr: 0x00000000
hci0 14:99:3E:03:1B:E4 type BR/EDR connected eir_len 25
[CHG] Device 14:99:3E:03:1B:E4 Connected: yes
Request confirmation
[agent] Confirm passkey 732259 (yes/no): yes	                       //Key confirmation
</pre></div>
</div>
<p>4. Development board to receive documents</p>
<p>After successful pairing, on the mobile side, you can use Bluetooth to send files to OK3506-S/OK3506-C.</p>
<p><img alt="Image" src="_images/1731916038621_bc0da84e_7397_409d_8dcd_4d0fdcadec53.png" /></p>
<p>Received files are saved in the /tmp directory.</p>
<p>5. The development board sends files</p>
<p>Similarly, OK3506-S/OK3506-C can send files to the mobile phone. The test method is as follows:</p>
<p>6. OK3506-S/ OK3506-C development board sends files to the cell phone, the test method is as follows:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_obexctl.sh 		            //Open obexctl
[NEW] Client /org/bluez/obex
[obex]# connect 14:99:3E:03:1B:E4													//Connect to the Bluetooth MAC that needs to communicate
Attempting to connect to 14:99:3E:03:1B:E4
[NEW] Session /org/bluez/obex/client/session0 [default]
[NEW] ObjectPush /org/bluez/obex/client/session0 
Connection successful
[14:99:3E:03:1B:E4]# send /tmp/1731915958275.png	        //Send files
</pre></div>
</div>
<p><img alt="Image" src="_images/1731916344487_6958d5b0_b1f6_4e79_8c45_fed0eec2b2fb.png" /></p>
<p>The phone will receive the incoming file request and click “Receive” to transfer the file.</p>
</section>
<section id="id5">
<h3>4.17 4G Test<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p><strong>When the IOT card is used for testing, confirm the firmware version of the module. If the lower version firmware is not supported, upgrade the EC20 firmware;</strong></p></li>
<li><p><strong>Some IoT cards require a dedicated account number and password when dialing, and users adjust the commands according to the situation;</strong></p></li>
<li><p><strong>The quectelCM –help command allows you to see the meaning of the relevant parameters.</strong></p></li>
</ul>
<p>OK3506-S/OK3506-C supports the 4G module EC20. Before starting the development board, connect the 4G module and insert the SIM card to start the development board.</p>
<p>1. After connecting the module and powering up the board and module, check the USB status through the lsusb command;</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# lsusb
Bus 002 Device 002: ID 1a40:0101
Bus 001 Device 001: ID 1d6b:0002
Bus 002 Device 003: ID 0781:5567
Bus 002 Device 005: ID 2c7c:0125	                   //The VID and PID of EC20
Bus 002 Device 001: ID 1d6b:0002
Bus 002 Device 004: ID 0bda:d723
</pre></div>
</div>
<p>View device node status under /dev</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ls /dev/ttyUSB*
/dev/ttyUSB0  /dev/ttyUSB1  /dev/ttyUSB2  /dev/ttyUSB3
</pre></div>
</div>
<p>2. After the equipment is successfully identified, the dial-up Internet access test can be conducted;</p>
<p>fltest_quectel.sh calls quectelCM, see /usr/bin/fltest_quectel.sh for specific commands.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# fltest_quectel.sh &amp;
</pre></div>
</div>
<p>Printing information is as follows:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[01-01_00:01:25:333] Quectel_QConnectManager_Linux_V1.6.0.15
[01-01_00:01:25:336] Find /sys/bus/usb/devices/2-1.1 idVendor=0x2c7c idProduct=0x125, bus=0x002, dev=0x005
[01-01_00:01:25:337] Auto find qmichannel = /dev/cdc-wdm0
[01-01_00:01:25:337] Auto find usbnet_adapter = wwan0
[01-01_00:01:25:337] netcard driver = qmi_wwan, driver version = 6.1.84
[01-01_00:01:25:338] ioctl(0x89f3, qmap_settings) failed: Operation not supported, rc=-1
[01-01_00:01:25:338] Modem works in QMI mode
[01-01_00:01:25:346] cdc_wdm_fd = 7
[01-01_00:01:25:444] Get clientWDS = 7
[01-01_00:01:25:476] Get clientDMS = 1
[01-01_00:01:25:508] Get clientNAS = 2
[01-01_00:01:25:540] Get clientUIM = 1
[01-01_00:01:25:572] Get clientWDA = 1
[01-01_00:01:25:604] requestBaseBandVersion EC20CEHDLGR06A09M1G
[01-01_00:01:25:732] requestGetSIMStatus SIMStatus: SIM_READY
[01-01_00:01:25:764] requestGetProfile[1] 3gnet///0
[01-01_00:01:25:796] requestRegistrationState2 MCC: 460, MNC: 1, PS: Attached, DataCap: LTE
[01-01_00:01:25:828] requestQueryDataCall IPv4ConnectionStatus: DISCONNECTED
[01-01_00:01:25:829] ifconfig wwan0 0.0.0.0
[01-01_00:01:25:848] ifconfig wwan0 down
[01-01_00:01:25:924] requestSetupDataCall WdsConnectionIPv4Handle: 0x86d87130
[01-01_00:01:26:053] ifconfig wwan0 up
[01-01_00:01:26:073] udhcpc -f -n -q -t 5 -i wwan0
udhcpc: started, v1.36.1
udhcpc: broadcasting discover
udhcpc: broadcasting discover
udhcpc: broadcasting discover
udhcpc: broadcasting discover
udhcpc: broadcasting discover
udhcpc: no lease, failing
[01-01_00:01:41:418] File:ql_raw_ip_mode_check Line:127 udhcpc fail to get ip address, try next:
[01-01_00:01:41:418] ifconfig wwan0 down
[01-01_00:01:41:436] echo Y &gt; /sys/class/net/wwan0/qmi/raw_ip
[01-01_00:01:41:436] ifconfig wwan0 up
[01-01_00:01:41:452] udhcpc -f -n -q -t 5 -i wwan0
udhcpc: started, v1.36.1
udhcpc: broadcasting discover
udhcpc: broadcasting select for 10.144.135.194, server 10.144.135.193
udhcpc: lease of 10.144.135.194 obtained from 10.144.135.193, lease time 7200
[01-01_00:01:41:692] deleting routers
[01-01_00:01:41:751] adding dns 202.99.160.68
[01-01_00:01:41:753] adding dns 202.99.166.4
</pre></div>
</div>
<p>3. Before testing, check the relevant configuration;</p>
<p>View Gateway Configuration.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         bogon           0.0.0.0         UG    0      0        0 wwan0
10.144.135.192  *               255.255.255.252 U     0      0        0 wwan0
</pre></div>
</div>
<p>View DNS Configuration.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /etc/resolv.conf 
nameserver 119.29.29.29 # wlan0
nameserver 114.114.114.114 # wlan0
nameserver 202.99.160.68 # wwan0
nameserver 202.99.166.4 # wwan0
</pre></div>
</div>
<p>4. After setting up DNS and routing, we can ping the domain name.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ping -i wwan0 www.baidu.com -c 3
ping: option argument contains garbage: wwan0
ping: this will become fatal error in the future
PING www.a.shifen.com (110.242.68.4) 56(84) bytes of data.
64 bytes from 110.242.68.4: icmp_seq=1 ttl=54 time=43.3 ms
64 bytes from 110.242.68.4: icmp_seq=2 ttl=54 time=36.2 ms
64 bytes from 110.242.68.4: icmp_seq=3 ttl=54 time=25.6 ms

--- www.a.shifen.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 25.608/35.042/43.322/7.277 ms, pipe 3, ipg/ewma 15.402/40.328 ms
</pre></div>
</div>
</section>
<section id="play-record-test">
<h3>4.18 Play/Record Test<a class="headerlink" href="#play-record-test" title="Link to this heading"></a></h3>
<p>OK3506-S/OK3506-C provides 1 x standard 3.5mm audio socket. Please insert the prepared earphone into the earphone interface before the playback test.</p>
<p>Recording can be done with either the headset microphone or the onboard microphone.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# arecord -l
**** List of CAPTURE Hardware Devices ****
card 0: rockchipes8388 [rockchip-es8388], device 0: dailink-multicodecs ES8323 HiFi-0 [dailink-multicodecs ES8323 HiFi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 1: rockchipacodec [rockchip,acodec], device 0: ff4a8000.sai-rk3506-hifi rk3506-hifi-0 [ff4a8000.sai-rk3506-hifi rk3506-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
root@ok3506 - buildroot:/# arecord -D hw:0,0 -d 5 -f cd -t wav test1.wav    // Record audio from the headphone microphone for 5 seconds and save it in WAV format
root@ok3506 - buildroot:/# aplay test1.wav   									// Play the recorded audio
root@ok3506 - buildroot:/# arecord -D hw:1,0 -d 5 -f cd -t wav test2.wav		// Record audio from the on - board microphone for 5 seconds and save it in WAV format
root@ok3506 - buildroot:/# aplay test2.wav   									// Play the recorded audio
</pre></div>
</div>
</section>
<section id="lcd-backlight-adjustment">
<h3>4.19 LCD Backlight Adjustment<a class="headerlink" href="#lcd-backlight-adjustment" title="Link to this heading"></a></h3>
<p>Backlight level range (0–255), maximum level 255, 0 indicating turn off. After connecting the mipi screen on the mipi dsi0, power up and start. Enter the system and enter the following command in the terminal to perform the backlight test.</p>
<p>1. View the current screen backlight value:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /sys/class/backlight/backlight/brightness
200                                           			//The current backlight value is 200
</pre></div>
</div>
<p>2. Backlight is off:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# echo 0 &gt; /sys/class/backlight/backlight/brightness
</pre></div>
</div>
<p>3. LCD backlight is on:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# echo 125 &gt; /sys/class/backlight/backlight/brightness
</pre></div>
</div>
</section>
<section id="can-test">
<h3>4.20 CAN Test<a class="headerlink" href="#can-test" title="Link to this heading"></a></h3>
<p>The OK3506-S/OK3506-C platform has two CAN bus interfaces, and the CAN connection method is: The H terminal of CAN is connected with the H terminal of other CAN equipment; the L terminal of CAN is connected with the L terminal of other CAN equipment, and GND is connected with GND.</p>
<p>Short circuit CAN0 and CAN1, short circuit CAN1_L and CAN0_L, CAN1_H and CAN0_H, GND_CAN1 and GND_CAN0 pins in port P25, as shown in the figure:</p>
<p><img alt="Image" src="_images/1731476692246_f0d61523_da10_4ae6_b6e5_a404c239372c.png" /></p>
<p>Execute the following command in the development board terminal:</p>
<p>1. View CAN network devices;</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ifconfig -a
can0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  
          NOARP  MTU:16  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:10 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:50 

can1      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  
          NOARP  MTU:16  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:10 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:51 
</pre></div>
</div>
<p>2. Set CAN0 and CAN1 parameters;</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ip link set can0 down
root@ok3506-buildroot:/# ip link set can1 down
root@ok3506-buildroot:/# ip link set can0 type can bitrate 1000000 sample-point 0.8 dbitrate 2000000 sample-point 0.8 fd on
root@ok3506-buildroot:/# ip link set can1 type can bitrate 1000000 sample-point 0.8 dbitrate 2000000 sample-point 0.8 fd on
</pre></div>
</div>
<p>Set the CAN0 and CAN1 baud rates to the 500000.</p>
<p>3. Open CAN0, CAN1</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# ip link set can0 up
root@ok3506-buildroot:/# echo 4096 &gt; /sys/class/net/can0/tx_queue_len
root@ok3506-buildroot:/# ip link set can1 up
root@ok3506-buildroot:/# echo 4096 &gt; /sys/class/net/can1/tx_queue_len
</pre></div>
</div>
<p>4. Client sending data; server receiving data.</p>
<p>The CAN0 device acts as a server (the server first executes the following command).</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# candump can0 &amp;
</pre></div>
</div>
<p>CAN1 device as a client (sending data from the client)</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cansend can1 1F334455#1122334455667788
can0  1F334455   [8]  11 22 33 44 55 66 77 88
</pre></div>
</div>
</section>
<section id="sqlite3-test">
<h3>4.21 SQLite3 Test<a class="headerlink" href="#sqlite3-test" title="Link to this heading"></a></h3>
<p>SQLite3 is a lightweight, ACID-compliant relational database management system with a low footprint. The OK3506-S/OK3506-C board is ported to version 3.44.2 of sqlit3.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506 - buildroot:/# sqlite3
SQLite version 3.44.2 2023 - 11 - 24 11:41:44
Enter &quot;.help&quot; for usage hints.
Connected to a transient in - memory database.
Use &quot;.open FILENAME&quot; to reopen on a persistent database.
sqlite&gt; create table tbl1 (one varchar(10), two smallint); // Create table tbl1
sqlite&gt; insert into tbl1 values(&#39;hello!&#39;,10); // Insert data &#39;hello!|10&#39; into table tbl1
sqlite&gt; insert into tbl1 values(&#39;goodbye&#39;, 20); // Insert data &#39;goodbye|20&#39; into table tbl1
sqlite&gt; select * from tbl1; // Query the contents of table tbl1
hello!|10
goodbye|20
sqlite&gt; delete from tbl1 where one = &#39;hello!&#39;; // Delete data
sqlite&gt; select * from tbl1; // Query the contents of table tbl1
goodbye|20
sqlite&gt; .quit // Exit the database (or use the .exit command)
</pre></div>
</div>
</section>
<section id="adding-boot-scripts">
<h3>4.22 Adding Boot Scripts<a class="headerlink" href="#adding-boot-scripts" title="Link to this heading"></a></h3>
<p>Temporarily add a self-starting script.</p>
<p>1. Modify/userdata/autorun.sh</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3506-buildroot:/# cat /userdata/autorun.sh
#! /bin/sh
# env

# user command

exit 0
</pre></div>
</div>
<p>2. Reboot the board to verify</p>
<p>Add the boot self-start script to the burn image:</p>
<p><font style="color:rgb(51, 51, 51);">Modify device/rockchip/common/extra-parts/userdata/normal/autorun.sh</font>.</p>
<p>Recompile the package and flash the image.</p>
</section>
<section id="uboot-menu">
<h3>4.23 Uboot Menu<a class="headerlink" href="#uboot-menu" title="Link to this heading"></a></h3>
<p>Press the space to enter the Uboot menu when the following message appears during the uboot startup process.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>Hit key to stop autoboot(&#39;Spacebar&#39;):  1
</pre></div>
</div>
<p>The number in front of each item in the menu is the corresponding operation command.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>---------------------------------------------
0:Exit to console
1:Reboot
2:Display type:mipi 
---------------------------------------------
</pre></div>
</div>
<p>Enter 0 to access the Uboot shell</p>
<p>Enter 1 to reboot the board</p>
<p>Enter 2 to modify the display mode. Display type will be displayed cyclically in the “mipi” “rgb” “none” “.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>MIPI: Display using MIPI interface, compatible with Forlinx 7 - inch capacitive touch 1024*600 MIPI screen.
RGB: Display using RGB interface, compatible with Forlinx 7 - inch capacitive touch 1024*600 LCD screen.
None: Turn off the display. 
</pre></div>
</div>
<p>After modifying through the Uboot menu, changes are automatically saved without the need for manual saving.</p>
</section>
</section>
<section id="system-flashing">
<h2>5. System Flashing<a class="headerlink" href="#system-flashing" title="Link to this heading"></a></h2>
<p>OK3506-S/OK3506-C development board currently supports the OTG flashing method. The appropriate flashing tool is provided in the user documentation.</p>
<section id="otg-system-flashing">
<h3>5.1 OTG System Flashing<a class="headerlink" href="#otg-system-flashing" title="Link to this heading"></a></h3>
<section id="otg-driver-installation">
<h4>5.1.1 OTG Driver Installation<a class="headerlink" href="#otg-driver-installation" title="Link to this heading"></a></h4>
<p>Path: User Profile \ Software Profile \ 3-Tools \ DriverAssitant _ v5.13.zip</p>
<p>Extract the above path file to any directory and run it with administrator privileges</p>
<p>Open DriverInstall.exe</p>
<p><img alt="Image" src="_images/1735267645818_f515fa0c_ce94_4d61_a5a0_664ed7c0640a.png" /></p>
<p>Click “Driver Installation”</p>
<p><img alt="Image" src="_images/1735267671413_d07d1e53_8b6f_4559_969f_0d921a473a55.png" /></p>
</section>
<section id="otg-full-burning-test">
<h4>5.1.2 OTG Full Burning Test<a class="headerlink" href="#otg-full-burning-test" title="Link to this heading"></a></h4>
<section id="rkdevtool-flashing-test">
<h5>5.1.2.1 RKDevTool Flashing Test<a class="headerlink" href="#rkdevtool-flashing-test" title="Link to this heading"></a></h5>
<p>Path: User Information \ Software Information \ 3-Tools \ \RKDevTool_v3.32_for_window.zip.</p>
<p>It is a development tool provided by Rockchip. Before use, please unzip it to a directory with an all English path. Connect the development board to the host using a Type-C cable. Press and hold the recovery key on the development board without releasing it, then press the reset key to reset the system. Release the recovery key approximately two seconds later. The Rockchip development tool will prompt the discovery of the loader device. There will be prompts on the Rockchip development tool : loader device found</p>
<p><strong>Note: The operation of the identification device is that the recovery button is pressed when the development board is powered on. Theoretically, Rockchip development tools have no requirements for the unzip directory. However, some users have feedback that the unzip directory should be in full English. If the tool doesn’t match the following figure, please consider unzipping it in an English directory.</strong></p>
<p>Open the Rockchip development tool:</p>
<p><img alt="Image" src="_images/1735267787698_646f1b57_da67_431b_b28c_ad14f616217a.png" /></p>
<p>Click the “Upgrade Firmware” tab, click the “Firmware” button to select the full upgrade image update.img.</p>
<p><img alt="Image" src="_images/1735267965892_2e0b0d71_79d8_463f_b66a_0f429fabe1a1.png" /></p>
<p>Click the “Upgrade” button to upgrade.</p>
<p><strong>Introduction to MASKROM mode</strong></p>
<p>If the loader is damaged and cannot enter the Loader mode, press and hold the red Maskrom key and then press the reset key to enter the maskrom mode for flashing.</p>
<p><img alt="Image" src="_images/1735268040103_4347a6c1_4838_4159_a130_c2190284c7e2.png" /></p>
<p>At this time, the system will prompt the discovery of a maskrom device. The flashing process is consistent with the loader mode, so it is best to use an update.img burning.</p>
<p>Note: Don’t click “Device Partition Table” in maskrom mode, it is invalid.</p>
<p>Note: A separate burn in maskrom mode will not clear the UBOOT environment variables.</p>
</section>
<section id="factory-tool-flashing-test">
<h5>5.1.2.2 Factory Tool Flashing Test<a class="headerlink" href="#factory-tool-flashing-test" title="Link to this heading"></a></h5>
<p>Factory Tool is a factory batch OTG flashing tool, which does not need to read the image and supports large file flashing. Use this tool if RKDevTool is not compatible. Before use, you need to decompress to the full English path, connect the development board to the host, press the recovery key, press the reset key to reset, and release the recovery key after two seconds. There will be prompts on the Rockchip development tool : loader device found</p>
<p>Note: The operation of the identification device is that the recovery button is pressed when the development board is powered on.</p>
<p><strong><font style="color:rgb(51, 51, 51);"></strong> Note: Theoretically, Rockchip development tools have no requirements for the unzip directory. However, some users have feedback that the unzip directory should be in full English. If the tool doesn’t match the following figure, please consider unzipping it in an English directory.</p>
<p><img alt="Image" src="_images/1720418374138_b6613de5_c4e7_4c57_ab8b_6d41d165e5c3.png" /></p>
<p>Click to select the firmware, and click to start. At this time to recognize the loader device will automatically start burning.</p>
<p><img alt="Image" src="_images/1720418374490_7567e660_737f_4218_8cfa_3b7c9be57d3e.png" /></p>
<p><img alt="Image" src="_images/1720418374807_bd102591_2c43_41da_83b9_2f7307977ca3.png" /></p>
</section>
</section>
<section id="otg-step-programming-test">
<h4>5.1.3 OTG Step Programming Test<a class="headerlink" href="#otg-step-programming-test" title="Link to this heading"></a></h4>
<p>In the development phase, it is very time-consuming to burn all of them every time, so here is the method of using OTG burning tool to burn in separate partitions.</p>
<p><strong>Note: The operation of the identification device is that the recovery button is pressed when the development board is powered on.</strong></p>
<p>First, after the compilation is complete, a separate partition image can be found in the rockdev directory.</p>
<p>Take separate flashing boot. img (including device tree and startup logo) as an example to show the flashing method.</p>
<p>Use the Type-C cable to connect the development board to the host. Press and hold the recover key and do not release it. Then press the reset key to reset the system. Release the recover key after about two seconds. The system will prompt to discover the loader device.</p>
<p>Click the “Device Partition Table” button, which will automatically read the partition address, and prompt you to update the download address, click “Yes”, will be reported to read the partition table successfully, click on the partition of the right test area to select the partition image, and check the partition.</p>
<p><img alt="Image" src="_images/1735268293437_d10c6629_d1b4_437f_9503_0f35995b4bf9.png" /></p>
<p>Clicking the “Execute” button will automatically burn and restart.</font></p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>