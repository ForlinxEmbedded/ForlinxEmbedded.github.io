

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Android14.0_User’s Compilation Manual_V1.0 &mdash; Forlinx Embedded RK3588 Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/theme-switcher.css?v=5deaee90" />

  
    <link rel="shortcut icon" href="_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/rockchip/ok3588-c/OK3588-C_Android_14_User_Compilation_Manual.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/theme-switcher.js?v=c2b021ed"></script>
      <script src="_static/logo-link.js?v=d4af6ba6"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Android 12.0_User’s Manual_V 1.3" href="OK3588-C_Android_12_User_Manual.html" />
    <link rel="prev" title="Android14.0_User’s Manual_V1.0" href="OK3588-C_Android_14_User_Manual.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">HARDWARE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_User_Hardware_Manual.html">User’s Hardware Manual_V1.3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SOFTWARE</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_Linux5_10_209_User_Manual.html">Linux5.10.209_User’s Manual_V1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_Linux5_10_209_User_Compilation_Manual.html">Linux5.10.209_User’s Compilation Manual_V1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_Forlinx_Desktop22_04_User_Manual.html">Forlinx Desktop22.04_User’s Manual_V1.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_Forlinx_Desktop22_04_User_Compilation_Manual.html">Forlinx Desktop22.04_User’s Compilation Manual_V1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_Android_14_User_Manual.html">Android14.0_User’s Manual_V1.0</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Android14.0_User’s Compilation Manual_V1.0</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#copyright-notice">Copyright Notice</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-scope">Application Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#revision-history">Revision History</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vmware-virtual-machine-software-installation">1. VMware Virtual Machine Software Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vmware-software-downloads-and-purchase"><font style="color:#000000;">1.1 VMware Software Downloads and Purchase</font></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vmware-software-installation"><font style="color:#000000;">1.2 VMware Software Installation</font></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#loading-the-existing-ubuntu-development-environment">2. Loading the Existing Ubuntu Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#new-ubuntu-development-environment-setup">3. New Ubuntu Development Environment Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ubuntu-system-setup">3.1 Ubuntu System Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ubuntu-virtual-machine-setup">3.1.1 Ubuntu Virtual Machine Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-installation">3.1.2 System Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ubuntu-basic-configuration">3.1.3 Ubuntu Basic Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtual-machine-network-settings">3.1.4 Virtual Machine Network Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation-of-the-necessary-libraries-for-android-compilation">3.2 Installation of the Necessary Libraries for Android Compilation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#android-system-compilation">4. Android System Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#software-configuration-file-path">4.1 Software Configuration File Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">4.2 Android System Compilation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#preparation-before-compilation">4.2.1 Preparation Before Compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-code-copy-and-release">4.2.2 Source Code Copy and Release</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">4.2.3 Android System Compilation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#android-application-development">5. Android Application Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-android-application-development-environment">5.1 Setting up the Android Application Development Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#jdk-java-se-development-kit-download-and-installation">5.1.1 JDK（Java SE Development Kit）Download and Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#android-studio-installation">5.1.2 Android Studio Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#helloworld-project-creation">5.1.3 Helloworld Project Creation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#apk-platform-signature">5.2 Apk Platform Signature</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre-installation-method-of-apk-in-system">5.3 Pre - installation Method of APK in System</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_Android_12_User_Manual.html">Android 12.0_User’s Manual_V 1.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3588-C_Android_12_User_Compilation_Manual.html">Android 12.0_User’s Compilation Manual_V 1.0</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">APPLICATION NOTE</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://forlinxembedded.github.io/rockchip/rk-development-manual/index.html">RK Development Manual</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Forlinx Embedded RK3588 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Android14.0_User’s Compilation Manual_V1.0</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="android14-0-users-compilation-manual-v1-0">
<h1>Android14.0_User’s Compilation Manual_V1.0<a class="headerlink" href="#android14-0-users-compilation-manual-v1-0" title="Link to this heading"></a></h1>
<p>Document classification: □ Top secret □ Secret □ Internal information ■ Open</p>
<section id="copyright-notice">
<h2>Copyright Notice<a class="headerlink" href="#copyright-notice" title="Link to this heading"></a></h2>
<p>The copyright of this manual belongs to Baoding Folinx Embedded Technology Co., Ltd. Without the written permission of our company, no organizations or individuals have the right to copy, distribute, or reproduce any part of this manual in any form, and violators will be held legally responsible.</p>
<p>Forlinx adheres to copyrights of all graphics and texts used in all publications in original or license-free forms.</p>
<p>The drivers and utilities used for the components are subject to the copyrights of the respective manufacturers. The license conditions of the respective manufacturer are to be adhered to. Related license expenses for the operating system and applications should be calculated/declared separately by the related party or its representatives.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p><font style="color:#333333;">This manual is designed to enable you to quickly understand the </font><font style="color:#333333;">compilation process</font><font style="color:#333333;">of the products and familiarize yourselves with the </font><font style="color:#333333;">compilation</font><font style="color:#333333;">methods </font><font style="color:#333333;">of</font> <font style="color:#333333;">Forlinx</font><font style="color:#333333;"> products. The application needs to be cross-compiled on an </font><font style="color:#333333;">ubuntu</font><font style="color:#333333;">host before it can run on the development board. </font>By following the methods provided in the compilation manual and performing practical operations, you will be able to successfully compile your own software code.</p>
<p>The manual will provide instructions for setting up the environment but there may be some unforeseen issues during the environment setup process. For beginners, it is recommended to use the pre-configured development environment provided by Forlinx. This will allow you to quickly get started and reduce development time.</p>
<p>Linux systems are typically installed in three ways: dual system on a real machine, single system on a real machine, and virtual machine. Different installation methods have their advantages and disadvantages. This manual only provides methods to build ubuntu in a virtual machine.</p>
<p>Hardware Requirements: It is recommended to have at least<font style="color:black;background-color:#ffffff;">16GB</font><font style="color:black;background-color:#ffffff;"> memory or above.It allows for allocating a sufficient memory to the virtual machine (recommended to allocate</font><font style="color:black;background-color:#ffffff;">10GB</font><font style="color:black;background-color:#ffffff;">or above), while still leaving enough resources for other operations on</font><font style="color:black;background-color:#ffffff;">Windows</font><font style="color:black;background-color:#ffffff;">. Insufficient memory allocation may result in slower performance on</font><font style="color:black;background-color:#ffffff;">Windows.</font></p>
<p>The manual is mainly divided into five chapters:</p>
<ul class="simple">
<li><p>Chapter 1. Virtual Machine software installation - introduction to downloading and installing Vmware software;</p></li>
<li><p>Chapter 2. provides the loading of the ubuntu system;</p></li>
<li><p>Chapter 3. Building, setting up, and installing necessary tools for the Ubuntu system and common issues in development environments;</p></li>
<li><p>Chapter 4. mainly focuses on the deployment and usage of Docker containers, kernel compilation, as well as Android-related source code;</p></li>
<li><p>Chapter 5. is the description of android application development.</p></li>
</ul>
<p>A description of some of the symbols and formats in the manual:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Format</strong></p></th>
<th class="head"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Note</strong></p></td>
<td><p>Note or information that requires special attention, be sure to read carefully</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>📚</p></td>
<td><p>Relevant notes on the test chapters</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>️️️🛤️ ️</p></td>
<td><p>Indicates the related path.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><font style="color:blue;">Blue font on gray background</font></p></td>
<td><p>Refers to commands entered at the command line(Manual input required).</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><font style="color:black;">Black font</font></p></td>
<td><p>Serial port output message after entering a command</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><strong><font style="color:black;">Bold black</font></strong></p></td>
<td><p>Key information in the serial port output message</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>//</p></td>
<td><p>Interpretation of input instructions or output information</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Username&#64;Hostname</p></td>
<td><p>forlinx &#64; ubuntu: Development environment ubuntu account information, which can be used to determine the environment in which the function operates.</p></td>
</tr>
</tbody>
</table>
<p>Example: Search the Docker-CE version:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ apt-cache madison docker-ce                   //Find Docker-CE version
docker-ce | 18.06.3~ce~3-0~ubuntu | http://mirrors.aliyun.com/docker-ce/linux/ubuntu/trusty/stable amd64 Packages
</pre></div>
</div>
<ul class="simple">
<li><p>forlinx&#64;ubuntu: the username is forlinx and the hostname is ubuntu, indicating that the user forlinx is used on the development environment ubuntu for operations;</p></li>
<li><p>//：Explanation of the instruction, no input required;</p></li>
<li><p>apt-cache madison docker-ce：Blue font on a gray background, indicating the relevant commands that need to be manually entered;</p></li>
<li><p><strong><font style="color:black;">docker-ce | 18.06.3</font></strong><sub><strong><font style="color:black;">ce</font></strong></sub><strong><font style="color:black;">3-0~ubuntu </font></strong>: The black font with gray background is the output information after the input command, and the bold font is the key information.</p></li>
</ul>
</section>
<section id="application-scope">
<h2>Application Scope<a class="headerlink" href="#application-scope" title="Link to this heading"></a></h2>
<p>This manual is mainly applicable to the Android14.0 operating system on the Forlinx OK3588-C platform. Other platforms can also refer to it, but there will be differences between different platforms. Please make modifications according to the actual conditions.</p>
</section>
<section id="revision-history">
<h2>Revision History<a class="headerlink" href="#revision-history" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Date</strong></p></th>
<th class="head text-center"><p><strong>Manual Version</strong></p></th>
<th class="head"><p><strong>Revision History</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>2025.09.01</p></td>
<td class="text-center"><p>V1.0</p></td>
<td><p>OK3588-C_Android14.0_User’s Compilation Manual Initial Version</p></td>
</tr>
</tbody>
</table>
</section>
<section id="vmware-virtual-machine-software-installation">
<h2>1. VMware Virtual Machine Software Installation<a class="headerlink" href="#vmware-virtual-machine-software-installation" title="Link to this heading"></a></h2>
<p><font style="color:#000000;">This chapter mainly introduces the installation of VMware virtual machine, and takes VMware workstation 16 Pro v16.2.3 as an example to show the installation and configuration process of the operating system.</font></p>
<section id="vmware-software-downloads-and-purchase">
<h3><font style="color:#000000;">1.1 VMware Software Downloads and Purchase</font><a class="headerlink" href="#vmware-software-downloads-and-purchase" title="Link to this heading"></a></h3>
<p>Go to the VMware website https://www.vmware.com/cn.html to download Workstation Pro and get the product key. VMware is a paid software that requires purchasing, or you can choose to use a trial version.</p>
<p><img alt="Image" src="_images/1718948545093_9dfd51bc_1a99_41bc_99b3_053234377703.png" /></p>
<p><font style="color:#000000;">After the download is complete, double-click the startup file to start the installer.</font></p>
</section>
<section id="vmware-software-installation">
<h3><font style="color:#000000;">1.2 VMware Software Installation</font><a class="headerlink" href="#vmware-software-installation" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">Double-click the startup program to enter the installation wizard, and click on “Next”.</font></p>
<p><img alt="Image" src="_images/1718948545321_a8938217_413f_4f39_8728_e0bb2f11d936.png" /></p>
<p><font style="color:#000000;">Check I accept the terms in the license agreement and click “Next”.</font></p>
<p><img alt="Image" src="_images/1718948545093_9dfd51bc_1a99_41bc_99b3_053234377703_1.png" /></p>
<p><font style="color:#000000;">Modify the installation location to the partition of your computer where the software is installed, and click “Next”.</font></p>
<p><img alt="Image" src="_images/1718948545912_32ece1c4_38bb_4496_a961_be28f2b192f4.png" /></p>
<p><font style="color:#000000;">Uncheck and click on “Next”.</font></p>
<p><img alt="Image" src="_images/1718948546191_989f0fb8_4b86_4527_ba8a_035475471f42.png" /></p>
<p><font style="color:#000000;">Check Add Shortcut and click “Next”.</font></p>
<p><img alt="Image" src="_images/1718948546475_ae0e753a_3dfb_4551_8267_7e2f830ce5c1.png" /></p>
<p><font style="color:#000000;">Click “Install”.</font></p>
<p><img alt="Image" src="_images/1718948546913_f2399faf_3dc1_4bcd_bc17_072f0e314be5.png" /></p>
<p><font style="color:#000000;">Wait for the installation to complete.</font></p>
<p><img alt="Image" src="_images/1718948546913_f2399faf_3dc1_4bcd_bc17_072f0e314be5.png" /></p>
<p><font style="color:#000000;">Click “Finish” to try it out. If users need to use it for a long time, they need to buy it from the official and fill in the license.</font></p>
<p><img alt="Image" src="_images/1718948547140_943cc6ed_c801_4dd3_9a0b_649bf99ce7cb.png" /></p>
</section>
</section>
<section id="loading-the-existing-ubuntu-development-environment">
<h2>2. Loading the Existing Ubuntu Development Environment<a class="headerlink" href="#loading-the-existing-ubuntu-development-environment" title="Link to this heading"></a></h2>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>It is recommended for beginners to directly use the pre-built virtual machine environment provided by Forlinx, which already includes installed cross-compiler and Qt environment. After understanding this chapter, you can directly jump to the compilation chapter for further study;</strong></p></li>
<li><p><strong>The development environment provided for general users is: forlinx (username), forlinx (password);</strong></p></li>
<li><p><strong>Please ask your sales representative for the download link.</strong></p></li>
</ul>
<p>There are two ways to use a virtual machine environment in VMware: one is to directly load an existing environment, and the other is to create a new environment. Let’s first talk about how to load an existing environment.</p>
<p>First, download the development environment provided by Forlinx. In the development environment documentation, there should be an MD5 checksum file. After downloading the development environment, you should verify the integrity of the compressed package using the MD5 checksum. (You can use an on-line MD5 checksum tool or download a specific MD5 checksum tool for this purpose). To check if the checksum in the verification file matches the checksum of the file itself. If they match, the file download is successful. If they don’t match, it suggests that the file may be corrupt, and you should consider downloading it again.</p>
<p><img alt="Image" src="_images/1718948550732_b0ad6ff0_1657_4c0b_8551_ef5345c5c093.png" /></p>
<p>Select all compressed files, right-click and extract to the current folder or your own directory:</p>
<p><img alt="Image" src="_images/1718948550929_05258903_2f86_4eb2_8161_73f85bc48237.png" /></p>
<p>After the extraction is complete, you will obtain the development environment OK3588-VM16.2.3-ubuntu20.04.</p>
<p>The file “3588 development environment.vmx” in the OK3588-VM16.2.3-ubuntu20.04 folder is the file that you need to open to access the virtual machine.</p>
<p>Open the installed virtual machine.</p>
<p><img alt="Image" src="_images/1718948551186_78129138_2117_434c_9ae3_b561afd8aedb.png" /></p>
<p>Navigate to the directory where the recently extracted OK3588-VM16.2.3-ubuntu20.04 virtual machine file is located, and double-click on the startup file to open it.</p>
<p><img alt="Image" src="_images/1718948551405_0730c09a_c36a_4e68_b187_6ec418d05eca.png" /></p>
<p>Turn on this virtual machine after loading is complete to run it and enter the system’s interface.</p>
<p><img alt="Image" src="_images/1718948551605_a94211f2_1285_4ecc_9a4d_d43152b574a8.png" /></p>
<p>The default login account for automatic login in the development environment is “forlinx”.</p>
<p><img alt="Image" src="_images/1718948551892_df5d5e75_8ee6_4487_8740_9ab0415003c9.png" /></p>
</section>
<section id="new-ubuntu-development-environment-setup">
<h2>3. New Ubuntu Development Environment Setup<a class="headerlink" href="#new-ubuntu-development-environment-setup" title="Link to this heading"></a></h2>
<p><strong>Note: Beginners are not recommended to set up a system on their own. It is recommended to use an existing virtual machine environment. If you do not need to set up the environment, you can skip this section.</strong></p>
<p><strong>This chapter mainly explains the building process of Ubuntu system.</strong></p>
<section id="ubuntu-system-setup">
<h3>3.1 Ubuntu System Setup<a class="headerlink" href="#ubuntu-system-setup" title="Link to this heading"></a></h3>
<section id="ubuntu-virtual-machine-setup">
<h4>3.1.1 Ubuntu Virtual Machine Setup<a class="headerlink" href="#ubuntu-virtual-machine-setup" title="Link to this heading"></a></h4>
<p>Step 1: Open the VMware software and click [File]/ [New Virtual Machine]. Enter the following interface</p>
<p><img alt="Image" src="_images/1718948557881_bf708ddf_4635_4d44_bddb_4e6ee048ccda.png" /></p>
<p>Step 2: Select Custom and click “Next”.</p>
<p><img alt="Image" src="_images/1718948558086_a3cc9a3f_e24e_4638_bfae_215772d6dee8.png" /></p>
<p>Select the compatibility with the corresponding version of VMware, which can be found in Help-&gt;About VMware Workstation, and click “Next”.</p>
<p><img alt="Image" src="_images/1718948558261_9926dd9b_2063_45e4_962c_53ddd58f4545.png" /></p>
<p>Select Install the operating system later and click “Next”.</p>
<p><img alt="Image" src="_images/1718948558474_60cdcb0c_a58d_4701_a9e9_f47f57fc96f6.png" /></p>
<p>Keep the default settings and click “Next”.</p>
<p><img alt="Image" src="_images/1718948558651_6ca43874_078f_4ffa_bbc6_6dded8ec796a.png" /></p>
<p>Modify the name and installation location of your virtual machine, and click “Next”.</p>
<p><img alt="Image" src="_images/1718948558907_86549cf9_bfa6_4420_9236_555456013b4f.png" /></p>
<p>Configure the number of CPU based on your computer’s actual specifications.</p>
<p><img alt="Image" src="_images/1718948559153_c05ea6ce_e22e_4c6f_8172_3b1309704eb9.png" /></p>
<p>The memory size is also set according to the actual situation, and 32g is recommended for Android 14 compilation.</p>
<p><img alt="Image" src="_images/1718948559336_54b5e834_b27f_4d7b_b855_a534a87ed45a.png" /></p>
<p>Set the network type, default to NAT mode then click “Next”. Keep the default values for the remaining steps until you reach the step to specify the disk capacity.</p>
<p><img alt="Image" src="_images/1718948559534_7164f982_b61d_4bf1_879c_b66baa06e287.png" /></p>
<p>The default selection for the IO controller type here is LSI</p>
<p><img alt="Image" src="_images/1718948559715_6334de6e_e394_4a9f_b0fe_24eff3f73d46.png" /></p>
<p>The default selection here is also SCSI.</p>
<p><img alt="Image" src="_images/1718948559891_50108085_5316_4e45_b257_349fdee11cf2.png" /></p>
<p>Choose to create a new virtual disk here.</p>
<p><img alt="Image" src="_images/1718948560078_080f6b13_f306_4c35_94f6_0fbe879c9a00.png" /></p>
<p>Set the disk size to 500G, select the disk provisioning format, and then click “Next”.</p>
<p><img alt="Image" src="_images/1718948560319_b9944e6e_19be_4b1e_81a9_537e0f57ba08.png" /></p>
<p>Specify the disk file, the default one here is fine.</p>
<p><img alt="Image" src="_images/1718948560495_155c1f47_6244_4630_abbc_bfbfcc24ce7f.png" /></p>
<p>Click “Finish” by default.</p>
<p><img alt="Image" src="_images/1718948560717_1721904f_d97e_4f6a_aabd_0c462446af69.png" /></p>
<p>The virtual machine creation is now complete.</p>
<p>In the next section, we will introduce the installation of Ubuntu system in the virtual machine, which is similar to the installation method in the real machine. Here we describe the method of installing Ubuntu system in a virtual machine.</p>
</section>
<section id="system-installation">
<h4>3.1.2 System Installation<a class="headerlink" href="#system-installation" title="Link to this heading"></a></h4>
<p>In the previous section, we have created a virtual machine, but we haven’t installed the operating system yet, so the virtual machine cannot be started. Next, install the Ubuntu operating system in the newly created virtual machine.</p>
<p>Step 1: Go to the Ubuntu official website to obtain the Ubuntu20.04 64. The download address is:</p>
<p><a class="reference external" href="https://old-releases.ubuntu.com/releases/20.04.3/">https://old-releases.ubuntu.com/releases/20.04.3/</a></p>
<p>Because the source code is compiled and verified on the 20.04, select and install it. These operations may vary slightly between Ubuntu system versions.</p>
<p>Download “ubuntu-20.04.3-desktop-amd64.iso”</p>
<p><img alt="Image" src="_images/1718948560905_6e03158d_9008_4aa1_8d57_88d858267a33.png" /></p>
<p>After downloading the mirror image, you can proceed with the system installation operation.</p>
<p>Right-click on the created virtual machine name and select “Settings” from the pop-up menu.</p>
<p><img alt="Image" src="_images/1718948561135_b4afd6e5_7b4a_474e_9038_9a3782698f4f.png" /></p>
<p>The “Virtual Machine Settings” menu will pop up.</p>
<p><img alt="Image" src="_images/1718948561409_2794c64a_b0ee_4974_8358_5e7262fa4826.png" /></p>
<p>Click on CD/DVD (SATA), select “Use ISO image file,” browse and choose the previously downloaded Ubuntu image, then click “OK” to confirm.</p>
<p><img alt="Image" src="_images/1718948561614_0cb88dd3_caa2_4de9_b8c4_0fe6b3cd51d2.png" /></p>
<p>After setting up the image, ensure that the network is available. Then, start the virtual machine and proceed with the installation of the Ubuntu image.</p>
<p><img alt="Image" src="_images/1718948561827_18b5e8f2_8f95_4e23_99db_b57f83dcdffa.png" /></p>
<p>After starting the virtual machine, wait for the installation interface to appear as shown below.</p>
<p><img alt="Image" src="_images/1718948562058_73d10201_e76e_4dde_b9f6_dce958518eaf.png" /></p>
<p>After selecting the language on the left side as shown in the image, click “Install Ubuntu”, and the language selection interface will pop up. The default language of Ubuntu is English, but of course, you can also choose Others.</p>
<p><img alt="Image" src="_images/1718948562248_f2b8d3fe_26bf_49c7_93d3_f2b7ec605a7a.png" /></p>
<p>The default selected language can also be reset at a later stage, after the selection is complete continue.</p>
<p><img alt="Image" src="_images/1718948562447_e4af3607_9e21_42e4_9748_484b1f77646f.png" /></p>
<p>Next, select “Continue” as the default option to proceed with the installation. The installation process might be slow. Then, click “Continue” again.</p>
<p><img alt="Image" src="_images/1718948562639_f53fa9c6_7cab_4a0a_94df_d258431986e9.png" /></p>
<p>By default, when you click on “Install Now”, a dialog box will appear as shown in the image. Simply click “Continue” to proceed.</p>
<p><img alt="Image" src="_images/1718948562843_36141fa1_34eb_4474_94ba_2c4bc801e5ba.png" /></p>
<p>Next, select the timezone. You can either click on the Shanghai timezone or enter “Shanghai” (or choose the appropriate timezone based on your location). Then, click “Continue” to proceed.</p>
<p>Finally, set your username and password. You can choose either automatic login or login with a username and password. Click “Continue” to start the automatic installation.</p>
<p><img alt="Image" src="_images/1718948563096_f829e292_e91d_4feb_9181_a3b5d00594cf.png" /></p>
<p>If the internet connection is poor, you can Skip without affecting the installation process.</p>
<p><img alt="Image" src="_images/1718948563438_497b3c2d_04e3_406f_9b69_4ac67fddf5d1.png" /></p>
<p>Click “Restart Now”  to reboot.</p>
<p><img alt="Image" src="_images/1718948563746_c0b4fa3c_b545_4ee7_a02e_a07756a13c53.png" /></p>
<p><img alt="Image" src="_images/1718948564045_db7ddaad_404e_4dd1_923a_d44121347b23.png" /></p>
<p>The system interface after the reboot is complete.</p>
<p><img alt="Image" src="_images/1718948564312_58bdec72_3b40_4fb9_81d9_827839eb9d0b.png" /></p>
<p>The ubuntu system installation is complete.</p>
</section>
<section id="ubuntu-basic-configuration">
<h4>3.1.3 Ubuntu Basic Configuration<a class="headerlink" href="#ubuntu-basic-configuration" title="Link to this heading"></a></h4>
<p>After installing the Ubuntu20.04 operating system, there are a few configurations to make.</p>
<p>VMware Tools Installation:</p>
<p>Next, install VMware Tools. Without installing this tool, you won’t be able to copy and paste and drag file between the Windows host and the virtual machine. First click on “Virtual Machine” on the VMware navigation bar, then click “Install VMware Tools” in the drop-down box.</p>
<p><img alt="Image" src="_images/1718948564622_9cc5d329_9b59_4caa_9b50_a9ca8d3567f9.png" /></p>
<p>Once done, enter Ubuntu and the VMware Tools CD will appear on your desktop and click into it.</p>
<p><img alt="Image" src="_images/1718948564828_c95a8738_342d_48cf_aa0d_2ce9f0688ce1.png" /></p>
<p>Enter and see a compressed file VMwareTools-10.3.10-12406962.tar.gz (it may be different for different VM versions); copy the file under the home directory (i.e. the directory with the home personal username)</p>
<p><img alt="Image" src="_images/1718948565047_f7eb41f4_04f9_44cf_83d4_9ae26e6c0727.png" /></p>
<p>Press [Ctrl+Alt+T] to bring up the Terminal Command Interface and enter the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>tar<span class="w"> </span>xvf<span class="w"> </span>VMwareTools-10.3.10-12406962.tar.gz
</pre></div>
</div>
<p><img alt="Image" src="_images/1718948565286_1ef6065e_3d24_4e5f_8897_873d80375ae1.png" /></p>
<p>After the extraction is complete, a file named “vmware-tools-distrib” will appear.</p>
<p><img alt="Image" src="_images/1718948565577_9b5c7d23_ba69_4450_ae68_7c64bbc7fb63.png" /></p>
<p>Go back to the terminal and type cd vmware-tools-distrib to enter the directory.</p>
<p>Enter: sudo ./images/OK3588-C_Android_14_User_Compilation_Manual/vmware-install.pl followed by pressing Enter. Then, enter your password and the installation process will begin. When prompted, you can input “yes” and press Enter to proceed. For any other inquiries, simply press Enter to go with the default installation settings.</p>
<p><img alt="Image" src="_images/1718948565768_0d4f434b_99f4_4fa1_8626_6f88a32aa91a.png" /></p>
<p>Once the VMware tools is complete, we can implement file copy and paste between Windows and Ubuntu.</p>
<p>The virtual machine is displayed full screen:</p>
<p>If the virtual machine is not able to be displayed in full screen, you can resolve this issue by clicking on “View” and selecting “Autofit Guest.” This will adjust the display to fit the screen automatically, enabling you to have a full-screen experience in the virtual machine.</p>
<p><img alt="Image" src="_images/1718948565963_6aadd47e_76b8_4541_91fd_27310afed0e3.png" /></p>
<p>Make most of the system settings in the location shown. A lot of the setup requirements on Ubuntu can be done here.</p>
<p><img alt="Image" src="_images/1718948566192_9b3cc384_6683_448d_8b69_1d46a054caf7.png" /></p>
<p>Virtual machine hibernation settings:</p>
<p>Also, the default hibernation is 5min, if you don’t want to set hibernation, just set it to Never by setting Power-&gt;Blank screen.</p>
<p><img alt="Image" src="_images/1718948566454_b4fe4dc1_abf2_45b9_b36d_96835a98ba1c.png" /></p>
</section>
<section id="virtual-machine-network-settings">
<h4>3.1.4 Virtual Machine Network Settings<a class="headerlink" href="#virtual-machine-network-settings" title="Link to this heading"></a></h4>
<section id="nat-connection">
<h5>3.1.4.1 NAT Connection<a class="headerlink" href="#nat-connection" title="Link to this heading"></a></h5>
<p>By default, after the virtual machine is installed, the network connection method is set to NAT, which shares the host machine’s IP address. This configuration does not need to be changed when performing tasks like installing dependencies or compiling code.</p>
<p>When the VMware virtual NIC is set to NAT mode in a virtual machine, the network in the Ubuntu environment can be set to dynamic IP. In this mode the virtual NAT device and the host NIC are connected to communicate for Internet access. This is the most common way to access the external network.</p>
<p><img alt="Image" src="_images/1718948566750_83c42de6_a1a6_45e1_800c_1d7a628c5826.png" /></p>
</section>
<section id="bridge-connection">
<h5>3.1.4.2 Bridge Connection<a class="headerlink" href="#bridge-connection" title="Link to this heading"></a></h5>
<p>When the VMware virtual NIC device is in bridge mode, the host NIC and the virtual machine NIC communicate through the virtual bridge, and the network IP and the host need to be set in the same network segment in the Ubuntu environment. If accessing an external network, you need to set the DNS to be consistent with the host NIC. If TFTP, SFTP and other servers are used, the network contact mode of the virtual machine needs to be set as the bridge mode.</p>
<p><img alt="Image" src="_images/1718948566942_a5dee5ef_e480_446b_a0b5_ec244a4a9d8c.png" /></p>
</section>
</section>
</section>
<section id="installation-of-the-necessary-libraries-for-android-compilation">
<h3>3.2 Installation of the Necessary Libraries for Android Compilation<a class="headerlink" href="#installation-of-the-necessary-libraries-for-android-compilation" title="Link to this heading"></a></h3>
<p><strong>Note: If you use the development environment provided by us, this section can be skipped directly.</strong></p>
<p>Android compilation requires the installation of several toolkits. Make sure that your computer or virtual machine can be connected to the Internet normally before the operation in this section. If the network is disconnected during the installation, please follow the following steps to install.</p>
<ol class="arabic simple">
<li><p>Install and compile the necessary packages for Android.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>software-properties-common
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>add-apt-repository<span class="w"> </span>ppa:openjdk-r/ppa
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>uuid<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>uuid-dev<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>zlib1g-dev<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>liblz-dev<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>liblzo2-2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>liblzo2-dev<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>lzop<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>git<span class="w"> </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>u-boot-tools<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>mtd-utils<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>android-sdk-libsparse-utils<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>openjdk-8-jdk<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>device-tree-compiler<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>gdisk<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>m4<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>make<span class="w"> </span>bc<span class="w"> </span>fakeroot<span class="w"> </span>unzip<span class="w"> </span>zip<span class="w"> </span>gawk<span class="w"> </span>busybox<span class="w"> </span>libstdc++6<span class="w"> </span>lib32stdc++6<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>bison<span class="w"> </span>flex<span class="w"> </span>python<span class="w"> </span>libssl-dev<span class="w"> </span>cpio<span class="w"> </span>lz4<span class="w"> </span>rsync
</pre></div>
</div>
<p>The following libraries also need to be installed when using the Network Configuration Tool and menuconfig:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w">                           </span>//Update<span class="w"> </span>the<span class="w"> </span>download<span class="w"> </span><span class="nb">source</span><span class="w"> </span>information
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libncurses*<span class="w">              </span>//For<span class="w"> </span>building<span class="w"> </span>text-based<span class="w"> </span>user<span class="w"> </span>interfaces
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>net-tools<span class="w">                </span>//Network<span class="w"> </span>configuration<span class="w"> </span>tool
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Switch to the JDK version</p></li>
</ol>
<p>If you have previously installed another version of the JDK, you will need to switch versions.</p>
<p>To view the installed version:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$<span class="w"> </span>update-java-alternatives<span class="w"> </span>-l
</pre></div>
</div>
<p><img alt="Image" src="_images/1718948567133_412cc33e_dd69_4c60_8a0e_745e504cf5a5.png" /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>update-alternatives<span class="w"> </span>--config<span class="w"> </span>java
</pre></div>
</div>
<p><img alt="Image" src="_images/1718948567350_9c68b1d9_c5b7_4f82_b1a3_1d872d448cf9.png" /></p>
<p>Enter the option corresponding to java8 and press Enter to confirm.</p>
</section>
</section>
<section id="android-system-compilation">
<h2>4. Android System Compilation<a class="headerlink" href="#android-system-compilation" title="Link to this heading"></a></h2>
<p>Users can access the documentation and source code of the software and hardware through the web link provided by our company.</p>
<p>The compilation process needs to be carried out in the docker container. The program should be modified outside the docker as far as possible. The vim command in the docker is not very convenient to use.</p>
<section id="software-configuration-file-path">
<h3>4.1 Software Configuration File Path<a class="headerlink" href="#software-configuration-file-path" title="Link to this heading"></a></h3>
<p>OK3588-C platform, the software configuration file path is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Document type</strong></p></th>
<th class="head"><p><strong>path</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>Kernel configuration file</p></td>
<td><p>kernel/configs/OK3588-C-Android.config</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Device tree file</p></td>
<td><p>arch/arm64/boot/dts/rockchip/FET3588.dtsi   arch/arm64/boot/dts/rockchip/OK3588-C-Common.dtsi   arch/arm64/boot/dts/rockchip/OK3588-C-Camera.dtsi   arch/arm64/boot/dts/rockchip/OK3588-C-Android.dts</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>android</p></td>
<td><p>device/rockchip/rk3588/ok3588_c/</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id1">
<h3>4.2 Android System Compilation<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<section id="preparation-before-compilation">
<h4>4.2.1 Preparation Before Compilation<a class="headerlink" href="#preparation-before-compilation" title="Link to this heading"></a></h4>
<p>Please confirm the size of the swap partition of the current system. If the swap partition is insufficient, the compilation of the Android source code will fail. 32G is recommended. It is recommended to adjust the development environment memory to 16G.</p>
<p>1. View the swap partition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$<span class="w"> </span>cat<span class="w">  </span>/proc/swaps
</pre></div>
</div>
<p>The virtual machine provided by Forlinx has been configured with the swap partition by default. If you use other virtual machines, you can increase the size of the swap partition by creating a swap file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>swapoff<span class="w"> </span>/swapfile
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>fallocate<span class="w"> </span>-l<span class="w"> </span>32G<span class="w"> </span>/swapfile
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/swapfile
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>mkswap<span class="w"> </span>/swapfile
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>swapon<span class="w"> </span>/swapfile
forlinx@ubuntu:~$<span class="w"> </span>sudo<span class="w"> </span>vim<span class="w"> </span>/etc/fstab
</pre></div>
</div>
<p>Adding the following at the end of the/etc/fstab file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/swapfile<span class="w"> </span>none<span class="w"> </span>swap<span class="w"> </span>sw<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p>2. It is recommended to adjust the memory of the development environment to 16G. Low memory may cause the compilation to fail.</p>
<p><img alt="Image" src="_images/1718948574809_2e6c95da_4b96_42a9_b331_10cea2161e7d.png" /></p>
<p>The source code package of the Android 14 system is placed in the data in the form of a volume compression package. Copy all the compression packages to the/home/forlinx/work/directory of the development environment, which is described below.</p>
</section>
<section id="source-code-copy-and-release">
<h4>4.2.2 Source Code Copy and Release<a class="headerlink" href="#source-code-copy-and-release" title="Link to this heading"></a></h4>
<p>Source Code Path: Software\ 2-Image and Source \ 1-Source Code</p>
<p>The source code in the data is a volume compression package, which needs to be merged first, and then decompressed and released.</p>
<ol class="arabic simple">
<li><p>Copy all source code compressed packages to the/home/forlinx/work directory of the development environment, and perform MD5 verification.</p></li>
</ol>
<p>You can directly drag the source code package on the computer to the folder on the desktop of the virtual machine, or use the shared folder to use the command copy. Here we focus on the use of the shared folder.</p>
<p>There are many kinds of file transfers between ubuntu and Windows hosts. After installing VMware Tools, you can set up a virtual machine shared folder to mount the file directory of the Windows host to ubuntu for file sharing.</p>
<p>Click “Virtual Machine” on the menu bar and select “Settings”.</p>
<p><img alt="Image" src="_images/1718948575021_2620975b_90cb_401c_859a_0e075730c818.png" /></p>
<p>Click “Options”, enable “Shared Folders”, set the shared directory on the Windows host, and click “OK”.</p>
<p><img alt="Image" src="_images/1718948575253_85157bd2_ec8d_4580_8b2e_9ee03380e1a9.png" /></p>
<p>After the file-sharing setup of the virtual machine is complete, place the source zip in the shared folder of the Windows host, here we name it “share”.</p>
<p>Shared folder in ubuntu in the mount directory /mnt/hgfs/share.</p>
<p>Copy the source code from the shared folder to ubuntu’s /home/forlinx/work directory for md5 checksum:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ cp /mnt/hgfs/share/OK3588-android14-source* /home/forlinx/work/      
forlinx@ubuntu:~$ cd /home/forlinx/work
forlinx@ubuntu:~/work$ md5sum OK3588-android14-source*
</pre></div>
</div>
<p>If the returned MD5 check code is consistent with the check code in the data, the source code can be merged.</p>
<ol class="arabic simple" start="2">
<li><p>Merge and unpack Android source code.</p></li>
</ol>
<p>First, merge the archives into a single archive:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work$ cat OK3588-android14-source.tar.bz2.* &gt; OK3588-android14-source.tar.bz2
</pre></div>
</div>
<p>Decompress the combined compressed package</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work$ tar xvf OK3588-android14-source.tar.bz2
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Modify source code file group.</p></li>
</ol>
<p>View the current account ID. This example takes the development environment forlinx account provided by Forlinx as an example.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/$ id
uid=1000(forlinx) gid=1000(forlinx) groups=1000(forlinx),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),108(lpadmin),124
(sambashare)
</pre></div>
</div>
<p>Modify source code file group.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/$ sudo chown 1000:1000 -R OK3588-android14-source
forlinx@ubuntu:~/work/$ ls -l
drwxr-xr-x 4 forlinx forlinx        4096  4月 19 10:50 OK3588-android14-source
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Add the Java runtime environment variable at the end of the.bashrc environment variable file in the user’s home directory:</p></li>
</ol>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ vim /home/forlinx/.bashrc
</pre></div>
</div>
<p>The additions are as follows:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>export _JAVA_OPTIONS=&quot;-Xms64m -Xmx2g&quot;
export MAVEN_OPTS=&quot;-Xms5120m -Xmx5120m&quot;
</pre></div>
</div>
<p>Note: The development environment we provide modifies the.bashrc file as a hidden file, which can be viewed with the ls -a command and modified with the vim command.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ source ~/.bashrc
</pre></div>
</div>
</section>
<section id="id2">
<h4>4.2.3 Android System Compilation<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<p>The android system compilation part of OK3588 platform supports full and partial compilation. All contents will be automatically compiled and packaged into an image that can be directly used for flashing. Part of the compilation is mainly used in the product development phase to compile the Linux kernel device tree or android system.</p>
<p>1. Enter docker environment</p>
<p>To compile this system, you need to switch to the forlinx account</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@4d199700bc75:/# su forlinx
forlinx@4d199700bc75:/$
</pre></div>
</div>
<p>2. Full compilation</p>
<p>Enter the longan directory and execute the following command:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@4d199700bc75:/$ cd /home/forlinx/work/OK3588-android14-source/
forlinx@4d199700bc75:~/OK3588-android14-source/$ source build/envsetup.sh;lunch ok3588_c-userdebug
forlinx@4d199700bc75:~/OK3588-android14-source/$ ./images/OK3588-C_Android_14_User_Compilation_Manual/build.sh -KAuop
</pre></div>
</div>
<p>Because the android system is too large, the compilation time is slightly longer. Please wait patiently for the compilation to be completed. The compiled image is located in the rockdev/Image-ok3588_c/directory. The image file is a update. img</p>
<p>3. Compile the kernel separately</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@4d199700bc75:/$ cd /home/forlinx/work/OK3588-android14-source/
forlinx@4d199700bc75:~/OK3588-android14-source/$ source build/envsetup.sh;lunch ok3588_c-userdebug
forlinx@4d199700bc75:~/OK3588-android14-source/$ ./images/OK3588-C_Android_14_User_Compilation_Manual/build.sh -Ku
</pre></div>
</div>
<p>The compiled boot. img is /out/target/product/ok3588_c$.</p>
</section>
</section>
</section>
<section id="android-application-development">
<h2>5. Android Application Development<a class="headerlink" href="#android-application-development" title="Link to this heading"></a></h2>
<p>This chapter explains how to set up the Android application development environment, including downloading and installing the Android SDK and Android Studio integrated development environment, as well as using the OK3588 development board for on-device debugging. It is highly suitable for Android beginners to learn from and refer to.</p>
<section id="setting-up-the-android-application-development-environment">
<h3>5.1 Setting up the Android Application Development Environment<a class="headerlink" href="#setting-up-the-android-application-development-environment" title="Link to this heading"></a></h3>
<section id="jdk-java-se-development-kit-download-and-installation">
<h4>5.1.1 JDK（Java SE Development Kit）Download and Installation<a class="headerlink" href="#jdk-java-se-development-kit-download-and-installation" title="Link to this heading"></a></h4>
<p>Since the Android application code is written in Java, you need to install the JDK on Windows first. The JDK can be downloaded as follows:</p>
<p>It is recommended to install Java 8, visit the website <a class="reference external" href="https://www.oracle.com/java/technologies/downloads">https://www.oracle.com/java/technologies/downloads</a>, and select the Windows x64 version of Java 8 in the page. You can also directly visit the website <a class="reference external" href="https://www.oracle.com/java/technologies/downloads/#java8-windows">https://www.oracle.com/java/technologies/downloads/#java8-windows</a> to enter the download page.</p>
<p><img alt="Image" src="_images/1718948582611_6f4ec5ad_d1dd_41c7_a5a3_501af900752a.png" /></p>
<p>Accept the agreement and proceed with the download.</p>
<p><img alt="Image" src="_images/1718948582902_63d904bc_7040_4b76_881a_5d31c8398ac3.png" /></p>
<p>Currently, download JDK from the official Oracle website requires registration for an Oracle account. You may also choose alternative download methods.</p>
<p>After the download is completed, double-click the installer to complete the installation according to the wizard’s prompts.</p>
<p>After the installation is complete, you need to add the JDK command to the Path environment variable. Use the following method to add the path of the JDK command to the Path environment variable:</p>
<ol class="arabic simple">
<li><p>Right-click on “My Computer” -&gt; Properties, then select the “Advanced system settings” option on the left navigation.</p></li>
<li><p>Click the “Environment Variables” option in the lower right corner.</p></li>
<li><p>In “System Variables”, find the Path environment variable, and double-click it; according to the actual installation path to set the java environment variable; the default installation adds the following content “C:\Program Files\Java\jdk1.8.0_211\bin” (depending on the customer’s actual installation path).</p></li>
<li><p>Click “OK” to complete the environment variable settings.</p></li>
</ol>
<p>The following is a screenshot of the win7 system:</p>
<p><img alt="Image" src="_images/1718948583119_8a2fe105_af4f_47e9_b00e_fd5ad79ab321.png" /></p>
<p><img alt="Image" src="_images/1718948583326_dfa375b4_106b_41d2_899d_050d28e61753.png" /></p>
<p>The following is a screenshot of the win10 system:</p>
<p><img alt="Image" src="_images/1718948583552_08df0653_3c4f_4351_915a_8b6caf1af6c8.png" /></p>
<p><img alt="Image" src="_images/1718948583772_8cff969a_88fb_4eec_b2cd_aa70ba58df5a.png" /></p>
<ol class="arabic simple" start="5">
<li><p>Check that the installation was successful.</p></li>
</ol>
<p>After completing the above settings, restart the computer, open the command prompt tool in the DOS window of the computer, and enter:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>javac<span class="w"> </span>-version
</pre></div>
</div>
<p><img alt="Image" src="_images/1718948583993_8adb117c_a468_4a0b_a527_2be49055cb95.png" /></p>
<p>The correct display of the Java version indicates a successful installation.</p>
</section>
<section id="android-studio-installation">
<h4>5.1.2 Android Studio Installation<a class="headerlink" href="#android-studio-installation" title="Link to this heading"></a></h4>
<p>Android Studio is a new development tool for Android launched by Google at I/O 2013. Please visit http://www.android-studio.org/ww.android-studio.org to download. It is recommended to download version 3.5.2.</p>
<p><img alt="Image" src="_images/1718948584195_ab7ea8fd_78ff_42c6_be79_0a1ad3a92f84.png" /></p>
<p>After downloading, follow the prompts to install it. When the installation is complete, the following figure appears:</p>
<p><img alt="Image" src="_images/1718948584513_90b1a4e6_f502_4c46_b745_73650892bbcb.png" /></p>
<p>Select “Do not import settings “:</p>
<p><img alt="Image" src="_images/1718948584712_2d71f708_7bc5_4889_b1b8_a3d663364b0e.png" /></p>
<p>Select “Cancel “:</p>
<p><img alt="Image" src="_images/1718948584951_0ed6797c_efe4_4b0c_94ea_b1df944f8386.png" /></p>
<p>Click “Next” to go to the next step:</p>
<p><img alt="Image" src="_images/1718948585186_509f50d1_8ed7_4670_9ed0_a3bcbcb5465d.png" /></p>
<p>Select “custom” here:</p>
<p><img alt="Image" src="_images/1718948585402_861b5b20_9309_4813_bf4d_7cf8007f261f.png" /></p>
<p>Choose a UI theme based on your personal preference:</p>
<p><img alt="Image" src="_images/1718948585661_057124d7_8242_4388_81f4_e220f1e144f4.png" /></p>
<p>Select the installation path of Android SDK according to the actual situation:</p>
<p><img alt="Image" src="_images/1718948585864_49669f8a_caba_4c0c_8808_3d4d5a5ebd52.png" /></p>
<p>Select the memory size for the emulator:</p>
<p><img alt="Image" src="_images/1718948586052_4ba843fc_2083_4273_b3c1_915a012fc7e2.png" /></p>
<p>Click “Finish”.</p>
<p><img alt="Image" src="_images/1718948586400_a78b7c9f_cf97_45d4_a052_066f8efb8a41.png" /></p>
<p>When the installation is complete, click“Finish”.</p>
</section>
<section id="helloworld-project-creation">
<h4>5.1.3 Helloworld Project Creation<a class="headerlink" href="#helloworld-project-creation" title="Link to this heading"></a></h4>
<ol class="arabic simple">
<li><p>Select “start a new android studio project”：</p></li>
</ol>
<p><img alt="Image" src="_images/1718948586698_3732ed46_d7f8_4d79_9e2a_c34d5dafe3b2.png" /></p>
<ol class="arabic simple" start="2">
<li><p>Choose “Empty Activity”:</p></li>
</ol>
<p>Click “Next” to modify the project name and select the minimum supported android version:</p>
<p><img alt="Image" src="_images/1718948587142_715898f0_4813_4651_bc32_9dbc2d5449b4.png" /></p>
<p>Click “Finish”.</p>
<p><img alt="Image" src="_images/1718948587335_41f4a149_2660_4a15_9b7b_d936729b190c.png" /></p>
<p>Tools such as Gradle will be downloaded for the first use, so please be patient.</p>
<ol class="arabic simple" start="3">
<li><p>Installl android 14.0 SDK</p></li>
</ol>
<p>Click “File”-&gt; “settings” to search SDK and open the interface as shown in the figure below:</p>
<p><img alt="Image" src="_images/1756801277243_0e6463b1_1761_4ec8_8a2f_eb4e88512f41.png" /></p>
<p>Check “Android API 34” and click “OK” to install.</p>
<p><img alt="Image" src="_images/1718948587843_6238498e_379c_4b79_8231_4f388d67da02.png" /></p>
<p>4. Modify “build. Gradle” “:</p>
<p>Modify all 32 in the file to 34, and press Ctrl + s to save the modified file.</p>
<p><img alt="Image" src="_images/1718948588079_60aacc2f_b3c4_45f9_94d4_8f4cdec5974c.png" /></p>
<ol class="arabic simple" start="5">
<li><p>Compilation</p></li>
</ol>
<p><img alt="Image" src="_images/1718948588354_d3b996bd_a60a_48be_8982_b6e2b029778e.png" /></p>
<p>Click “build”-&gt; “Make Project” to recompile.</p>
<ol class="arabic simple" start="6">
<li><p>Run</p></li>
</ol>
<p>After compiling, link the OTG cable to the USB port of your PC and click the green triangle icon in the menu bar.</p>
<p><img alt="Image" src="_images/1718948588649_d50c64b6_cf0f_447d_8f5c_4b9d8160802d.png" /></p>
<p><img alt="Image" src="_images/1718948588919_30a0549d_2330_4329_982d_e148a5b086ed.png" /></p>
</section>
</section>
<section id="apk-platform-signature">
<h3>5.2 Apk Platform Signature<a class="headerlink" href="#apk-platform-signature" title="Link to this heading"></a></h3>
<p>Note: If there is no OpenSSL command in your windows system, please go to<a class="reference external" href="http://slproweb.com/products/Win32OpenSSL.html">http://slproweb.com/products/Win32OpenSSL.html</a> to down load and install it, and set environment variables.</p>
<p>In the Android platform, SELinux divides apps into three types, including untrusted_app which has no platform signature and system privileges, platform_app which has platform signature and no system privileges, and system_app which has platform signature and system privileges. This chapter will introduce how to sign the apk and obtain system permissions.</p>
<ol class="arabic simple">
<li><p>Make signature document.</p></li>
</ol>
<p>Copy build/target/product/security/platform.x509.pem and build/target/product/security/platform.pk8 in Android system to windows.</p>
<p>Open a command line window to execute:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openssl<span class="w"> </span>pkcs8<span class="w"> </span>-in<span class="w"> </span>platform.pk8<span class="w"> </span>-inform<span class="w"> </span>DER<span class="w"> </span>-outform<span class="w"> </span>PEM<span class="w"> </span>-out<span class="w"> </span>shared.priv.pem<span class="w"> </span>–nocrypt
openssl<span class="w"> </span>pkcs12<span class="w"> </span>-export<span class="w"> </span>-in<span class="w"> </span>platform.x509.pem<span class="w"> </span>-inkey<span class="w"> </span>shared.priv.pem<span class="w"> </span>-out<span class="w"> </span>shared.pk12<span class="w"> </span>-name<span class="w"> </span>androiddebugkey
</pre></div>
</div>
<p>Enter password: android</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>keytool<span class="w"> </span>-importkeystore<span class="w"> </span>-deststorepass<span class="w"> </span>android<span class="w"> </span>-destkeypass<span class="w"> </span>android<span class="w"> </span>-destkeystore<span class="w"> </span>debug.keystore<span class="w"> </span>-srckeystore<span class="w"> </span>shared.pk12<span class="w"> </span>-srcstoretype<span class="w"> </span>PKCS12<span class="w"> </span>-srcstorepass<span class="w"> </span>android<span class="w"> </span>-alias<span class="w"> </span>androiddebugkey
</pre></div>
</div>
<p>The key-alias and password can be modified to other contents as required. Save the signature file debug. keystore files to your usual directory.</p>
<ol class="arabic simple" start="2">
<li><p>Set andorid studio</p></li>
</ol>
<p>Open any android studio project and add the shared UID in the AndroidManifest.xml, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;manifest<span class="w"> </span>xmlns:android<span class="o">=</span><span class="s2">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<span class="w">    </span><span class="nv">package</span><span class="o">=</span><span class="s2">&quot;com.example.forlinx.helloworld&quot;</span>
android:sharedUserId<span class="o">=</span><span class="s2">&quot;android.uid.system&quot;</span>&gt;
</pre></div>
</div>
<p>Click “File”-&gt;“project structure”:</p>
<p><img alt="Image" src="_images/1718948589137_bad4b3b6_84de_4a2d_9325_e2cf9c6eb817.png" /></p>
<p><img alt="Image" src="_images/1718948589345_4d3f3932_29d0_467a_abd9_804f9ccccb1d.png" /></p>
<p>Click “OK”.</p>
<p>To add the signature configuration for the debug and release versions, click “Build”in the Android Studio menu bar and “Edit Build Type…”.</p>
<p><img alt="Image" src="_images/1718948589537_c9c1a980_f795_4b64_a59f_794b82f7c997.png" /></p>
<p><img alt="Image" src="_images/1718948589799_4ccc5a8d_775a_40a7_a1a6_9c1a2d1442c2.png" /></p>
<p><img alt="Image" src="_images/1718948590074_e933ce81_efb5_4df3_9dfc_ef6c52cf3e7b.png" /></p>
<p>Click “OK” when the modification is completed.</p>
<p>Click the run button “” of android studio to <img alt="Image" src="_images/1718948590265_8244c674_804b_41c8_8afd_60cf9d268109.png" /> start the app. Enter in the serial port:</p>
<p>ps –AZ</p>
<p><img alt="Image" src="_images/1718948590452_aa7095d5_6885_459a_9d4a_8d7f368a6904.png" /></p>
<p>Confirm whether your app has become system _ app.</p>
<p>If the app prints the following error when running:</p>
<p><img alt="Image" src="_images/1718948590687_a118cc80_b7a6_48fb_9eff_76e31db29af8.png" /></p>
<p>Solution: Uninstall the APP in the system, restart the board, and reinstall and run it.</p>
</section>
<section id="pre-installation-method-of-apk-in-system">
<h3>5.3 Pre - installation Method of APK in System<a class="headerlink" href="#pre-installation-method-of-apk-in-system" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Create a new directory in Android system:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OK3588-android14-source$<span class="w"> </span>mkdir<span class="w"> </span>packages/apps/helloworld
</pre></div>
</div>
<p>Copy the apk that needs to be pre-installed (no signature is required) to the directory. Take the helloworld.apk as an example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OK3588-android14-source$<span class="w"> </span>cp<span class="w"> </span>helloworld.apk<span class="w"> </span>packages/apps/helloworld
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Create a new Android. mk at packages/apps/helloworld</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OK3588-android14-source<span class="nv">$vi</span><span class="w"> </span>packages/apps/helloworld/Android.mk
</pre></div>
</div>
<p>Add the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">    </span>LOCAL_PATH<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="k">$(</span>call<span class="w"> </span>my-dir<span class="k">)</span>
<span class="w">    </span>include<span class="w"> </span><span class="k">$(</span>CLEAR_VARS<span class="k">)</span>
<span class="w">    </span>LOCAL_MODULE<span class="w"> </span>:<span class="o">=</span><span class="w"> </span>helloworld
<span class="w">    </span>LOCAL_SRC_FILES<span class="w"> </span>:<span class="o">=</span><span class="w"> </span>helloworld.apk
<span class="w">    </span>LOCAL_MODULE_CLASS<span class="w"> </span>:<span class="o">=</span><span class="w"> </span>APPS
<span class="w">    </span>LOCAL_MODULE_SUFFIX<span class="w"> </span>:<span class="o">=</span><span class="w"> </span>.apk
<span class="w">    </span>LOCAL_BUILT_MODULE_STEM<span class="w"> </span>:<span class="o">=</span><span class="w"> </span>package.apk
<span class="w">    </span>LOCAL_CERTIFICATE<span class="w"> </span>:<span class="o">=</span><span class="w"> </span>platform
<span class="w">    </span>LOCAL_DEX_PREOPT<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="w">    </span>LOCAL_PRIVILEGED_MODULE<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="nb">true</span>
<span class="w">    </span>include<span class="w"> </span><span class="k">$(</span>BUILD_PREBUILT<span class="k">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><font style="color:#000000;">Modify at the same time device/rockchip/rk3588/ok3588_c/ok3588_c.mk</font></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OK3588-android14-source$<span class="w"> </span>vi<span class="w"> </span>device/rockchip/rk3588/ok3588_c/ok3588_c.mk
</pre></div>
</div>
<p>Add the followings:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PRODUCT_PACKAGES</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="se">\</span>
helloworld
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Recompile the image</p></li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>