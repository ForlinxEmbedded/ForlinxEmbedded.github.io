

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RK Series Development Boards - Customized File System Partition Sizes &mdash; Forlinx Embedded RK Development Manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/theme-switcher.css?v=a3c71d8a" />

  
    <link rel="shortcut icon" href="../_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/rockchip/rk-development-manual/Product_Design_Process/RK_Series_Development_Boards-Customized_File_System_Partition_Sizes.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/theme-switcher.js?v=099e080c"></script>
      <script src="../_static/logo-link.js?v=d4af6ba6"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Interface Category" href="../Interfaces/index.html" />
    <link rel="prev" title="Product Design Process" href="index.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">RK Development Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Common_Commands/index.html">Common Commands</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Product Design Process</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">RK Series Development Boards - Customized File System Partition Sizes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#copyright">Copyright</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#revision-history">Revision History</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements-background">Requirements Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="#explanation-of-the-partition-table">1. Explanation of the Partition Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modification-of-the-partition-table"><strong>2. Modification of the Partition Table</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fix-the-size-of-the-userdata-partition-and-allocate-all-the-remaining-space-to-the-root-partition">2.1 Fix the size of the userdata partition and allocate all the remaining space to the root partition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-a-new-partition">2.2 Add a new partition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete-the-oem-and-userdata-partitions">2.3 Delete the oem and userdata partitions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Interfaces/index.html">Interface Category</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Buildroot_System/index.html">Buildroot System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Forlinx_Desktop_System/index.html">Forlinx Desktop System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Android_OS/index.html">Android OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Debian_OS/index.html">Debian OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../General_Platform_Skills_Knowledge/index.html">General Platform Skills Knowledge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Forlinx Embedded RK Development Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Product Design Process</a></li>
      <li class="breadcrumb-item active">RK Series Development Boards - Customized File System Partition Sizes</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rk-series-development-boards-customized-file-system-partition-sizes">
<h1>RK Series Development Boards - Customized File System Partition Sizes<a class="headerlink" href="#rk-series-development-boards-customized-file-system-partition-sizes" title="Link to this heading"></a></h1>
<p>Document classification: □ Top secret □ Secret □ Internal information ■ Open</p>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Link to this heading"></a></h2>
<p>The copyright of this manual belongs to Baoding Folinx Embedded Technology Co., Ltd. Without the written permission of our company, no organizations or individuals have the right to copy, distribute, or reproduce any part of this manual in any form, and violators will be held legally responsible.</p>
<p>Forlinx adheres to copyrights of all graphics and texts used in all publications in original or license-free forms.</p>
<p>The drivers and utilities used for the components are subject to the copyrights of the respective manufacturers. The license conditions of the respective manufacturer are to be adhered to. Related license expenses for the operating system and applications should be calculated/declared separately by the related party or its representatives.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This article describes the methods for using the partition table of Forlinx’s RK series products, including modifying partition sizes, adding new partitions, deleting partitions, etc.</p>
</section>
<section id="revision-history">
<h2>Revision History<a class="headerlink" href="#revision-history" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Date</strong></p></th>
<th class="head"><p><strong>Manual Version</strong></p></th>
<th class="head"><p><strong>Revision History</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31/10/2025</p></td>
<td><p>V1.0</p></td>
<td><p>Initial Version</p></td>
</tr>
</tbody>
</table>
</section>
<section id="requirements-background">
<h2>Requirements Background<a class="headerlink" href="#requirements-background" title="Link to this heading"></a></h2>
<p>In the current source code, the root directory has a fixed size, and the remaining space is automatically allocated to the userdata partition. To meet the needs, such as allocating all the memory to the root directory and adding custom partitions, a comprehensive method for modifying the partition table is uniformly provided to facilitate you to make adjustments according to your own requirements.</p>
</section>
<section id="explanation-of-the-partition-table">
<h2>1. Explanation of the Partition Table<a class="headerlink" href="#explanation-of-the-partition-table" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Taking the 3562 partitions as an example:</p></li>
</ul>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OK3562-linux-source$ vi device/forlinx/.chips/ok3562/parameter-buildroot-fit.txt
[……]
CMDLINE: mtdparts=:0x00002000@0x00004000(uboot),0x00002000@0x00006000(misc),0x00020000@0x00008000(boot),0x00040000@0x00028000(recovery),0x00010000@0x00068000(backup),0x00c00000@0x00078000(rootfs),0x00040000@0x00c78000(oem),0x00002000@0x00cb8000(amp),-@0x00cba000(userdata:grow)
[……]
</pre></div>
</div>
<p>&#64; On the left is the partition size, and on the right is the start address in emmc:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Partition Name</p></th>
<th class="head text-center"><p>Initial Address</p></th>
<th class="head text-center"><p>Partition size:</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>uboot</p></td>
<td class="text-center"><p>0x00004000</p></td>
<td class="text-center"><p>0x00002000</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>misc</p></td>
<td class="text-center"><p>0x00006000</p></td>
<td class="text-center"><p>0x00002000</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>boot</p></td>
<td class="text-center"><p>0x00008000</p></td>
<td class="text-center"><p>0x00020000</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>recovery</p></td>
<td class="text-center"><p>0x00028000</p></td>
<td class="text-center"><p>0x00040000</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>backup</p></td>
<td class="text-center"><p>0x00068000</p></td>
<td class="text-center"><p>0x00010000</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>rootfs</p></td>
<td class="text-center"><p>0x00078000</p></td>
<td class="text-center"><p>0x00c00000</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>oem</p></td>
<td class="text-center"><p>0x00c78000</p></td>
<td class="text-center"><p>0x00040000</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>amp</p></td>
<td class="text-center"><p>0x00CB8000</p></td>
<td class="text-center"><p>0x00002000</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>userdata</p></td>
<td class="text-center"><p>0x00CBA000</p></td>
<td class="text-center"><p>Remaining total</p></td>
</tr>
</tbody>
</table>
<p>Taking the first two partitions as an example, the starting address of the uboot partition is 0x00004000, and the partition size is 0x00002000. Therefore, the starting address of the second partition, misc, is the starting address of the uboot partition plus its partition size: 0x00004000 + 0x00002000 = 0x00006000.</p>
<p>The partition size in the partition table is in hexadecimal format, while the partition size displayed on the development board after actual flashing is in decimal format, so corresponding conversion is required.</p>
</section>
<section id="modification-of-the-partition-table">
<h2><strong>2. Modification of the Partition Table</strong><a class="headerlink" href="#modification-of-the-partition-table" title="Link to this heading"></a></h2>
<p>Note: Write “:grow” in the parentheses of the last partition!</p>
<section id="fix-the-size-of-the-userdata-partition-and-allocate-all-the-remaining-space-to-the-root-partition">
<h3>2.1 Fix the size of the userdata partition and allocate all the remaining space to the root partition<a class="headerlink" href="#fix-the-size-of-the-userdata-partition-and-allocate-all-the-remaining-space-to-the-root-partition" title="Link to this heading"></a></h3>
<p>In the current partition table, the order is rootfs, oem, amp, and userdata. Since userdata is the last partition, all the remaining space will be allocated to it. If you want to allocate the remaining space to the rootfs, you can move the rootfs to the end.</p>
<p>Here, taking the example of fixing the userdata partition to 2G and moving the rootfs to the end:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[……]
CMDLINE: mtdparts=:0x00002000@0x00004000(uboot),0x00002000@0x00006000(misc),0x00020000@0x00008000(boot),0x00040000@0x00028000(recovery),0x00010000@0x00068000(backup),0x00040000@0x00078000(oem),0x00002000@0x000b8000(amp),0x00200000@0x000ba000(userdata),-@0x002ba000(rootfs:grow)
[……]
</pre></div>
</div>
<p>After modifying and saving the partition table, perform a full compilation:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu: ~/work/OK3562-linux-source$ ./build.sh all
</pre></div>
</div>
<p>Flash the device using the update.img image generated by the compilation.</p>
</section>
<section id="add-a-new-partition">
<h3>2.2 Add a new partition<a class="headerlink" href="#add-a-new-partition" title="Link to this heading"></a></h3>
<p>Here, taking the example of adding a test partition in 3562. By default, the test partition is placed before the userdata partition:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[……]
// 添加test分区： 0x00100000@0x00cba000(test)，修改userdata分区： -@0x00dba000(userdata:grow)
CMDLINE: mtdparts=:0x00002000@0x00004000(uboot),0x00002000@0x00006000(misc),0x00020000@0x00008000(boot),0x00040000@0x00028000(recovery),0x00010000@0x00068000(backup),0x00c00000@0x00078000(rootfs),0x00040000@0x00c78000(oem),0x00002000@0x00cb8000(amp),0x00100000@0x00cba000(test),-@0x00dba000(userdata:grow)
[……]
</pre></div>
</div>
<p>After modifying and saving the partition table, perform a full compilation:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu: ~/work/OK3562-linux-source$ ./build.sh all
</pre></div>
</div>
<p>Flash the device using the update.img image generated by the compilation.</p>
</section>
<section id="delete-the-oem-and-userdata-partitions">
<h3>2.3 Delete the oem and userdata partitions<a class="headerlink" href="#delete-the-oem-and-userdata-partitions" title="Link to this heading"></a></h3>
<p>If you need to delete the last few partitions, in addition to modifying the partition table, you also need to modify the contents of the rootfs image.</p>
<ol class="arabic simple">
<li><p>Modify the partition table to delete the last few partitions:</p></li>
</ol>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[……]
CMDLINE: mtdparts=:0x00002000@0x00004000(uboot),0x00002000@0x00006000(misc),0x00020000@0x00008000(boot),0x00040000@0x00028000(recovery),0x00010000@0x00068000(backup),-@0x00078000(rootfs:grow)
[……]
</pre></div>
</div>
<p>After modifying and saving the partition table, perform a full compilation:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu: ~/work/OK3562-linux-source$ ./build.sh all
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Mount and modify the contents of the rootfs.img:</p></li>
</ol>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~/work/OK3562-linux-source$ cd rockdev
forlinx@ubuntu:~/work/OK3562-linux-source/rockdev$ mkdir rootfs
forlinx@ubuntu:~/work/OK3562-linux-source/rockdev$ sudo mount board-rootfs.ext4 rootfs
[sudo] forlinx password： forlinx			// Enter the password, no display
forlinx@ubuntu:~/work/OK3562-linux-source/rockdev$ sudo vi rootfs/etc/fstab 
block out：
PARTLABEL=oem   /oem    ext4    defaults        0 2
PARTLABEL=userdata      /userdata       ext4    defaults        0 2

forlinx@ubuntu:~/work/OK3562-linux-source/rockdev$ sudo umount rootfs
forlinx@ubuntu:~/work/OK3562-linux-source/rockdev$ rm -rf rootfs/
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Repackage the image to generate update.img:</p></li>
</ol>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu: ~/work/OK3562-linux-source$ ./build.sh updateimg
</pre></div>
</div>
<p>Verify after flashing with the newly generated image.</p>
</section>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>