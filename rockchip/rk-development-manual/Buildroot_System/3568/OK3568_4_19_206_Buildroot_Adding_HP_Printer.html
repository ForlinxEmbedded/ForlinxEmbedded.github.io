

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OK3568 4.19.206 Buildroot Adding HP Printer &mdash; Forlinx Embedded RK Development Manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../_static/theme-switcher.css?v=a3c71d8a" />

  
    <link rel="shortcut icon" href="../../_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/rockchip/rk-development-manual/Buildroot_System/3568/OK3568_4_19_206_Buildroot_Adding_HP_Printer.html" />
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="../../_static/theme-switcher.js?v=099e080c"></script>
      <script src="../../_static/logo-link.js?v=d4af6ba6"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="OK3568 4.19.206 Implementing Logo Animation Effects" href="OK3568_4_19_206_Implementing_Logo_Animation_Effects.html" />
    <link rel="prev" title="OK3568 4.19.206 Implementing Support for NFS Services" href="OK3568_4_19_206_Implementing_Support_for_NFS_Services.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">RK Development Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Common_Commands/index.html">Common Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Product_Design_Process/index.html">Product Design Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Interfaces/index.html">Interface Category</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Buildroot System</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../3399/index.html">3399</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3506/index.html">3506</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3562/index.html">3562</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">3568</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Installing_Bridge_Tool_bridge-utils_in_Buildroot.html">OK3568 4.19.206 Buildroot Installing Bridge Tool (bridge-utils) in Buildroot</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Controlling_GPIO_Pins_via_Sysfs_in_C_Language.html">OK3568 4.19.206 Buildroot Controlling GPIO Pins via Sysfs in C Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Debugging_with_GDB_and_GDB_Server.html">OK3568 4.19.206 Buildroot Debugging with GDB and GDB Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_JDK_Support.html">OK3568 4.19.206 Buildroot JDK_Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Not_Effective_After_Menuconfig_Configuration.html">OK3568 4.19.206 Buildroot  Not Effective After Menuconfig Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_PCIe_to_SATA_Function_Modification_Method.html">OK3568 4.19.206 Buildroot PCIe to SATA Function Modification Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_PWM_Multiplexing_Method_and_Test.html">OK3568 4.19.206 Buildroot PWM PWM Multiplexing Method and Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Qt-creator_Remote_Debug.html">OK3568 4.19.206 Buildroot Qt-creator Remote Debug</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_UART8_Multiplexed_as_CAN2.html">OK3568 4.19.206 Buildroot UART8 Multiplexed as CAN2</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Multiplexing_UART8_Bluetooth_Serial_Port_as_a_General_Serial_Port.html">OK3568 4.19.206 Buildroot Multiplexing UART8 Bluetooth Serial Port as a General Serial Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Disabling_the_Watchdog_in_Uboot.html">OK3568 4.19.206 Buildroot Disabling the Watchdog in Uboot</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_USB_Host_to_Slave_Switching.html">OK3568 4.19.206 Buildroot USB Host-to-Slave Switching</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_USB_to_Ethernet_Adapter_Renaming_Method.html">OK3568 4.19.206 Buildroot USB-to-Ethernet Adapter Renaming Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Weston_Desktop_Reference_Link.html">OK3568 4.19.206 Buildroot  Weston Desktop Reference Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_WIFI_Renaming_Operation_Method.html">OK3568 4.19.206 Buildroot WIFI Renaming Operation Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Configuring_Static_IP_for_WiFi_and_Enabling_Automatic_Connection_on_Startup.html">OK3568 4.19.206 Buildroot Configuring Static IP for Wi-Fi and Enabling Automatic Connection on Startup</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_WiFi_Auto_Start_Script.html">OK3568 4.19.206 Buildroot  WiFi Auto-Start Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3588_4_19_206_Buildroot_Nginx_Installation.html">OK3588 4.19.206 Buildroot Nginx Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Package_Recompilation.html">OK3568 4.19.206 Buildroot Package Recompilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Memory_View_and_Capacity_Storage.html">OK3568 4.19.206 Memory View and Capacity Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Kernel_Configuration_View.html">OK3568 4.19.206 Buildroot Kernel Configuration View</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Issue_of_Incorrect_MAC_Address_Reply_When_PC_Pings_Device.html">OK3568 4.19.206 Buildroot Issue of Incorrect MAC Address Reply When PC Pings Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Fixed_Resolution_Output.html">OK3568 4.19.206 Buildroot Fixed Resolution Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Fixed_USB_to_Network_Port_or_Serial_Port_Name.html">OK3568 4.19.206 Buildroot Fixed USB to Network Port or Serial Port Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Compatibility_Method_for_32_bit_Applications.html">OK3568 4.19.206 Compatibility Method for 32-bit Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Python3_Installation.html">OK3568 4.19.206 Python3 Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Tool_Command_Line_for_Recording_Mouse_Actions.html">OK3568 4.19.206 Tool Command Line for Recording Mouse Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Command_Line_Control_of_GPIO_Pins.html">OK3568 4.19.206 Buildroot Command Line Control of GPIO Pins</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Package_Configuration_Fails_to_Apply.html">OK3568 4.19.206 Buildroot Package Configuration Fails to Apply</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Auto_start_Applications_on_Boot.html">OK3568 4.19.206 Buildroot Auto-start Applications on Boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Add_an_Auto_start_Script.html">OK3568 4.19.206 Add an Auto-start Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Command_Line_Control_of_GPIO_Pins.html">OK3568 4.19.206 Buildroot Command Line Control of GPIO Pins</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Non_effective_Configuration_Packages.html">OK3568 4.19.206 Non-effective Configuration Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Serial_Port_Automatic_Login_Cancellation.html">OK3568 4.19.206 Buildroot Serial Port Automatic Login Cancellation</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Removing_Desktop_Forlinx_App_Launcher_String.html">OK3568 4.19.206 Buildroot Removing Desktop Forlinx App Launcher String</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Removing_Desktop_Forlinx_Icon.html">OK3568 4.19.206 Buildroot Removing Desktop Forlinx Icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Delayline_Parameter_Scanning_and_Modification.html">OK3568 4.19.206 Buildroot Delayline Parameter Scanning and Modification</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Implementing_Support_for_NFS_Services.html">OK3568 4.19.206 Implementing Support for NFS Services</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OK3568 4.19.206 Buildroot Adding HP Printer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#copyright">Copyright</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-hp-printer">Adding HP Printer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Implementing_Logo_Animation_Effects.html">OK3568 4.19.206 Implementing Logo Animation Effects</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Adding_mysql8_0_32.html">OK3568 4.19.206 Adding mysql8.0.32</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Adding_PCIe_to_NIC_Driver_81111H.html">OK3568 4.19.206 Buildroot Adding PCIe-to-NIC Driver 81111H</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Adding_the_Python3_pip_Installation_Package.html"><strong>OK3568 4.19.206 Buildroot Adding the Python3 - pip Installation Package</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Adding_User_Programs.html">OK3568 4.19.206 Buildroot Adding User Programs</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_4_19_206_Buildroot_Webcam_Stream_Pull_then_Push_to_Virtual%20Machine.html">OK3568 4.19.206 Buildroot Webcam Stream: Pull then Push to Virtual Machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="OK3568_5_10_160_Buildroot_New_Partition_Addition.html">OK3568 5.10.160 Buildroot New Partition Addition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../3576/index.html">3576</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3588/index.html">3588</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Forlinx_Desktop_System/index.html">Forlinx Desktop System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Android_OS/index.html">Android OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Debian_OS/index.html">Debian OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../General_Platform_Skills_Knowledge/index.html">General Platform Skills Knowledge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Forlinx Embedded RK Development Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Buildroot System</a></li>
          <li class="breadcrumb-item"><a href="index.html">3568</a></li>
      <li class="breadcrumb-item active">OK3568 4.19.206 Buildroot Adding HP Printer</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ok3568-4-19-206-buildroot-adding-hp-printer">
<h1>OK3568 4.19.206 Buildroot Adding HP Printer<a class="headerlink" href="#ok3568-4-19-206-buildroot-adding-hp-printer" title="Link to this heading"></a></h1>
<p>Document classification: □ Top secret □ Secret □ Internal information ■ Open</p>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Link to this heading"></a></h2>
<p>The copyright of this manual belongs to Baoding Folinx Embedded Technology Co., Ltd. Without the written permission of our company, no organizations or individuals have the right to copy, distribute, or reproduce any part of this manual in any form, and violators will be held legally responsible.</p>
<p>Forlinx adheres to copyrights of all graphics and texts used in all publications in original or license-free forms.</p>
<p>The drivers and utilities used for the components are subject to the copyrights of the respective manufacturers. The license conditions of the respective manufacturer are to be adhered to. Related license expenses for the operating system and applications should be calculated/declared separately by the related party or its representatives.</p>
</section>
<section id="adding-hp-printer">
<h2>Adding HP Printer<a class="headerlink" href="#adding-hp-printer" title="Link to this heading"></a></h2>
<p><strong>Buildroot Configuration of the File System</strong></p>
<p>Configure cups, cpus_filter, hplip, ghostscript, ghostscript - fonts, and poppler in Buildroot.</p>
<p>Re - compile to generate the file system and burn it to the development board.</p>
<p>Run tests on the development board.</p>
<p>After the system starts, you need to modify the /etc/cups/cups - files.conf file; otherwise, the cups service cannot start.</p>
<p># Comment out the 19th line SystemGroup lpadmin sys system root.</p>
<p># Change FileDevice No to Yes.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>#************************Omit some information************************
# Administrator user group, used to match @SYSTEM in cupsd.conf policy rules...
# This cannot contain the Group value for security reasons...
#SystemGroup lpadmin sys system root

# User that is substituted for unauthenticated (remote) root accesses...
#RemoteRoot remroot

# Do we allow file: device URIs other than to /dev/null?
FileDevice Yes

# Permissions for configuration and log files...
#ConfigFilePerm 0640
#LogFilePerm 0644

# Location of the file logging all access to the scheduler; may be the name
# &quot;syslog&quot;. If not an absolute path, the value of ServerRoot is used as the
# root directory.  Also see the &quot;AccessLogLevel&quot; directive in cupsd.conf.
AccessLog /var/log/cups/access_log

# Location of cache files used by the scheduler...
#CacheDir /var/cache/cups
</pre></div>
</div>
<p>After the modification, execute the commands in the command line.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[root@ok3568:/]# /etc/init.d/cups start
cups: started scheduler.
[root@ok3568:/]# lpinfo -v
network socket
network beh
network http
network ipp
network lpd
direct usb://HP/LaserJet%20Professional%20P1108?serial=000000000QND2C2CPR1a
[root@ok3568:/]# lpadmin -p p1108 -E -v usb://HP/LaserJet%20Professional%20P1108?serial=000000000QND2C2CPR1a -P /etc/cups/ppd/HP_LaserJet_Professional_P1108.ppd
lpadmin: Printer drivers are deprecated and will stop working in a future version of CUPS.
[root@ok3568:/]# lpoptions -d p1108
copies=1 device-uri=usb://HP/LaserJet%20Professional%20P1108?serial=000000000QND2C2CPR1a finishings=3 job-cancel-after=10800 job-hold-until=no-hold job-priority=50 job-sheets=none,none marker-change-time=0 number-up=1 printer-commands=none printer-info=p1108 printer-is-accepting-jobs=true printer-is-shared=true printer-is-temporary=false printer-location printer-make-and-model=&#39;HP LaserJet Professional p1108, hpcups 3.20.3, requires proprietary plugin&#39; printer-state=3 printer-state-change-time=1722826243 printer-state-reasons=none printer-type=36876 printer-uri-supported=ipp://localhost/printers/p1108
[root@ok3568:/]# lp /home/test.pdf
request id is p1108-1 (1 file(s))
//After executing the LP command, as long as the PPD file is correct, the printer should act. If the printer does not act, the PPD file is incorrect.
//See the problem description &quot;Obtaining PPD files from the virtual machine Ubuntu&quot; for the method of obtaining PPD files.
</pre></div>
</div>
<p><strong>Encountered Problems</strong></p>
<p><strong>Printer Not Working</strong></p>
<p>The cups service can start normally.</p>
<p>The device information can be queried using lpinfo -v.</p>
<p>When configuring the default printer, use the ppd files in the /usr/share/ppd/HP/ directory.</p>
<p>When using the lp command to print a file, there is printing information in the command line, but the printer does not work.</p>
<p>Running hplip - 3.20.6 - plugin.run reports an error.</p>
<p>Describe the error when running the .run file and the solution. However, even after the installation was completed, the ppd file for the corresponding printer model was not obtained. This process is recorded for future reference.</p>
<p>All hplip - plugin file download websites: <a class="reference external" href="http://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/">http://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/</a><br />
The hplip version configured through Buildroot is 3.20.6, so download the corresponding version directly from the plugin download website.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[root@ok3568:/]# wget https://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/hplip-3.20.6-plugin.run
[root@ok3568:/]# wget https://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/hplip-3.20.6-plugin.run.asc
[root@ok3568:/]# chmod +x hplip-3.20.6-plugin.run*
[root@ok3568:/]# ./hplip-3.20.6-plugin.run
Uncompressing HPLIP 3.20.6 Plugin Self Extracting Archive..............................................................
Plug-in version: 3.20.6
Installed HPLIP version: 3.20.6
You must agree to the license terms before installing the plug-in:
*************************Omit some information************************
Do you accept the license terms for the plug-in (y=yes*, n=no, q=quit) ? y
Traceback (most recent call last):
  File &quot;./plugin_install.py&quot;, line 75, in &lt;module&gt;
    import class_plugin
  File &quot;/tmp/selfgz87811537/class_plugin.py&quot;, line 186, in &lt;module&gt;
    distro_name = get_distro_name().lower()
  File &quot;/tmp/selfgz87811537/class_plugin.py&quot;, line 65, in get_distro_name
    os_name = platform.dist()[0]
AttributeError: module &#39;platform&#39; has no attribute &#39;dist&#39;
</pre></div>
</div>
<p>Running it directly reports an error, so use the –keep parameter to obtain the plugin installation source files for modification.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[root@ok3568:/]# ./hplip-3.20.6-plugin.run --keep
Uncompressing HPLIP 3.20.6 Plugin Self Extracting Archive..............................................................
Plug-in version: 3.20.6
Installed HPLIP version: 3.20.6
You must agree to the license terms before installing the plug-in:
*************************Omit some information************************
Do you accept the license terms for the plug-in (y=yes*, n=no, q=quit) ? y
Traceback (most recent call last):
  File &quot;./plugin_install.py&quot;, line 75, in &lt;module&gt;
    import class_plugin
  File &quot;/tmp/selfgz87811537/class_plugin.py&quot;, line 186, in &lt;module&gt;
    distro_name = get_distro_name().lower()
  File &quot;/tmp/selfgz87811537/class_plugin.py&quot;, line 65, in get_distro_name
    os_name = platform.dist()[0]
AttributeError: module &#39;platform&#39; has no attribute &#39;dist&#39;
</pre></div>
</div>
<p>There are still errors, but using the –keep parameter will generate a plugin_tmp folder in the current directory, which is the installation package of the .run file.</p>
<ol class="arabic simple">
<li><p>AttributeError: module “platform” has no attribute ‘dist’</p></li>
</ol>
<p>The usage of platform.dist()[0] was deprecated after Python 3.5. In later versions, platform.system()[0] should be used instead.</p>
<p>The Python version configured on the 3568 through Buildroot is Python 3.8.</p>
<p>Open the plugin_tmp/class_plugin.py file and modify platform.dist to platform.system.</p>
<p>Re - execute the installation.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[root@ok3568:/plugin_tmp]# ./hplip-plugin-install
Plug-in version: 3.20.6
Installed HPLIP version: 3.20.6
You must agree to the license terms before installing the plug-in:
*************************Omit some information************************
Do you accept the license terms for the plug-in (y=yes*, n=no, q=quit) ? y
Traceback (most recent call last):
  File &quot;./plugin_install.py&quot;, line 75, in &lt;module&gt;
    import class_plugin
  File &quot;/plugin_tmp/class_plugin.py&quot;, line 187, in &lt;module&gt;
    auth_type = AUTH_TYPES[distro_name]
KeyError: &#39;linux&#39;
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>KeyError: ‘linux’</p></li>
</ol>
<p>Similarly, modify the plugin_tmp/class_plugin.py file and add the method to obtain root privileges for Linux, ‘su’.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>AUTH_TYPES = {&#39;mepis&#39;: &#39;su&#39;,
              &#39;debian&#39;: &#39;su&#39;,
              &#39;suse&#39;: &#39;su&#39;,
              &#39;mandriva&#39;: &#39;su&#39;,
              &#39;fedora&#39;: &#39;su&#39;,
              &#39;redhat&#39;: &#39;su&#39;,
              &#39;rhel&#39;: &#39;su&#39;,
              &#39;slackware&#39;: &#39;su&#39;,
              &#39;gentoo&#39;: &#39;su&#39;,
              &#39;redflag&#39;: &#39;su&#39;,
              &#39;ubuntu&#39;: &#39;sudo&#39;,
              &#39;xandros&#39;: &#39;su&#39;,
              &#39;freebsd&#39;: &#39;su&#39;,
              &#39;linspire&#39;: &#39;su&#39;,
              &#39;ark&#39;: &#39;su&#39;,
              &#39;pclinuxos&#39;: &#39;su&#39;,
              &#39;centos&#39;: &#39;su&#39;,
              &#39;igos&#39;: &#39;su&#39;,
              &#39;linuxmint&#39;: &#39;sudo&#39;,
              &#39;linpus&#39;: &#39;sudo&#39;,
              &#39;gos&#39;: &#39;sudo&#39;,
              &#39;boss&#39;: &#39;su&#39;,
              &#39;lfs&#39;: &#39;su&#39;,
              &#39;manjarolinux&#39;: &#39;su&#39;,
              &#39;linux&#39;: &#39;su&#39;,
              }

</pre></div>
</div>
<p>Re - execute the installation. The installation is completed, but no new ppd file is generated.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[root@ok3568:/]# ./hplip-plugin-install
Plug-in version: 3.20.6
Installed HPLIP version: 3.20.6
You must agree to the license terms before installing the plug-in:
************************Omit some information************************
Do you accept the license terms for the plug-in (y=yes*, n=no, q=quit) ? y
Target file /usr/share/hplip/prnt/plugins/hbpl1-arm64.so already exists. Replacing.
Symlink already exists. Replacing.
Creating symlink /usr/share/hplip/prnt/plugins/hbpl1.so (link) to file /usr/share/hplip/prnt/plugins/hbpl1-arm64.so (target)...
Target directory /usr/share/hplip/data/firmware does not exist. Creating.
Target directory /usr/share/hplip/data/plugins does not exist. Creating.
Target file /usr/share/hplip/prnt/plugins/lj-arm64.so already exists. Replacing.
Symlink already exists. Replacing.
Creating symlink /usr/share/hplip/prnt/plugins/lj.so (link) to file /usr/share/hplip/prnt/plugins/lj-arm64.so (target)...
</pre></div>
</div>
<p>Obtain the ppd file from the virtual machine Ubuntu.</p>
<p>After testing, installing the plugin on the development board has no effect. Try to test whether the printer can be driven on the PC - side Ubuntu.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ sudo apt-get install hplip-gui
//Installation of visual interface operation software
forlinx@ubuntu:~$ hp-plugin
//Install the hpplugin plug-in
</pre></div>
</div>
<p><img alt="Image" src="../../_images/1723002658150_3151c1ca_8725_4b3c_8a19_169b30119577.png" /></p>
<p><img alt="Image" src="../../_images/1723002728296_280004d8_8780_467c_9dc6_1738993c0c06.png" /></p>
<p>Then continue until the installation is complete.</p>
<p><img alt="Image" src="../../_images/1723002776664_996cfd94_309b_44ae_a341_e6bf76206c45.png" /></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ hp-setup 
//Add a default printer
</pre></div>
</div>
<p>After successful adding and printing on the virtual machine Ubuntu, the corresponding ppd file can be found in the /etc/cups/ppd directory.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>forlinx@ubuntu:~$ ls /etc/cups/ppd/HP_LaserJet_Professional_P1108.ppd 
/etc/cups/ppd/HP_LaserJet_Professional_P1108.ppd
</pre></div>
</div>
<p>Copy this ppd file to the board, use lpadmin to load the correct ppd file, and test printing using the lp command.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[root@ok3568:/]# lpadmin -p p1108 -E -v usb://HP/LaserJet%20Professional%20P1108?serial=000000000QND2C2CPR1a -P /etc/cups/ppd/HP_LaserJet_Professional_P1108.ppd
lpadmin: Printer drivers are deprecated and will stop working in a future version of CUPS.
[root@ok3568:/]# lpoptions -d p1108
copies=1 device-uri=usb://HP/LaserJet%20Professional%20P1108?serial=000000000QND2C2CPR1a finishings=3 job-cancel-after=10800 job-hold-until=no-hold job-priority=50 job-sheets=none,none marker-change-time=0 number-up=1 printer-commands=none printer-info=p1108 printer-is-accepting-jobs=true printer-is-shared=true printer-is-temporary=false printer-location printer-make-and-model=&#39;HP LaserJet Professional p1108, hpcups 3.20.3, requires proprietary plugin&#39; printer-state=3 printer-state-change-time=1722826243 printer-state-reasons=none printer-type=36876 printer-uri-supported=ipp://localhost/printers/p1108
[root@ok3568:/]# lp /home/test.pdf
request id is p1108-1 (1 file(s))
</pre></div>
</div>
<p>When the lp command is issued, the printer works, but the printed PDF file is blank.</p>
<p>Print PDF files as blank pages.</p>
<p>Test two printers HP-P1108 HP-P1106.</p>
<p>The printer that prints PDF files after being configured by the method in this article is active, but all pages are blank.</p>
<p>The test printing PNG picture can be printed normally.</p>
<p>Find a description of a similar problem on the HP printer website.</p>
<p>It is suggested to print PDF files as images. So, convert the PDF file to a PNG image first and then print.</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[root@ok3568:/]# pdftoppm -png test.pdf test
[root@ok3568:/]# ls
bin             home     lost+found  opt            sbin        timestamp  var
busybox.config  init     media       proc           sdcard      tmp
data            lib      misc        rockchip_test  sys         udisk
dev             lib64    mnt         root           test-1.png  userdata
etc             linuxrc  oem         run            test.pdf    usr
//This command converts the test. PDF to a PNG file named test.
//The number -1 after the file name represents the page number of the PDF file.
</pre></div>
</div>
<p>The reason is unknown, but PDF files can be converted into PNG file by tools for printing, and the function can be used to meet the needs.</p>
<p>Leave the detailed steps and continue to study later.</p>
<p>Refer to:</p>
<ol class="arabic simple">
<li><p>Manual installation of HP printer plugins on Ubuntu 18.04:<br />
<a class="reference external" href="https://blog.csdn.net/qq_31813825/article/details/108369750">https://blog.csdn.net/qq_31813825/article/details/108369750</a></p></li>
<li><p>All hplip - plugin file download websites: <a class="reference external" href="http://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/">http://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/</a></p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>