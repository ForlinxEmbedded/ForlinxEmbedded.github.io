

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>00_OK3568-C_Linux5.10.160+QT5.15.8用户使用手册 &mdash; Forlinx Embedded RK3568 Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/theme-switcher.css?v=a3c71d8a" />

  
    <link rel="shortcut icon" href="_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/rockchip/ok3568-c/OK3568-C_Linux5_10_160_User_Manual.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/theme-switcher.js?v=950663c4"></script>
      <script src="_static/logo-link.js?v=d4af6ba6"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="OK3568-C Manual" href="index.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOFTWARE</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">00_OK3568-C_Linux5.10.160+QT5.15.8用户使用手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id1"><font style="color:#000000;">免责声明</font></a></li>
<li class="toctree-l1"><a class="reference internal" href="#id2"><font style="color:#000000;">概述</font></a></li>
<li class="toctree-l1"><a class="reference internal" href="#ok3568">01_OK3568开发板介绍</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ok3568-c-c2c">1.1 OK3568-C/C2C开发板简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linux-5-10-160">1.2 Linux 5.10.160系统软件资源特性</a></li>
<li class="toctree-l2"><a class="reference internal" href="#emmc">1.3 eMMC存储器分区表</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id3">02_快速开机启动</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id4">2.1 开机前准备</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">2.2 调试串口驱动安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">2.3 串口登录</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">2.3.1 串口连接设置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">2.3.2 串口登录</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id9">2.4 网络登录</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ssh">2.4.1 SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ftp">2.4.2 FTP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id10">2.5屏幕切换</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uboot">2.5.1 uboot菜单动态控制</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">2.5.2 内核设备树指定</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">2.6系统关闭</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id13">03_OK3568平台功能测试</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id14">3.1界面功能测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id15">3.1.1 界面功能简介</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">3.1.2 触摸功能简介</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">3.1.3 硬件解码体验</a></li>
<li class="toctree-l3"><a class="reference internal" href="#camera">3.1.4 Camera测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#opengl">3.1.5 OpenGL测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">3.1.6 播放音乐测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">3.1.7 录音测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#g-5g">3.1.8 4G/5G测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wifi">3.1.9 WIFI测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">3.1.10 网络配置测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">3.1.11 浏览器测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">3.1.12 看门狗测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">3.1.13 按键测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rtc">3.1.14 RTC测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spi">3.1.15 SPI测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uart">3.1.16 UART测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">3.1.17 背光测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cpu">3.1.18 CPU频率配置测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id25"></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id26">04_OK3568命令行功能测试</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id27">4.2 命令行功能测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id28">4.2.1 系统信息查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">4.2.2 调频测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id30">4.2.3 温度测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ddr">4.2.4 DDR带宽测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">4.2.5 按键测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id32">4.2.6 串口测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">4.2.7 SPI 测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">4.2.8 看门狗测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fltest-watchdog-10s">4.2.8.1 启动 fltest_watchdog，设置符为时间10s，并定时喂狗。</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fltest-watchdogrestart-10s">4.2.8.2 启动fltest_watchdogrestart，设置复位时间为10s，不喂狗。</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id35">4.2.9 WIFI测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sta">4.2.9.1  STA模式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ap">4.2.9.2  AP模式</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id36">4.2.10 蓝牙测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">4.2.11 RTC功能测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usb">4.2.12 USB鼠标测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usb-2-0-usb3-0">4.2.13 USB 2.0/USB3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">4.2.14 屏幕背光调节</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tf">4.2.15 TF卡测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id39">4.2.16 eMMC 测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id40">4.2.17 以太网配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ip">4.2.17.1  固定IP方法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id41">4.2.17.2  自动获取IP方法</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#web">4.2.18 Web服务</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">4.2.19 放/录音测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#g-em05-ce">4.2.20 4G EM05-CE模块测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grm500u-5g">4.2.21 5G移远RM500U 5G模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">4.2.22 休眠唤醒测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#npu-opencv">4.2.23 NPU OpenCV测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can">4.2.24 CAN测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#led">4.2.25 LED测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typec">4.2.26 TYPEC测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pcie">4.2.27 PCIE测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sqlite3">4.2.28 SQLite3测试</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id44">05_OK3568平台多媒体测试</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id45">5.1 音频和视频播放体验</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gplay">5.1.1使用gplay播放器播放视频和音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gst-launch">5.1.2使用gst-launch 播放视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id46">5.1.3使用gst-launch 播放音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">5.1.4使用gst-launch 播放视频和音频</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id48">5.2 视频硬编码</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#h-264">5.2.1视频硬编码H.264</a></li>
<li class="toctree-l3"><a class="reference internal" href="#h-265">5.2.2视频硬编码H.265</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id49">5.3 视频硬解码</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#h264">5.3.1解码并播放H264格式视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50">5.3.2解码并播放H264格式视频带音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#h265">5.3.3解码并播放H265格式视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id51">5.3.4解码并播放H265格式视频带音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vp8">5.3.5解码并播放VP8格式视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52">5.3.6解码并播放VP8格式视频带音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vp9">5.3.7解码并播放VP9格式视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id53">5.3.8解码并播放VP9格式视频带音频</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id54">5.4 摄像头测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uvc-camera">5.4.1 UVC Camera测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ov13850">5.4.2 OV13850 测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#waylandsink">5.5 waylandsink定点测试</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id55">06_烧写系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#otg">6.1 OTG烧写系统</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id56">6.1.1 OTG驱动安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id57">6.1.2 OTG完全烧写测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rkdevtool">6.1.2.1 RKDevTool烧写测试</a></li>
<li class="toctree-l4"><a class="reference internal" href="#factorytool">6.1.2.2 FactoryTool烧写测试</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id58">6.1.3 OTG分步烧写测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id59">6.2 TF卡烧写系统</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Forlinx Embedded RK3568 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">00_OK3568-C_Linux5.10.160+QT5.15.8用户使用手册</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ok3568-c-linux5-10-160-qt5-15-8">
<h1>00_OK3568-C_Linux5.10.160+QT5.15.8用户使用手册<a class="headerlink" href="#ok3568-c-linux5-10-160-qt5-15-8" title="Link to this heading"></a></h1>
</section>
<section id="id1">
<h1><font style="color:#000000;">免责声明</font><a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
<p><font style="color:#000000;">本手册版权归保定飞凌嵌入式技术有限公司所有。未经本公司的书面许可，任何单位和个人无权以任何形式复制、传播、转载本手册的任何部分，违者将被追究法律责任。</font></p>
<p><font style="color:#000000;">保定飞凌嵌入式有限公司所提供的所有服务内容旨在协助用户加速产品的研发进度，在服务过程中所提供的任何程序、文档、测试结果、方案、支持等资料和信息，都仅供参考，用户有权不使用或自行参考修改，本公司不提供任何的完整性、可靠性等保证，若在用户使用过程中因任何原因造成的特别的、偶然的或间接的损失，本公司不承担任何责任。 </font></p>
</section>
<section id="id2">
<h1><font style="color:#000000;">概述</font><a class="headerlink" href="#id2" title="Link to this heading"></a></h1>
<p><font style="color:#000000;">OK3568-C/C2C开发板目前提供了Linux操作系统的软件资料，本文为Linux软件手册，针对Linux5.10.160内核进行相关功能测试和说明，用户要选择与开发板中的镜像一致的资料进行操作。用户可通过本公司提供的网盘链接获取软件和硬件的文档及源码。资料下载网站为：</font><a class="reference external" href="http://bbs.witech.com.cn/forum.php?mod=forumdisplay&amp;amp;fid=130"><strong>http://bbs.witech.com.cn/forum.php?mod=forumdisplay&amp;fid=130</strong></a><strong><font style="color:#000000;"> </font></strong><font style="color:#000000;">，用户需要通过销售获取下载权限，方可自行下载。</font></p>
<ul class="simple">
<li><p><strong>注意：</strong></p></li>
<li><p><font style="color:#000000;">OK3568-C/C2C开发板出厂默认烧写的为Linux镜像，用户在进行操作前确认是否为Linux系统，若不是需要重新烧写Linux的镜像</font><font style="color:#000000;">，烧写方法参考“</font><strong><font style="color:#000000;">烧</font><strong><strong><font style="color:#000000;">写</font></strong></strong><font style="color:#000000;">系统</font></strong><font style="color:#000000;">”，烧录完成后可通过“</font><strong><font style="color:#000000;">串</font>****<font style="color:#000000;">口登录</font></strong><font style="color:#000000;">”中步骤查看内</font><font style="color:#000000;">核版本信息</font></p></li>
<li><p><font style="color:#000000;">详细资料参看OK3568-C/C2C用户资料,本文中提到用户资料的所在目录以OK3568-C/C2C用户资料为根目录。</font></p></li>
</ul>
<p><strong><font style="color:rgb(38, 38, 38);">更新记录</font></strong><font style="color:rgb(38, 38, 38);"><br />
</font></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong><font style="color:rgb(0, 0, 0);">日期</font></strong><font style="color:rgb(38, 38, 38);">   </font></p></th>
<th class="head"><p><strong><font style="color:rgb(0, 0, 0);">手册版本</font></strong><font style="color:rgb(38, 38, 38);">   </font></p></th>
<th class="head"><p><strong><font style="color:rgb(0, 0, 0);">更新内容</font></strong><font style="color:rgb(38, 38, 38);">   </font></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><font style="color:rgb(38, 38, 38);">20231124</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">V1.0</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">OK3568-C Linux5.10.160+QT5.15.8用户使用手册初版。</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
</tr>
<tr class="row-odd"><td><p><font style="color:rgb(38, 38, 38);">20231211</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">V1.1</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">1</font><font style="color:rgb(38, 38, 38);">去掉FTP 的forlinx用户，文件系统暂时未添加。</font><font style="color:rgb(38, 38, 38);">   </font><font style="color:rgb(38, 38, 38);">2</font><font style="color:rgb(38, 38, 38);">视频硬编码，RGA 只支持0-4G，增加说明。</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
</tr>
<tr class="row-even"><td><p><font style="color:rgb(38, 38, 38);">20240515</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">V2.0</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">1</font><font style="color:rgb(38, 38, 38);">新增FET3568-C2、OK3568-C2C配置。</font><font style="color:rgb(38, 38, 38);">   </font><font style="color:rgb(38, 38, 38);">2</font><font style="color:rgb(38, 38, 38);">修正手册勘误。</font><font style="color:rgb(38, 38, 38);">   </font></p></td>
</tr>
<tr class="row-odd"><td><p><font style="color:rgb(38, 38, 38);">20250704</font></p></td>
<td><p><font style="color:rgb(38, 38, 38);"> V2.1</font></p></td>
<td><p><font style="color:rgb(38, 38, 38);">4.2.22 休眠唤醒测试章节添加长鑫内存已将休眠唤醒功能去掉内容。</font></p></td>
</tr>
<tr class="row-even"><td><p><font style="color:rgb(38, 38, 38);">20251015</font></p></td>
<td><p>V2.2</p></td>
<td><p>WIFI测试章节和快速启动章节添加注意项，启动必须接入天线，否则有可能影响启动</p></td>
</tr>
</tbody>
</table>
<font style="color:rgb(38, 38, 38);">  
</font><font style="color:rgb(38, 38, 38);">  
</font><font style="color:rgb(38, 38, 38);">  
</font>
<font style="color:#000000;">  
</font><font style="color:#000000;"> </font>
</section>
<section id="ok3568">
<h1>01_OK3568开发板介绍<a class="headerlink" href="#ok3568" title="Link to this heading"></a></h1>
<section id="ok3568-c-c2c">
<h2>1.1 OK3568-C/C2C开发板简介<a class="headerlink" href="#ok3568-c-c2c" title="Link to this heading"></a></h2>
<p><font style="color:#000000;">RK3568 是基于ARM64架构的低功耗高性能处理器，它包括4 核Cortex-A55以及独立的 NEON 协处理器和神经网络加上处理器NPU，可应用于计算机、手机、个人移动互联网，数字多媒体设备。</font></p>
<p>FET3568-C和FET3568-C2核心板引脚定义相同，可共用一块底板，当FET3568-C与OK3568-C底板组合时，开发板名称为OK3568-C开发板；当FET3568-C2与OK3568-C底板组合时，则开发板名称为OK3568-C2C开发板。</p>
<p><font style="color:#000000;">飞凌OK3568-C/C2C开发平台核心板和底板采用接插件的连接方式，主要接口如下图所示：</font></p>
<p><img alt="Image" src="_images/1719278381485_bb9a6037_390d_4576_aecf_008cc2ef4692.png" /></p>
<p>OK3568-C底板接口正面视图</p>
<p><img alt="Image" src="_images/1719278381902_b0dd9d04_67b0_48a5_b8c8_745f4c6f103a.png" /></p>
<p>OK3568-C底板接口反面视图</p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">📚</font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><strong>请阅读：</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>本软件手册中不再对硬件参数进行叙述，在参考本手册进行软件开发前请阅读“硬件资料\用户手册”路径下的“OK3568-C&amp;OK3568-C2C_硬件手册”，以了解产品命名规则和您所使用产品的硬件配置信息，这样有助于您对本产品的使用。
</pre></div>
</div>
</section>
<section id="linux-5-10-160">
<h2>1.2 Linux 5.10.160系统软件资源特性<a class="headerlink" href="#linux-5-10-160" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>设备</strong></p></th>
<th class="head"><p><strong>驱动程序源代码在内核中的位置</strong></p></th>
<th class="head"><p><strong>设备名</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LCD 背光驱动</p></td>
<td><p>drivers/video/backlight/pwm_bl.c</p></td>
<td><p>/sys/class/backlight</p></td>
</tr>
<tr class="row-odd"><td><p>USB接口U盘</p></td>
<td><p>drivers/usb/storage/</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>USB鼠标</p></td>
<td><p>drivers/hid/usbhid/</p></td>
<td><p>/dev/input/mice</p></td>
</tr>
<tr class="row-odd"><td><p>以太网</p></td>
<td><p>drivers/net/ethernet/stmicro/stmmac</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>SD/micro TF卡驱动</p></td>
<td><p>drivers/mmc/host/dw_mmc-rockchip.c</p></td>
<td><p>/dev/block/mmcblk1pX</p></td>
</tr>
<tr class="row-odd"><td><p>EMMC驱动</p></td>
<td><p>drivers/mmc/host/dw_mmc-rockchip.c</p></td>
<td><p>/dev/block/mmcblk2pX</p></td>
</tr>
<tr class="row-even"><td><p>OV13850</p></td>
<td><p>drivers/media/i2c/ov13850.c</p></td>
<td><p>/dev/videoX</p></td>
</tr>
<tr class="row-odd"><td><p>LCD 控制器</p></td>
<td><p>drivers/gpu/drm/rockchip/rockchip_drm_vop.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>MIPI CSI</p></td>
<td><p>drivers/phy/rockchip/phy-rockchip-mipi-rx.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>MIPI DSI</p></td>
<td><p>drivers/phy/rockchip/phy-rockchip-inno-mipi-dphy.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>LCD触摸驱动</p></td>
<td><p>drivers/input/touchscreen/gt9xx/*<br/>drivers/input/touchscreen/edt-ft5x06.c</p></td>
<td><p>/dev/input/eventX</p></td>
</tr>
<tr class="row-odd"><td><p>RTC实时时钟驱动</p></td>
<td><p>drivers/rtc/rtc-rx8010.c<br/>drivers/rtc/rtc-pcf8563.c</p></td>
<td><p>/dev/rtc0</p></td>
</tr>
<tr class="row-even"><td><p>串口</p></td>
<td><p>drivers/tty/serial/8250/8250_dw.c</p></td>
<td><p>/dev/ttySX</p></td>
</tr>
<tr class="row-odd"><td><p>按键驱动</p></td>
<td><p>drivers/input/keyboard/adc-keys.c</p></td>
<td><p>/dev/input/eventX</p></td>
</tr>
<tr class="row-even"><td><p>LED</p></td>
<td><p>drivers/leds/leds-gpio.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>I2S</p></td>
<td><p>sound/soc/rockchip/rockchip_i2s.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>音频驱动</p></td>
<td><p>sound/soc/codecs/rk817_codec.c</p></td>
<td><p>/dev/snd/</p></td>
</tr>
<tr class="row-odd"><td><p>PMIC</p></td>
<td><p>drivers/mfd/rk808.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>PCIE</p></td>
<td><p>drivers/pci/controller/pcie-rockchip.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>看门狗</p></td>
<td><p>drivers/watchdog/dw_wdt.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>SPI</p></td>
<td><p>drivers/spi/spi-rockchip.c</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="emmc">
<h2>1.3 eMMC存储器分区表<a class="headerlink" href="#emmc" title="Link to this heading"></a></h2>
<p>下面表格是Linux操作系统的eMMC存储器分区信息（计算时一个块大小为512bit）：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>分区索引</strong></p></th>
<th class="head"><p><strong>名称</strong></p></th>
<th class="head"><p><strong>偏移/block</strong></p></th>
<th class="head"><p><strong>大小/block</strong></p></th>
<th class="head"><p><strong>内容</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>N/A</p></td>
<td><p>loader</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00003fc0</p></td>
<td><p>MiniLoaderAll.bin</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>uboot</p></td>
<td><p>0x00004000</p></td>
<td><p>0x00002000</p></td>
<td><p>uboot.img</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>misc</p></td>
<td><p>0x00006000</p></td>
<td><p>0x00002000</p></td>
<td><p>misc.img</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>boot</p></td>
<td><p>0x00008000</p></td>
<td><p>0x00020000</p></td>
<td><p>boot.img</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>recovery</p></td>
<td><p>0x00028000</p></td>
<td><p>0x00040000</p></td>
<td><p>recovery.img</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>backup</p></td>
<td><p>0x00068000</p></td>
<td><p>0x00010000</p></td>
<td><p>backup.img</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>rootfs</p></td>
<td><p>0x00078000</p></td>
<td><p>0x00c00000</p></td>
<td><p>rootfs.img</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>oem</p></td>
<td><p>0x00c78000</p></td>
<td><p>0x00040000</p></td>
<td><p>oem.img</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>userdata</p></td>
<td><p>0x00cb8000</p></td>
<td><p>剩余全部</p></td>
<td><p>userdata.img</p></td>
</tr>
</tbody>
</table>
<p>可在开发板中使用fdisk -l命令查看分区大小：</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# fdisk –l
Found valid GPT with protective MBR; using GPT

Disk /dev/mmcblk0: 15269888 sectors, 3360M
Logical sector size: 512
Disk identifier (GUID): b0640000-0000-493c-8000-1e08000019fe
Partition table holds up to 128 entries
First usable sector is 34, last usable sector is 15269854

Number  Start (sector)    End (sector)  Size Name
     1           16384           24575 4096K uboot
     2           24576           32767 4096K misc
     3           32768          163839 64.0M boot
     4          163840          425983  128M recovery
     5          425984          491519 32.0M backup
     6          491520        13074431 6144M rootfs
     7        13074432        13336575  128M oem
     8        13336576        15269854  943M userdata
</pre></div>
</div>
</section>
</section>
<section id="id3">
<h1>02_快速开机启动<a class="headerlink" href="#id3" title="Link to this heading"></a></h1>
<section id="id4">
<h2>2.1 开机前准备<a class="headerlink" href="#id4" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>12V2A或者12V3A DC电源线</p></li>
<li><p>调试串口线</p></li>
</ul>
<p>⚠️ <strong>注意：开机务必安装好Wifi天线</strong></p>
<p><img alt="Image" src="_images/1719278320996_e105caf3_f44c_4236_9713_8a433603e88c.png" /></p>
</section>
<section id="id5">
<h2>2.2 调试串口驱动安装<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>OK3568-C平台调试串口使用的是Type-C接口，板载USB转UART芯片，无需客户购买USB转串口调试工具，使用极其简单方便。</p>
<p>安装驱动请使用用户资料\Linux\工具\目录下提供的驱动包CP210x_VCP_Windows_XP_Vista.zip进行安装。</p>
<p>解压完成后32位操作系统选择运行CP210xVCPInstaller_x86.exe，64位操作系统选择运行CP210xVCPInstaller_x64.exe即可。</p>
</section>
<section id="id6">
<h2>2.3 串口登录<a class="headerlink" href="#id6" title="Link to this heading"></a></h2>
<section id="id7">
<h3>2.3.1 串口连接设置<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">📚</font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><strong>说明：</strong></p>
<ul class="simple">
<li><p><strong>串口****终端登陆用户：串口终端自动登录root用户，密码root。</strong></p></li>
<li><p><strong>串口设置：波特率115200、数据位8、停止位1、无校验位、无流控制。</strong></p></li>
<li><p><strong>硬件需求：需要Type-C线连接PC和开发板</strong></p></li>
<li><p><strong>软件需求：PC端Windows系统需要安装超级终端软件，超级终端软件有多种，可自行使用自己熟悉的串口终端软件；</strong></p></li>
</ul>
<p>以下我们以putty终端软件为例介绍串口的登录方式：</p>
<p>**步骤1：**首先需要确认连接电脑的串口端口号，从设备管理器中查看串口端口号，以电脑实际识别的端口号为准。</p>
<p><img alt="Image" src="_images/1719278321359_fa8fcd47_98f8_4f39_a06e_20c985639e64.png" /></p>
<p>**步骤2：**打开putty并设置，serial line根据使用的电脑COM口设置，波特率115200。</p>
<p><img alt="Image" src="_images/1719278321563_33878f07_57ca_425b_9f07_0f6ad5325c03.png" /></p>
<p>**步骤3：**上述设置完成后可以在Saved Sessions输入电脑使用的COM口，下图以COM24为例，将设置保存，之后再打开串口时，直接点击保存的端口号即可。</p>
<p><img alt="Image" src="_images/1719278321755_7f70b87a_57c6_4aab_ae10_4e27e83acf4d.png" /></p>
</section>
<section id="id8">
<h3>2.3.2 串口登录<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<p>PC端终端软件设置好后，通过串口线连接PC机和开发板，接好电源后开机上电。可以通过终端软件看到启动信息。</p>
<p>启动信息如下表示启动成功，可以输入回车新建命令行：</p>
<p><img alt="Image" src="_images/1719278321964_f1970b22_1566_4579_aa6e_d305c114c7c3.png" /></p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>**注意：**如果是[root&#64;buildroot]#则是第一次烧写完成后第一次重启，在写入一些信息，这时不要进行操作，等它自行再次重启才算是烧写完成。[root&#64;OK3568-buildroot]#才是正常状态。可通过uboot启动信息进行查看。</p>
<p>第一次启动，recovery 模式：</p>
<p><img alt="Image" src="_images/1719278322192_c1627636_d731_4ba9_9f9c_95a77b1fa479.png" /></p>
<p>正常启动：</p>
<p><img alt="Image" src="_images/1719278322394_e0b77e8e_c261_48a1_9048_2aa975640069.png" /></p>
</section>
</section>
<section id="id9">
<h2>2.4 网络登录<a class="headerlink" href="#id9" title="Link to this heading"></a></h2>
<p>OK3568除了使用调试串口登录以外，支持SSH网络方式登录开发板，同时支持FTP文件传输。下面**<font style="color:#000000;">以开发板IP为172.16.0.76为例</font>**，介绍网络工具的使用。修改网络IP可通过ifconfig eth0 172.16.0.76实现，然后将开发板和PC接在同一交换机上或者直接通过网线直连。</p>
<section id="ssh">
<h3>2.4.1 SSH<a class="headerlink" href="#ssh" title="Link to this heading"></a></h3>
<p>OK3568开发板支持 SSH 服务并启动时已自动开启，设置好 IP 地址后就可以作为一台 SSH 服务器。可以利用SSH登录开发板进行开发调试，也可用scp进行文件传输。</p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font><strong>注意</strong>：登录时根据提示输入<strong>用户名root密码root</strong>。若想通过SSH登录root用户，则需要先给root用户设置登陆密码，先使用串口登录开发板，使用passwd “用户名”来更改对应用户的登陆密码。会有密码强弱提示，可以无视，对密码修改没有影响。</p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font><strong>注意</strong>：以下以开发板ip 172.16.0.76进行测试，请根据实际情况进行修改，在调试串口终端使用ifconfig eth0 172.16.0.76进行更改</p>
<p><img alt="Image" src="_images/1719278322647_f6dd874b_e614_4e71_b207_c4a903394ef8.png" /></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>在打开putty软件进行如下设置（IP以实际为准）：
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278322854_2cc112b3_b2c3_47a4_9ba3_4f72e0948f19.png" /></p>
<p><img alt="Image" src="_images/1719278323013_c3b34392_8085_47b9_b6b3_d8b65781387e.png" /></p>
</section>
<section id="ftp">
<h3>2.4.2 FTP<a class="headerlink" href="#ftp" title="Link to this heading"></a></h3>
<p>OK3568开发板支持 FTP 服务并启动时已自动开启，设置好 IP 地址后就可以作为一台 FTP 服务器。下面介绍如何利用FTP工具进行文件传输。</p>
<ul>
<li><p><font style="color:#000000;">路径：OK3568-C（Linux）用户资料\工具\FileZilla*</font></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  在 windows上安装好filezilla工具，并按照下图所示步骤进行设置。
</pre></div>
</div>
</li>
<li><p><strong>注意</strong>：此功能需要给开发板连接网线，主机IP设置和客户端处于同一网段，确保主机与客户端在同一局域网内，**用户名root，密码root,**登录成功后便可以对文件系统任意位置上传下载删除。一般情况不建议使用root登录ftp，请根据实际情况设置用户登录。</p></li>
<li><p><strong>注意</strong>：以下以开发板ip 172.16.0.76进行测试，请根据实际情况进行修改，在调试串口终端使用ifconfig eth0 172.16.0.76进行更改</p></li>
</ul>
<p><img alt="Image" src="_images/1719278323255_21c94a98_fc27_402d_b5a2_70a423c00aab.png" /></p>
<p><img alt="Image" src="_images/1719278323417_a7df861d_c88e_49c5_a0f1_a343c9f3270a.png" /></p>
</section>
</section>
<section id="id10">
<h2>2.5屏幕切换<a class="headerlink" href="#id10" title="Link to this heading"></a></h2>
<p>OK3568支持LVDS/LCD、MIPI DSI/eDP、HDMI等多种屏幕接口，同时可以进行三个屏幕的同显和异显。目前屏幕切换控制方式有三种：uboot菜单动态控制；内核设备树指定，qt应用ubootmenu控制。</p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：屏幕切换涉及到触摸切换，出厂镜像默认LVDS、MIPI、HDMI三个接口都输出视频画面，默认触摸位于LVDS屏，使用MIPI触摸请在选屏阶段将LVDS屏幕输出关闭。</p>
<section id="uboot">
<h3>2.5.1 uboot菜单动态控制<a class="headerlink" href="#uboot" title="Link to this heading"></a></h3>
<p>该方式在现有已支持屏幕的基础上不需要重新编译和烧写，即可切换屏幕。</p>
<p>在uboot自启动过程中串口终端按下ctrl+c，即可弹出控制选项：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>Hit key to stop autoboot(&#39;CTRL+C&#39;):  0
---------------------------------------------
0:Exit to console
1:Reboot
2:Display type
---------------------------------------------
</pre></div>
</div>
<p>终端输入2，进入屏幕控制子菜单：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>---------------------------------------------
hdmi==&gt;off mipi_edp==&gt;off lvds_rgb=&gt;off
Select  display
0:Exit
1:hdmi display off
2:mipi_edp display off
3:lvds_rgb display off		
---------------------------------------------
</pre></div>
</div>
<p>其中可以选择HDMI、MIPI-DSI、eDP、Lvds四种类型的屏幕。对选项按下可切换是否开启，MIPI-DSI和eDP在选项2处切换选择。选项参数信息表如下：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>终端输入</strong></p></th>
<th class="head"><p><strong>屏幕选择参数</strong></p></th>
<th class="head"><p><strong>参数对应含义</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Exit</p></td>
<td><p>返回上一级菜单</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>hdmi display off</p></td>
<td><p>打开HDMI屏幕信号输出</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>mipi_edp display off</p></td>
<td><p>打开MIPI-DSI/eDP屏幕信号输出</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>lvds_rgb display off</p></td>
<td><p>打开LVDS屏幕信号输出</p></td>
</tr>
</tbody>
</table>
<p>以下以打开eDP屏幕为例，按下数字2，打印信息变化：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>---------------------------------------------
hdmi==&gt;off mipi_edp==&gt;mipi lvds_rgb=&gt;off
Select  display
0:Exit
1:hdmi display off
2:mipi_edp display mipi
3:lvds display off
---------------------------------------------
</pre></div>
</div>
<p>可见上述加粗字体切换为mipi屏幕信号输出，再次按下数字2，打印信息变化：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>---------------------------------------------
hdmi==&gt;off mipi_edp==&gt;edp lvds_rgb=&gt;off
Select  display
0:Exit
1:hdmi display off
2:mipi_edp display edp
3:lvds display off
---------------------------------------------
</pre></div>
</div>
<p>可见上述加粗字体切换为eDP屏幕信号输出，选择完成后，按照菜单提示选项退出进行重启，按下数字0打印信息变化：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>---------------------------------------------
0:Exit to console
1:Reboot
2:Display type
---------------------------------------------
</pre></div>
</div>
<p>按下数字1，执行重启操作，uboot阶段操作的屏幕选项重启后生效。</p>
<p>屏幕选择完成后也可按下开发板复位键重新启动，自启动后生效。</p>
</section>
<section id="id11">
<h3>2.5.2 内核设备树指定<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">该方式不需要连接串口终端，系统镜像默认为所期望的配置选择，适合量产</font>。但需要手工修改设备树，重新生成一次系统镜像。</p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：<font style="color:#000000;">该方式优先级高于uboot屏幕选择，在设备树修改后，uboot的选择不会生效</font>。</p>
<p>设备树路径为：kernel/arch/arm64/boot/dts/rockchip/OK3568-C-common.dtsi</p>
<p>内核源码中，打开设备dtsi文件，找到如下节点：</p>
<p><img alt="Image" src="_images/1719278323616_495a2d74_afea_4779_9f50_cd95a9a2031e.png" /></p>
<p>该节点默认disabled状态，需要改为okay使能节点。根据屏幕需求更改。</p>
<p>举例:</p>
<p>将hdmi、lvds屏幕关闭，属性更改为”off”,使用edp将对应属性修改为edp即可。</p>
<p><img alt="Image" src="_images/1719278323856_10f207f4_f416_4e2b_ac95_c93d21937917.png" /></p>
<p>保存后，重新编译生成镜像。</p>
<p>对于MIPI屏幕种类多，可能现有时序和控制字不能满足要求，需要自行更改dsi节点下的display-timings。但任何和显示相关的节点status属性，均按照默认处理，程序会自动控制。</p>
</section>
</section>
<section id="id12">
<h2>2.6系统关闭<a class="headerlink" href="#id12" title="Link to this heading"></a></h2>
<p>一般情况下直接关闭电源即可，如果有数据存储、功能使用等操作，操作过程中不要随意断电，以防出现文件不可逆损坏，只能重新烧写固件。未确保数据完全写入，可输入 sync 命令完成数据同步后再关闭电源。</p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：用户依据核心板设计的产品，若在使用中存在意外掉电导致系统异常关闭的情景，可在设计中加入掉电保护等措施。</p>
</section>
</section>
<section id="id13">
<h1>03_OK3568平台功能测试<a class="headerlink" href="#id13" title="Link to this heading"></a></h1>
<p>OK3568平台对Qt的支持非常完善，特别是多媒体相关的类，例如视频解码播放、摄像头、视频录制等，均能结合硬件编解码以及OpenGL达到最佳效果。</p>
<section id="id14">
<h2>3.1界面功能测试<a class="headerlink" href="#id14" title="Link to this heading"></a></h2>
<section id="id15">
<h3>3.1.1 界面功能简介<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<p>开发板启动后桌面显示如下：</p>
<p><img alt="Image" src="_images/1719278338971_c5e0ddf0_4f33_4933_a69e_8219bde9d1ec.png" /></p>
</section>
<section id="id16">
<h3>3.1.2 触摸功能简介<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<p>开发板连接LVDS和MIPI屏幕可以正常显示和触摸，如果需要关闭一个显示触摸，请参考手册2.5.1 uboot菜单动态控制章节，将对应的显示输出关闭掉。</p>
</section>
<section id="id17">
<h3>3.1.3 硬件解码体验<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>点击桌面图标进入打开视频播放器video player。
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278339248_4dabc742_6517_472d_9d30_4ec875b1fede.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278339578_041f1a51_7337_42e4_ab0c_8556cd86437f.png" /></p>
<p>应用界面</p>
</section>
<section id="camera">
<h3>3.1.4 Camera测试<a class="headerlink" href="#camera" title="Link to this heading"></a></h3>
<p>点击桌面图标进入打开视频播放器qcamera，该测试程序支持USB Camera也支持OV13850。插入USB Camera，这里以RMONCAM 720P为例。</p>
<ul class="simple">
<li><p>注意：该应用需要连接摄像头后再打开。</p></li>
</ul>
<p><img alt="Image" src="_images/1719278339889_3486bbbd_ac5e_462d_8437_e215f06cf70e.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278340062_4cee86c6_56eb_4b90_9157_7277150a77ec.jpeg" /></p>
<p>应用界面</p>
<p>打开应用后点击UVC Carmera，即可启动摄像头预览。</p>
<p><img alt="Image" src="_images/1722222638366_57fd39ef_cb1c_44bf_8d6d_3a5f4e4f575f.png" /></p>
<p>Video Mode模式下可以点击record按钮进行录像操作，点击recording按钮即可停止录像，生成的视频文件位于/userdata/VIDEO0.MOV</p>
<p>可以使用gst-play-1.0 /userdata/VIDEO0.mov 命令进行播放测试。</p>
<p>点击Video Mode按钮，可以切换到拍照模式，点击Capture可以进行拍照操作。</p>
<p><img alt="Image" src="_images/1722222669081_cdf60e5c_d112_40f1_a778_4dddde67669a.png" /></p>
<p>生成的文件位在/userdata路径下：</p>
<p><img alt="Image" src="_images/1719278340766_a3e88dca_ea75_4117_adb4_73cd307acadb.png" /></p>
<p>对于OV13850 等raw sensor，每一个sensor对应5个设备节点：</p>
<p><img alt="Image" src="_images/1719278340953_79cdb1e4_186a_4746_bce0_5d95c9f32861.png" /></p>
<p>Mainpath,指 Rockchip ISP的一个输出节点，可输出全分辨率图像，一般用来拍照，抓取 Raw 图。</p>
<p>Self Path,指 Rockchip ISP的一个输出节点，最高只能输出1080p分辨率，一般用作预览。</p>
<p>Statistics，用于3A 统计。</p>
<p>Input-params，用于3A 参数设置。</p>
</section>
<section id="opengl">
<h3>3.1.5 OpenGL测试<a class="headerlink" href="#opengl" title="Link to this heading"></a></h3>
<p>OK3568支持OpenGL ES3.2，点击桌面图标进行OpenGL测试。</p>
<p><img alt="Image" src="_images/1719278341147_ea2bf015_ee77_4525_9d84_c299a481cac4.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278341344_c3dbc479_6fe5_4eef_ab2d_734ac48de168.png" /></p>
<p>应用界面</p>
</section>
<section id="id18">
<h3>3.1.6 播放音乐测试<a class="headerlink" href="#id18" title="Link to this heading"></a></h3>
<p>“musicplayer”是一款简单的音频测试应用，可用来测试声卡功能是否正常，也可用来作为一款简单的音频播放器。</p>
<p><img alt="Image" src="_images/1719278341536_11a01c91_7a10_4660_8a6c_a46bc3f15f5e.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278341744_96af593c_422a_4247_8683_76aa15092b2d.jpeg" /></p>
<p>应用界面</p>
<p>点击左下角的按钮，选择测试音频 /userdata/media/test.mp3</p>
<ul class="simple">
<li><p>注意：默认声卡输出为rk809输出，若要使用HDMI输出请在串口使用命令：</p></li>
</ul>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-play-1.0/userdata/media/test.mp3 --audiosink=&quot;alsasink device=hw:1,0&quot;
</pre></div>
</div>
</section>
<section id="id19">
<h3>3.1.7 录音测试<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<p>“Audiorecorder”是录音测试应用，可用来测试声卡录音功能是否正常：</p>
<p><img alt="Image" src="_images/1719278341970_5c6cd369_0684_4285_9340_adfa65217a71.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278342179_1c23083c_05e4_4330_b895_61fb77073d28.png" /></p>
<p>应用界面</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>点击下拉菜单选择输入设备和音频格式、音频通道，点击output file dir文本框输入录音文件的输出路径及名称，File Container选择audio/ogg， Channels选择通道数1，其余设置默认即可，点击Record开始录音。录制的音频文件可以使用gst-play-1.0进行播放。

点击Exit可退出本测试。
</pre></div>
</div>
</section>
<section id="g-5g">
<h3>3.1.8 4G/5G测试<a class="headerlink" href="#g-5g" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>注意：此测试需要插入可上网的SIM卡，具体操作描述可以参考本手册的命令行功能测试 5G章节。</p></li>
</ul>
<p>“4G/5G”测试程序用于测试OK3568外置5G模块(RM500U)。测试前请将开发板断电，接入5G模块，插入SIM卡，启动开发板打开测试应用。</p>
<p>同时该测试支持4G模组（EM05-CE），在断电情况下插入4G模组和SIM卡，上电系统启动后打开测试应用。</p>
<p><img alt="Image" src="_images/1719278342369_aae4c7ce_35ea_4a39_9d07_a58b76a04fb3.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278342568_ac49bc27_e9a0_4a3e_9d9d_9531859e9dc1.jpeg" /></p>
<p>应用界面</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>点击connect按钮，程序将自动进入拨号流程并获取IP设置DNS等，耐心等待几秒钟后，点击ping按钮进行测试。
</pre></div>
</div>
</section>
<section id="wifi">
<h3>3.1.9 WIFI测试<a class="headerlink" href="#wifi" title="Link to this heading"></a></h3>
<p>“WIFI”是一款配置wifi的工具，OK3568平台默认板载AW-CM358模块。wifi模块在系统中会以mlan结点的形式存在，此测试对应mlan0（多设备时使用其它对应节点）：</p>
<p><strong>⚠️</strong>** 注意：开机务必安装好Wifi天线**</p>
<p><img alt="Image" src="_images/1719278342777_71fbf17c_b33f_45fa_8b54_58b2385e1a1f.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278342968_2427f6a6_d21b_4a30_a759_482fda9f802f.jpeg" /></p>
<p>应用界面</p>
<p>选中mlan0，在SSID栏中输入需要使用wifi连接的路由器名称，PAWD栏输入路由器密码，点击connect，即可通过wifi连接路由器，在IP栏中输入有效ip后，点击ping，可查看当前使用wifi网络是否畅通。</p>
<p>默认情况下OK3568底板焊接了AW-CM358模块，只有mlan0节点，以mlan0为例演示wifi工具的使用。</p>
<p>打开Wifi测试应用，输入正确的网络名称及密码，点击connect，等待5秒后点击status查看连接窗台。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>连接成功后可点击ping进行网络测试
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278343211_ff947899_2693_44bf_aeb9_1eac2e775a2f.jpeg" /></p>
</section>
<section id="id20">
<h3>3.1.10 网络配置测试<a class="headerlink" href="#id20" title="Link to this heading"></a></h3>
<p>OK3568启动时网卡默认设置为dhcp，可通过“Network”网络配置应用来选择 dhcp和static两种模式，static模式可配置ip地址、子网掩码、网关、DNS。</p>
<p><img alt="Image" src="_images/1719278343505_ef3b8313_7f9f_4046_9829_854446a777b8.png" /></p>
<p>应用图标</p>
<p>界面如下：</p>
<p><img alt="Image" src="_images/1719278343711_d466a46d_345d_4d4c_a18c_a69c2871d95d.png" /></p>
<p>选中eth0或者eth1，再选中DHCP，点击界面下方“应用”，即可重启网络并自动获取到ip。</p>
<p>点击STATIC，选择设置静态IP，在ip栏中输入要设定的ip，netmask栏中输入子网掩码，geteway栏中输入网关，dns栏中输入DNS。</p>
<p>输入网址，点击ping键后，左侧提示框中会提示ping的结果，如下：</p>
<p><img alt="Image" src="_images/1719278343972_0afb76db_63cb_45da_a6e5_d22b08cfd289.png" /></p>
<p>注：在STATIC模式下设置的ip等信息会被保存至系统的相关配置文件中，因此每次重启都会使用本次设置的网络信息；而在DHCP模式下配置的网络信息则不需注意这一点，每次重新启动都会动态分配一次ip地址。</p>
</section>
<section id="id21">
<h3>3.1.11 浏览器测试<a class="headerlink" href="#id21" title="Link to this heading"></a></h3>
<p>“simplebrowser”是一款简单实用的网络浏览器，在使用时请保证网络通畅，访问外网前需保证dns可用，浏览器启动时默认访问飞凌嵌入式官方网站，点击图标：</p>
<p><img alt="Image" src="_images/1719278344166_5e581467_5fca_46a1_b831_546f334a5bfa.png" /></p>
<p>界面如下：</p>
<ul class="simple">
<li><p>注意：如果开发板的时间异常会导致证书问题。使用浏览器后不可以立即关闭电源或者在关闭电源前在命令行使用sync命令，否则可能导致浏览器异常退出，无法正常运行，只能重新烧录解决。</p></li>
</ul>
<p><img alt="Image" src="_images/1719278344475_8254f288_d525_423d_a733_826149a47378.png" /></p>
<p>通过上方导航栏File-&gt;Quit退出该浏览器。</p>
</section>
<section id="id22">
<h3>3.1.12 看门狗测试<a class="headerlink" href="#id22" title="Link to this heading"></a></h3>
<p>“WatchDog”是用来测试看门狗功能是否正常的应用</p>
<p><img alt="Image" src="_images/1719278344842_75e227c5_74a1_4d36_8dd5_9570f5fef866.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278345098_b4ecb513_38b6_4d9a_9d25_a8fadb05bd75.png" /></p>
<p>应用界面</p>
<p>点击start，默认打开喂狗功能，定时喂狗，此时系统不会重启。</p>
<p>取消勾选feed dog时，倒计时6s，系统进入重启。说明看门狗功能正常。</p>
</section>
<section id="id23">
<h3>3.1.13 按键测试<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<p>“Keypad”用于测试平台自带按键是否可用：</p>
<p><img alt="Image" src="_images/1719278345285_92ffe334_fb43_466f_b80a_e6e9bdfb6ffa.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278345454_3ec0497f_b53c_4d1b_b29b_3262851f300b.jpeg" /></p>
<p>应用界面</p>
<p>OK3568平台默认将4个物理按键V+、V-、Home、ESC分别配置为音量+键、音量-键，Home、返回键。当按下按键时测试应用中的对应按键会变为蓝色，说明按键功能正常。</p>
<p>按“X”退出当前例程，返回到系统桌面。</p>
</section>
<section id="rtc">
<h3>3.1.14 RTC测试<a class="headerlink" href="#rtc" title="Link to this heading"></a></h3>
<p>通过“RTC”应用，可查看和设置当前的系统时间：</p>
<p><img alt="Image" src="_images/1719278345659_69a69214_d59b_4f30_a277_79b4ae7638ce.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278345878_2faee878_578c_4126_b6e7_ad04ae576bb2.png" /></p>
<p>应用界面</p>
<p>选择Manual 之后，可手动设置时间，选择date和time，点击apply，设置完成，安装好RTC备用电池的情况下，时间断电重启不丢失。</p>
<p>点击 Auto，网络对时，点击apply，对时成功。</p>
</section>
<section id="spi">
<h3>3.1.15 SPI测试<a class="headerlink" href="#spi" title="Link to this heading"></a></h3>
<p>点击桌面图标可以使用它来测试OK3568板载SPI接口。spi0具有一个cs接口，对应/dev/spidev0.0；spi2具有两个cs，分别对应/dev/spidev2.0，/dev/spidev2.1。</p>
<p>根据开发板原理图，短接spi2收发引脚。短接测试不需要考虑cs接口；如果外加设备通信，需要考虑对应的dev接口。</p>
<p><img alt="Image" src="_images/1719278346060_8972ef99_0fee_40b3_b2e0_2559ce1d6f11.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278346331_1852b31a_992b_4f43_84c8_40a466716f67.png" /></p>
<p>短接完成后打开测试程序，点击send按钮，进行收发测试。</p>
<p><img alt="Image" src="_images/1719278346635_2b8f1646_2a6e_48b9_a713_15eada1cc349.png" /></p>
<p>应用界面</p>
<p><img alt="Image" src="_images/1719278346917_8e2caf6d_2081_430d_b4dd_369f0e4671b4.png" /></p>
<p>点击Exit按钮退出该测试。</p>
</section>
<section id="uart">
<h3>3.1.16 UART测试<a class="headerlink" href="#uart" title="Link to this heading"></a></h3>
<p>点击桌面图标可以使用它来测试OK3568板载UART接口。</p>
<p><img alt="Image" src="_images/1719278347128_407709e9_5608_4d5d_a510_2e6c4c88ca65.png" /></p>
<p>应用图标</p>
<p>OK3568 串口支持奇、偶校验，8 位数据位和1 位停止位。</p>
<p>在进行串口回环测试前，请先将需要测试的串口短接。OK3568平台底板原理图中标示引出的UART3、UART4、UART5、UART8共4路串口，其中UART2为调试串口，UART8为蓝牙串口。UART3和UART4、UART5在开发板中的默认设备名称分别为ttyS3、ttyS4，ttyS5在此以测试UART4串口为例，按照开发板原理图短接UART4的收发引脚，分别对应PIN29,PIN30。</p>
<p><img alt="Image" src="_images/1719278347360_b24c7a70_e419_4bd6_8b07_25e3e8813f42.png" /></p>
<p>短接完成后打开测试程序。</p>
<p>点击右侧设置，选择串口与波特率等参数，点击apply。设置参数成功。再单击右侧第一个按钮进行连接。</p>
<p><img alt="Image" src="_images/1719278348053_af679c45_cbcf_40aa_8081_1046c17d4a48.png" /></p>
<p>应用界面</p>
<p>点击键盘”1”自动发送，由于短接的问题，回将收到的“1”也显示在终端上。</p>
<p><img alt="Image" src="_images/1719278348286_2c3fd0dd_574f_4aa5_98b8_52258308b532.png" /></p>
</section>
<section id="id24">
<h3>3.1.17 背光测试<a class="headerlink" href="#id24" title="Link to this heading"></a></h3>
<p>“BackLight”是lcd背光调整应用：</p>
<p><img alt="Image" src="_images/1719278348482_f019814c_b412_485c_baf3_84bf915802e6.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/1719278348704_ba67c57c_27b1_40c3_8206_4f722163f1ca.jpeg" /></p>
<p>应用界面</p>
<p>拖动界面中的滑块即可设置Lcd背光亮度，0级为无背光，255级为最高亮度。</p>
</section>
<section id="cpu">
<h3>3.1.18 CPU频率配置测试<a class="headerlink" href="#cpu" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>点击桌面图标进入下一级菜单：
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278348931_c1b9c9d6_80ba_4d86_8c81_5088e2175809.png" /><strong>-&gt;</strong><img alt="Image" src="_images/1719278349161_81e0b3d5_37d8_447e_8cf5_154d6f26b660.png" /></p>
<p>应用图标</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OK3568 CPU主频最大1.9Ghz，默认情况下CPU会根据负载动态调整主频，也可以通过设置固定CPU主频率。

点击桌面 Power 图标进入CPU主频设置页面：
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278349339_bced7ad8_3cb7_438d_bc00_e5cf2f7ba5ba.jpeg" /></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Set Userspace Governor：用户态设置主频
</pre></div>
</div>
<p>Set Frequency A55：设置主频</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>以设置主频频率为例，如果需要设置固定频率，请先点击Set Userspace Governor，点击run，再返回上图操作界面，点击Set Frequency A55进行设置。
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278349538_3585a87e_e5ad_43fb_934a_f97477b071d2.jpeg" /></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>根据需求选择对应的频率进行设置。
</pre></div>
</div>
</section>
</section>
<section id="id25">
<h2><a class="headerlink" href="#id25" title="Link to this heading"></a></h2>
</section>
</section>
<section id="id26">
<h1>04_OK3568命令行功能测试<a class="headerlink" href="#id26" title="Link to this heading"></a></h1>
<section id="id27">
<h2>4.2 命令行功能测试<a class="headerlink" href="#id27" title="Link to this heading"></a></h2>
<p>OK3568平台内置了丰富的命令行工具可供用户使用。</p>
<section id="id28">
<h3>4.2.1 系统信息查询<a class="headerlink" href="#id28" title="Link to this heading"></a></h3>
<p>查看内核和cpu信息：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>uname<span class="w"> </span>-a
Linux<span class="w"> </span>OK3568-buildroot<span class="w"> </span><span class="m">5</span>.10.160<span class="w"> </span><span class="c1">#1 SMP Fri Oct 13 08:48:42 HKT 2023 aarch64 GNU/Linux</span>
</pre></div>
</div>
<p>查看操作系统信息：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/etc/issue
Welcome<span class="w"> </span>to<span class="w"> </span>RK3566_RK3568<span class="w"> </span>Buildroot
</pre></div>
</div>
<p>查看环境变量信息</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>env
<span class="nv">SHELL</span><span class="o">=</span>/bin/bash
<span class="nv">GST_V4L2_PREFERRED_FOURCC</span><span class="o">=</span>NV12:YU12:NV16:YUY2
<span class="nv">GST_VIDEO_CONVERT_PREFERRED_FORMAT</span><span class="o">=</span>NV12:NV16:I420:YUY2
<span class="nv">SEATD_VTBOUND</span><span class="o">=</span><span class="m">0</span>
<span class="nv">PIXMAN_USE_RGA</span><span class="o">=</span><span class="m">1</span>
<span class="nv">UMS_RO</span><span class="o">=</span><span class="m">0</span>
<span class="nv">CHROMIUM_FLAGS</span><span class="o">=</span>--enable-wayland-ime
<span class="nv">GST_V4L2_USE_LIBV4L2</span><span class="o">=</span><span class="m">1</span>
<span class="nv">UMS_MOUNTPOINT</span><span class="o">=</span>/mnt/ums
<span class="nv">GST_INSPECT_NO_COLORS</span><span class="o">=</span><span class="m">1</span>
<span class="nv">UMS_MOUNT</span><span class="o">=</span><span class="m">0</span>
<span class="nv">PULSE_HOME</span><span class="o">=</span>/userdata/.pulse
<span class="nv">QT_GSTREAMER_WINDOW_VIDEOSINK</span><span class="o">=</span>waylandsink
<span class="nv">EDITOR</span><span class="o">=</span>/bin/vi
<span class="nv">GST_DEBUG_NO_COLOR</span><span class="o">=</span><span class="m">1</span>
<span class="nv">PWD</span><span class="o">=</span>/
<span class="nv">LOGNAME</span><span class="o">=</span>root
<span class="nv">PREFERED_VIDEOSINK</span><span class="o">=</span>waylandsink
<span class="nv">UMS_SIZE</span><span class="o">=</span>256M
<span class="nv">HOME</span><span class="o">=</span>/root
<span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nv">ADB_TCP_PORT</span><span class="o">=</span><span class="m">5555</span>
<span class="nv">WESTON_FREEZE_DISPLAY</span><span class="o">=</span>/tmp/.freeze_weston
<span class="nv">QT_GSTREAMER_WIDGET_VIDEOSINK</span><span class="o">=</span>waylandsink
<span class="nv">WAYLANDSINK_FORCE_DMABUF</span><span class="o">=</span><span class="m">1</span>
<span class="nv">GST_V4L2SRC_DEFAULT_DEVICE</span><span class="o">=</span>/dev/video-camera0
<span class="nv">TERM</span><span class="o">=</span>vt100
<span class="nv">USER</span><span class="o">=</span>root
<span class="nv">UMS_FILE</span><span class="o">=</span>/userdata/ums_shared.img
<span class="nv">AUTOAUDIOSINK_PREFERRED</span><span class="o">=</span>pulsesink
<span class="nv">ADBD_SHELL</span><span class="o">=</span>/bin/bash
<span class="nv">GST_V4L2SRC_RK_DEVICES</span><span class="o">=</span>_mainpath:_selfpath:_bypass:_scale
<span class="nv">WESTON_DRM_MIRROR</span><span class="o">=</span><span class="m">1</span>
<span class="nv">UMS_FSTYPE</span><span class="o">=</span>vfat
<span class="nv">SHLVL</span><span class="o">=</span><span class="m">1</span>
<span class="nv">GST_VIDEO_FLIP_USE_RGA</span><span class="o">=</span><span class="m">1</span>
<span class="nv">USB_FUNCS</span><span class="o">=</span>adb
<span class="nv">QT_GSTREAMER_PLAYBIN</span><span class="o">=</span>playbin3
<span class="nv">WESTON_DISABLE_ATOMIC</span><span class="o">=</span><span class="m">1</span>
<span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span>/var/run
<span class="nv">PLAYBIN2_PREFERRED_AUDIOSINK</span><span class="o">=</span>pulsesink
<span class="nv">GST_VIDEO_CONVERT_USE_RGA</span><span class="o">=</span><span class="m">1</span>
<span class="nv">PATH</span><span class="o">=</span>/usr/bin:/usr/sbin
<span class="nv">QTWEBENGINE_CHROMIUM_FLAGS</span><span class="o">=</span>--no-sandbox<span class="w"> </span>--disable-es3-gl-context<span class="w"> </span>--ignore-gpu-blacklist<span class="w"> </span>--ignore-gpu-blocklist<span class="w"> </span>--enable-accelerated-video-decode
<span class="nv">GST_V4L2SRC_MAX_RESOLUTION</span><span class="o">=</span>3840x2160
<span class="nv">_</span><span class="o">=</span>/usr/bin/env
<span class="nv">OLDPWD</span><span class="o">=</span>/root
</pre></div>
</div>
</section>
<section id="id29">
<h3>4.2.2 调频测试<a class="headerlink" href="#id29" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>说明：此过程以cpu0为例操作，实际过程cpu1、cpu2、cpu3会同时改变。</strong></p></li>
</ul>
<p>1、当前内核中支持的所有cpufreq governor类型：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors
conservative<span class="w"> </span>ondemand<span class="w"> </span>userspace<span class="w"> </span>powersave<span class="w"> </span>interactive<span class="w"> </span>performance
</pre></div>
</div>
<p>其中userspace表示用户模式，在此模式下允许其他用户程序调节CPU频率。</p>
<p>2、查看当前CPU支持的频率档位</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
<span class="m">408000</span><span class="w"> </span><span class="m">600000</span><span class="w"> </span><span class="m">816000</span><span class="w"> </span><span class="m">1104000</span><span class="w"> </span><span class="m">1416000</span><span class="w"> </span><span class="m">1608000</span><span class="w"> </span><span class="m">1800000</span><span class="w"> </span><span class="m">1992000</span>
</pre></div>
</div>
<p>3、设置为用户模式，修改频率为1800000：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>userspace<span class="w"> </span>&gt;<span class="w"> </span>/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1800000</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed
</pre></div>
</div>
<p>查看修改后当前频率：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
<span class="m">1800000</span>
</pre></div>
</div>
</section>
<section id="id30">
<h3>4.2.3 温度测试<a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<p>查看温度值：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/sys/class/thermal/thermal_zone0/temp
<span class="m">56111</span>
</pre></div>
</div>
<p>温度值即为56℃。</p>
</section>
<section id="ddr">
<h3>4.2.4 DDR带宽测试<a class="headerlink" href="#ddr" title="Link to this heading"></a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>memory_bandwidth.sh
</pre></div>
</div>
<p>以下以OK3568-C为例，打印信息如下：</p>
<p><img alt="Image" src="_images/1719278349807_b0062ff0_42e9_4dc0_953c_c6e41b1ddf7f.png" /></p>
<p>OK3568-C的DDR4写带宽大约1480M/s，读带宽大约5100M/s。</p>
</section>
<section id="id31">
<h3>4.2.5 按键测试<a class="headerlink" href="#id31" title="Link to this heading"></a></h3>
<p><img alt="Image" src="_images/1719278350041_69289c78_69d0_4604_9725_f359e0d01c07.png" /></p>
<p>使用keytest命令行工具进行按键测试，目前keytest支持底板上四个按键V+、V-、Home、ESC的测试，键码分别为115、114、139、158。此时依次按下抬起按键，终端上可输出如下内容：</p>
<p>执行如下命令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w">  </span>fltest_keytest
Available<span class="w"> </span>devices:
/dev/input/event2:<span class="w">    </span>adc-keys
key115<span class="w"> </span>Presse
key115<span class="w"> </span>Released
key114<span class="w"> </span>Presse
key114<span class="w"> </span>Released
key139<span class="w"> </span>Presse
key139<span class="w"> </span>Released
key158<span class="w"> </span>Presse
key158<span class="w"> </span>Released
</pre></div>
</div>
</section>
<section id="id32">
<h3>4.2.6 串口测试<a class="headerlink" href="#id32" title="Link to this heading"></a></h3>
<p>OK3568 串口支持奇、偶校验，8 位数据位和1 位停止位。</p>
<p>在进行串口回环测试前，请先将需要测试的串口短接。OK3568平台底板原理图中标示引出的UART2、UART3、UART4、UART5、UART8共5路串口，其中UART2为调试串口，UART8为蓝牙串口。用户可用串口分别为UART3和UART4、UART5，在开发板中对应设备名称分别为ttyS3、ttyS4，ttyS5。在此以测试UART4串口为例，按照开发板原理图短接UART4的收发引脚，分别对应PIN29,PIN30。</p>
<p><img alt="Image" src="_images/1719278350392_6790a64b_37c7_4cda_95b6_f8ce5d08686a.png" /></p>
<p>短接完成后打开测试程序。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_uarttest<span class="w"> </span>-d<span class="w"> </span>/dev/ttyS4
Welcome<span class="w"> </span>to<span class="w"> </span>uart<span class="w"> </span><span class="nb">test</span>
Send<span class="w"> </span><span class="nb">test</span><span class="w"> </span>data:
forlinx_uart_test.1234567890...
Read<span class="w"> </span>Test<span class="w"> </span>Data<span class="w"> </span>finished,Read:
forlinx_uart_test.1234567890...
</pre></div>
</div>
<p>执行后串口打印如上内容，则说明串口通信基本正常。</p>
</section>
<section id="id33">
<h3>4.2.7 SPI 测试<a class="headerlink" href="#id33" title="Link to this heading"></a></h3>
<p>OK3568底板上引出2路SPI接口，默认软件上将其配置为spidev用于回环测试。测试时，请参考原理图短接 MOSI (PIN15)与MISO (PIN16)，然后分别使用下面的命令进行测试。</p>
<p><img alt="Image" src="_images/1719278350643_b70444ce_bf67_4e70_8a94_831eb688b494.png" /></p>
<p>未短接 SPI2_MOSI 与 SPI2_MISO，执行测试指令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_spidev_test<span class="w"> </span>-D<span class="w"> </span>/dev/spidev2.0
spi<span class="w"> </span>mode:<span class="w"> </span>0x0
bits<span class="w"> </span>per<span class="w"> </span>word:<span class="w"> </span><span class="m">8</span>
max<span class="w"> </span>speed:<span class="w"> </span><span class="m">500000</span><span class="w"> </span>Hz<span class="w"> </span><span class="o">(</span><span class="m">500</span><span class="w"> </span>KHz<span class="o">)</span>
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF
</pre></div>
</div>
<p>短接 SPI2_MOSI 与 SPI2_MISO，执行测试指令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_spidev_test<span class="w"> </span>-D<span class="w"> </span>/dev/spidev2.0
spi<span class="w"> </span>mode:<span class="w"> </span>0x0
bits<span class="w"> </span>per<span class="w"> </span>word:<span class="w"> </span><span class="m">8</span>
max<span class="w"> </span>speed:<span class="w"> </span><span class="m">500000</span><span class="w"> </span>Hz<span class="w"> </span><span class="o">(</span><span class="m">500</span><span class="w"> </span>KHz<span class="o">)</span>
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
<span class="m">40</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">95</span>
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF
DE<span class="w"> </span>AD<span class="w"> </span>BE<span class="w"> </span>EF<span class="w"> </span>BA<span class="w"> </span>AD
F0<span class="w"> </span>0D
</pre></div>
</div>
</section>
<section id="id34">
<h3>4.2.8 看门狗测试<a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<p>看门狗是嵌入式系统中经常用到的功能，OK3568中看门狗的设备结点为/dev/watchdog。本测试提供了两种测试程序，用户根据实际情况选择其中一种进行测试。</p>
<section id="fltest-watchdog-10s">
<h4>4.2.8.1 启动 fltest_watchdog，设置符为时间10s，并定时喂狗。<a class="headerlink" href="#fltest-watchdog-10s" title="Link to this heading"></a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_watchdog
Watchdog<span class="w"> </span>Ticking<span class="w"> </span>Away!
</pre></div>
</div>
<p>此命令会打开看门狗并执行喂狗操作，因此系统不会重启。</p>
<ul class="simple">
<li><p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：使用ctrl+c结束测试程序时，10s后系统会复位，如不想复位请在ctrl+c之后10s内输入:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_watchdog<span class="w"> </span>-d
Watchdog<span class="w"> </span>card<span class="w"> </span>disabled.<span class="w">   </span>//关闭看门狗
</pre></div>
</div>
</section>
<section id="fltest-watchdogrestart-10s">
<h4>4.2.8.2 启动fltest_watchdogrestart，设置复位时间为10s，不喂狗。<a class="headerlink" href="#fltest-watchdogrestart-10s" title="Link to this heading"></a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_watchdogrestart
Restart<span class="w"> </span>after<span class="w"> </span><span class="m">10</span><span class="w"> </span>seconds
</pre></div>
</div>
<p>此命令会打开看门狗，但不执行喂狗操作，系统会在10s后重启。</p>
</section>
</section>
<section id="id35">
<h3>4.2.9 WIFI测试<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<p>OK3568默认支持板载AW-CM358，支持STA和AP模式。</p>
<section id="sta">
<h4>4.2.9.1  STA模式<a class="headerlink" href="#sta" title="Link to this heading"></a></h4>
<p>使用wifi功能前需要用如下步骤配置：</p>
<p>步骤1：</p>
<p>假设Wifi热点的SSID名称为：ChinaNet-Jvgv密码为：asdasd123</p>
<p>开发板终端中输入如下命令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_wifi.sh<span class="w"> </span>-i<span class="w"> </span>mlan0<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;ChinaNet-Jvgv&quot;</span><span class="w"> </span>-p<span class="w"> </span>asdasd123
</pre></div>
</div>
<p>在如上命令中，</p>
<p>-i wlan0或wlan1，具体哪个结点对应哪个模块需要使用前确定，以实际情况为准；</p>
<p>-s连接的实际wifi热点名称；</p>
<p>-p 后接参数Password指要连接的实际wifi热点的密码，如果当前热点没有密码，-p后参数写NONE</p>
<p>步骤2：</p>
<p>检查是否能ping外网，在终端中输入如下命令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>ping<span class="w"> </span>www.forlinx.com
PING<span class="w"> </span>www.forlinx.com<span class="w"> </span><span class="o">(</span><span class="m">220</span>.181.111.188<span class="o">)</span>:<span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">220</span>.181.111.188:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">57</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">5</span>.562<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">220</span>.181.111.188:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">57</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">5</span>.884<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">220</span>.181.111.188:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">57</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">4</span>.595<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">220</span>.181.111.188:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">57</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">4</span>.323<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">220</span>.181.111.188:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">57</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">4</span>.682<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">220</span>.181.111.188:<span class="w"> </span><span class="nv">seq</span><span class="o">=</span><span class="m">5</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">57</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">3</span>.798<span class="w"> </span>ms
</pre></div>
</div>
<p>想要停止需按下Ctrl+C,能够ping通，说明此时网络已经可以正常使用</p>
</section>
<section id="ap">
<h4>4.2.9.2  AP模式<a class="headerlink" href="#ap" title="Link to this heading"></a></h4>
<p>使用热点功能前需要先连接配置好网口，确保网口可以联网。配置热点指令，第一遍运行指令AP变为DISABLED，第二遍运行时，为ENABLE，如下：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_hostapd.sh
killall:<span class="w"> </span>hostapd:<span class="w"> </span>no<span class="w"> </span>process<span class="w"> </span>killed
Stopping<span class="w"> </span>dnsmasq:<span class="w"> </span>FAIL
Starting<span class="w"> </span>dnsmasq:<span class="w"> </span>Configuration<span class="w"> </span>file:<span class="w"> </span>/etc/hostapd-2.4g.conf
Using<span class="w"> </span>interface<span class="w"> </span>uap0<span class="w"> </span>with<span class="w"> </span>hwaddr<span class="w"> </span>ea:fb:1c:67:09:af<span class="w"> </span>and<span class="w"> </span>ssid<span class="w"> </span><span class="s2">&quot;OK3568_WIFI_2.4G_AP&quot;</span>
<span class="o">[</span><span class="w">   </span><span class="m">75</span>.916321<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>Starting<span class="w"> </span>AP
OK
root@OK3568-buildroot:/#<span class="w"> </span><span class="o">[</span><span class="w">   </span><span class="m">75</span>.917730<span class="o">]</span><span class="w"> </span>fw<span class="w"> </span>doesn<span class="s1">&#39;t support 11ax</span>
<span class="s1">[   75.925842] CMD_RESP: cmd 0xb1 error, result=0x1</span>
<span class="s1">Failed to set beacon parameters</span>
<span class="s1">[   75.925876] IOCTL failed: 0000000023c4c37b id=0x20000, sub_id=0x20001 action=1, status_code=0x1</span>
<span class="s1">Interface initialization failed</span>
<span class="s1">[   75.925901] woal_cfg80211_add_beacon: start uap failed</span>
<span class="s1">uap0: interface state UNINITIALIZED-&gt;DISABLED</span>
<span class="s1">uap0: AP-DISABLED</span>
<span class="s1">uap0: Unable to setup interface.</span>
<span class="s1">uap0: interface state DISABLED-&gt;DISABLED</span>
<span class="s1">uap0: AP-DISABLED</span>
<span class="s1">uap0: CTRL-EVENT-TERMINATING</span>
<span class="s1">hostapd_free_hapd_data: Interface uap0 wasn&#39;</span>t<span class="w"> </span>started
nl80211:<span class="w"> </span>deinit<span class="w"> </span><span class="nv">ifname</span><span class="o">=</span>uap0<span class="w"> </span><span class="nv">disabled_11b_rates</span><span class="o">=</span><span class="m">0</span>
root@OK3568-buildroot:/#<span class="w"> </span>fltest_hostapd.sh
killall:<span class="w"> </span>hostapd:<span class="w"> </span>no<span class="w"> </span>process<span class="w"> </span>killed
Stopping<span class="w"> </span>dnsmasq:<span class="w"> </span>OK
Starting<span class="w"> </span>dnsmasq:<span class="w"> </span>Configuration<span class="w"> </span>file:<span class="w"> </span>/etc/hostapd-2.4g.conf
Using<span class="w"> </span>interface<span class="w"> </span>uap0<span class="w"> </span>with<span class="w"> </span>hwaddr<span class="w"> </span>ea:fb:1c:67:09:af<span class="w"> </span>and<span class="w"> </span>ssid<span class="w"> </span><span class="s2">&quot;OK3568_WIFI_2.4G_AP&quot;</span>
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.878776<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>Starting<span class="w"> </span>AP
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.880177<span class="o">]</span><span class="w"> </span>fw<span class="w"> </span>doesn<span class="err">&#39;</span>t<span class="w"> </span>support<span class="w"> </span>11ax
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.890603<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>AP<span class="w"> </span>started
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.890785<span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_CHANGE<span class="o">)</span>:<span class="w"> </span>uap0:<span class="w"> </span>link<span class="w"> </span>becomes<span class="w"> </span>ready
OK
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.896832<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">3</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">47</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">3</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">7</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">1</span>
root@OK3568-buildroot:/#<span class="w"> </span>uap0:<span class="w"> </span>interface<span class="w"> </span>state<span class="w"> </span>UNINITIALIZED-&gt;ENABLED
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.899399<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">94</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">7</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">15</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">1</span>
uap0:<span class="w"> </span>AP-ENABLED
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.901643<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">15</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">63</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">3</span>
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.903627<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">15</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">1023</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">7</span>
</pre></div>
</div>
<p>WiFi热点名称：forlinx</p>
<p>密码：12345678</p>
<p>此时手机可连接此热点，上外网。</p>
</section>
</section>
<section id="id36">
<h3>4.2.10 蓝牙测试<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<p>OK3568开发板底板的AW-CM358集成了蓝牙功能，本节演示使用手机与开发板之间通过蓝牙进行文件传输。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>bluetoothctl<span class="w">								</span>//打开bluez蓝牙工具
Agent<span class="w"> </span>registered
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># power on										//启动蓝牙设备</span>
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span><span class="m">36</span>:DC:25:54:7C:CB<span class="w"> </span>Class:<span class="w"> </span>0x00100000
Changing<span class="w"> </span>power<span class="w"> </span>on<span class="w"> </span>succeeded
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span><span class="m">36</span>:DC:25:54:7C:CB<span class="w"> </span>Powered:<span class="w"> </span>yes
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># pairable on									//设置为配对模式</span>
Changing<span class="w"> </span>pairable<span class="w"> </span>on<span class="w"> </span>succeeded
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># discoverable on								 //设置为可发现模式</span>
Changing<span class="w"> </span>discoverable<span class="w"> </span>on<span class="w"> </span>succeeded
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span><span class="m">36</span>:DC:25:54:7C:CB<span class="w"> </span>Discoverable:<span class="w"> </span>yes
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># agent on										//启动代理</span>
Agent<span class="w"> </span>is<span class="w"> </span>already<span class="w"> </span>registered
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># default-agent</span>
Default<span class="w"> </span>agent<span class="w"> </span>request<span class="w"> </span>successful
//此时，打开手机蓝牙进行扫描，如果长时间未扫描到请重复执行
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># discoverable on								//设置当前代理为默认</span>
//点击BlueZ<span class="w"> </span><span class="m">5</span>.50进行配对，手机端和开发板分别进行密码验证，选择“YES”。
<span class="o">[</span>NEW<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>OPPO<span class="w"> </span>Reno3<span class="w"> </span>元气版<span class="w"> </span>5G
Request<span class="w"> </span>confirmation
<span class="o">[</span>agent<span class="o">]</span><span class="w"> </span>Confirm<span class="w"> </span>passkey<span class="w"> </span><span class="m">508432</span><span class="w"> </span><span class="o">(</span>yes/no<span class="o">)</span>:<span class="w"> </span>yes
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>Modalias:<span class="w"> </span>bluetooth:v001Dp1200d1436
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001105</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>UUIDs:<span class="w"> </span>0000110a-0000-1000-8000-00805f9b34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>UUIDs:<span class="w"> </span>0000110c-0000-1000-8000-00805f9b34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>UUIDs:<span class="w"> </span>0000110e-0000-1000-8000-00805f9b34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001112</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001115</span>-0000-1000-8000-00805f9b34fb
E:5B:17:C7:78<span class="w"> </span>UUIDs:<span class="w"> </span>0000111f-0000-1000-8000-00805f9b34fbb34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>UUI-8000-00805f9b34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78-1000-8000-00805f9b34fb
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:700-1000-8000-00805f9b34fb
<span class="o">[</span>OPPO<span class="w"> </span>Reno3<span class="w"> </span>元气版<span class="w"> </span>5G<span class="o">]</span><span class="c1">#vice C4:FE:5B:17:C7:78 UUIDs: 0000aa15-0000-1000-8000-008[CHG] Device C4:FE:5B:17:C7:95c-9f4f-bb80a90cdf00</span>
ice<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>ServicesResolved:<span class="w"> </span>yes
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>Paired:<span class="w"> </span>yes
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span><span class="m">36</span>:DC:25:54:7C:CB<span class="w"> </span>Discoverable:<span class="w"> </span>no
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>ServicesResolved:<span class="w"> </span>no
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C4:FE:5B:17:C7:78<span class="w"> </span>Connected:<span class="w"> </span>no
配对成功后，可以将手机端的文件通过蓝牙分享到开发板。
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278350913_df9c333d_0740_4ed5_931c_c055cae5b122.png" /></p>
<p>输入quit退出bluetoothctl,接收到的文件位于/root目录。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># quit</span>
root@OK3568-buildroot:/#<span class="w">  </span>ls<span class="w"> </span>/root/
wx_camera_1581992646090.jpg
同时，我们也可以将开发板上的文件发送到手机端。
root@OK3568-buildroot:/#<span class="w"> </span>fltest_obexctl.sh
<span class="o">[</span>obex<span class="o">]</span><span class="c1"># connect C4:FE:5B:17:C7:78</span>
Attempting<span class="w"> </span>to<span class="w"> </span>connect<span class="w"> </span>to<span class="w"> </span>C4:FE:5B:17:C7:78
<span class="o">[</span>NEW<span class="o">]</span><span class="w"> </span>Session<span class="w"> </span>/org/bluez/obex/client/session0<span class="w"> </span><span class="o">[</span>default<span class="o">]</span>
<span class="o">[</span>NEW<span class="o">]</span><span class="w"> </span>ObjectPush<span class="w"> </span>/org/bluez/obex/client/session0
Connection<span class="w"> </span>successful
<span class="o">[</span>C4:FE:5B:17:C7:78<span class="o">]</span><span class="c1"># send /home/forlinx/audio/test.mp3</span>
Attempting<span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>/home/forlinx/audio/test.mp3<span class="w"> </span>to<span class="w"> </span>/org/bluez/obex/client/session0
<span class="o">[</span>NEW<span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0
Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0
<span class="w">        </span>Status:<span class="w"> </span>queued
<span class="w">        </span>Name:<span class="w"> </span>test.mp3
<span class="w">        </span>Size:<span class="w"> </span><span class="m">4818092</span>
<span class="w">        </span>Filename:<span class="w"> </span>/home/forlinx/audio/test.mp3
<span class="w">        </span>Session:<span class="w"> </span>/org/bluez/obex/client/session0
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0<span class="w"> </span>Status:<span class="w"> </span>active
<span class="o">[</span>CHG<span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0<span class="w"> </span>Transferred:<span class="w"> </span><span class="m">8046</span><span class="w"> </span><span class="o">(</span>@8KB/s<span class="w"> </span><span class="m">09</span>:57<span class="o">)</span>
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278351113_a7ae10ff_6f83_4923_8783_10849f874870.png" /></p>
<ul class="simple">
<li><p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：部分厂家手机接收的文件必须有后缀名，否则会被Android系统拒绝。因此测试时请尽量使用带有后缀名的文件进行测试。</p></li>
</ul>
</section>
<section id="id37">
<h3>4.2.11 RTC功能测试<a class="headerlink" href="#id37" title="Link to this heading"></a></h3>
<p>RTC 测试，主要通过使用 date 和 hwclock 工具设置软、硬件时间，测试当开发板断电再上电的时候，软件时钟读取RTC 时钟是否同步（注意：确保板子上已经安装了纽扣电池）。</p>
<p><img alt="Image" src="_images/1719278351323_70952562_19f7_4ff3_b7d6_77c0f64f0936.png" /></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>date<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;2022-2-9 10:50:00&quot;</span><span class="w">		</span>//设置时间
Wed<span class="w"> </span>Feb<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>:50:00<span class="w"> </span>UTC<span class="w"> </span><span class="m">2022</span><span class="w"> </span>
root@OK3568-buildroot:/#date<span class="w">							            	</span>//读取时间
Wed<span class="w"> </span>Feb<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>:51:00<span class="w"> </span>UTC<span class="w"> </span><span class="m">2022</span><span class="w"> </span>
root@OK3568-buildroot:/#hwclock<span class="w"> </span>-r<span class="w">					            </span>//查看硬件时间
Wed<span class="w"> </span>Feb<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">02</span>:50:14<span class="w"> </span><span class="m">2022</span><span class="w">  </span><span class="m">0</span>.000000<span class="w"> </span>seconds<span class="w"> </span>
root@OK3568-buildroot:/#hwclock<span class="w"> </span>-w<span class="w"> </span>-u<span class="w">				           </span>//将系统时间，计算时区，写入到RTC
//重启开发板，进入系统后读取系统时间，查看是否与设置的时间相同，注意不要接入外网，不然会自动对时。
root@OK3568-buildroot:/#<span class="w"> </span>date
Wed<span class="w"> </span>Feb<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>:52:00<span class="w"> </span>UTC<span class="w"> </span><span class="m">2022</span>
</pre></div>
</div>
</section>
<section id="usb">
<h3>4.2.12 USB鼠标测试<a class="headerlink" href="#usb" title="Link to this heading"></a></h3>
<p>将USB鼠标接入OK3568平台的usb接口，串口终端的打印信息如下：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w">  </span><span class="o">[</span><span class="w"> </span><span class="m">1513</span>.413310<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-1.2:<span class="w"> </span>new<span class="w"> </span>low-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">4</span><span class="w"> </span>using<span class="w"> </span>ehci-platform
<span class="o">[</span><span class="w"> </span><span class="m">1513</span>.503041<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-1.2:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>found,<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>192f,<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span><span class="m">0916</span>
<span class="o">[</span><span class="w"> </span><span class="m">1513</span>.503724<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-1.2:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>strings:<span class="w"> </span><span class="nv">Mfr</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">Product</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">SerialNumber</span><span class="o">=</span><span class="m">0</span>
<span class="o">[</span><span class="w"> </span><span class="m">1513</span>.504492<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-1.2:<span class="w"> </span>Product:<span class="w"> </span>USB<span class="w"> </span>Optical<span class="w"> </span>Mouse
<span class="o">[</span><span class="w"> </span><span class="m">1513</span>.511579<span class="o">]</span><span class="w"> </span>input:<span class="w"> </span>USB<span class="w"> </span>Optical<span class="w"> </span>Mouse<span class="w"> </span>as<span class="w"> </span>/devices/platform/fe380000.usb/usb3/3-1/3-1.2/3-1.2:1.0/0003:192F:0916.0002/input/input7
<span class="o">[</span><span class="w"> </span><span class="m">1513</span>.564896<span class="o">]</span><span class="w"> </span>hid-generic<span class="w"> </span><span class="m">0003</span>:192F:0916.0002:<span class="w"> </span>input,hidraw0:<span class="w"> </span>USB<span class="w"> </span>HID<span class="w"> </span>v1.11<span class="w"> </span>Mouse<span class="w"> </span><span class="o">[</span>USB<span class="w"> </span>Optical<span class="w"> </span>Mouse<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>usb-fe380000.usb-1.2/input0
</pre></div>
</div>
<p>此时在屏幕上出现箭头光标，鼠标已可正常使用。</p>
<p>当拔掉usb鼠标时，串口终端打印如下：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@<span class="w"> </span>rk3568/<span class="o">]</span><span class="c1"># [ 1583.443782] usb 3-1.2: USB disconnect, device number 4</span>
</pre></div>
</div>
<p>此时屏幕上箭头光标消失，鼠标已成功去除。</p>
</section>
<section id="usb-2-0-usb3-0">
<h3>4.2.13 USB 2.0/USB3.0<a class="headerlink" href="#usb-2-0-usb3-0" title="Link to this heading"></a></h3>
<p>OK3568支持两个USB2.0和一个USB3.0接口用户可以在任何一个板载USB HOST接口上连接USB鼠标、USB键盘、U盘等设备，并支持以上设备的热插拔。这里用挂载U盘为例进行演示，目前U盘测试支持到128G，128G以上并未测试。</p>
<p><img alt="Image" src="_images/1719278351657_3fda5e10_b4c0_4a51_898b_6feff96a376a.png" /></p>
<p>USB3.0和OTG复用，通过拨码开关切换使用，使用USB3.0接口时请确认拨码开关在ON位置：</p>
<p><img alt="Image" src="_images/1719278351981_a705799e_6294_4750_b08a_8deeb641beaf.png" /></p>
<p>终端会打印关于U盘的信息，由于存在很多种U盘，显示的信息可能会有差别：</p>
<p>步骤1：开发板启动后，连接USB接口u盘到开发板的USB host接口。</p>
<p>串口信息：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w">  </span><span class="o">[</span><span class="w"> </span><span class="m">1771</span>.366204<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">8</span>-1:<span class="w"> </span>new<span class="w"> </span>SuperSpeed<span class="w"> </span>Gen<span class="w"> </span><span class="m">1</span><span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">2</span><span class="w"> </span>using<span class="w"> </span>xhci-hcd
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.388752<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">8</span>-1:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>found,<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>05e3,<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span><span class="m">0749</span>,<span class="w"> </span><span class="nv">bcdDevice</span><span class="o">=</span><span class="m">15</span>.35
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.388893<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">8</span>-1:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>strings:<span class="w"> </span><span class="nv">Mfr</span><span class="o">=</span><span class="m">3</span>,<span class="w"> </span><span class="nv">Product</span><span class="o">=</span><span class="m">4</span>,<span class="w"> </span><span class="nv">SerialNumber</span><span class="o">=</span><span class="m">5</span>
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.388930<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">8</span>-1:<span class="w"> </span>Product:<span class="w"> </span>USB3.0<span class="w"> </span>Card<span class="w"> </span>Reader
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.388988<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">8</span>-1:<span class="w"> </span>Manufacturer:<span class="w"> </span>Generic
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.389034<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">8</span>-1:<span class="w"> </span>SerialNumber:<span class="w"> </span><span class="m">000000001536</span>
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.396803<span class="o">]</span><span class="w"> </span>usb-storage<span class="w"> </span><span class="m">8</span>-1:1.0:<span class="w"> </span>USB<span class="w"> </span>Mass<span class="w"> </span>Storage<span class="w"> </span>device<span class="w"> </span>detected
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.397699<span class="o">]</span><span class="w"> </span>usb-storage<span class="w"> </span><span class="m">8</span>-1:1.0:<span class="w"> </span>Quirks<span class="w"> </span>match<span class="w"> </span><span class="k">for</span><span class="w"> </span>vid<span class="w"> </span>05e3<span class="w"> </span>pid<span class="w"> </span><span class="m">0749</span>:<span class="w"> </span><span class="m">420</span>
<span class="o">[</span><span class="w"> </span><span class="m">1771</span>.397897<span class="o">]</span><span class="w"> </span>scsi<span class="w"> </span>host0:<span class="w"> </span>usb-storage<span class="w"> </span><span class="m">8</span>-1:1.0
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.421609<span class="o">]</span><span class="w"> </span>scsi<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span>Direct-Access<span class="w">     </span>Generic<span class="w">  </span>MassStorageClass<span class="w"> </span><span class="m">1536</span><span class="w"> </span>PQ:<span class="w"> </span><span class="m">0</span><span class="w"> </span>ANSI:<span class="w"> </span><span class="m">6</span>
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.725888<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span><span class="m">31116288</span><span class="w"> </span><span class="m">512</span>-byte<span class="w"> </span>logical<span class="w"> </span>blocks:<span class="w"> </span><span class="o">(</span><span class="m">15</span>.9<span class="w"> </span>GB/14.8<span class="w"> </span>GiB<span class="o">)</span>
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.726972<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Write<span class="w"> </span>Protect<span class="w"> </span>is<span class="w"> </span>off
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.728240<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Write<span class="w"> </span>cache:<span class="w"> </span>disabled,<span class="w"> </span><span class="nb">read</span><span class="w"> </span>cache:<span class="w"> </span>enabled,<span class="w"> </span>doesn<span class="err">&#39;</span>t<span class="w"> </span>support<span class="w"> </span>DPO<span class="w"> </span>or<span class="w"> </span>FUA
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.737200<span class="o">]</span><span class="w">  </span>sda:<span class="w"> </span>sda1
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.741706<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Attached<span class="w"> </span>SCSI<span class="w"> </span>removable<span class="w"> </span>disk
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.946654<span class="o">]</span><span class="w"> </span>FAT-fs<span class="w"> </span><span class="o">(</span>sda1<span class="o">)</span>:<span class="w"> </span>utf8<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>recommended<span class="w"> </span>IO<span class="w"> </span>charset<span class="w"> </span><span class="k">for</span><span class="w"> </span>FAT<span class="w"> </span>filesystems,<span class="w"> </span>filesystem<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span><span class="k">case</span><span class="w"> </span>sensitive!
<span class="o">[</span><span class="w"> </span><span class="m">1772</span>.949198<span class="o">]</span><span class="w"> </span>FAT-fs<span class="w"> </span><span class="o">(</span>sda1<span class="o">)</span>:<span class="w"> </span>Volume<span class="w"> </span>was<span class="w"> </span>not<span class="w"> </span>properly<span class="w"> </span>unmounted.<span class="w"> </span>Some<span class="w"> </span>data<span class="w"> </span>may<span class="w"> </span>be<span class="w"> </span>corrupt.<span class="w"> </span>Please<span class="w"> </span>run<span class="w"> </span>fsck.
</pre></div>
</div>
<p>步骤2：查看挂载目录：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>ls<span class="w"> </span>/run/media/
</pre></div>
</div>
<p>**sda1 **//sda1为第一个插入的USB存储设备，依次类推</p>
<p>步骤3：查看U盘内容：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@<span class="w"> </span>ok3568:/<span class="o">]</span><span class="c1"># ls -l /run/media/sda1</span>
drwxrwx---<span class="w"> </span><span class="m">3</span><span class="w"> </span>root<span class="w"> </span>disk<span class="w">      </span><span class="m">8192</span><span class="w"> </span>Mar<span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">2021</span><span class="w">  </span>Music
</pre></div>
</div>
<p>进行读写测试前，需要关注CPU的频率。</p>
<p>写入测试：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/run/media/sda1/test<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">500</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>fsync
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">37</span>.3332<span class="w"> </span>s,<span class="w"> </span><span class="m">14</span>.0<span class="w"> </span>MB/s//写入速度受限于具体的存储设备。
</pre></div>
</div>
<p>读取测试：</p>
<ul class="simple">
<li><p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：为确保数据准确，请重启开发板后测试读取速度。</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/run/media/sda1/test<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/null<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">20</span>.0277<span class="w"> </span>s,<span class="w"> </span><span class="m">26</span>.2<span class="w"> </span>MB/s<span class="w">   </span>
</pre></div>
</div>
</section>
<section id="id38">
<h3>4.2.14 屏幕背光调节<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<p>背光的亮度设置范围为（0–255），255表示亮度最高，0表示关闭背光亮度。进入系统后在终端输入如下命令进行背光测试。</p>
<ol class="arabic simple">
<li><p><strong>查看当前屏幕背光值：</strong></p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/sys/class/backlight/lvds-backlight/brightness<span class="w">		</span>//查看LVDS屏幕背光值
<span class="m">200</span>
root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/sys/class/backlight/dsi1-backlight/brightness<span class="w">		 </span>//查看dsi屏幕背光值
<span class="m">200</span>
root@OK3568-buildroot:/#<span class="w"> </span>cat<span class="w"> </span>/sys/class/backlight/edp-backlight/brightness<span class="w">		</span>//查看edp屏幕背光值
<span class="m">200</span>
</pre></div>
</div>
<p><strong>2、背光熄灭：</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;/sys/class/backlight/lvds-backlight/brightness<span class="w">      	</span>//熄灭LVDS屏幕背光
root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;/sys/class/backlight/dsi1-backlight/brightness<span class="w">        	 </span>//熄灭dsi屏幕背光
root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/backlight/edp-backlight/brightness<span class="w">			</span>//熄灭edp屏幕背光
</pre></div>
</div>
<p><strong>3、LCD背光亮起：</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">255</span><span class="w"> </span>&gt;/sys/class/backlight/lvds-backlight/brightness<span class="w">       </span>//点亮LVDS屏幕背光
root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">255</span><span class="w"> </span>&gt;/sys/class/backlight/dsi1-backlight/brightness<span class="w">         </span>//点亮dsi屏幕背光
root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">255</span>&gt;<span class="w"> </span>/sys/class/backlight/edp-backlight/brightness<span class="w">		</span>//点亮edp屏幕背光
</pre></div>
</div>
</section>
<section id="tf">
<h3>4.2.15 TF卡测试<a class="headerlink" href="#tf" title="Link to this heading"></a></h3>
<p>将TF卡插入开发板底板上的TF卡插槽，正常情况下开发板终端有如下打印信息：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w">  </span><span class="o">[</span><span class="w">  </span><span class="m">294</span>.166421<span class="o">]</span><span class="w"> </span>mmc_host<span class="w"> </span>mmc1:<span class="w"> </span>Bus<span class="w"> </span>speed<span class="w"> </span><span class="o">(</span>slot<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>50000000Hz<span class="w"> </span><span class="o">(</span>slot<span class="w"> </span>req<span class="w"> </span>100000000Hz,<span class="w"> </span>actual<span class="w"> </span>50000000HZ<span class="w"> </span><span class="nv">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.186093<span class="o">]</span><span class="w"> </span>dwmmc_rockchip<span class="w"> </span>fe2b0000.dwmmc:<span class="w"> </span>Successfully<span class="w"> </span>tuned<span class="w"> </span>phase<span class="w"> </span>to<span class="w"> </span><span class="m">360</span>
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.186188<span class="o">]</span><span class="w"> </span>mmc1:<span class="w"> </span>new<span class="w"> </span>ultra<span class="w"> </span>high<span class="w"> </span>speed<span class="w"> </span>SDR50<span class="w"> </span>SDHC<span class="w"> </span>card<span class="w"> </span>at<span class="w"> </span>address<span class="w"> </span>aaaa
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.191496<span class="o">]</span><span class="w"> </span>mmcblk1:<span class="w"> </span>mmc1:aaaa<span class="w"> </span>SL08G<span class="w"> </span><span class="m">7</span>.40<span class="w"> </span>GiB
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.202785<span class="o">]</span><span class="w">  </span>mmcblk1:<span class="w"> </span>p1
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.266294<span class="o">]</span><span class="w"> </span>dwmmc_rockchip<span class="w"> </span>fe2b0000.dwmmc:<span class="w"> </span>Successfully<span class="w"> </span>tuned<span class="w"> </span>phase<span class="w"> </span>to<span class="w"> </span><span class="m">70</span>
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.279993<span class="o">]</span><span class="w"> </span>mmc_host<span class="w"> </span>mmc1:<span class="w"> </span>Bus<span class="w"> </span>speed<span class="w"> </span><span class="o">(</span>slot<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>375000Hz<span class="w"> </span><span class="o">(</span>slot<span class="w"> </span>req<span class="w"> </span>400000Hz,<span class="w"> </span>actual<span class="w"> </span>375000HZ<span class="w"> </span><span class="nv">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.458237<span class="o">]</span><span class="w"> </span>mmc_host<span class="w"> </span>mmc1:<span class="w"> </span>Bus<span class="w"> </span>speed<span class="w"> </span><span class="o">(</span>slot<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>50000000Hz<span class="w"> </span><span class="o">(</span>slot<span class="w"> </span>req<span class="w"> </span>100000000Hz,<span class="w"> </span>actual<span class="w"> </span>50000000HZ<span class="w"> </span><span class="nv">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">294</span>.847627<span class="o">]</span><span class="w"> </span>dwmmc_rockchip<span class="w"> </span>fe2b0000.dwmmc:<span class="w"> </span>Successfully<span class="w"> </span>tuned<span class="w"> </span>phase<span class="w"> </span>to<span class="w"> </span><span class="m">360</span>
<span class="o">[</span><span class="w">  </span><span class="m">295</span>.071071<span class="o">]</span><span class="w"> </span>FAT-fs<span class="w"> </span><span class="o">(</span>mmcblk1p1<span class="o">)</span>:<span class="w"> </span>utf8<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>recommended<span class="w"> </span>IO<span class="w"> </span>charset<span class="w"> </span><span class="k">for</span><span class="w"> </span>FAT<span class="w"> </span>filesystems,<span class="w"> </span>filesystem<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span><span class="k">case</span><span class="w"> </span>sensitive!
<span class="o">[</span><span class="w">  </span><span class="m">295</span>.073331<span class="o">]</span><span class="w"> </span>FAT-fs<span class="w"> </span><span class="o">(</span>mmcblk1p1<span class="o">)</span>:<span class="w"> </span>Volume<span class="w"> </span>was<span class="w"> </span>not<span class="w"> </span>properly<span class="w"> </span>unmounted.<span class="w"> </span>Some<span class="w"> </span>data<span class="w"> </span>may<span class="w"> </span>be<span class="w"> </span>corrupt.<span class="w"> </span>Please<span class="w"> </span>run<span class="w"> </span>fsck.
</pre></div>
</div>
<p>默认情况下TF卡挂载到文件系统 /run/media/目录</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>mount<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>mmcblk1<span class="w">             </span>//查看挂载目录
/dev/mmcblk1p1<span class="w"> </span>on<span class="w"> </span>/run/media/mmcblk1p1<span class="w"> </span><span class="nb">type</span><span class="w"> </span>vfat<span class="w"> </span><span class="o">(</span>rw,relatime,fmask<span class="o">=</span><span class="m">0022</span>,dmask<span class="o">=</span><span class="m">0022</span>,codepage<span class="o">=</span><span class="m">936</span>,iocharset<span class="o">=</span>utf8,shortname<span class="o">=</span>mixed,errors<span class="o">=</span>remount-ro<span class="o">)</span>
</pre></div>
</div>
<p>写入测试</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/run/media/mmcblk1p1/test<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">500</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>fsync
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">24</span>.6959<span class="w"> </span>s,<span class="w"> </span><span class="m">21</span>.2<span class="w"> </span>MB/s<span class="w"> </span>
</pre></div>
</div>
<p>读取测试</p>
<ul class="simple">
<li><p>注意：为确保数据准确，请重启开发板后测试读取速度。</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/run/media/mmcblk1p1/test<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/null<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M//读取测试
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">8</span>.31059<span class="w"> </span>s,<span class="w"> </span><span class="m">63</span>.1<span class="w"> </span>MB/s<span class="w"> 	</span>
</pre></div>
</div>
</section>
<section id="id39">
<h3>4.2.16 eMMC 测试<a class="headerlink" href="#id39" title="Link to this heading"></a></h3>
<p>OK3568平台eMMC默认运行于HS400模式200MHz时钟，下面简单测试eMMC的读写速度，以读写ext4文件系统为例。</p>
<ul class="simple">
<li><p>注意：为确保数据准确，请重启开发板后测试读取速度。</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/test<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">500</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>fsync//写入测试
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">6</span>.73418<span class="w"> </span>s,<span class="w"> </span><span class="m">77</span>.9<span class="w"> </span>MB/s
root@OK3568-buildroot:/#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/test<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/null<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span>//读取测试
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">500</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">3</span>.05486<span class="w"> </span>s,<span class="w"> </span><span class="m">172</span><span class="w"> </span>MB/s<span class="w">       </span>
</pre></div>
</div>
</section>
<section id="id40">
<h3>4.2.17 以太网配置<a class="headerlink" href="#id40" title="Link to this heading"></a></h3>
<p>OK3568板载两个千兆网卡，插入网线连接网络的情况下，OK3568开发板启动时将启动获取IP</p>
<section id="ip">
<h4>4.2.17.1  固定IP方法<a class="headerlink" href="#ip" title="Link to this heading"></a></h4>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：该方法为固定网络IP的方法，使用该方法后网卡可以获取对应网络IP即为正常，若网络ping不通，需注意Linux系统下多网卡同网段问题，按场景需求配置路由，或默认使用不同网段即可。</p>
<p>开发板IP：192.168.1.151</p>
<p>路由器IP：192.168.1.1</p>
<p>子网掩码：255.255.255.0</p>
<p>开发板上电，执行如下命令</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>vi<span class="w"> </span>/etc/network/interfaces<span class="w">   </span>//打开配置文件
<span class="c1"># interface file auto-generated by buildroot</span>
auto<span class="w"> </span>lo
iface<span class="w"> </span>lo<span class="w"> </span>inet<span class="w"> </span>loopback
//以下为需要添加的内容
auto<span class="w"> </span>eth0
iface<span class="w"> </span>eth0<span class="w"> </span>inet<span class="w"> </span>static<span class="w">       										  </span>//指定需要固定IP的网卡
address<span class="w"> </span><span class="m">192</span>.168.1.151<span class="w">      									    	</span>//指定需要固定的IP地址
netmask<span class="w"> </span><span class="m">255</span>.255.255.0<span class="w">     									    	</span>//指定需要固定的子网掩码
gateway<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w">      										      </span>//指定网关
//保存退出后重启板子或者重新启停配置：
root@OK3568-buildroot:/#<span class="w"> </span>ifdown<span class="w"> </span>-a<span class="w">									  </span>//停止使用配置
root@OK3568-buildroot:/#<span class="w"> </span>ifup<span class="w"> </span>-a<span class="w">											</span>//启用配置
<span class="o">[</span><span class="w">  </span><span class="m">646</span>.969888<span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>eth0:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
root@OK3568-buildroot:/#<span class="w">  </span><span class="o">[</span><span class="w">  </span><span class="m">651</span>.976934<span class="o">]</span><span class="w"> </span>rk_gmac-dwmac<span class="w"> </span>fe300000.ethernet<span class="w"> </span>eth0:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span>-<span class="w"> </span>1Gbps/Full<span class="w"> </span>-<span class="w"> </span>flow<span class="w"> </span>control<span class="w"> </span>off
<span class="o">[</span><span class="w">  </span><span class="m">651</span>.977798<span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_CHANGE<span class="o">)</span>:<span class="w"> </span>eth0:<span class="w"> </span>link<span class="w"> </span>becomes<span class="w"> </span>ready
</pre></div>
</div>
</section>
<section id="id41">
<h4>4.2.17.2  自动获取IP方法<a class="headerlink" href="#id41" title="Link to this heading"></a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>vi<span class="w"> </span>/etc/network/interfaces<span class="w">   	  </span>//打开配置文件
<span class="c1"># interface file auto-generated by buildroot</span>
auto<span class="w"> </span>lo
iface<span class="w"> </span>lo<span class="w"> </span>inet<span class="w"> </span>loopback
//以下为需要添加的内容，去掉address、netmask、gateway属性。
auto<span class="w"> </span>eth0
iface<span class="w"> </span>eth0<span class="w"> </span>inet<span class="w"> </span>dhcp
//保存退出后重启板子或者重新启停配置
root@OK3568-buildroot:/#<span class="w">  </span>ifdown<span class="w"> </span>-a<span class="w">											</span>//停止使用配置
root@OK3568-buildroot:/#<span class="w">  </span>ifup<span class="w"> </span>-a<span class="w">												</span>//启用配置
<span class="o">[</span><span class="w">  </span><span class="m">971</span>.278624<span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>eth0:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
udhcpc:<span class="w"> </span>started,<span class="w"> </span>v1.27.2
udhcpc:<span class="w"> </span>sending<span class="w"> </span>discover
udhcpc:<span class="w"> </span>sending<span class="w"> </span>discover
<span class="o">[</span><span class="w">  </span><span class="m">975</span>.284961<span class="o">]</span><span class="w"> </span>rk_gmac-dwmac<span class="w"> </span>fe300000.ethernet<span class="w"> </span>eth0:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span>-<span class="w"> </span>1Gbps/Full<span class="w"> </span>-<span class="w"> </span>flow<span class="w"> </span>control<span class="w"> </span>off
<span class="o">[</span><span class="w">  </span><span class="m">975</span>.285828<span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_CHANGE<span class="o">)</span>:<span class="w"> </span>eth0:<span class="w"> </span>link<span class="w"> </span>becomes<span class="w"> </span>ready
</pre></div>
</div>
</section>
</section>
<section id="web">
<h3>4.2.18 Web服务<a class="headerlink" href="#web" title="Link to this heading"></a></h3>
<p>OK3568开发板预装了lighttpdweb服务器，并且系统启动时已经自动启动了lighttpd服务，在PC端的浏览器中输入开发板的IP 地址即可浏览开发板webserver 中的网页，如下图所示：</p>
<p><img alt="Image" src="_images/1719278352301_9a9c652e_6632_4390_8e62_63297b6458da.png" /></p>
<ul class="simple">
<li><p>注意：开发板的网络ip需要和PC机的网络IP在同一网段下才可以正常使用该功能，或者PC在开发板所处网络的子网下。</p></li>
</ul>
</section>
<section id="id42">
<h3>4.2.19 放/录音测试<a class="headerlink" href="#id42" title="Link to this heading"></a></h3>
<p>开发板上提供了<font style="color:#000000;">标准 3.5mm 音频插座1 个XH2.54-2P 白色插座 P25 引出,可驱动8Ω 喇叭，最高输出功率为 1.3W，</font>在进行放音测试前，请将准备好的耳机插入听筒接口，或将扬声器插入底板上的对应插槽上，使用如下命令进行测试：</p>
<p><img alt="Image" src="_images/1719278352613_65d7016b_8ddc_45f2_925a_a4b172267b26.png" /></p>
<ul class="simple">
<li><p>注意：在进行录音测试前，请将准备好的麦克插入3.5mm耳机接口。</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>gst-play-1.0<span class="w"> </span>/userdata/media/test.mp3<span class="w">    </span>
//耳机或扬声器音频播放测试
Press<span class="w"> </span><span class="s1">&#39;k&#39;</span><span class="w"> </span>to<span class="w"> </span>see<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>keyboard<span class="w"> </span>shortcuts.
Now<span class="w"> </span>playing<span class="w"> </span>/home/forlinx/audio/test.mp3
Redistribute<span class="w"> </span>latency...
<span class="m">0</span>:00:05.8<span class="w"> </span>/<span class="w"> </span><span class="m">0</span>:05:00.0
root@OK3568-buildroot:/#<span class="w"> </span>gst-play-1.0<span class="w"> </span>/userdata/media/test.mp3<span class="w"> </span>--audiosink<span class="o">=</span><span class="s2">&quot;alsasink device=hw:1,0&quot;</span>
//<span class="w"> </span>HDMI播放音频测试
Press<span class="w"> </span><span class="s1">&#39;k&#39;</span><span class="w"> </span>to<span class="w"> </span>see<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>keyboard<span class="w"> </span>shortcuts.<span class="w">						</span>
Now<span class="w"> </span>playing<span class="w"> </span>/home/forlinx/audio/test.mp3
Redistribute<span class="w"> </span>latency...
<span class="m">0</span>:00:05.3<span class="w"> </span>/<span class="w"> </span><span class="m">0</span>:05:00.0
root@OK3568-buildroot:/#<span class="w"> </span>arecord<span class="w"> </span>-c<span class="w"> </span><span class="m">2</span><span class="w"> </span>-r<span class="w"> </span><span class="m">44100</span><span class="w"> </span>-f<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>mic.wav<span class="w">		</span>
//录音测试，ctrl<span class="w"> </span>+<span class="w"> </span>c键停止录音。
Recording<span class="w"> </span>WAVE<span class="w"> </span><span class="s1">&#39;mic.wav&#39;</span><span class="w"> </span>:<span class="w"> </span>Signed<span class="w"> </span><span class="m">16</span><span class="w"> </span>bit<span class="w"> </span>Little<span class="w"> </span>Endian,<span class="w"> </span>Rate<span class="w"> </span><span class="m">44100</span><span class="w"> </span>Hz,<span class="w"> </span>Stereo
Aborted<span class="w"> </span>by<span class="w"> </span>signal<span class="w"> </span>Interrupt...
root@OK3568-buildroot:/#<span class="w"> </span>ls<span class="w">						</span>//在当前目录下即可看到生成的录音文件mic.wav
bin<span class="w">	            </span>home<span class="w">    </span>lost+found<span class="w">   </span>oem<span class="w">         	</span>run<span class="w">     	</span>timestamp<span class="w">  </span>var
busybox.config<span class="w">	</span>init<span class="w">     	 </span>media<span class="w">       </span>opt<span class="w">            </span>sbin<span class="w">    	</span>tmp
data<span class="w">	</span>lib<span class="w">          </span>mic.wav<span class="w">	 </span>proc<span class="w">         </span>sdcard<span class="w">        </span>udisk
dev<span class="w">	            </span>lib64<span class="w">   	 </span>misc<span class="w">         </span>rockchip_test<span class="w">  	</span>sys<span class="w">      </span>userdata
etc<span class="w">	            </span>linuxrc<span class="w">   </span>mnt<span class="w">          </span>root<span class="w">           </span>system<span class="w">  </span>usr
</pre></div>
</div>
</section>
<section id="g-em05-ce">
<h3>4.2.20 4G EM05-CE模块测试<a class="headerlink" href="#g-em05-ce" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OK3568支持4G模块，开发板启动前接入4G模块，并插入SIM卡，启动开发板。
</pre></div>
</div>
<ul class="simple">
<li><p><strong>注意：测试时请注意SIM插入方向，在底板上有丝印标识，接入天线，使用中卡进行测试。</strong></p></li>
</ul>
<p><img alt="Image" src="_images/1719278352941_05f448d6_c980_4ea0_add9_ac501ceaeead.png" />           <img alt="Image" src="_images/1719278353197_4e3becb0_3a56_485d_b311_76aae48c0b8a.png" /></p>
<p><img alt="Image" src="_images/1719278353750_da665f9c_b6f0_40f5_a903_9f960f23925f.png" /></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>quectelCM<span class="w"> </span><span class="p">&amp;</span>
root@OK3568-buildroot:/#<span class="w"> </span><span class="o">[</span><span class="m">01</span>-01_08:00:25:082<span class="o">]</span><span class="w"> </span>Quectel_QConnectManager_Linux_V1.6.0.24
<span class="o">[</span><span class="m">01</span>-01_08:00:25:083<span class="o">]</span><span class="w"> </span>Find<span class="w"> </span>/sys/bus/usb/devices/5-1<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>0x2c7c<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span>0x125,<span class="w"> </span><span class="nv">bus</span><span class="o">=</span>0x005,<span class="w"> </span><span class="nv">dev</span><span class="o">=</span>0x002
<span class="o">[</span><span class="m">01</span>-01_08:00:25:092<span class="o">]</span><span class="w"> </span>Auto<span class="w"> </span>find<span class="w"> </span><span class="nv">qmichannel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>/dev/qcqmi0
<span class="o">[</span><span class="m">01</span>-01_08:00:25:096<span class="o">]</span><span class="w"> </span>Auto<span class="w"> </span>find<span class="w"> </span><span class="nv">usbnet_adapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>usb0
<span class="o">[</span><span class="m">01</span>-01_08:00:25:101<span class="o">]</span><span class="w"> </span>netcard<span class="w"> </span><span class="nv">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>GobiNet,<span class="w"> </span>driver<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">22</span>-Aug-2005
<span class="o">[</span><span class="m">01</span>-01_08:00:25:108<span class="o">]</span><span class="w"> </span>Modem<span class="w"> </span>works<span class="w"> </span><span class="k">in</span><span class="w"> </span>QMI<span class="w"> </span>mode
<span class="o">[</span><span class="m">01</span>-01_08:00:25:138<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientWDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>
<span class="o">[</span><span class="m">01</span>-01_08:00:25:170<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientDMS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span>
<span class="o">[</span><span class="m">01</span>-01_08:00:25:202<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientNAS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">9</span>
<span class="o">[</span><span class="m">01</span>-01_08:00:25:234<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientUIM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="o">[</span><span class="m">01</span>-01_08:00:25:267<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientWDA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">11</span>
<span class="o">[</span><span class="m">01</span>-01_08:00:25:299<span class="o">]</span><span class="w"> </span>requestBaseBandVersion<span class="w"> </span>EM05CEFCR06A02M1G_ND
<span class="o">[</span><span class="m">01</span>-01_08:00:25:427<span class="o">]</span><span class="w"> </span>requestGetSIMStatus<span class="w"> </span>SIMStatus:<span class="w"> </span>SIM_READY
<span class="o">[</span><span class="m">01</span>-01_08:00:25:459<span class="o">]</span><span class="w"> </span>requestGetProfile<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>cmnet///0
<span class="o">[</span><span class="m">01</span>-01_08:00:25:491<span class="o">]</span><span class="w"> </span>requestRegistrationState2<span class="w"> </span>MCC:<span class="w"> </span><span class="m">460</span>,<span class="w"> </span>MNC:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>PS:<span class="w"> </span>Attached,<span class="w"> </span>DataCap:<span class="w"> </span>LTE
<span class="o">[</span><span class="m">01</span>-01_08:00:25:523<span class="o">]</span><span class="w"> </span>requestQueryDataCall<span class="w"> </span>IPv4ConnectionStatus:<span class="w"> </span>DISCONNECTED
<span class="o">[</span><span class="m">01</span>-01_08:00:25:525<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span><span class="m">0</span>.0.0.0
<span class="o">[</span><span class="w">   </span><span class="m">25</span>.714570<span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>usb0:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span><span class="w">   </span><span class="m">25</span>.714707<span class="o">]</span><span class="w"> </span>IPv6<span class="o">[</span><span class="m">01</span>-01_08:00:25:539<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span>down
:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_CHANGE<span class="o">)</span>:<span class="w"> </span>usb0:<span class="w"> </span>link<span class="w"> </span>becomes<span class="w"> </span>ready
<span class="o">[</span><span class="m">01</span>-01_08:00:25:780<span class="o">]</span><span class="w"> </span>requestSetupDataCall<span class="w"> </span>WdsConnectionIPv4Handle:<span class="w"> </span>0x872dea00
<span class="o">[</span><span class="m">01</span>-01_08:00:25:940<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span>up
<span class="o">[</span><span class="m">01</span>-01_08:00:25:952<span class="o">]</span><span class="w"> </span>busybox<span class="w"> </span>udhcpc<span class="w"> </span>-f<span class="w"> </span>-n<span class="w"> </span>-q<span class="w"> </span>-t<span class="w"> </span><span class="m">5</span><span class="w"> </span>-i<span class="w"> </span>usb0
udhcpc:<span class="w"> </span>started,<span class="w"> </span>v1.27.2
udhcpc:<span class="w"> </span>sending<span class="w"> </span>discover
udhcpc:<span class="w"> </span>sending<span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">10</span>.25.28.200
udhcpc:<span class="w"> </span>lease<span class="w"> </span>of<span class="w"> </span><span class="m">10</span>.25.28.200<span class="w"> </span>obtained,<span class="w"> </span>lease<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">7200</span>
<span class="o">[</span><span class="m">01</span>-01_08:00:26:119<span class="o">]</span><span class="w"> </span>deleting<span class="w"> </span>routers
<span class="o">[</span><span class="m">01</span>-01_08:00:26:152<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>dns<span class="w"> </span><span class="m">111</span>.11.1.3
<span class="o">[</span><span class="m">01</span>-01_08:00:26:152<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>dns<span class="w"> </span><span class="m">111</span>.11.11.3
<span class="o">[</span><span class="m">01</span>-01_08:00:29:683<span class="o">]</span><span class="w"> </span>requestRegistrationState2<span class="w"> </span>MCC:<span class="w"> </span><span class="m">460</span>,<span class="w"> </span>MNC:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>PS:<span class="w"> </span>Attached,<span class="w"> </span>DataCap:<span class="w"> </span>LTE
<span class="o">[</span><span class="w">   </span><span class="m">32</span>.227679<span class="o">]</span><span class="w"> </span>vcc3v3_lcd2_n:<span class="w"> </span>disabling
root@OK3568-buildroot:/#<span class="w"> </span>ping<span class="w"> </span>www.forlinx.com<span class="w">		</span>
//进行ping测试
PING<span class="w"> </span>s-526319.gotocdn.com<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span><span class="w"> </span><span class="m">56</span><span class="o">(</span><span class="m">84</span><span class="o">)</span><span class="w"> </span>bytes<span class="w"> </span>of<span class="w"> </span>data.
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">211</span>.149.226.120<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">51</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1430</span><span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">211</span>.149.226.120<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">51</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">434</span><span class="w"> </span>ms
^C<span class="w">										</span>
---<span class="w"> </span>s-526319.gotocdn.com<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<span class="m">7</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">2</span><span class="w"> </span>received,<span class="w"> </span><span class="m">71</span>%<span class="w"> </span>packet<span class="w"> </span>loss,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>5999ms
rtt<span class="w"> </span>min/avg/max/mdev<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">434</span>.376/932.642/1430.909/498.267<span class="w"> </span>ms,<span class="w"> </span>pipe<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
</section>
<section id="grm500u-5g">
<h3>4.2.21 5G移远RM500U 5G模块<a class="headerlink" href="#grm500u-5g" title="Link to this heading"></a></h3>
<p>默认支持5G模块型号为移远RM500U。</p>
<ul class="simple">
<li><p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font><strong>注意：测试时请注意SIM插入方向，在底板上有丝印标识，接入天线，使用中卡进行测试。</strong></p></li>
</ul>
<p><img alt="Image" src="_images/1719278354286_e6598aea_92d6_4f12_9470_9d461beb46e9.png" />     <img alt="Image" src="_images/1719278354610_75f79799_93f9_40e0_ae84_0061bb80b8a9.png" /></p>
<p><img alt="Image" src="_images/1719278355063_66e3ac36_7487_4bf5_b45b_051b87b454f7.png" />5G转接卡搭载移远RM500U5G模块，与OK3568连接，测试方法如下：</p>
<p>在OK3568 的控制台查看移远RM500U 5G 模块是否识别成功：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w">  </span>lsusb<span class="w">											</span>//查看usb挂载的设备
Bus<span class="w"> </span><span class="m">003</span><span class="w"> </span>Device<span class="w"> </span><span class="m">002</span>:<span class="w"> </span>ID<span class="w"> </span><span class="m">0424</span>:2514
Bus<span class="w"> </span><span class="m">004</span><span class="w"> </span>Device<span class="w"> </span><span class="m">003</span>:<span class="w"> </span>ID<span class="w"> </span>2c7c:0900<span class="w">							        </span>//RM500U<span class="w"> </span>5G模块节点
Bus<span class="w"> </span><span class="m">001</span><span class="w"> </span>Device<span class="w"> </span><span class="m">001</span>:<span class="w"> </span>ID<span class="w"> </span>1d6b:0002
Bus<span class="w"> </span><span class="m">002</span><span class="w"> </span>Device<span class="w"> </span><span class="m">001</span>:<span class="w"> </span>ID<span class="w"> </span>1d6b:0001
Bus<span class="w"> </span><span class="m">003</span><span class="w"> </span>Device<span class="w"> </span><span class="m">001</span>:<span class="w"> </span>ID<span class="w"> </span>1d6b:0002
Bus<span class="w"> </span><span class="m">004</span><span class="w"> </span>Device<span class="w"> </span><span class="m">001</span>:<span class="w"> </span>ID<span class="w"> </span>1d6b:0003
Bus<span class="w"> </span><span class="m">005</span><span class="w"> </span>Device<span class="w"> </span><span class="m">001</span>:<span class="w"> </span>ID<span class="w"> </span>1d6b:0002
Bus<span class="w"> </span><span class="m">006</span><span class="w"> </span>Device<span class="w"> </span><span class="m">001</span>:<span class="w"> </span>ID<span class="w"> </span>1d6b:0001
</pre></div>
</div>
<p>查看是否产生dev下的结点:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>ls<span class="w"> </span>/dev/ttyUSB*<span class="w">									</span>
/dev/ttyUSB0<span class="w">  </span>/dev/ttyUSB1<span class="w">  </span>/dev/ttyUSB2<span class="w">  </span>/dev/ttyUSB3<span class="w">	        </span>//这四个结点都是5G模块产生
</pre></div>
</div>
<p>联网测试</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>quectelCM<span class="w"> </span><span class="p">&amp;</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="m">1204</span>
root@OK3568-buildroot:/#<span class="w"> </span><span class="o">[</span><span class="m">10</span>-19_08:39:03:926<span class="o">]</span><span class="w"> </span>Quectel_QConnectManager_Linux_V1.6.0.24
<span class="o">[</span><span class="m">10</span>-19_08:39:03:928<span class="o">]</span><span class="w"> </span>Find<span class="w"> </span>/sys/bus/usb/devices/6-1<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>0x2c7c<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span>0x900,<span class="w"> </span><span class="nv">bus</span><span class="o">=</span>0x006,<span class="w"> </span><span class="nv">dev</span><span class="o">=</span>0x002
<span class="o">[</span><span class="m">10</span>-19_08:39:03:928<span class="o">]</span><span class="w"> </span>Auto<span class="w"> </span>find<span class="w"> </span><span class="nv">qmichannel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>/dev/ttyUSB2
<span class="o">[</span><span class="m">10</span>-19_08:39:03:928<span class="o">]</span><span class="w"> </span>Auto<span class="w"> </span>find<span class="w"> </span><span class="nv">usbnet_adapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>usb0
<span class="o">[</span><span class="m">10</span>-19_08:39:03:928<span class="o">]</span><span class="w"> </span>netcard<span class="w"> </span><span class="nv">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>cdc_ncm,<span class="w"> </span>driver<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>.10.160
<span class="o">[</span><span class="m">10</span>-19_08:39:03:928<span class="o">]</span><span class="w"> </span>Modem<span class="w"> </span>works<span class="w"> </span><span class="k">in</span><span class="w"> </span>ECM_RNDIS_NCM<span class="w"> </span>mode
<span class="o">[</span><span class="m">10</span>-19_08:39:03:937<span class="o">]</span><span class="w"> </span><span class="nv">atc_fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:03:937<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>ATE0Q0V1
<span class="o">[</span><span class="m">10</span>-19_08:39:03:938<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+Q+ATE0Q0V1
<span class="o">[</span><span class="m">10</span>-19_08:39:03:942<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+CME<span class="w"> </span>ERROR:<span class="w"> </span><span class="m">4</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:943<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QCFG<span class="o">=</span><span class="s2">&quot;NAT&quot;</span>,1
<span class="o">[</span><span class="m">10</span>-19_08:39:04:944<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QCFG<span class="o">=</span><span class="s2">&quot;NAT&quot;</span>,1
<span class="o">[</span><span class="m">10</span>-19_08:39:04:964<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:965<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QCFG<span class="o">=</span><span class="s2">&quot;usbnet&quot;</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:965<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QCFG<span class="o">=</span><span class="s2">&quot;usbnet&quot;</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:967<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QCFG:<span class="w"> </span><span class="s2">&quot;usbnet&quot;</span>,5
<span class="o">[</span><span class="m">10</span>-19_08:39:04:967<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:967<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVCTL<span class="o">=</span>?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:968<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVCTL<span class="o">=</span>?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:970<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QNETDEVCTL:<span class="w"> </span><span class="o">(</span><span class="m">1</span>-8<span class="o">)</span>,<span class="o">(</span><span class="m">0</span>-3<span class="o">)</span>,<span class="o">(</span><span class="m">0</span>,1<span class="o">)</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:970<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:970<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+CGREG<span class="o">=</span><span class="m">2</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:971<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+CGREG<span class="o">=</span><span class="m">2</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:975<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:975<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span>?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:976<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span>?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:980<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QNETDEVSTATUS:<span class="w"> </span><span class="o">(</span><span class="m">1</span>-8<span class="o">)</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:980<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:980<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+CGMR
<span class="o">[</span><span class="m">10</span>-19_08:39:04:981<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+CGMR
<span class="o">[</span><span class="m">10</span>-19_08:39:04:981<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>RM500UCNAAR03A01M2G_01.001.01.001
<span class="o">[</span><span class="m">10</span>-19_08:39:04:981<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:981<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+CPIN?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:982<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+CPIN?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:982<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+CPIN:<span class="w"> </span>READY
<span class="o">[</span><span class="m">10</span>-19_08:39:04:982<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:983<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QCCID
<span class="o">[</span><span class="m">10</span>-19_08:39:04:983<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QCCID
<span class="o">[</span><span class="m">10</span>-19_08:39:04:985<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QCCID:<span class="w"> </span><span class="m">89860119801762954063</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:985<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:986<span class="o">]</span><span class="w"> </span>requestGetICCID<span class="w"> </span><span class="m">89860119801762954063</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:986<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+CIMI
<span class="o">[</span><span class="m">10</span>-19_08:39:04:986<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+CIMI
<span class="o">[</span><span class="m">10</span>-19_08:39:04:987<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span><span class="m">460011239017205</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:987<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:04:987<span class="o">]</span><span class="w"> </span>requestGetIMSI<span class="w"> </span><span class="m">460011239017205</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:04:987<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+COPS<span class="o">=</span><span class="m">3</span>,0<span class="p">;</span>+COPS?<span class="p">;</span>+COPS<span class="o">=</span><span class="m">3</span>,1<span class="p">;</span>+COPS?<span class="p">;</span>+COPS<span class="o">=</span><span class="m">3</span>,2<span class="p">;</span>+COPS?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:988<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+COPS<span class="o">=</span><span class="m">3</span>,0<span class="p">;</span>+COPS?<span class="p">;</span>+COPS<span class="o">=</span><span class="m">3</span>,1<span class="p">;</span>+COPS?<span class="p">;</span>+COPS<span class="o">=</span><span class="m">3</span>,2<span class="p">;</span>+COPS?
<span class="o">[</span><span class="m">10</span>-19_08:39:04:994<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+COPS:<span class="w"> </span><span class="m">0</span>,0,<span class="s2">&quot;CHN-UNICOM&quot;</span>,11
<span class="o">[</span><span class="m">10</span>-19_08:39:04:997<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+COPS:<span class="w"> </span><span class="m">0</span>,1,<span class="s2">&quot;CUCC&quot;</span>,11
<span class="o">[</span><span class="m">10</span>-19_08:39:05:000<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+COPS:<span class="w"> </span><span class="m">0</span>,2,<span class="s2">&quot;46001&quot;</span>,11
<span class="o">[</span><span class="m">10</span>-19_08:39:05:001<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:05:001<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:05:002<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:05:073<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+CME<span class="w"> </span>ERROR:<span class="w"> </span><span class="m">3</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:05:073<span class="o">]</span><span class="w"> </span>requestQueryDataCall<span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">call_state</span><span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:05:073<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span><span class="m">0</span>.0.0.0
<span class="o">[</span><span class="m">10</span>-19_08:39:05:084<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span>down
<span class="o">[</span><span class="m">10</span>-19_08:39:05:091<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVCTL<span class="o">=</span><span class="m">1</span>,1,0
<span class="o">[</span><span class="m">10</span>-19_08:39:05:092<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVCTL<span class="o">=</span><span class="m">1</span>,1,0
<span class="o">[</span><span class="m">10</span>-19_08:39:05:326<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:05:326<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:05:327<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:05:386<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+CME<span class="w"> </span>ERROR:<span class="w"> </span><span class="m">3</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:06:387<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:06:388<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:06:450<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+CME<span class="w"> </span>ERROR:<span class="w"> </span><span class="m">3</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:447<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QNETDEVSTATUS:<span class="w"> </span><span class="m">1</span>,1,<span class="s2">&quot;IPV4V6&quot;</span>,0
<span class="o">[</span><span class="m">10</span>-19_08:39:07:451<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:452<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:512<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QNETDEVSTATUS:<span class="w"> </span><span class="m">10</span>.130.122.198,255.255.255.0,10.130.122.1,,202.99.160.68,202.99.166.4,2408:841e:52f0:a2f4:178f:7578:4e3d:7937,,,,2408:8888:0000:8888:0000:0000:0000:0008,2408:8899:0000:8899:0000:0000:0000:0008
<span class="o">[</span><span class="m">10</span>-19_08:39:07:512<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:07:512<span class="o">]</span><span class="w"> </span>requestSetupDataCall<span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="m">0</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:512<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:513<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:573<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QNETDEVSTATUS:<span class="w"> </span><span class="m">10</span>.130.122.198,255.255.255.0,10.130.122.1,,202.99.160.68,202.99.166.4,2408:841e:52f0:a2f4:178f:7578:4e3d:7937,,,,2408:8888:0000:8888:0000:0000:0000:0008,2408:8899:0000:8899:0000:0000:0000:0008
<span class="o">[</span><span class="m">10</span>-19_08:39:07:573<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:07:573<span class="o">]</span><span class="w"> </span>requestGetIPAddress<span class="w"> </span><span class="m">10</span>.130.122.198
<span class="o">[</span><span class="m">10</span>-19_08:39:07:574<span class="o">]</span><span class="w"> </span>requestGetIPAddress<span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="m">0</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:574<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:574<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:636<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QNETDEVSTATUS:<span class="w"> </span><span class="m">10</span>.130.122.198,255.255.255.0,10.130.122.1,,202.99.160.68,202.99.166.4,2408:841e:52f0:a2f4:178f:7578:4e3d:7937,,,,2408:8888:0000:8888:0000:0000:0000:0008,2408:8899:0000:8899:0000:0000:0000:0008
<span class="o">[</span><span class="m">10</span>-19_08:39:07:636<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="w">   </span><span class="m">40</span>.298676<span class="o">]</span><span class="w"> </span>cdc_ncm<span class="w"> </span><span class="m">6</span>-1:1.0<span class="w"> </span>usb0:<span class="w"> </span><span class="m">3750</span><span class="w"> </span>mbit/s<span class="w"> </span>downlink<span class="w"> </span><span class="m">3750</span><span class="w"> </span>mbit/s<span class="w"> </span>uplink
<span class="o">[</span><span class="m">10</span>-19_08:39:07:636<span class="o">]</span><span class="w"> </span>requestQueryDataCall<span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">call_state</span><span class="o">=</span><span class="m">2</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:636<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span>up
<span class="o">[</span><span class="m">10</span>-19_08:39:07:647<span class="o">]</span><span class="w"> </span>busybox<span class="w"> </span>udhcpc<span class="w"> </span>-f<span class="w"> </span>-n<span class="w"> </span>-q<span class="w"> </span>-t<span class="w"> </span><span class="m">5</span><span class="w"> </span>-i<span class="w"> </span>usb0
udhcpc:<span class="w"> </span>started,<span class="w"> </span>v1.36.0
<span class="o">[</span><span class="w">   </span><span class="m">40</span>.330672<span class="o">]</span><span class="w"> </span>cdc_ncm<span class="w"> </span><span class="m">6</span>-1:1.0<span class="w"> </span>usb0:<span class="w"> </span><span class="m">3750</span><span class="w"> </span>mbit/s<span class="w"> </span>downlink<span class="w"> </span><span class="m">3750</span><span class="w"> </span>mbit/s<span class="w"> </span>uplink
udhcpc:<span class="w"> </span>broadcasting<span class="w"> </span>discover
<span class="o">[</span><span class="w">   </span><span class="m">40</span>.362690<span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_CHANGE<span class="o">)</span>:<span class="w"> </span>usb0:<span class="w"> </span>link<span class="w"> </span>becomes<span class="w"> </span>ready
udhcpc:<span class="w"> </span>broadcasting<span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">192</span>.168.42.2,<span class="w"> </span>server<span class="w"> </span><span class="m">192</span>.168.42.1
udhcpc:<span class="w"> </span>lease<span class="w"> </span>of<span class="w"> </span><span class="m">192</span>.168.42.2<span class="w"> </span>obtained<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.42.1,<span class="w"> </span>lease<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">86400</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:927<span class="o">]</span><span class="w"> </span>deleting<span class="w"> </span>routers
<span class="o">[</span><span class="m">10</span>-19_08:39:07:950<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>dns<span class="w"> </span><span class="m">192</span>.168.42.1
<span class="o">[</span><span class="m">10</span>-19_08:39:07:953<span class="o">]</span><span class="w"> </span>AT&gt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:07:953<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>AT+QNETDEVSTATUS<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="m">10</span>-19_08:39:08:015<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>+QNETDEVSTATUS:<span class="w"> </span><span class="m">10</span>.130.122.198,255.255.255.0,10.130.122.1,,202.99.160.68,202.99.166.4,2408:841e:52f0:a2f4:178f:7578:4e3d:7937,,,,2408:8888:0000:8888:0000:0000:0000:0008,2408:8899:0000:8899:0000:0000:0000:0008
<span class="o">[</span><span class="m">10</span>-19_08:39:08:015<span class="o">]</span><span class="w"> </span>AT&lt;<span class="w"> </span>OK
<span class="o">[</span><span class="m">10</span>-19_08:39:08:015<span class="o">]</span><span class="w"> </span>requestQueryDataCall<span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">call_state</span><span class="o">=</span><span class="m">2</span>
root@OK3568-buildroot:/#<span class="w"> </span>ifconfig<span class="w">			</span>//查看网络节点
root@OK3568-buildroot:/#<span class="w"> </span>ifconfig
……
usb0<span class="w">      </span>Link<span class="w"> </span>encap:Ethernet<span class="w">  </span>HWaddr<span class="w"> </span><span class="m">16</span>:3B:47:30:6C:4E<span class="w">  </span>//5G模块网口名称为usb0
<span class="w">          </span>inet<span class="w"> </span>addr:192.168.42.2<span class="w">  </span>Bcast:192.168.42.255<span class="w">  </span>Mask:255.255.255.0
<span class="w">          </span>inet6<span class="w"> </span>addr:<span class="w"> </span>fe80::143b:47ff:fe30:6c4e/64<span class="w"> </span>Scope:Link
<span class="w">          </span>inet6<span class="w"> </span>addr:<span class="w"> </span><span class="m">2408</span>:841e:52f0:a2f4:143b:47ff:fe30:6c4e/64<span class="w"> </span>Scope:Global
<span class="w">          </span>UP<span class="w"> </span>BROADCAST<span class="w"> </span>RUNNING<span class="w"> </span>MULTICAST<span class="w">  </span>MTU:1500<span class="w">  </span>Metric:1
<span class="w">          </span>RX<span class="w"> </span>packets:71<span class="w"> </span>errors:0<span class="w"> </span>dropped:0<span class="w"> </span>overruns:0<span class="w"> </span>frame:0
<span class="w">          </span>TX<span class="w"> </span>packets:78<span class="w"> </span>errors:0<span class="w"> </span>dropped:0<span class="w"> </span>overruns:0<span class="w"> </span>carrier:0
<span class="w">          </span>collisions:0<span class="w"> </span>txqueuelen:1000
<span class="w">          </span>RX<span class="w"> </span>bytes:9388<span class="w"> </span><span class="o">(</span><span class="m">9</span>.1<span class="w"> </span>KiB<span class="o">)</span><span class="w">  </span>TX<span class="w"> </span>bytes:7059<span class="w"> </span><span class="o">(</span><span class="m">6</span>.8<span class="w"> </span>KiB<span class="o">)</span>
</pre></div>
</div>
<p>ping测试</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>ping<span class="w"> </span>www.forlinx.com<span class="w">								</span>
PING<span class="w"> </span>s-526319.gotocdn.com<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span><span class="w"> </span><span class="m">56</span><span class="o">(</span><span class="m">84</span><span class="o">)</span><span class="w"> </span>bytes<span class="w"> </span>of<span class="w"> </span>data.
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">211</span>.149.226.120<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">49</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">47</span>.2<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">211</span>.149.226.120<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">49</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">60</span>.8<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">211</span>.149.226.120<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">49</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">81</span>.4<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">211</span>.149.226.120<span class="w"> </span><span class="o">(</span><span class="m">211</span>.149.226.120<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">49</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">59</span>.5<span class="w"> </span>ms
^C<span class="w">																</span>//可以ping通，5G联网成功。
---<span class="w"> </span>s-526319.gotocdn.com<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<span class="m">4</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">4</span><span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>3001ms
rtt<span class="w"> </span>min/avg/max/mdev<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">47</span>.205/62.253/81.403/12.274<span class="w"> </span>ms
</pre></div>
</div>
</section>
<section id="id43">
<h3>4.2.22 休眠唤醒测试<a class="headerlink" href="#id43" title="Link to this heading"></a></h3>
<p>OK3568 Linux 平台支持休眠唤醒。目前长鑫内存，已经将休眠唤醒功能去掉。请核实核心板配置。其他核心板休眠唤醒测试方法如下：</p>
<p>短按电源键进入休眠，打印信息如下：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span><span class="o">[</span><span class="w">  </span><span class="m">146</span>.005510<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span>entry<span class="w"> </span><span class="m">2019</span>-01-01<span class="w"> </span><span class="m">00</span>:02:23.751546568<span class="w"> </span>UTC
<span class="o">[</span><span class="w">  </span><span class="m">146</span>.006082<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span>Syncing<span class="w"> </span>filesystems<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>.
<span class="o">[</span><span class="w">  </span><span class="m">146</span>.010583<span class="o">]</span><span class="w"> </span>Freezing<span class="w"> </span>user<span class="w"> </span>space<span class="w"> </span>processes<span class="w"> </span>...<span class="w"> </span><span class="o">(</span>elapsed<span class="w"> </span><span class="m">0</span>.002<span class="w"> </span>seconds<span class="o">)</span><span class="w"> </span><span class="k">done</span>.
<span class="o">[</span><span class="w">  </span><span class="m">146</span>.014178<span class="o">]</span><span class="w"> </span>Freezing<span class="w"> </span>remaining<span class="w"> </span>freezable<span class="w"> </span>tasks<span class="w"> </span>...<span class="w"> </span><span class="o">(</span>elapsed<span class="w"> </span><span class="m">0</span>.001<span class="w"> </span>seconds<span class="o">)</span><span class="w"> </span><span class="k">done</span>.
<span class="o">[</span><span class="w">  </span><span class="m">146</span>.016954<span class="o">]</span><span class="w"> </span>Suspending<span class="w"> </span>console<span class="o">(</span>s<span class="o">)</span><span class="w"> </span><span class="o">(</span>use<span class="w"> </span>no_console_suspend<span class="w"> </span>to<span class="w"> </span>debug<span class="o">)</span>
INFO:<span class="w">    </span>sleep<span class="w"> </span>mode<span class="w"> </span>config<span class="o">[</span>0xde<span class="o">]</span>:
INFO:<span class="w">           </span>AP_PWROFF
INFO:<span class="w">           </span>SLP_ARMPD
INFO:<span class="w">           </span>SLP_PLLPD
INFO:<span class="w">           </span>DDR_RET
INFO:<span class="w">           </span>SLP_CENTER_PD
INFO:<span class="w">    </span>wakeup<span class="w"> </span><span class="nb">source</span><span class="w"> </span>config<span class="o">[</span>0x804<span class="o">]</span>:
INFO:<span class="w">           </span>GPIO<span class="w"> </span>interrupt<span class="w"> </span>can<span class="w"> </span>wakeup<span class="w"> </span>system
INFO:<span class="w">           </span>PWM<span class="w"> </span>interrupt<span class="w"> </span>can<span class="w"> </span>wakeup<span class="w"> </span>system
INFO:<span class="w">    </span>PWM<span class="w"> </span>CONFIG<span class="o">[</span>0x4<span class="o">]</span>:
INFO:<span class="w">           </span>PWM:<span class="w"> </span>PWM2D_REGULATOR_EN
INFO:<span class="w">    </span>APIOS<span class="w"> </span>info<span class="o">[</span>0x0<span class="o">]</span>:
INFO:<span class="w">           </span>not<span class="w"> </span>config
INFO:<span class="w">    </span>GPIO<span class="w"> </span>POWER<span class="w"> </span>INFO:
INFO:<span class="w">           </span>GPIO1_C1
INFO:<span class="w">           </span>GPIO1_B6
INFO:<span class="w">    </span>PMU_MODE_CONG:<span class="w"> </span>0x1477bf51
短按电源键进行唤醒：
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.308000<span class="o">]</span><span class="w"> </span>bcmsdh_sdmmc_suspend<span class="w"> </span>Enter<span class="w"> </span>func-&gt;num<span class="o">=</span><span class="m">2</span>
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.308006<span class="o">]</span><span class="w"> </span>dhdsdio_suspend<span class="w"> </span>Enter
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.308014<span class="o">]</span><span class="w"> </span>bcmsdh_sdmmc_suspend<span class="w"> </span>Exit
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.308021<span class="o">]</span><span class="w"> </span>bcmsdh_sdmmc_suspend<span class="w"> </span>Enter<span class="w"> </span>func-&gt;num<span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.428104<span class="o">]</span><span class="w"> </span>rtc-rx8010<span class="w"> </span><span class="m">1</span>-0032:<span class="w"> </span>Frequency<span class="w"> </span>stop<span class="w"> </span>detected
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.429361<span class="o">]</span><span class="w"> </span><span class="o">[</span>WLAN_RFKILL<span class="o">]</span>:<span class="w"> </span>Enter<span class="w"> </span>rfkill_wlan_suspend
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.477563<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span>of<span class="w"> </span>devices<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>after<span class="w"> </span><span class="m">837</span>.115<span class="w"> </span>msecs
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.481929<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span>late<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span>of<span class="w"> </span>devices<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>after<span class="w"> </span><span class="m">3</span>.344<span class="w"> </span>msecs
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.484390<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span>noirq<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span>of<span class="w"> </span>devices<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>after<span class="w"> </span><span class="m">2</span>.447<span class="w"> </span>msecs
/********************************此处省略部分打印信息********************************/
<span class="o">[</span><span class="w">   </span><span class="m">23</span>.989994<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span>usb6:<span class="w"> </span>root<span class="w"> </span>hub<span class="w"> </span>lost<span class="w"> </span>power<span class="w"> </span>or<span class="w"> </span>was<span class="w"> </span>reset
<span class="o">[</span><span class="w">   </span><span class="m">24</span>.249974<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">5</span>-1:<span class="w"> </span>reset<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">2</span><span class="w"> </span>using<span class="w"> </span>ehci-platform
<span class="o">[</span><span class="w">   </span><span class="m">24</span>.470421<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span>resume<span class="w"> </span>of<span class="w"> </span>devices<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>after<span class="w"> </span><span class="m">839</span>.550<span class="w"> </span>msecs
<span class="o">[</span><span class="w">   </span><span class="m">24</span>.471591<span class="o">]</span><span class="w"> </span><span class="o">[</span>BT_RFKILL<span class="o">]</span>:<span class="w"> </span>**<span class="w"> </span>disable<span class="w"> </span>irq
<span class="o">[</span><span class="w">   </span><span class="m">24</span>.502992<span class="o">]</span><span class="w"> </span>Restarting<span class="w"> </span>tasks<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>.
<span class="o">[</span><span class="w">   </span><span class="m">24</span>.505391<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1970</span>-01-01<span class="w"> </span><span class="m">00</span>:00:24.418767219<span class="w"> </span>UTC
<span class="o">[</span><span class="w">   </span><span class="m">26</span>.774360<span class="o">]</span><span class="w"> </span>rk_gmac-dwmac<span class="w"> </span>fe300000.ethernet<span class="w"> </span>eth0:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span>-<span class="w"> </span>1Gbps/Full<span class="w"> </span>-<span class="w"> </span>flow<span class="w"> </span>control<span class="w"> </span>off
</pre></div>
</div>
<p>另外当前测试发现蓝牙休眠唤醒之后有问题。休眠之前，可将WIFI/蓝牙模块驱动卸载，唤醒之后，再加载WIFI/蓝牙模块驱动。</p>
</section>
<section id="npu-opencv">
<h3>4.2.23 NPU OpenCV测试<a class="headerlink" href="#npu-opencv" title="Link to this heading"></a></h3>
<p>OK3568平台默认编译了OpenCV4-4.5.43的库，可以使用如下的命令进行OpenCV的测试。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>rknn_common_test<span class="w">  </span>/usr/share/model/RK3566_RK3568/mobilenet_v1.rknn<span class="w">  </span>/usr/share/model/cat_224x224.jpg
rknn_api/rknnrt<span class="w"> </span>version:<span class="w"> </span><span class="m">1</span>.5.0<span class="w"> </span><span class="o">(</span>e6fe0c678@2023-05-25T08:09:20<span class="o">)</span>,<span class="w"> </span>driver<span class="w"> </span>version:<span class="w"> </span><span class="m">0</span>.9.0
model<span class="w"> </span>input<span class="w"> </span>num:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span>output<span class="w"> </span>num:<span class="w"> </span><span class="m">1</span>
input<span class="w"> </span>tensors:
<span class="w">  </span><span class="nv">index</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">name</span><span class="o">=</span>input,<span class="w"> </span><span class="nv">n_dims</span><span class="o">=</span><span class="m">4</span>,<span class="w"> </span><span class="nv">dims</span><span class="o">=[</span><span class="m">1</span>,<span class="w"> </span><span class="m">224</span>,<span class="w"> </span><span class="m">224</span>,<span class="w"> </span><span class="m">3</span><span class="o">]</span>,<span class="w"> </span><span class="nv">n_elems</span><span class="o">=</span><span class="m">150528</span>,<span class="w"> </span><span class="nv">size</span><span class="o">=</span><span class="m">150528</span>,<span class="w"> </span><span class="nv">fmt</span><span class="o">=</span>NHWC,<span class="w"> </span><span class="nv">type</span><span class="o">=</span>INT8,<span class="w"> </span><span class="nv">qnt_type</span><span class="o">=</span>AFFINE,<span class="w"> </span><span class="nv">zp</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">scale</span><span class="o">=</span><span class="m">0</span>.007812
output<span class="w"> </span>tensors:
<span class="w">  </span><span class="nv">index</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">name</span><span class="o">=</span>MobilenetV1/Predictions/Reshape_1,<span class="w"> </span><span class="nv">n_dims</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">dims</span><span class="o">=[</span><span class="m">1</span>,<span class="w"> </span><span class="m">1001</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">0</span><span class="o">]</span>,<span class="w"> </span><span class="nv">n_elems</span><span class="o">=</span><span class="m">1001</span>,<span class="w"> </span><span class="nv">size</span><span class="o">=</span><span class="m">1001</span>,<span class="w"> </span><span class="nv">fmt</span><span class="o">=</span>UNDEFINED,<span class="w"> </span><span class="nv">type</span><span class="o">=</span>INT8,<span class="w"> </span><span class="nv">qnt_type</span><span class="o">=</span>AFFINE,<span class="w"> </span><span class="nv">zp</span><span class="o">=</span>-128,<span class="w"> </span><span class="nv">scale</span><span class="o">=</span><span class="m">0</span>.003906
custom<span class="w"> </span>string:
Begin<span class="w"> </span>perf<span class="w"> </span>...
<span class="w">   </span><span class="m">0</span>:<span class="w"> </span>Elapse<span class="w"> </span><span class="nv">Time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>.63ms,<span class="w"> </span><span class="nv">FPS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">177</span>.65
----<span class="w"> </span>Top5<span class="w"> </span>----
<span class="m">0</span>.468750<span class="w"> </span>-<span class="w"> </span><span class="m">283</span>
<span class="m">0</span>.242188<span class="w"> </span>-<span class="w"> </span><span class="m">282</span>
<span class="m">0</span>.105469<span class="w"> </span>-<span class="w"> </span><span class="m">286</span>
<span class="m">0</span>.089844<span class="w"> </span>-<span class="w"> </span><span class="m">464</span>
<span class="m">0</span>.019531<span class="w"> </span>-<span class="w"> </span><span class="m">264</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>瑞芯微提供了丰富的测试用例，可参考应用笔记中NPU，进行编译测试。
</pre></div>
</div>
</section>
<section id="can">
<h3>4.2.24 CAN测试<a class="headerlink" href="#can" title="Link to this heading"></a></h3>
<p>OK3568-C平台有两路CAN总线接口，CAN 连线方式： CAN 的 H 端子与其它 CAN 设备 H 端连接；CAN的 L 端子与其它 CAN 设备 L 端子连接。</p>
<p>短接CAN0和CAN1，在开发板终端执行如下命令：</p>
<p>设置CAN0/CAN1,波特率为500K。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>ifconfig<span class="w"> </span>can0<span class="w"> </span>down
root@OK3568-buildroot:/#<span class="w"> </span>ifconfig<span class="w"> </span>can1<span class="w"> </span>down
root@OK3568-buildroot:/#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can0<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>bitrate<span class="w"> </span><span class="m">500000</span><span class="w"> </span>
root@OK3568-buildroot:/#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can1<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>bitrate<span class="w"> </span><span class="m">500000</span><span class="w"> </span>
root@OK3568-buildroot:/#<span class="w"> </span>ifconfig<span class="w"> </span>can0<span class="w"> </span>up
root@OK3568-buildroot:/#<span class="w"> </span>ifconfig<span class="w"> </span>can1<span class="w"> </span>up
can0设备当服务端（服务端先执行以下命令）
root@OK3568-buildroot:/#<span class="w">  </span>candump<span class="w"> </span>can0<span class="p">&amp;</span>
can1设备当客户端（客户端发送数据）
root@OK3568-buildroot:/#<span class="w"> </span>cansend<span class="w"> </span>can1<span class="w"> </span><span class="m">123</span><span class="c1">#1122334aabbccd			\\发送标准帧</span>
can0<span class="w">  </span><span class="m">123</span><span class="w">   </span><span class="o">[</span><span class="m">7</span><span class="o">]</span><span class="w">  </span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">33</span><span class="w"> </span>4A<span class="w"> </span>AB<span class="w"> </span>BC<span class="w"> </span>CD
root@OK3568-buildroot:/#<span class="w"> </span>cansend<span class="w"> </span>can1<span class="w"> </span><span class="m">00895441</span><span class="c1">#1122334aabbccd		\\发送扩展帧</span>
can0<span class="w">  </span><span class="m">000</span><span class="w">   </span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="w">  </span>remote<span class="w"> </span>request
can0<span class="w">  </span><span class="m">00895441</span><span class="w">   </span><span class="o">[</span><span class="m">7</span><span class="o">]</span><span class="w">  </span><span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">33</span><span class="w"> </span>4A<span class="w"> </span>AB<span class="w"> </span>BC<span class="w"> </span>CD
</pre></div>
</div>
<ul class="simple">
<li><p>注意：发送扩展帧时，由驱动补充一帧标准远程帧来引导扩展帧的正确性，如此操作是为了规避rk3568芯片本身的CAN控制器IP层设计问题，在快速、大量发送扩展帧时，有3%的概率会丢失扩展帧ID，导致丢数据，为确保数据的准确性，原厂提供了两种规避方案，我司默认采用workround帧+扩展帧的方案，workround帧内容可修改，原厂该解决方案存在快速发送扩展帧时ID与内容错乱问题，我司优化了驱动，已修复该问题，经测试验证可正常使用，所以在用户实际项目中需要人为规定一帧无效帧来保证通讯正常，理论上CAN总线可以容忍workround帧的存在，该方案下CAN总线500k波特率下完全由3568发送扩展帧时1s内理论极限值为2900帧，若产品需要1s内发送更多帧，请采用扩展CAN方案。</p></li>
<li><p>关于CAN控制器IP层设计问题详见:</p></li>
<li><p>原厂资料/Rockchip RK3568&amp;RK3568B2&amp;RK3568J Application Notice-RKAN18055.pdf</p></li>
<li><p>关于workround帧内容修改及使用问题详见:</p></li>
</ul>
<p>原厂资料/Rockchip_Develop_Guide_Can_CN.pdf</p>
</section>
<section id="led">
<h3>4.2.25 LED测试<a class="headerlink" href="#led" title="Link to this heading"></a></h3>
<p>OK3568-C核心板有一个可控蓝色LED灯，板卡上电启动时OKT3568核心板蓝色LED灯闪烁。用户可以关闭该功能，只需要修改设备树文件arch/arm64/boot/dts/rockchip/OK3568-C-common.dtsi将leds节点属性default-state = “on”改成”off”, linux,default-trigger 改成”none”;</p>
<p><img alt="Image" src="_images/1719278355433_91bd1dd1_566c_4971_bf66_11d6dbe10ee2.png" /></p>
<p>测试方法如下：</p>
<p>1、将蓝色LED灯更改成普通GPIO LED</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/sys/class/leds/work/
<span class="o">[</span>root@ok3568:/sys/devices/platform/leds/leds/work<span class="o">]</span><span class="c1"># echo gpio &gt; trigger</span>
点亮LED灯测试
<span class="o">[</span>root@ok3568:/sys/devices/platform/leds/leds/work<span class="o">]</span><span class="c1"># echo 1 &gt;brightness</span>
熄灭LED灯测试
<span class="o">[</span>root@ok3568:/sys/devices/platform/leds/leds/work<span class="o">]</span><span class="c1"># echo 0 &gt;brightness</span>
</pre></div>
</div>
<p>2、将蓝色LED灯更改成心跳灯</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@ok3568:/sys/devices/platform/leds/leds/work<span class="o">]</span><span class="c1"># echo heartbeat &gt; trigger</span>
</pre></div>
</div>
<p>3、底板USER LED两个绿灯操作</p>
<p>将两个绿灯点亮</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_userled.sh<span class="w"> </span>GPIO3_A7<span class="w"> </span><span class="m">0</span>
root@OK3568-buildroot:/#<span class="w"> </span>fltest_userled.sh<span class="w"> </span>GPIO3_B0<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p>将两个绿灯熄灭</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>fltest_userled.sh<span class="w"> </span>GPIO3_A7<span class="w"> </span><span class="m">1</span>
root@OK3568-buildroot:/#<span class="w"> </span>fltest_userled.sh<span class="w"> </span>GPIO3_B0<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</section>
<section id="typec">
<h3>4.2.26 TYPEC测试<a class="headerlink" href="#typec" title="Link to this heading"></a></h3>
<p>OK3568-C 包含一个TYPE-C接口，Device模式可以用它来进行刷机，Host模式可以插入普通的USB设备。断电将S2拨码开关拨成OFF，使用Type-C线连接OK3568-C至PC时，配置成Device 模式；断电将S2拨码开关拨成ON，配置成Host模式，插入U盘等设备。</p>
<p>USB3.0和OTG复用，通过拨码开关切换使用，使用USB3.0接口时请确认拨码开关在ON位置：</p>
<p><img alt="Image" src="_images/1719278355735_c0770c7c_23e1_412b_ae35_f136feef044c.png" /></p>
<p><font style="color:rgb(0, 0, 0);background-color:rgb(218, 234, 252);">⁉️</font>注意：当前SDK版本不支持Host/Device模式同时使用，请不要同时在USB3.0 OTG插入U盘和Type-C线。</p>
<p>Host模式：</p>
<p><img alt="Image" src="_images/1719278356066_21e3f70f_3252_4f10_b675_e571515d78f2.png" /></p>
<p>Device模式：</p>
<p>将文件系统为FAT32格式TF卡插入板卡，在OK3568-C板卡终端输入</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>modprobe<span class="w"> </span>g_mass_storage<span class="w"> </span><span class="nv">file</span><span class="o">=</span>/dev/mmcblk1p1<span class="w"> </span><span class="nv">luns</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">stall</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">removable</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p><img alt="Image" src="_images/1719278356261_13231759_c2d6_4b52_985f_fcbaeb92f13c.png" /></p>
<p>在window此电脑没有出现盘符，重新插拔一下Type-C线。</p>
</section>
<section id="pcie">
<h3>4.2.27 PCIE测试<a class="headerlink" href="#pcie" title="Link to this heading"></a></h3>
<p>系统上电前将minipcie模块插入底板minipcie卡槽。上电后启动linux后，通过lspci可以看到对应设备枚举成功。</p>
<p><img alt="Image" src="_images/1719278356445_44090118_cf1e_4fd3_956c_7e2904bdbda4.png" /></p>
<p>由于pcie设备类型较多，有可能默认不被内核支持需自行添加编译设备对应的驱动程序。</p>
<p>以E1000 pcie网卡举例，linux内核默认已经包含该驱动。插入网卡后上电启动可以看到枚举信息，并出现以太网接口：</p>
<p><img alt="Image" src="_images/1719278356661_e14347c6_4d21_4d8a_aca1_bb52a3a00591.png" /></p>
<p><img alt="Image" src="_images/1719278356869_dd454fa2_ee1e_41e7_ad7e_2ef2434c41b1.png" /></p>
</section>
<section id="sqlite3">
<h3>4.2.28 SQLite3测试<a class="headerlink" href="#sqlite3" title="Link to this heading"></a></h3>
<p>SQLite3是一款轻型的数据库，是遵守ACID的关系型数据库管理系统，占用资源低。OK3568-C开发板移植的是3.21.0版本的sqlit3。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#<span class="w"> </span>sqlite3
SQLite<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.21.0<span class="w"> </span><span class="m">2017</span>-10-24<span class="w"> </span><span class="m">18</span>:55:49
Enter<span class="w"> </span><span class="s2">&quot;.help&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>usage<span class="w"> </span>hints.
Connected<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>transient<span class="w"> </span><span class="k">in</span>-memory<span class="w"> </span>database.
Use<span class="w"> </span><span class="s2">&quot;.open FILENAME&quot;</span><span class="w"> </span>to<span class="w"> </span>reopen<span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>persistent<span class="w"> </span>database.
sqlite&gt;<span class="w"> </span>create<span class="w"> </span>table<span class="w"> </span>tbl1<span class="w"> </span><span class="o">(</span>one<span class="w"> </span>varchar<span class="o">(</span><span class="m">10</span><span class="o">)</span>,<span class="w"> </span>two<span class="w"> </span>smallint<span class="o">)</span><span class="p">;</span>//创建表tbl1
sqlite&gt;<span class="w"> </span>insert<span class="w"> </span>into<span class="w"> </span>tbl1<span class="w"> </span>values<span class="o">(</span><span class="s1">&#39;hello!&#39;</span>,10<span class="o">)</span><span class="p">;</span>//tbl1表内插入数据
hello!<span class="p">|</span><span class="m">10</span>
sqlite&gt;<span class="w"> </span>insert<span class="w"> </span>into<span class="w"> </span>tbl1<span class="w"> </span>values<span class="o">(</span><span class="s1">&#39;goodbye&#39;</span>,<span class="w"> </span><span class="m">20</span><span class="o">)</span><span class="p">;</span>//tbl1表内插入数据goodbye<span class="p">|</span><span class="m">20</span>
sqlite&gt;<span class="w"> </span><span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>tbl1<span class="p">;</span>//查询表tbl1中内容
hello!<span class="p">|</span><span class="m">10</span>
goodbye<span class="p">|</span><span class="m">20</span>
sqlite&gt;<span class="w"> </span>delete<span class="w"> </span>from<span class="w"> </span>tbl1<span class="w"> </span>where<span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;hello!&#39;</span><span class="p">;</span>//删除数据
sqlite&gt;<span class="w"> </span><span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>tbl1<span class="p">;</span>//查询表tbl1中内容
goodbye<span class="p">|</span><span class="m">20</span>
sqlite&gt;<span class="w"> </span>.quit<span class="w">			                                </span>//退出数据库（或使用.exit命令）
root@OK3568-buildroot:/#<span class="w"> </span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id44">
<h1>05_OK3568平台多媒体测试<a class="headerlink" href="#id44" title="Link to this heading"></a></h1>
<p>OK3568平台音视频部分应用层软件采用的是Gstreamer，支持硬件编解码。本节所有的示例均是基于Gstreamer命令行的形式。如果您需要带界面的播放器，您也可以使用qt的多媒体类，同样支持硬编解，可以参考Qt测试章节。</p>
<p>OK3568平台内部有一个视频处理单元VPU，支持以下格式的视频硬编解：</p>
<p>视频解码： H264, H265, VP8, VP9等，最大支持4Kx2K&#64;60fps</p>
<p>视频编码： H264、H.265，最大支持1080p&#64;60fps</p>
<p>OK3568平台硬件编解码参数表：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Video Decoder</p></th>
<th class="head"><p>Format</p></th>
<th class="head"><p>Profile</p></th>
<th class="head"><p>Resolution</p></th>
<th class="head"><p>Frame rate</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p></p></td>
<td><p>HEVC</p></td>
<td><p>main 10</p></td>
<td><p>4096x2304</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>H.265</p></td>
<td><p>main 10</p></td>
<td><p>4096x2304</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>H.264</p></td>
<td><p>main 10</p></td>
<td><p>4096x2304</p></td>
<td><p>30 fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>VP9</p></td>
<td><p>Profile 0/2</p></td>
<td><p>4096x2304</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>VP8</p></td>
<td><p>version2</p></td>
<td><p>1920x1080</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>VC1</p></td>
<td><p></p></td>
<td><p>1920x1080</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>MPEG-4</p></td>
<td><p></p></td>
<td><p>1920x1080</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>MPEG-2</p></td>
<td><p></p></td>
<td><p>1920x1080</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>MPEG-1</p></td>
<td><p></p></td>
<td><p>1920x1080</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>H.263</p></td>
<td><p></p></td>
<td><p>720x576</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-even"><td><p>Video Encoder</p></td>
<td><p>H.264</p></td>
<td><p>BP/MP/HP&#64;level4.2</p></td>
<td><p>1920x1080</p></td>
<td><p>60 fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>H.265</p></td>
<td><p>MP&#64;level4.1</p></td>
<td><p>1920x1080</p></td>
<td><p>60 fps</p></td>
</tr>
</tbody>
</table>
<section id="id45">
<h2>5.1 音频和视频播放体验<a class="headerlink" href="#id45" title="Link to this heading"></a></h2>
<section id="gplay">
<h3>5.1.1使用gplay播放器播放视频和音频<a class="headerlink" href="#gplay" title="Link to this heading"></a></h3>
<p>Gplay 是基于 Gstreamer 实现的音视频播放器，能够自动根据硬件自动选择合适的插件进行音视频播放，运行也十分简单。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-play-1.0 /userdata/media/1080p_30fps_h265.mp4
//播放带声音视频文件，由耳机放音测试
Press &#39;k&#39; to see a list of keyboard shortcuts.
Now playing /video/1080p_30fps_h265.mp4
mpp[884]: mpp_rt: NOT found ion allocator
mpp[884]: mpp_rt: found drm allocator
mpp[884]: mpp_info: mpp version: unknown mpp version for missing VCS info
mpp[884]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 2304 ver 1080
mpp[884]: mpp_dec: setting default w 1920 h 1080 h_str 2304 v_str 1080
mpp[884]: H265D_PARSER: extradata is encoded as hvcC format
Redistribute latency...
0:00:14.3 / 0:00:30.6
</pre></div>
</div>
</section>
<section id="gst-launch">
<h3>5.1.2使用gst-launch 播放视频<a class="headerlink" href="#gst-launch" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_h265.mp4 ! qtdemux ! queue ! h265parse ! mppvideodec ! waylandsink
//仅播放视频
Setting pipeline to PAUSED ...
mpp[921]: mpp_rt: NOT found ion allocator
mpp[921]: mpp_rt: found drm allocator
mpp[921]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[921]: H265D_PARSER: extradata is encoded as hvcC format
mpp[921]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 2304 ver 1080
mpp[921]: mpp_dec: setting default w 1920 h 1080 h_str 2304 v_str 1080
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
handling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:08.747122713
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id46">
<h3>5.1.3使用gst-launch 播放音频<a class="headerlink" href="#id46" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/test.mp3 ! id3demux ! mpegaudioparse ! mpg123audiodec ! alsasink
//仅播放音频，由耳机放音测试，
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
Redistribute latency...
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstAudioSinkClock
handling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:02.665159268
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id47">
<h3>5.1.4使用gst-launch 播放视频和音频<a class="headerlink" href="#id47" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_h265.mp4 ! qtdemux name=dec dec. ! queue ! h265parse ! mppvideodec ! waylandsink dec.! queue ! decodebin ! alsasink
//播放带声音视频文件，由耳机放音测试
mpp[934]: mpp_rt: NOT found ion allocator
mpp[934]: mpp_rt: found drm allocator
mpp[934]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[934]: H265D_PARSER: extradata is encoded as hvcC format
mpp[934]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 2304 ver 1080
mpp[934]: mpp_dec: setting default w 1920 h 1080 h_str 2304 v_str 1080
Redistribute latency...
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstAudioSinkClock
handling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:05.461079924
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
</section>
<section id="id48">
<h2>5.2 视频硬编码<a class="headerlink" href="#id48" title="Link to this heading"></a></h2>
<p>OK3568最大支持1080P&#64;60fps的H.264/H.265视频编码，以及高质量的JPEG编解码。此节命令只适合于内存4G以下的核心板。</p>
<section id="h-264">
<h3>5.2.1视频硬编码H.264<a class="headerlink" href="#h-264" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 mp4mux name=mux ! filesink location=test.mp4  videotestsrc num-buffers=600 ! video/x-raw,framerate=60/1,width=1920,height=1080,format=NV12 ! mpph264enc ! h264parse !  mux.video_0 -e
Setting pipeline to PAUSED ...
mpp[809]: mpp_rt: NOT found ion allocator
mpp[809]: mpp_rt: found drm allocator
mpp[809]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[809]: mpp_enc: MPP_ENC_SET_RC_CFG bps 7776000 [7290000 : 8262000] fps [30:30] gop 30
mpp[809]: h264e_api_v2: MPP_ENC_SET_PREP_CFG w:h [1920:1080] stride [1920:1088]
mpp[809]: mpp_enc: send header for set cfg change input/format
mpp[809]: mpp_enc: mode cbr bps [7290000:7776000:8262000] fps fix [30/1] -&gt; fix [30/1] gop i [30] v [0]
rga_api version 1.3.0_[12] (RGA is compiling with meson base: $PRODUCT_BASE)
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
Got EOS from element &quot;pipeline0&quot;.
Execution ended after 0:00:20.567864066
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="h-265">
<h3>5.2.2视频硬编码H.265<a class="headerlink" href="#h-265" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 mp4mux name=mux ! filesink location=test.mp4 videotestsrc num-buffers=600 ! video/x-raw,framerate=60/1,width=1920,height=1080,format=NV12 ! mpph265enc ! h265parse !  mux.video_0 -e 
Setting pipeline to PAUSED ...
mpp[828]: mpp_rt: NOT found ion allocator
mpp[828]: mpp_rt: found drm allocator
mpp[828]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[828]: mpp_enc: MPP_ENC_SET_RC_CFG bps 7776000 [7290000 : 8262000] fps [30:30] gop 30
mpp[828]: h265e_api: h265e_proc_prep_cfg MPP_ENC_SET_PREP_CFG w:h [1920:1080] stride [1920:1088]
mpp[828]: mpp_enc: send header for set cfg change input/format
mpp[828]: mpp_enc: mode cbr bps [7290000:7776000:8262000] fps fix [30/1] -&gt; fix [30/1] gop i [30] v [0]
rga_api version 1.3.0_[12] (RGA is compiling with meson base: $PRODUCT_BASE)
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
Got EOS from element &quot;pipeline0&quot;.
Execution ended after 0:00:20.617396655
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
</section>
<section id="id49">
<h2>5.3 视频硬解码<a class="headerlink" href="#id49" title="Link to this heading"></a></h2>
<p>OK3568支持 H264，H265、VP8、VP9视频硬解码，H264解码器支持4K&#64;30fps，H265解码器支持4K&#64;60fps。</p>
<p>OK3568使用mppvideodec组件进行视频硬解码，它的输出格式为：NV12，I420，YV12。</p>
<section id="h264">
<h3>5.3.1解码并播放H264格式视频<a class="headerlink" href="#h264" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_60fps_h264.mp4 ! qtdemux ! h264parse ! mppvideodec ! waylandsink
Setting pipeline to PAUSED ...
mpp[839]: mpp_rt: NOT found ion allocator
mpp[839]: mpp_rt: found drm allocator
mpp[839]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[839]: hal_h264d_vdpu34x: control info: fmt 7, w 1920, h 1080
mpp[839]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 1920 ver 1088
mpp[839]: mpp_dec: setting default w 1920 h 1080 h_str 1920 v_str 1088
mpp[839]: h264d_api: is_avcC=1
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:04.908912160
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id50">
<h3>5.3.2解码并播放H264格式视频带音频<a class="headerlink" href="#id50" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_60fps_h264.mp4 ! qtdemux name=demux demux.video_0 ! queue ! h264parse ! mppvideodec  ! waylandsink demux.audio_0 ! queue ! aacparse ! faad ! alsasink
Setting pipeline to PAUSED ...
mpp[862]: mpp_rt: NOT found ion allocator
mpp[862]: mpp_rt: found drm allocator
mpp[862]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[862]: h264d_api: is_avcC=1
mpp[862]: hal_h264d_vdpu34x: control info: fmt 7, w 1920, h 1080
mpp[862]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 1920 ver 1088
mpp[862]: mpp_dec: setting default w 1920 h 1080 h_str 1920 v_str 1088
Redistribute latency...
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstAudioSinkClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:01.815955349
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="h265">
<h3>5.3.3解码并播放H265格式视频<a class="headerlink" href="#h265" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_h265.mp4 ! qtdemux ! h265parse ! mppvideodec ! waylandsink
Setting pipeline to PAUSED ...
mpp[873]: mpp_rt: NOT found ion allocator
mpp[873]: mpp_rt: found drm allocator
mpp[873]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[873]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 2304 ver 1080
mpp[873]: mpp_dec: setting default w 1920 h 1080 h_str 2304 v_str 1080
mpp[873]: H265D_PARSER: extradata is encoded as hvcC format
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:05.246702194
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id51">
<h3>5.3.4解码并播放H265格式视频带音频<a class="headerlink" href="#id51" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_h265.mp4 ! qtdemux name=demux demux.video_0 ! queue ! h265parse ! mppvideodec  ! waylandsink demux.audio_0 ! queue ! aacparse ! faad ! alsasink
Setting pipeline to PAUSED ...
mpp[886]: mpp_rt: NOT found ion allocator
mpp[886]: mpp_rt: found drm allocator
mpp[886]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[886]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 2304 ver 1080
mpp[886]: mpp_dec: setting default w 1920 h 1080 h_str 2304 v_str 1080
mpp[886]: H265D_PARSER: extradata is encoded as hvcC format
Redistribute latency...
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstAudioSinkClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:04.648897092
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="vp8">
<h3>5.3.5解码并播放VP8格式视频<a class="headerlink" href="#vp8" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_vp8.webm ! matroskademux ! queue ! mppvideodec ! waylandsink
Setting pipeline to PAUSED ...
mpp[896]: mpp_rt: NOT found ion allocator
mpp[896]: mpp_rt: found drm allocator
mpp[896]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[896]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 1920 ver 1088
mpp[896]: mpp_dec: setting default w 1920 h 1080 h_str 1920 v_str 1088
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:03.462436973
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id52">
<h3>5.3.6解码并播放VP8格式视频带音频<a class="headerlink" href="#id52" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_vp8.webm typefind=true ! video/webm ! matroskademux name=dec dec. ! queue ! mppvideodec ! waylandsink dec. ! queue ! decodebin ! audioconvert ! audioresample ! alsasink
Setting pipeline to PAUSED ...
mpp[985]: mpp_rt: NOT found ion allocator
mpp[985]: mpp_rt: found drm allocator
mpp[985]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[985]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 1920 ver 1088
mpp[985]: mpp_dec: setting default w 1920 h 1080 h_str 1920 v_str 1088
Redistribute latency...
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstAudioSinkClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:01.586168701
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="vp9">
<h3>5.3.7解码并播放VP9格式视频<a class="headerlink" href="#vp9" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_vp9.webm  ! matroskademux ! queue ! mppvideodec ! waylandsink
Setting pipeline to PAUSED ...
mpp[1005]: mpp_rt: NOT found ion allocator
mpp[1005]: mpp_rt: found drm allocator
mpp[1005]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[1005]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 2304 ver 1088
mpp[1005]: mpp_dec: setting default w 1920 h 1080 h_str 2304 v_str 1088
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:01.026171728
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
mpp[1005]: mpp_buffer: mpp_buffer_ref_dec found non-positive ref_count 0 caller try_proc_dec_task
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id53">
<h3>5.3.8解码并播放VP9格式视频带音频<a class="headerlink" href="#id53" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_vp9.webm typefind=true ! video/webm ! matroskademux name=dec dec. ! queue ! mppvideodec ! waylandsink dec.! queue ! decodebin ! audioconvert ! audioresample ! alsasink
Setting pipeline to PAUSED ...
mpp[1022]: mpp_rt: NOT found ion allocator
mpp[1022]: mpp_rt: found drm allocator
mpp[1022]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is PREROLLING ...
mpp[1022]: mpp_buf_slot: set frame info: w 1920 h 1080 hor 2304 ver 1088
mpp[1022]: mpp_dec: setting default w 1920 h 1080 h_str 2304 v_str 1088
Redistribute latency...
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstAudioSinkClock
^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:02.826552284
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
mpp[1022]: mpp_buffer: mpp_buffer_ref_dec found non-positive ref_count 0 caller try_proc_dec_task
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
</section>
<section id="id54">
<h2>5.4 摄像头测试<a class="headerlink" href="#id54" title="Link to this heading"></a></h2>
<p>OK3568支持OV13850 MIPI摄像头，同时也支持UVC摄像头。首先来测试一下UVC摄像头，这里以RMONCAM FHD 1080P进行测试，将USB摄像头插入开发板，将自动安装uvc驱动。</p>
<section id="uvc-camera">
<h3>5.4.1 UVC Camera测试<a class="headerlink" href="#uvc-camera" title="Link to this heading"></a></h3>
<p><strong>5.4.1.1摄像头识别检测和格式支持查询</strong></p>
<p>摄像头识别检测</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# v4l2-ctl --list-devices		//查看设备结点，可见/dev/video9&amp;10为USB摄像头结点
rkisp-statistics (platform: rkisp):
        /dev/video7
        /dev/video8
rkisp_mainpath (platform:rkisp-vir0):
        /dev/video0
        /dev/video1
        /dev/video2
        /dev/video3
        /dev/video4
        /dev/video5
        /dev/video6
RMONCAM FHD 1080P: RMONCAM FHD  (usb-fd800000.usb-1):
        /dev/video9
        /dev/video10
</pre></div>
</div>
<p>格式支持查询</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# v4l2-ctl --list-formats-ext -d /dev/video9		//查看摄像头支持的格式
ioctl: VIDIOC_ENUM_FMT
        Type: Video Capture
        [0]: &#39;MJPG&#39; (Motion-JPEG, compressed)
                Size: Discrete 1920x1080
                        Interval: Discrete 0.033s (30.000 fps)
                Size: Discrete 160x120
                        Interval: Discrete 0.033s (30.000 fps)
Size: Discrete 320x240
                        Interval: Discrete 0.033s (30.000 fps)
        [1]: &#39;YUYV&#39; (YUYV 4:2:2)
                Size: Discrete 1920x1080
                        Interval: Discrete 0.200s (5.000 fps)
                Size: Discrete 640x480
                        Interval: Discrete 0.033s (30.000 fps)
</pre></div>
</div>
<p><strong>5.4.1.2摄像头采集格式查询和修改</strong></p>
<p>摄像头采集格式查询</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# v4l2-ctl -V -d /dev/video9
Format Video Capture:
        Width/Height      : 1920/1080
        Pixel Format      : &#39;MJPG&#39; (Motion-JPEG)
        Field             : None
        Bytes per Line    : 0
        Size Image        : 4147200
        Colorspace        : sRGB
        Transfer Function : Default (maps to sRGB)
        YCbCr/HSV Encoding: Default (maps to ITU-R 601)
        Quantization      : Default (maps to Full Range)
</pre></div>
</div>
<p>摄像头采集格式修改</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# v4l2-ctl -v width=640,height=480,pixelformat=YUYV -d /dev/video9 //修改为YUYV
root@OK3568-buildroot:/# v4l2-ctl -V -d /dev/video9								       //采集格式查询
Format Video Capture:
        Width/Height      : 640/480
        Pixel Format      : &#39;YUYV&#39; (YUYV 4:2:2)
        Field             : None
        Bytes per Line    : 1280
        Size Image        : 614400
        Colorspace        : sRGB
        Transfer Function : Default (maps to sRGB)
        YCbCr/HSV Encoding: Default (maps to ITU-R 601)
        Quantization      : Default (maps to Limited Range)
</pre></div>
</div>
<p><strong>5.4.1.3摄像头图像预览和拍照</strong></p>
<p>摄像头图像预览</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 v4l2src device=/dev/video9 ! videoconvert ! waylandsink
Setting pipeline to PAUSED ...
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
^[[A^Chandling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:27.663210154
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
[ 8895.040621] uvcvideo: Failed to resubmit video URB (-1).
Freeing pipeline ...
</pre></div>
</div>
<p>摄像头拍照</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 v4l2src device=/dev/video9 num-buffers=1 ! videoconvert ! video/x-raw,format=NV12,width=640,height=480 ! mppjpegenc ! filesink location=/pic.jpg
Setting pipeline to PAUSED ...
mpp[1141]: mpp_rt: NOT found ion allocator
mpp[1141]: mpp_rt: found drm allocator
mpp[1141]: mpp_info: mpp version: unknown mpp version for missing VCS info
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
mpp[1141]: mpp_enc: MPP_ENC_SET_RC_CFG bps 1152000 [1080000 : 1224000] fps [30:30] gop 30
Got EOS from element &quot;pipeline0&quot;.
Execution ended after 0:00:00.357932744
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
[ 9397.089150] uvcvideo: Failed to resubmit video URB (-1).
Setting pipeline to NULL ...
Freeing pipeline ...
//执行完成后查看根目录下生成的pic.jpg文件即可
</pre></div>
</div>
</section>
<section id="ov13850">
<h3>5.4.2 OV13850 测试<a class="headerlink" href="#ov13850" title="Link to this heading"></a></h3>
<p>对于OV13850 等raw sensor，每一个sensor对应5个设备节点：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# grep &#39;&#39; /sys/class/video4linux/video*/name
/sys/class/video4linux/video0/name:rkisp_mainpath
/sys/class/video4linux/video1/name:rkisp_selfpath
/sys/class/video4linux/video10/name:USB Camera: rmoncam 720P
/sys/class/video4linux/video2/name:rkisp_rawwr0
/sys/class/video4linux/video3/name:rkisp_rawwr2
/sys/class/video4linux/video4/name:rkisp_rawwr3
/sys/class/video4linux/video5/name:rkisp_rawrd0_m
/sys/class/video4linux/video6/name:rkisp_rawrd2_s
/sys/class/video4linux/video7/name:rkisp-statistics
/sys/class/video4linux/video8/name:rkisp-input-params
/sys/class/video4linux/video9/name:USB Camera: rmoncam 720P
</pre></div>
</div>
<p>Mainpath,指 Rockchip ISP的一个输出节点，可输出全分辨率图像，一般用来拍照，抓取 Raw 图。</p>
<p>Self Path，指 Rockchip ISP的一个输出节点，最高只能输出1080p分辨率，一般用作预览。</p>
<p>Statistics 用于3A 统计。</p>
<p>Input-params 用于3A 参数设置。</p>
<p><strong>5.4.2.1摄像头识别检测和格式支持查询</strong></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# v4l2-ctl --list-devices
//查看设备节点
rkisp-statistics (platform: rkisp):
        /dev/video7
        /dev/video8

rkisp_mainpath (platform:rkisp-vir0):
        /dev/video0
        /dev/video1
        /dev/video2
        /dev/video3
        /dev/video4
        /dev/video5
        /dev/video6
        /dev/media0
root@OK3568-buildroot:/# v4l2-ctl --list-formats-ext -d /dev/video0
//查看摄像头支持的格式与分辨率
ioctl: VIDIOC_ENUM_FMT
        Type: Video Capture Multiplanar

        [0]: &#39;UYVY&#39; (UYVY 4:2:2)
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [1]: &#39;422P&#39; (Planar YUV 4:2:2)
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [2]: &#39;NV16&#39; (Y/CbCr 4:2:2)
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [3]: &#39;NV61&#39; (Y/CrCb 4:2:2)
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [4]: &#39;YM16&#39; (Planar YUV 4:2:2 (N-C))
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [5]: &#39;NV21&#39; (Y/CrCb 4:2:0)
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [6]: &#39;NV12&#39; (Y/CbCr 4:2:0)
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [7]: &#39;NM21&#39; (Y/CrCb 4:2:0 (N-C))
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [8]: &#39;NM12&#39; (Y/CbCr 4:2:0 (N-C))
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [9]: &#39;YU12&#39; (Planar YUV 4:2:0)
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
        [10]: &#39;YM24&#39; (Planar YUV 4:4:4 (N-C))
                Size: Stepwise 32x32 - 2112x1568 with step 8/8
</pre></div>
</div>
<p><strong>5.4.2.2摄像头预览</strong></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 v4l2src device=/dev/video0 ! video/x-raw, format=NV12, width=640, height=480, framerate=30/1 ! waylandsink	
//摄像头预览
Setting pipeline to PAUSED ...
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock					//可在屏幕上看到摄像头预览画面
^C									    //Ctrl+C   退出摄像头预览
handling interrupt.
Interrupt: Stopping pipeline ...
Execution ended after 0:00:02.667462376
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
<p><strong>5.4.2.3摄像头拍照</strong></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 v4l2src device=/dev/video0 num-buffers=1 ! video/x-raw,format=NV12,width=640,height=480 ! mppjpegenc ! filesink location=pic.jpg
//摄像头拍照
Setting pipeline to PAUSED ...
mpi: mpp version: Without VCS info
mpp_rt: NOT found ion allocator
mpp_rt: found drm allocator
[  138.542571] rk_vcodec: vpu_service_ioctl:2138: error: unknown vpu service ioctl cmd 40086c01
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
Got EOS from element &quot;pipeline0&quot;.
Execution ended after 0:00:00.175951625
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
root@OK3568-buildroot:/# ls
//查看是否生成pic.jpg，可拷贝到pc查看
bin             init        misc     rockchip_test  system     
busybox.config  lib         mnt      root           timestamp  var
data            lib64       oem      run            tmp
dev             linuxrc     opt      sbin           udisk
etc             lost+found  pic.jpg  sdcard         userdata
home            media       proc     sys            usr
</pre></div>
</div>
<p><strong>5.4.2.4录制H264格式视频</strong></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 v4l2src device=/dev/video0 num-buffers=100 ! video/x-raw,format=NV12, width=640,height=480 ! tee name=t ! queue ! mpph264enc ! queue ! h264parse ! qtmux ! filesink location=13850_h264.mp4 t. ! queue ! waylandsink
//摄像头预览时编码H264
Setting pipeline to PAUSED ...
mpi: mpp version: Without VCS info
mpp_rt: NOT found ion allocator
mpp_rt: found drm allocator
[  208.941566] rk_vcodec: vpu_service_ioctl:2138: error: unknown vpu service ioctl cmd 40086c01
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
h264e_api: h264e_config MPP_ENC_SET_RC_CFG bps 1152000 [1080000 : 1224000]
Got EOS from element &quot;pipeline0&quot;.
Execution ended after 0:00:03.504855085
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
root@OK3568-buildroot:/#  ls
//查看是否生成H264文件
13850_h264.mp4  home        media    proc           sys        usr
bin             init        misc     rockchip_test  system     uvc_h264.mp4
busybox.config  lib         mnt      root           timestamp  var
data            lib64       oem      run            tmp
dev             linuxrc     opt      sbin           udisk
etc             lost+found  pic.jpg  sdcard         userdata
</pre></div>
</div>
<p><strong>5.4.2.5播放H264格式视频</strong></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/# gst-launch-1.0 filesrc location=13850_h264.mp4 ! qtdemux ! queue ! h264parse ! mppvideodec ! waylandsink
//播放H264视频
Setting pipeline to PAUSED ...
mpi: mpp version: Without VCS info
Pipeline is PREROLLING ...
mpp_rt: NOT found ion allocator
mpp_rt: found drm allocator
[  245.867304] rk_vcodec: vpu_service_ioctl:2138: error: unknown vpu service ioctl cmd 40086c01
mpp: deprecated block control, use timeout control instead
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
Got EOS from element &quot;pipeline0&quot;.
Execution ended after 0:00:03.328286793
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ...
</pre></div>
</div>
</section>
</section>
<section id="waylandsink">
<h2>5.5 waylandsink定点测试<a class="headerlink" href="#waylandsink" title="Link to this heading"></a></h2>
<p>本章的测试显示部分均使用的是gstreamer中的waylandsink插件，默认情况下，视频或者Camera窗口随机弹出在桌面上，如果您需要它显示到特定的位置可以指定坐标参数。</p>
<p>坐标（0,0），宽320，高240。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@OK3568-buildroot:/#
gst-launch-1.0 filesrc location=/userdata/media/1080p_30fps_h265.mp4 ! qtdemux ! h265parse ! mppvideodec ! waylandsink  &quot;render-rectangle=&lt;0,0,480,360&gt;&quot;
</pre></div>
</div>
</section>
</section>
<section id="id55">
<h1>06_烧写系统<a class="headerlink" href="#id55" title="Link to this heading"></a></h1>
<section id="otg">
<h2>6.1 OTG烧写系统<a class="headerlink" href="#otg" title="Link to this heading"></a></h2>
<section id="id56">
<h3>6.1.1 OTG驱动安装<a class="headerlink" href="#id56" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><font style="color:#000000;">路径：OK3568-C（Linux）用户资料\Linux\工具&lt;/font&gt;DriverAssitant_v5.12.zip</p></li>
</ul>
<p>将上述路径文件解压到任意目录，以管理员权限运行</p>
<p>打开DriverInstall.exe 程序。</p>
<p><img alt="Image" src="_images/1719278371049_36807242_44b2_4463_b794_e1bc53500a6d.png" /></p>
<p>点击“驱动安装”。</p>
<p><img alt="Image" src="_images/1719278371239_c88b99ca_e7f1_452b_a2e9_5e6bfea8bb73.png" /></p>
</section>
<section id="id57">
<h3>6.1.2 OTG完全烧写测试<a class="headerlink" href="#id57" title="Link to this heading"></a></h3>
<section id="rkdevtool">
<h4>6.1.2.1 RKDevTool烧写测试<a class="headerlink" href="#rkdevtool" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><font style="color:#000000;">路径：OK3568-C（Linux）用户资料\Linux\工具&lt;/font&gt; RKDevTool_Release_v3.18.zip</p></li>
</ul>
<p>这是瑞芯微提供的一款开发工具，使用前将其解压到全英文路径下，用Type-C线连接开发板和主机，按住开发板的recovery键不要松开，然后按一下reset键系统复位，大约两秒后松开recovery键。瑞芯微开发工具上将提示发现loader设备。</p>
<ul class="simple">
<li><p>注意：识别设备的操作是开发板上电时recover按键是按下的状态。</p></li>
<li><p>注意：理论上瑞芯微开发工具解压目录随意，但有用户反馈瑞芯微开发工具解压目录需为全英文，若打开开发工具后与下图不一致，请考虑解压其在全英文目录下。</p></li>
<li><p>注意：进行OTG烧写时需要注意两点：1、链接OTG线。2、OTG与USB3.0复用，需修改拨码开关，如下图：</p></li>
</ul>
<p><img alt="Image" src="_images/1719278371449_903b6c4b_4ee3_41dd_8a02_409291bc87de.png" /></p>
<p><img alt="Image" src="_images/1748310399916_dc0359c2_87ff_4a7b_9700_5c630c9eb91e.png" /></p>
<p>打开瑞芯微开发工具：</p>
<p><img alt="Image" src="_images/1719278371737_4281eb50_d44c_4429_a0fa_88f574b8da8f.png" /></p>
<p>点击“升级固件”选项卡，点击“固件”按钮选择完整的升级镜像update.img。程序将对固件进行解析，因此需要等待一会。</p>
<p><img alt="Image" src="_images/1719278371916_79c15f7c_10ef_4aa4_81d7_9ec9e3b01fd5.png" /></p>
<p>点击“高级功能”-&gt;“擦除所有”进行擦除操作。</p>
<p><img alt="Image" src="_images/1719278372133_1cf4ef2c_8e32_401a_9542_f9cec3cd639b.png" /></p>
<p>点击“升级固件”按钮-&gt;“升级”进行升级。</p>
<p><img alt="Image" src="_images/1719278372340_48a49afa_af0a_4e29_8b4b_eadc70da5820.png" /></p>
<ul class="simple">
<li><p>注意：升级完成后系统将自动重启两次，第一次重启更新一些信息，操作用户为**[root&#64;buildroot]<strong>，需耐心等待，第二次重启才可以正常使用,操作用户为</strong>[root&#64;OK3568-buildroot:/]**。</p></li>
</ul>
</section>
<section id="factorytool">
<h4>6.1.2.2 FactoryTool烧写测试<a class="headerlink" href="#factorytool" title="Link to this heading"></a></h4>
<p>FactoryTool是工厂批量OTG烧写时使用到的工具，其不需要读取镜像，可以批量烧写，另外其可烧写某些较大的镜像文件，若RKDevTool兼容性不满足时，亦可尝试该方式，使用前将其解压到全英文路径下，用Type-C线连接开发板和主机，按住开发板的recover键不要松开，然后按一下reset键系统复位，大约两秒后松开recover键。瑞芯微开发工具上将提示发现loader设备。</p>
<ul class="simple">
<li><p>注意：识别设备的操作是开发板上电时recover按键是按下的状态。</p></li>
<li><p>注意：理论上解压目录随意，但有用户反馈瑞芯微开发工具解压目录需为全英文，若打开开发工具后与下图不一致，请考虑解压其在全英文目录下。</p></li>
</ul>
<p><img alt="Image" src="_images/1719278372564_b2d07d5e_1a3a_489b_833e_a89f8b946368.png" /></p>
<p>点击选择固件，点击“启动”，此时识别到loader设备将自动开始烧写。</p>
<p><img alt="Image" src="_images/1719278372817_87ac617a_eae6_4889_bdaa_080eaf0ea09d.png" /></p>
<p>正在下载固件：</p>
<p><img alt="Image" src="_images/1719278373048_22012107_58e4_4093_85ac_ca9726722f00.png" /></p>
<p>升级成功，系统不会重启，需要重新上电启动，如下：</p>
<p><img alt="Image" src="_images/1719278373317_68796c78_84ac_4218_92c9_0a30ec517c45.png" /></p>
</section>
</section>
<section id="id58">
<h3>6.1.3 OTG分步烧写测试<a class="headerlink" href="#id58" title="Link to this heading"></a></h3>
<p>在研发阶段每次都进行全部烧写是非常耗时的，因此这里介绍一下使用OTG烧写工具进行单独分区烧写的方法。</p>
<ul class="simple">
<li><p>注意：识别设备的操作是开发板上电时recover按键是按下的状态。</p></li>
</ul>
<p>首先，在OK3568-linux-release编译完成后，在rockdev目录可以找到单独的分区镜像。</p>
<p><img alt="Image" src="_images/1719278373500_27a1231c_b0f0_4bf8_87d9_7276d40b3ce0.png" /></p>
<p>以单独烧写oem和userdata分区为例，演示烧写方法。</p>
<p>使用Type-C线连接开发板和主机，按住recover键然不要松开然后按reset键系统复位，大约两秒后松开recover键。系统将提示发现loader设备。</p>
<p><img alt="Image" src="_images/1719278373708_bdf8dc9f_cc02_4fed_b2cf_9591ae9f3c87.png" /></p>
<p>点击“设备分区表”按钮，将自动读取分区地址。。</p>
<p><img alt="Image" src="_images/1719278373900_a316251a_0f98_4b69_a2ae_f7eeba24f552.png" /></p>
<p>提示是否更新下载地址，点击“是”，会报读分区表成功：</p>
<p><img alt="Image" src="_images/1719278374098_1e8ed88d_ec1b_4839_9831_a5d20a5f1a8c.png" /></p>
<p>点击分区右测区域选择分区镜像，并勾选分区。</p>
<p><img alt="Image" src="_images/1719278374299_664b1139_5d46_477e_8ec7_3640a0573c20.png" /></p>
<p>点击“执行”按钮将自动烧写并重新启动。</p>
<p><img alt="Image" src="_images/1719278374639_0858efb1_ae3b_4768_af77_983c9286aaff.png" /></p>
<p><strong>MASKROM模式介绍</strong></p>
<p><font style="color:#000000;">如果loader损坏无法进入Loader模式时，可以按住Maskrom键然后按复位键进入maskrom模式进行烧写。</font></p>
<p><img alt="Image" src="_images/1719278374849_c9e0d481_4360_4856_a155_88cd30e07767.png" /></p>
<p>此时系统将提示发现一个maskrom设备，烧写流程与loader模式一致，最好使用update.img烧写。</p>
<ul class="simple">
<li><p>注意：maskrom模式下不要点击“设备分区表”，为无效操作。</p></li>
</ul>
</section>
</section>
<section id="id59">
<h2>6.2 TF卡烧写系统<a class="headerlink" href="#id59" title="Link to this heading"></a></h2>
<p>TF卡制作与烧写测试</p>
<ul class="simple">
<li><p>注意：经测试TF卡容量最大为16G，使用32G及以上TF卡可能会烧写失败。</p></li>
<li><p>注意：TF卡烧写时也会进入命令行，为root&#64;buildroot用户，请耐心等待烧写完成</p></li>
</ul>
<p>将用户资料工具目录的SDDiskTool_v1.69.zip拷贝到windows任意目录。以管理员权限运行SD_Firmware_Tool.exe。</p>
<p><img alt="Image" src="_images/1719278375046_ccb93f8c_d97c_4c76_811c_4f0eda82c2e2.png" /></p>
<p>选择磁盘设备，勾选“固件升级”，并选择update.img。点击开始创建。</p>
<p><img alt="Image" src="_images/1719278375213_b0a0a76e_38c8_46a3_8dee_dbd887313527.png" /></p>
<p><img alt="Image" src="_images/1719278375372_2a2e23f1_1e24_43f9_ba08_803a28b79464.png" /></p>
<p>将TF卡插入开发板并启动，系统将自动进入烧写流程。烧写完成后屏幕和串口都将提示：</p>
<p>Please remove SD CARD!!!, wait for reboot.</p>
<p>此时，拔出TF卡，系统自动重新启动(请勿直接断电)。</p>
<p>批量生产时，可以根据核心板的心跳灯来判断烧写是否完成，烧写过程中的心跳灯变化如下：</p>
<ol class="arabic simple">
<li><p>内核启动阶段：心跳灯模式，规律的间歇性闪烁。</p></li>
<li><p>烧写准备阶段：EMMC指示灯，熄灭。</p></li>
<li><p>烧写进行阶段：EMMC指示灯，常亮。</p></li>
<li><p>烧写完成阶段：心跳灯模式，规律的间歇性闪烁。</p></li>
</ol>
<p>烧写状态串口信息：</p>
<p><img alt="Image" src="_images/1719278375582_f434b9b5_a919_4466_a07c_492b79b49a23.png" /></p>
<p>若移除TF未自动重启，手动重启也可完成烧写。由上图可见烧写大概持续7分钟，烧写过程中请耐心等待。</p>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>