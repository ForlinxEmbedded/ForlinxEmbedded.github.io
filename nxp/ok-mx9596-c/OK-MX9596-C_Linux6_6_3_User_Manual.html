

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Linux6.6.3_User’s Manual_V1.1 &mdash; Forlinx Embedded i.MX9596 Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/theme-switcher.css?v=a3c71d8a" />

  
    <link rel="shortcut icon" href="_static/forlinx.png"/>
    <link rel="canonical" href="https://forlinxembedded.github.io/nxp/ok-mx9596-c/OK-MX9596-C_Linux6_6_3_User_Manual.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/theme-switcher.js?v=950663c4"></script>
      <script src="_static/logo-link.js?v=d4af6ba6"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Copyright" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html" />
    <link rel="prev" title="User’s Hardware Manual_V1.1" href="OK-MX9596-C_User_Hardware_Manual.html" />
   

  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8EJPNL8NR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8EJPNL8NR');
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">HARDWARE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_User_Hardware_Manual.html">User’s Hardware Manual_V1.1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SOFTWARE</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Linux6.6.3_User’s Manual_V1.1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#copyright">Copyright</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-scope">Application Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#revision-history">Revision History</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ok-mx9596-c-development-board-description">1. OK- MX9596-C Development Board Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-linux6-6-3-system-software-resources">1.1 Introduction to Linux6.6.3 System Software Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flashing-and-boot-settings">1.2 Flashing and Boot Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fast-startup">2. Fast Startup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparation-before-startup">2.1 Preparation Before Startup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#serial-login">2.2 Serial Login</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">2.2.1 Serial Login</a></li>
<li class="toctree-l4"><a class="reference internal" href="#serial-login-common-problems"><strong>2.2.2 Serial Login Common Problems</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#network-login-method">2.3 Network Login Method</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#network-connection-test">2.3.1 Network Connection Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ssh-server">2.3.2 SSH Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#system-partition">2.4 System Partition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#emmc-version">2.4.1 EMMC Version</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#system-shutdown">2.5 System Shutdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="#screen-switching">2.6 Screen Switching</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ok-mx9596-c-platform-interface-function-use-and-test">3. OK-MX9596-C Platform Interface Function Use and Test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-interface-function">3.1 Introduction to Interface Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-configuration-test">3.2 Network Configuration Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#opengl-test">3.3 OpenGL Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#g-5g-test">3.4 4G/5G Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uart-test">3.5 UART Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wifi-test">3.6 WIFI Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rtc-test">3.7 RTC Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#watchdog-test">3.8 Watchdog Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ping-test">3.9 Ping Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#camera-test">3.10 Camera Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backlight-test">3.11 Backlight Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#play-record-test">3.12 Play/Record Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#music-play-test">3.13 Music Play Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#qml-video-playback-test">3.14 QML Video Playback Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#browser-test">3.15 Browser Test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ok-mx9596-c-command-line-function-test">4. OK- MX9596-C Command Line Function Test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#system-information-queries">4.1 System Information Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequency-test">4.2 Frequency Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temperature-test"><strong>4.3</strong> Temperature Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ddr-bandwidth-test">4.4 DDR Bandwidth Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">4.5 Watchdog Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rtc-function-test">4.6 RTC Function Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">4.7 UART Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pcie">4.8 PCIE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tf-test">4.9 TF Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#emmc-test">4.10 EMMC Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usb">4.11 USB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#usb2-0">4.11.1 USB2.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usb-type-c">4.11.2 USB TYPE-C</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ethernet-configuration">4.12 Ethernet Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#gigabit-ethernet-static-ip-configuration">4.12.1 Gigabit Ethernet Static IP Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-port-streaming-test">4.12.2 Network Port Streaming Test</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#network-services">4.13 Network Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#web-services">4.13.1 Web Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sftp">4.13.2 SFTP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id5">4.14 WIFI Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sta-mode">4.14.1 STA Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ap-mode">4.14.2 AP Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#g-test">4.15 4G Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6"><strong>4.16 Play/Record Test</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#playback-test">4.16.1 Playback Test</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#closing-the-desktop">4.17 Closing the Desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#led-key-test">4.18 LED_KEY Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sqlite3-test">4.19 SQLite3 Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pwm-test">4.20 PWM Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#screen-backlight-test">4.20.1 Screen Backlight Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fan">4.20.2 FAN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#can-test">4.21 CAN Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">4.21.1 CAN Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-common-commands">4.21.2 Other Common Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ipv6-test">4.22 IPv6 Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adc-test">4.23 ADC Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spi-test">4.24 SPI Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bluetooth-test">4.25 Bluetooth Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inter-core-communication-test">4.26 Inter-core Communication Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sleep-wake-up-test">4.27 Sleep Wake-up Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#som-heartbeat-led-test">4.28 SoM Heartbeat LED Test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ok-mx9596-c-platform-multimedia-test">5. OK- MX9596-C Platform Multimedia Test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#audio-and-video-playback">5.1 Audio and Video Playback</a></li>
<li class="toctree-l3"><a class="reference internal" href="#video-hardware-encoding">5.2 Video Hardware Encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#video-hardware-decoding">5.3 Video Hardware Decoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#npu-test">5.4 NPU Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">5.5 Camera Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#usb-camera-test">5.5.1 USB Camera Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mipi-csi-camera-test">5.5.2 MIPI CSI Camera Test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#system-settings">6. System Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#updating-logo">6.1 Updating Logo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#self-starting-program-settings">6.2 Self-starting Program Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#starting-the-watchdog-under-uboot">6.3 Starting the Watchdog Under Uboot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-kernel-and-device-tree-via-uboot">6.4 Loading Kernel and Device Tree via Uboot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html#application-scope">Application Scope</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html#revision-history">Revision History</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html#overview"><font style="color:rgb(51,51,51);">Overview</font></a></li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html#vmware-installation">1. Vmware Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html#importing-the-forlinx-development-environment">2. Importing the Forlinx Development Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html#building-the-development-environment-manually">3. Building the Development Environment Manually</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK-MX9596-C_Linux6_6_3_User_Compilation_Manual.html#related-code-compilation">4. Related Code Compilation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Forlinx Embedded i.MX9596 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Linux6.6.3_User’s Manual_V1.1</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="linux6-6-3-users-manual-v1-1">
<h1>Linux6.6.3_User’s Manual_V1.1<a class="headerlink" href="#linux6-6-3-users-manual-v1-1" title="Link to this heading"></a></h1>
<p>Document classification: □ Top secret □ Secret □ Internal information ■ Open</p>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Link to this heading"></a></h2>
<p>The copyright of this manual belongs to Baoding Folinx Embedded Technology Co., Ltd. Without the written permission of our company, no organizations or individuals have the right to copy, distribute, or reproduce any part of this manual in any form, and violators will be held legally responsible.</p>
<p>Forlinx adheres to copyrights of all graphics and texts used in all publications in original or license-free forms.</p>
<p>The drivers and utilities used for the components are subject to the copyrights of the respective manufacturers. The license conditions of the respective manufacturer are to be adhered to. Related license expenses for the operating system and applications should be calculated/declared separately by the related party or its representatives.</p>
</section>
<section id="application-scope">
<h2>Application Scope<a class="headerlink" href="#application-scope" title="Link to this heading"></a></h2>
<p>This manual is mainly applicable to the Linux6.6.3 operating system on the Forlinx OK-MX9596-C platform. Other platforms can also refer to it, but there will be differences between different platforms. Please make modifications according to the actual conditions.</p>
</section>
<section id="revision-history">
<h2>Revision History<a class="headerlink" href="#revision-history" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Date</strong></p></th>
<th class="head"><p><strong>Manual Version</strong></p></th>
<th class="head"><p><strong>SoM Version</strong></p></th>
<th class="head"><p><strong>Carrier Board Version</strong></p></th>
<th class="head"><p><strong>Revision History</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>11/08/2025</p></td>
<td><p>V1.0</p></td>
<td><p>V1.1</p></td>
<td><p>V1.1</p></td>
<td><p>Initial Version</p></td>
</tr>
<tr class="row-odd"><td><p>28/08/2025</p></td>
<td><p>V1.1</p></td>
<td><p>V1.1</p></td>
<td><p>V1.1</p></td>
<td><p>Adding 2.6 Screen Switching.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This manual is designed to help you quickly familiarize yourselves with the product, and understand the interface functions and testing methods. It primarily covers the testing of interface functions on the development board, the methods for flashing images, and troubleshooting procedures for common issues encountered in use. In the process of testing, some commands are annotated to facilitate the your understanding, mainly for practical use.</p>
<p>There are total four chapters:</p>
<p>Chapter 1. provides an overview of the product, briefly introducing the interface resources of the development board, the relevant driver paths in the kernel source code, supported flashing and booting methods, as well as explanations of key sections in the documentation;</p>
<p>Chapter 2. is the fast boot/startup of the product, which can adopt two ways of serial port login and network login;</p>
<p>Chapter 3. mainly serves as an introduction to the product’s usage features and is divided into multiple sections, including the function testing of the command line in the terminal and the function testing of the QT desktop.</p>
<p>Chapter 4. is the image update, which mainly describes the method of updating the image to the storage device. The user can select the corresponding flashing mode according to the actual situation.</p>
</section>
<section id="ok-mx9596-c-development-board-description">
<h2>1. OK- MX9596-C Development Board Description<a class="headerlink" href="#ok-mx9596-c-development-board-description" title="Link to this heading"></a></h2>
<p>OK-MX9596-C development board features SoM+ carrier board design, built on the NXP i.MX 95 automotive-grade processor. It includes a hexa-core Arm® Cortex®-A55 (1.8GHz), plus Cortex®-M33 (333MHz) and Cortex®-M7 (800MHz) cores.</p>
<p>The NXP i.MX 95 processor supports ARM Mail-G310 GPU, 4KVPU, and NPU (2.0TOP/s). It supports EdgeLock® Secure Enclave, 5 x CAN-FD channels, 1 x 10Gb Ethernet, and 2 x Gigabit Ethernet ports with TSN.</p>
<p>The FET-MX9596-C SoM supports 8GB LPDDR4x memory and 64GB eMMC. OK-OK-MX9596-C-C development board is rich in functional interface resources, providing a variety of peripheral interfaces, such as network card, audio Codec, TF Card, LVDS, MIPI, WIFI, 4G, PCIE, USB2.0, USB3.0 TYPE-C, serial port, can and other functional interfaces.</p>
<p><img alt="Image" src="_images/1761201832366_80ca7da3_ef7a_4e93_a1b2_b3b54cf1fcec.png" /></p>
<p><strong>Note:</strong></p>
<p><strong>Hardware parameters are no longer described in this software manual. Before referring to this manual for software development, please read the “User’s Hardware Manual” to understand the product naming rules and the hardware configuration information of the product you are using, which will help you to use this product.</strong></p>
<section id="introduction-to-linux6-6-3-system-software-resources">
<h3>1.1 Introduction to Linux6.6.3 System Software Resources<a class="headerlink" href="#introduction-to-linux6-6-3-system-software-resources" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Device</strong></p></th>
<th class="head text-center"><p><strong>Location of driver source code in the kernel</strong></p></th>
<th class="head text-center"><p><strong>Device Name</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>NIC Driver</p></td>
<td class="text-center"><p>drivers/net/ethernet/freescale/enetc</p></td>
<td class="text-center"><p>/sys/class/net/eth*</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>LCD Backlight Driver</p></td>
<td class="text-center"><p>drivers/video/backlight/pwm_bl.c</p></td>
<td class="text-center"><p>/sys/class/backlight/</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>KEY Driver</p></td>
<td class="text-center"><p>drivers/input/keyboard/gpio_keys.c</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>USB</p></td>
<td class="text-center"><p>drivers/usb/dwc3/</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>4/5G</p></td>
<td class="text-center"><p>drivers/net/usb/gobinet</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>TF Driver</p></td>
<td class="text-center"><p>drivers/mmc/host/sdhci-esdhc-imx.c</p></td>
<td class="text-center"><p>/dev/mmcblk1</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>serial port driver</p></td>
<td class="text-center"><p>drivers/tty/serial/fsl_lpuart.c</p></td>
<td class="text-center"><p>/dev/ttyLP*</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>watchdog driver</p></td>
<td class="text-center"><p>drivers/watchdog/imx7ulp_wdt.c</p></td>
<td class="text-center"><p>/dev/watchdog</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>WIFI</p></td>
<td class="text-center"><p>drivers/net/wireless/nxp/NXP88W8987</p></td>
<td class="text-center"><p>mlan0</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Audio Driver</p></td>
<td class="text-center"><p>sound/soc/codecs/nau8822.c</p></td>
<td class="text-center"><p>/dev/snd/</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>lpspi</p></td>
<td class="text-center"><p>drivers/spi/spi-fsl-lpspi.c</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Flexspi</p></td>
<td class="text-center"><p>drivers/spi/spi-nxp-fspi.c</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>I2C driver</p></td>
<td class="text-center"><p>drivers/i2c/busses/i2c-imx-lpi2c.c</p></td>
<td class="text-center"><p>/dev/i2c-*</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>PWM Driver</p></td>
<td class="text-center"><p>drivers/pwm/pwm-imx-tpm.c</p></td>
<td class="text-center"><p>/sys/class/pwm/</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>GT928 Touch Driver</p></td>
<td class="text-center"><p>drivers/input/touchscreen/goodix.c</p></td>
<td class="text-center"><p>/dev/input/event*</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>ft5x06 Touch Driver</p></td>
<td class="text-center"><p>drivers/input/touchscreen/edt-ft5x06.c</p></td>
<td class="text-center"><p>/dev/input/event*</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>RTC Driver</p></td>
<td class="text-center"><p>drivers/rtc/rtc-pcf8563.c</p></td>
<td class="text-center"><p>/dev/rtc0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="flashing-and-boot-settings">
<h3>1.2 Flashing and Boot Settings<a class="headerlink" href="#flashing-and-boot-settings" title="Link to this heading"></a></h3>
<p>OK-MX9596-C supports OTG and TF card flashing, as well as booting the bootloader from storage media like eMMC and TF cards. Currently, it only supports booting the bootloader from the M core, not from the A core.</p>
<p>The startup dial-up code is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p>BOOT</p></th>
<th class="head text-center"><p><strong>1</strong></p></th>
<th class="head text-center"><p><strong>2</strong></p></th>
<th class="head text-center"><p><strong>3</strong></p></th>
<th class="head text-center"><p><strong>4</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>OTG</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>ON</p></td>
<td class="text-center"><p>ON</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>eMMC</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>OFF</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>TF</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>ON</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>QSPI flash</p></td>
<td class="text-center"><p>OFF</p></td>
<td class="text-center"><p>ON</p></td>
<td class="text-center"><p>ON</p></td>
<td class="text-center"><p>OFF</p></td>
</tr>
</tbody>
</table>
<p>Please refer to the “System Flashing” section for specific flashing procedures.</p>
</section>
</section>
<section id="fast-startup">
<h2>2. Fast Startup<a class="headerlink" href="#fast-startup" title="Link to this heading"></a></h2>
<section id="preparation-before-startup">
<h3>2.1 Preparation Before Startup<a class="headerlink" href="#preparation-before-startup" title="Link to this heading"></a></h3>
<p>The OK-MX9596-C development board has two system login methods, serial and network login.</p>
<p>Hardware preparation before system startup:</p>
<ul class="simple">
<li><p>12V 5A DC power cable</p></li>
<li><p>Debugging serial cable (serial login use)</p></li>
</ul>
<p>The development board features a USB Type-C port for debugging purposes, allowing users to connect it to a PC using a Type-A to Type-C cable in order to access the board’s status information.</p>
<ul class="simple">
<li><p>Network cable (for network login)</p></li>
<li><p>According to the development board interface to connect the screen (Based on display needs).</p></li>
<li><p>Check the start mode dip switch</p></li>
</ul>
<p>Please check the DIP switch on your development board and make sure it is set to the desired boot mode. Please refer to “1.3 Flashing and Boot Configuration” for the startup mode settings.</p>
</section>
<section id="serial-login">
<h3>2.2 Serial Login<a class="headerlink" href="#serial-login" title="Link to this heading"></a></h3>
<section id="id1">
<h4>2.2.1 Serial Login<a class="headerlink" href="#id1" title="Link to this heading"></a></h4>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>Serial port settings: Baud rate 115200, data bit 8, stop bit 1, no parity bit, no flow control.</strong></p></li>
<li><p><strong>Serial terminal login as root user, no password, login without account.</strong></p></li>
<li><p><strong>Software: Windows PC requires Super Terminal; choose a familiar serial terminal software.</strong></p></li>
</ul>
<p>Here is an example using Putty to explain how to configure the terminal:</p>
<p><strong>Step 1:</strong> Connect the development board and the PC using a serial cable, and verify the serial port number recognized by the computer through the “Device Manager”. The port number recognized by the computer should be considered as the accurate one;</p>
<p><strong>Note:</strong></p>
<p><strong>Four serial ports will be generated:</strong></p>
<p><strong>- Ch A: Linux debugging port</strong></p>
<p><strong>- Ch B: M33 core debugging port</strong></p>
<p><strong>- Ch C: M7 core debugging port</strong></p>
<p><strong>- Ch D: Unused</strong></p>
<p><img alt="Image" src="_images/1754903267289_ea2bcbc4_44fc_4a13_b9a4_752432d5d226.png" /></p>
<p><strong>Step 2:</strong> Open and configure Putty; set the serial line to match the COM port of your computer with a baud rate of 115200.</p>
<p><img alt="Image" src="_images/1754903267378_2e06ba56_39b4_49e5_ad6c_f763d4044684.png" /><br />
<img alt="Image" src="_images/1754903267503_1997083b_eb10_4562_ba4c_e7a611dbb68a.png" /></p>
<p><strong>Step 3:</strong> Turn on the development board. The serial port will output log messages until “Welcome to forlinx ok-mx95-C ttyLP0” appears, indicating the startup is complete.</p>
<p>Login credentials:</p>
<p>Username: root (no password)</p>
<p>Or: forlinx / forlinx</p>
</section>
<section id="serial-login-common-problems">
<h4><strong>2.2.2 Serial Login Common Problems</strong><a class="headerlink" href="#serial-login-common-problems" title="Link to this heading"></a></h4>
<p>Common problem troubleshooting points for logging in using the serial port are as follows:</p>
<p><strong>Case 1:</strong> No information is printed after the serial port is connected:</p>
<ol class="arabic simple">
<li><p>First, check whether the DIP switch is correct;</p></li>
<li><p>Re-open the serial port;</p></li>
<li><p>Change a serial port cable to test it;</p></li>
<li><p>If none of the above works, check the status of the SoM’s LED. If it is not blinking (heartbeat) or not lit, the system may have failed to start. In this case, check the system boot process or reflash the system.</p></li>
</ol>
<p><strong>Case 2:</strong> Command cannot be input after serial port is connected:</p>
<ol class="arabic simple">
<li><p>Re-open the serial port;</p></li>
<li><p>Replace the USB serial port cable with a new USB port on the computer, view the corresponding COM port in the device management, and reopen the serial port;</p></li>
<li><p>Replace a serial port cable.</p></li>
</ol>
<p><strong>Case 3:</strong> Device Manager does not recognize the port:</p>
<p>Serial port driver is not installed. Try to install serial port driver.</p>
<p>Forlinx provides a serial driver for WIN10, located at:</p>
<ul class="simple">
<li><p>User Data \ Software Data \ 3 Tools \ XRUSB _ Serial Chip Driver.zip</p></li>
</ul>
<p><strong>Case 4:</strong> The port recognized by the device manager is abnormal.</p>
<p>Error message: This device is not working properly because Windows cannot load the drivers required for this device. (Code 31), as shown below:<br />
<img alt="Image" src="_images/1754903267600_8a55a8d1_1b9e_45c5_aeb1_9835bfd8a1e2.png" /></p>
<p>Close all open terminal programs, then unplug and reconnect the serial cable.</p>
</section>
</section>
<section id="network-login-method">
<h3>2.3 Network Login Method<a class="headerlink" href="#network-login-method" title="Link to this heading"></a></h3>
<section id="network-connection-test">
<h4>2.3.1 Network Connection Test<a class="headerlink" href="#network-connection-test" title="Link to this heading"></a></h4>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>By default, eth0 has a static IP: 192.168.0.232. eth1 and eth2 (10G optical module ports) obtain IP addresses dynamically via DHCP;</strong></p></li>
<li><p><strong>The computer and board should be on the same network segment for testing.</strong></p></li>
</ul>
<p>Before logging into the network, ensure that the direct network connection between the computer and the development board is functioning properly. You can test the connection status via pin command. The specific method is as follows:</p>
<p>1. Connect the development board’s eth0 port to the computer using an Ethernet cable. Power on the board and boot the kernel. Confirm the blue heartbeat LED is blinking. Check the network card connection, ensuring its LED flashes rapidly. Once confirmed, proceed with testing the network connection.</p>
<p><img alt="Image" src="_images/1754903267725_91e48bad_b96e_4651_8d32_cf52bcadba8a.png" /></p>
<p>2. Close the computer firewall (General computer operations, not described here in detail), then open the computer’s run command.</p>
<p><img alt="Image" src="_images/1754903267848_5fc2bca3_d21d_4229_855f_98fd3048988e.png" /></p>
<p>3. Use cmd to open the administrator interface , and the ping command to test the network connection status of the computer and the development board.</p>
<p><img alt="Image" src="_images/1754903267968_34c0c381_ca10_43dd_af85_96d7cb1c1f36.png" /></p>
<p>A data return indicates a normal network connection.</p>
</section>
<section id="ssh-server">
<h4>2.3.2 SSH Server<a class="headerlink" href="#ssh-server" title="Link to this heading"></a></h4>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>Default factory account root for SSH login with no password;</strong></p></li>
<li><p><strong>By default, eth0 has the IP 192.168.0.232, while eth1 and eth2 obtain IP addresses via DHCP;</strong></p></li>
<li><p><strong>File transfers can be performed with scp or sftp.</strong></p></li>
</ul>
<p>Plug the Ethernet cable into the eth1 port on the carrier board to obtain the eth1 IP address.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>eth0:<span class="w"> </span><span class="nv">flags</span><span class="o">=</span>-28669&lt;UP,BROADCAST,MULTICAST,DYNAMIC&gt;<span class="w">  </span>mtu<span class="w"> </span><span class="m">1500</span>
<span class="w">        </span>ether<span class="w"> </span>ce:66:26:18:5e:bd<span class="w">  </span>txqueuelen<span class="w"> </span><span class="m">1000</span><span class="w">  </span><span class="o">(</span>Ethernet<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>packets<span class="w"> </span><span class="m">0</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>.0<span class="w"> </span>B<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w">  </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>frame<span class="w"> </span><span class="m">0</span>
<span class="w">        </span>TX<span class="w"> </span>packets<span class="w"> </span><span class="m">0</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>.0<span class="w"> </span>B<span class="o">)</span>
<span class="w">        </span>TX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w"> </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>carrier<span class="w"> </span><span class="m">0</span><span class="w">  </span>collisions<span class="w"> </span><span class="m">0</span>

eth1:<span class="w"> </span><span class="nv">flags</span><span class="o">=</span>-28605&lt;UP,BROADCAST,RUNNING,MULTICAST,DYNAMIC&gt;<span class="w">  </span>mtu<span class="w"> </span><span class="m">1500</span>
<span class="w">        </span>inet<span class="w"> </span><span class="m">192</span>.168.1.3<span class="w">  </span>netmask<span class="w"> </span><span class="m">255</span>.255.255.0<span class="w">  </span>broadcast<span class="w"> </span><span class="m">192</span>.168.1.255
<span class="w">        </span>inet6<span class="w"> </span>fe80::cc66:26ff:fe18:8660<span class="w">  </span>prefixlen<span class="w"> </span><span class="m">64</span><span class="w">  </span>scopeid<span class="w"> </span>0x20&lt;link&gt;
<span class="w">        </span>inet6<span class="w"> </span><span class="m">2408</span>:8207:78d0:9890:cc66:26ff:fe18:8660<span class="w">  </span>prefixlen<span class="w"> </span><span class="m">64</span><span class="w">  </span>scopeid<span class="w"> </span>0x0&lt;global&gt;
<span class="w">        </span>ether<span class="w"> </span>ce:66:26:18:86:60<span class="w">  </span>txqueuelen<span class="w"> </span><span class="m">1000</span><span class="w">  </span><span class="o">(</span>Ethernet<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>packets<span class="w"> </span><span class="m">2116</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">648728</span><span class="w"> </span><span class="o">(</span><span class="m">633</span>.5<span class="w"> </span>KiB<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w">  </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>frame<span class="w"> </span><span class="m">0</span>
<span class="w">        </span>TX<span class="w"> </span>packets<span class="w"> </span><span class="m">254</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">31935</span><span class="w"> </span><span class="o">(</span><span class="m">31</span>.1<span class="w"> </span>KiB<span class="o">)</span>
<span class="w">        </span>TX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w"> </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>carrier<span class="w"> </span><span class="m">0</span><span class="w">  </span>collisions<span class="w"> </span><span class="m">0</span>

eth2:<span class="w"> </span><span class="nv">flags</span><span class="o">=</span>-28605&lt;UP,BROADCAST,RUNNING,MULTICAST,DYNAMIC&gt;<span class="w">  </span>mtu<span class="w"> </span><span class="m">1500</span>
<span class="w">        </span>inet<span class="w"> </span><span class="m">169</span>.254.54.50<span class="w">  </span>netmask<span class="w"> </span><span class="m">255</span>.255.0.0<span class="w">  </span>broadcast<span class="w"> </span><span class="m">169</span>.254.255.255
<span class="w">        </span>inet6<span class="w"> </span>fe80::cc66:26ff:fe18:5a89<span class="w">  </span>prefixlen<span class="w"> </span><span class="m">64</span><span class="w">  </span>scopeid<span class="w"> </span>0x20&lt;link&gt;
<span class="w">        </span>ether<span class="w"> </span>ce:66:26:18:5a:89<span class="w">  </span>txqueuelen<span class="w"> </span><span class="m">1000</span><span class="w">  </span><span class="o">(</span>Ethernet<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>packets<span class="w"> </span><span class="m">0</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>.0<span class="w"> </span>B<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w">  </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>frame<span class="w"> </span><span class="m">0</span>
<span class="w">        </span>TX<span class="w"> </span>packets<span class="w"> </span><span class="m">76</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">20860</span><span class="w"> </span><span class="o">(</span><span class="m">20</span>.3<span class="w"> </span>KiB<span class="o">)</span>
<span class="w">        </span>TX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w"> </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>carrier<span class="w"> </span><span class="m">0</span><span class="w">  </span>collisions<span class="w"> </span><span class="m">0</span>

lo:<span class="w"> </span><span class="nv">flags</span><span class="o">=</span><span class="m">73</span>&lt;UP,LOOPBACK,RUNNING&gt;<span class="w">  </span>mtu<span class="w"> </span><span class="m">65536</span>
<span class="w">        </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w">  </span>netmask<span class="w"> </span><span class="m">255</span>.0.0.0
<span class="w">        </span>inet6<span class="w"> </span>::1<span class="w">  </span>prefixlen<span class="w"> </span><span class="m">128</span><span class="w">  </span>scopeid<span class="w"> </span>0x10&lt;host&gt;
<span class="w">        </span>loop<span class="w">  </span>txqueuelen<span class="w"> </span><span class="m">1000</span><span class="w">  </span><span class="o">(</span>Local<span class="w"> </span>Loopback<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>packets<span class="w"> </span><span class="m">315</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">450225</span><span class="w"> </span><span class="o">(</span><span class="m">439</span>.6<span class="w"> </span>KiB<span class="o">)</span>
<span class="w">        </span>RX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w">  </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>frame<span class="w"> </span><span class="m">0</span>
<span class="w">        </span>TX<span class="w"> </span>packets<span class="w"> </span><span class="m">315</span><span class="w">  </span>bytes<span class="w"> </span><span class="m">450225</span><span class="w"> </span><span class="o">(</span><span class="m">439</span>.6<span class="w"> </span>KiB<span class="o">)</span>
<span class="w">        </span>TX<span class="w"> </span>errors<span class="w"> </span><span class="m">0</span><span class="w">  </span>dropped<span class="w"> </span><span class="m">0</span><span class="w"> </span>overruns<span class="w"> </span><span class="m">0</span><span class="w">  </span>carrier<span class="w"> </span><span class="m">0</span><span class="w">  </span>collisions<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p><img alt="Image" src="_images/1754903268110_21b6fea4_16b3_4ba0_a68e_d3e9cccadd7d.png" /></p>
<p>Click “Open”, the following dialog box will appear, click “accept” to enter the login interface.</p>
<p><img alt="Image" src="_images/1754903268202_a3990bb7_86d1_4314_87f2_a30802922d64.png" /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>login<span class="w"> </span>as:<span class="w"> </span>root
Last<span class="w"> </span>login:<span class="w">  </span>//root,<span class="w"> </span>without<span class="w"> </span>password,forlinx,<span class="w"> </span>user<span class="w"> </span>password:forlinx
root@ok-mx95-c:~#
</pre></div>
</div>
<p>You can use FileZilla (installation package provided by Forlinx: User Documents\Software Documents\3-Tools) to transfer files via SFTP.</p>
<p><img alt="Image" src="_images/1754903268308_e5565f19_9dcb_4169_9d3b_9607e604fe5b.png" /></p>
</section>
</section>
<section id="system-partition">
<h3>2.4 System Partition<a class="headerlink" href="#system-partition" title="Link to this heading"></a></h3>
<section id="emmc-version">
<h4>2.4.1 EMMC Version<a class="headerlink" href="#emmc-version" title="Link to this heading"></a></h4>
<p>The following table is the eMMC memory partition information of Linux operating system:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Device Nodes</strong></p></th>
<th class="head text-center"><p><strong>Initial Address</strong></p></th>
<th class="head text-center"><p><strong>Size</strong></p></th>
<th class="head text-center"><p><strong>Partition</strong></p></th>
<th class="head text-center"><p><strong>File system</strong></p></th>
<th class="head"><p><strong>Content</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>mmcblk0boot0</p></td>
<td class="text-center"><p>0</p></td>
<td class="text-center"><p>4MB</p></td>
<td class="text-center"><p>No</p></td>
<td class="text-center"><p>No</p></td>
<td><p>bootloader image</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>mmcblk0</p></td>
<td class="text-center"><p>0x700000</p></td>
<td class="text-center"><p>0x4000</p></td>
<td class="text-center"><p>No</p></td>
<td class="text-center"><p>No</p></td>
<td><p>Uboot environment variable</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>mmcblk0</p></td>
<td class="text-center"><p>0x800000</p></td>
<td class="text-center"><p>120MB</p></td>
<td class="text-center"><p>mmcblk0p1</p></td>
<td class="text-center"><p>Vfat</p></td>
<td><p>Kernel image and device tree, etc</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>mmcblk0</p></td>
<td class="text-center"><p>0x8000000</p></td>
<td class="text-center"><p>Full eMMC capacity remaining</p></td>
<td class="text-center"><p>mmcblk0p2</p></td>
<td class="text-center"><p>Ext4</p></td>
<td><p>root file system</p></td>
</tr>
</tbody>
</table>
<p>Use the df command to view disk usage on a system. The following image shows the default disk usage at factory settings (eMMC size: 16GB with a QT file system). This is for reference only; actual parameters may vary.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>df<span class="w"> </span>-Th
Filesystem<span class="w">     </span>Type<span class="w">      </span>Size<span class="w">  </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
/dev/root<span class="w">      </span>ext4<span class="w">       </span>54G<span class="w">  </span><span class="m">4</span>.3G<span class="w">   </span>48G<span class="w">   </span><span class="m">9</span>%<span class="w"> </span>/
devtmpfs<span class="w">       </span>devtmpfs<span class="w">  </span><span class="m">3</span>.2G<span class="w">  </span><span class="m">4</span>.0K<span class="w">  </span><span class="m">3</span>.2G<span class="w">   </span><span class="m">1</span>%<span class="w"> </span>/dev
tmpfs<span class="w">          </span>tmpfs<span class="w">     </span><span class="m">3</span>.8G<span class="w">  </span><span class="m">6</span>.2M<span class="w">  </span><span class="m">3</span>.8G<span class="w">   </span><span class="m">1</span>%<span class="w"> </span>/dev/shm
tmpfs<span class="w">          </span>tmpfs<span class="w">     </span><span class="m">1</span>.6G<span class="w">   </span>11M<span class="w">  </span><span class="m">1</span>.5G<span class="w">   </span><span class="m">1</span>%<span class="w"> </span>/run
tmpfs<span class="w">          </span>tmpfs<span class="w">     </span><span class="m">4</span>.0M<span class="w">     </span><span class="m">0</span><span class="w">  </span><span class="m">4</span>.0M<span class="w">   </span><span class="m">0</span>%<span class="w"> </span>/sys/fs/cgroup
tmpfs<span class="w">          </span>tmpfs<span class="w">     </span><span class="m">3</span>.8G<span class="w">  </span><span class="m">8</span>.0K<span class="w">  </span><span class="m">3</span>.8G<span class="w">   </span><span class="m">1</span>%<span class="w"> </span>/tmp
tmpfs<span class="w">          </span>tmpfs<span class="w">     </span><span class="m">3</span>.8G<span class="w">  </span>280K<span class="w">  </span><span class="m">3</span>.8G<span class="w">   </span><span class="m">1</span>%<span class="w"> </span>/var/volatile
/dev/mmcblk0p1<span class="w"> </span>vfat<span class="w">      </span>120M<span class="w">   </span>35M<span class="w">   </span>86M<span class="w">  </span><span class="m">29</span>%<span class="w"> </span>/run/media/Boot-mmcblk0p1
tmpfs<span class="w">          </span>tmpfs<span class="w">     </span>769M<span class="w">   </span>12K<span class="w">  </span>769M<span class="w">   </span><span class="m">1</span>%<span class="w"> </span>/run/user/0
root@ok-mx95-c:~#<span class="w"> </span>
</pre></div>
</div>
<p>Use the free command to check memory usage. The following image shows memory usage during Forlinx debugging (DDR size: 8GB). This is for reference only; actual parameters may vary.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>free<span class="w"> </span>-m
<span class="w">               </span>total<span class="w">        </span>used<span class="w">        </span>free<span class="w">      </span>shared<span class="w">  </span>buff/cache<span class="w">   </span>available
Mem:<span class="w">            </span><span class="m">7687</span><span class="w">         </span><span class="m">614</span><span class="w">        </span><span class="m">6888</span><span class="w">          </span><span class="m">24</span><span class="w">         </span><span class="m">322</span><span class="w">        </span><span class="m">7072</span>
Swap:<span class="w">              </span><span class="m">0</span><span class="w">           </span><span class="m">0</span><span class="w">           </span><span class="m">0</span>
</pre></div>
</div>
</section>
</section>
<section id="system-shutdown">
<h3>2.5 System Shutdown<a class="headerlink" href="#system-shutdown" title="Link to this heading"></a></h3>
<p>In general, the power can be turned off directly. If there is data storage, function use, or other operations, avoid turning off the power arbitrarily during operation to prevent irreversible damage to the file. In such cases, only re-flashing the firmware can resolve the issue. Before powering off, use the sync command to ensure data is fully written.</p>
<p>The command ‘reboot’ can be used to restart the development board. You can also restart the hardware by pressing the RESET key or directly power off and restart.</p>
<p><strong>Note: If the user-designed product using the SoM experiences an unexpected shutdown due to power loss during operation, power-down protection measures can be included in the design to prevent this issue.</strong></p>
</section>
<section id="screen-switching">
<h3>2.6 Screen Switching<a class="headerlink" href="#screen-switching" title="Link to this heading"></a></h3>
<p><font style="color:rgb(51, 51, 51);">At present, the 95xx supports LVDS to display the Weston desktop when the image is powered on by default. If it is necessary to modify it to MIPI to display the Weston desktop.</font></p>
<p><font style="color:rgb(51, 51, 51);">Modify the/etc/xdg/weston/weston. ini configuration file, and close the weston display of LVDS.</font></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#cat<span class="w"> </span>/etc/xdg/weston/weston.ini
...
<span class="c1">#[output]</span>
<span class="c1">#name=HDMI-A-1</span>
<span class="c1">#mode=1920x1080@60</span>
<span class="c1">#transform=rotate-90</span>

//Add<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>configuration
<span class="o">[</span>output<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>LVDS-1
<span class="nv">mode</span><span class="o">=</span>off
...
</pre></div>
</div>
</section>
</section>
<section id="ok-mx9596-c-platform-interface-function-use-and-test">
<h2>3. OK-MX9596-C Platform Interface Function Use and Test<a class="headerlink" href="#ok-mx9596-c-platform-interface-function-use-and-test" title="Link to this heading"></a></h2>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>Users should follow this section when using the screen with the QT file system, but can skip it for non-QT operations;</strong></p></li>
<li><p><strong>This chapter details QT functions. With the default device and driver working normally, it’s advisable to test interface functions after command line tests.</strong></p></li>
</ul>
<p>QT test program source code path: source sdk/appsrc/forlinx-qt</p>
<p>Testing program path in the development board’s file system: /usr/bin.</p>
<p>This chapter mainly explains the usage of the expansion interfaces on the development board in QT interface. The testing program is only for reference, and users need to make adjustments based on their actual situations when using it.</p>
<section id="introduction-to-interface-function">
<h3>3.1 Introduction to Interface Function<a class="headerlink" href="#introduction-to-interface-function" title="Link to this heading"></a></h3>
<p>The desktop is displayed as follows after the board booting:</p>
<p><img alt="Image" src="_images/1754903269899_9860a5c0_fab8_47c0_9729_bc1c81514ea1.png" /><br />
<img alt="Image" src="_images/1754903270016_1006737c_f470_47b2_96ba_79ff708d747c.png" /></p>
<p><strong>Note: Icon order may vary.</strong></p>
</section>
<section id="network-configuration-test">
<h3>3.2 Network Configuration Test<a class="headerlink" href="#network-configuration-test" title="Link to this heading"></a></h3>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>By factory default, only the eth0 network card is set to STATIC mode;</strong></p></li>
<li><p><strong>The set IP and other information will be saved to the relevant configuration file (/etc/systemd/network directory) of the system, so the network information set this time will be used every time the system is restarted.</strong></p></li>
</ul>
<p>Icon：<img alt="Image" src="_images/1754903270159_26f2c097_4552_4d8d_8a81_0b7b8c278906.png" /></p>
<p>Clicking on the network configuration icon will open a interface program that supports two modes: STATIC and DHCP.</p>
<ul class="simple">
<li><p>STATIC mode</p></li>
</ul>
<p>After clicking on the network configuration icon, select the STATIC mode as shown in the figure. You can then configure the IP address, subnet mask, gateway, and DNS settings. Once you have set the parameters, click on “Apply and Restart Network”.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Relevant Parameter</strong></p></th>
<th class="head text-center"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>interface</p></td>
<td class="text-center"><p>Set up the network card</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>ip</p></td>
<td class="text-center"><p>Set the IP address</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>netmask</p></td>
<td class="text-center"><p>Set the subnet mask</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>gateway</p></td>
<td class="text-center"><p>Set up the gateway</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>dns</p></td>
<td class="text-center"><p>Set DNS</p></td>
</tr>
</tbody>
</table>
<p><img alt="Image" src="_images/1754903270383_40464c27_8b40_4616_a6fc_f3ff68367f17.png" /></p>
<ul class="simple">
<li><p>DHCP mode:</p></li>
</ul>
<p><strong>Note: Testing must be done on a router that supports automatic IP allocation.</strong></p>
<p>Select DHCP, select the network card device to be configured in Interface, and click “Apply and Restart Network” at the bottom of the interface to apply the settings and restart the network.</p>
<p><img alt="Image" src="_images/1754903270512_13a917e4_17b9_450a_a73b_0dbef6ebba79.png" /></p>
</section>
<section id="opengl-test">
<h3>3.3 OpenGL Test<a class="headerlink" href="#opengl-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903270614_ee1ca143_3190_4495_a960_f32669f498a8.png" /></p>
<p>OK-MX9596-C supports EGL 1.5，OpenGL ES2.</p>
<p>Click the icon to enter the OpenGL test interface.</p>
<p><img alt="Image" src="_images/1754903270699_ae3e3977_7a5b_49a1_9ce8_fb4bae244918.png" /></p>
</section>
<section id="g-5g-test">
<h3>3.4 4G/5G Test<a class="headerlink" href="#g-5g-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903270784_799358de_3de6_4977_a7cd_258f9c926a7a.png" /></p>
<p>The 4G test program is used to test the external 4G module (EC20) on the OK-MX95xx-C. Before the test, please power off the development board, connect the module and insert the SIM card (pay attention to the direction of the SIM card), and start the development board Test：</p>
<p><img alt="Image" src="_images/1754903270876_fda5b862_3b63_4662_be10_cb4f1ddafe09.png" /></p>
<p>Click the CONNECT button then the program will automatically enter the dialing process and get the IP to set the DNS, etc. After waiting patiently for a few seconds, click the ping button to test it.</p>
<p><img alt="Image" src="_images/1754903270980_ffea2585_196c_4d82_a96c_b038e024d3ad.png" /></p>
</section>
<section id="uart-test">
<h3>3.5 UART Test<a class="headerlink" href="#uart-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903271069_a3934db0_27b3_4e9b_92e7_cd998068f01f.png" /></p>
<p>In this test, ttyLP5 and ttyLP7 are used to test the serial port by short-circuiting pins 1 and 5, pins 2 and 6, pins 3 and 7 of P48 respectively.</p>
<ol class="arabic">
<li><p>Click the UART test icon to enter the test application interface, click the gear icon<img alt="Image" src="_images/1754903271150_47db5c45_2643_4915_8bf6_19c228f7f3f5.png" />setting button in the upper left corner, and set the serial port parameters as shown in the figure below:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Relevant Parameter</strong></p></th>
<th class="head text-center"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>Select Serial Port</p></td>
<td class="text-center"><p>Set the serial port (select ttyLP7)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>BaudRate</p></td>
<td class="text-center"><p>Set baud rate (115200)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Data bits</p></td>
<td class="text-center"><p>Set data bits (8 bits)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Parity</p></td>
<td class="text-center"><p>Set parity bit (no parity)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Stop bits</p></td>
<td class="text-center"><p>Set stop bit (1 bit)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Flow control</p></td>
<td class="text-center"><p>Set flow control (no flow control)</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
<p><img alt="Image" src="_images/1754903271233_bb0ae15b_2f9c_4bc6_9b6c_1908a52b6c2d.png" /></p>
<p>2. After setting the serial port parameters, click the connection button “<img alt="Image" src="_images/1754903271338_d0076494_ffaf_44bf_8552_d959472d1398.png" />” in the upper left corner. At this time, the test program can carry out the data receiving and sending test.</p>
<p>3. Run the serial port send test command in the terminal. The received data will be displayed on the screen.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_uarttest<span class="w"> </span>-d<span class="w"> </span>/dev/ttyLP5<span class="w"> </span>-b<span class="w"> </span><span class="m">115200</span><span class="w"> </span>-w
tx_0:<span class="w"> </span>NmROqBVoYMoWf3aodGUCUnyDkdmYDpIY
</pre></div>
</div>
<p><img alt="Image" src="_images/1754903271444_e3ac62e7_48c7_4acf_8df9_60cf0c7859e3.png" /></p>
<p>Run the serial port receive test command in the terminal. When you click the test interface, a virtual keyboard will appear. After entering 32 consecutive characters, the terminal will print the data sent by QT.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_uarttest<span class="w"> </span>-d<span class="w"> </span>/dev/ttyLP5<span class="w">  </span>-r
rx_0:<span class="w"> </span><span class="m">12345678901234567890123456789012</span>
root@ok-mx95-c:~#
</pre></div>
</div>
<p><img alt="Image" src="_images/1754903271571_700e6179_a2f4_414d_abc2_e25d0d917cba.png" /></p>
<p><strong>Note: The data entered via the virtual keyboard will only appear on the test interface after pressing “Enter”. Please enter “01234567890123456789012345678901” continuously, then press “Enter” on the virtual keyboard.</strong></p>
</section>
<section id="wifi-test">
<h3>3.6 WIFI Test<a class="headerlink" href="#wifi-test" title="Link to this heading"></a></h3>
<p><strong>Note: The OK-MX9596-C development board has an on-board AW-CM276NF WiFi chip operating at 2.4 GHz/5 GHz.</strong></p>
<p>“WIFI” is a tool for configuring and testing the STA (station) mode of Wi-Fi.</p>
<p>1. Click icon<img alt="Image" src="_images/1754903271712_faeb0077_0e3c_45be_a369_4defef375dae.png" />to enter test interface, select module from dropdown, enter SSID for Wi-Fi connection.</p>
<p>Router name, enter the router password in the PAWD column, click “connect” to connect to the router through WiFi.</p>
<p><img alt="Image" src="_images/1754903271892_5c3c9af0_ad90_4d70_af18_b4d82a180b0f.png" /></p>
<p>2. After the connection is successful, click “ping” to test the network after setting the IP.</p>
<p><img alt="Image" src="_images/1754903271984_1158c6a5_4bcb_4f9c_9a80_97ca3150ae12.png" /></p>
</section>
<section id="rtc-test">
<h3>3.7 RTC Test<a class="headerlink" href="#rtc-test" title="Link to this heading"></a></h3>
<p><strong>Note: Ensure button cell batteries are installed &amp; voltage is normal.</strong></p>
<p>Icon：<img alt="Image" src="_images/1754903272081_563f9ec0_4696_47b8_9042_ab87264d3a95.png" /></p>
<p>RTC test includes setting time, power cycling, rerunning test software, and verifying RTC sync.</p>
<p>Run the RTC test software to view and set the current system time with the following interface:</p>
<p><img alt="Image" src="_images/1754903272157_ec4348c8_95e5_4158_aa2f_528ce1025d7a.png" /></p>
<p>Click “set” to adjust the time settings, then click “save” to finish the settings. After powering off and waiting, reboot and rerun the RTC test software to synchronize and confirm the RTC test is normal.</p>
</section>
<section id="watchdog-test">
<h3>3.8 Watchdog Test<a class="headerlink" href="#watchdog-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903272280_2859e84b_22c3_4310_8f0e_9bee7cfca385.png" /></p>
<p>“Watchdog” tests the functionality of the watchdog feature. Interface as follows:</p>
<p><img alt="Image" src="_images/1754903272379_c7489100_960a_4fd9_8fe8_d66e2de8edb6.png" /></p>
<p>Checking “feed dog” &amp; clicking “open watchdog” starts watchdog function with dog-feeding. System shouldn’t restart under normal conditions.</p>
<p>Unchecking “Feed Dog” &amp; clicking “Activate Watchdog” starts watchdog function without dog-feeding. After about 10 seconds, the system restarts, indicating normal watchdog function.”</p>
</section>
<section id="ping-test">
<h3>3.9 Ping Test<a class="headerlink" href="#ping-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903272499_bbc30104_4df8_4a6f_8cf1_3b4eb8986fb0.png" /></p>
<p>“Ping” is a graphical tool for network testing, offering a user-friendly interface for ping operations.</p>
<p><img alt="Image" src="_images/1754903272634_dc39a9fb_887f_4911_9bf5_0ec420ead424.png" /></p>
<p>Write the target ip needing ping in the hostname field; after clicking the ping button, the RESULT column will indicate the result, click stop to end the ping test and clear to clean the information in the result.</p>
<p>As shown in the figure, the network connection is smooth.</p>
<p><img alt="Image" src="_images/1754903272731_2e3e16e2_0655_4625_8152_55705ed5ed1a.png" /></p>
</section>
<section id="camera-test">
<h3>3.10 Camera Test<a class="headerlink" href="#camera-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903272823_298ac0d0_4425_46e7_9f54_b3e22ada553f.png" /></p>
<p>Click the icon to enter the camera test program and insert the USB camera.</p>
<p><strong>Note: Currently, only UVC cameras are supported; MIPICSI cameras are not yet supported.</strong></p>
<p><img alt="Image" src="_images/1754903273050_041334e7_0d58_487a_8c3d_26dab19b2727.png" /></p>
<p>Choose the camera video device node;</p>
<p>Set the camera resolution;</p>
<p>Click “Start” to capture video;</p>
<p>Click “Stop” to end capture;</p>
<p>Click “Picture” to take a photo;</p>
<p>Take the Logitech UVC camera as an example to conduct the camera test.</p>
<p><img alt="Image" src="_images/1754903273207_6e4ad8f0_6836_4c2c_b7b8_cb2d8adf417e.png" /></p>
<p>Click the Picture button to take a photo. The file is saved in /home/root/in jpg format. Use an appropriate tool on Windows to view it.</p>
</section>
<section id="backlight-test">
<h3>3.11 Backlight Test<a class="headerlink" href="#backlight-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903273332_e16c74c9_4eb5_4b31_94d5_181539bf1046.png" /></p>
<p>“BackLight” is an LCD backlight adjustment App with a left-right progress bar for brightness control. Click to open the interface as follows:</p>
<p>Drag the slider for the corresponding screen to adjust the backlight brightness. Level 1 is the lowest, and 255 is the highest. PWM1 controls the LVDS screen, and PWM2 controls the MIPI screen. Forlinx has made restrictions on this application. It is not allowed to use the QT application to completely turn off the backlight. If you want to completely turn off the backlight, please use the command line program or modify the QT test routine.</p>
</section>
<section id="play-record-test">
<h3>3.12 Play/Record Test<a class="headerlink" href="#play-record-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903273620_ec8a47e0_b9c8_4842_9752_782d36389991.png" /></p>
<p>Before starting the recording test, plug a prepared headset into the carrier board’s headphone jack. The carrier board mic and headset mic correspond to the left and right recording channels. Click the icon to open the recording test application to check if the sound card recording function is working properly.</p>
<p>Choose where to save the recording file. Click “Start” to begin recording and “Stop” to end.</p>
<p>In the Input Device radio box, select the second option: “Built-in Audio Stereo”, which corresponds to the NAU88C22 input device.</p>
<p>Then, select the following options:<br />
Audio Codec: “Wave”<br />
FILE Container: “Wave File”<br />
Channels: 2<br />
The interface will appear as shown below.</p>
<p><img alt="Image" src="_images/1754903273802_5cd44160_8d35_4575_85b6_808db27c7cb6.png" /></p>
<p>Click the Record button to test the recording. The recording file is saved to the/tmp/record _ *.wav file in the root directory.</p>
<p><strong>Note: The/tmp directory is tmpfs and the files in it are not saved after reboot. It can be copied to a PC or played using the music player test program below.</strong></p>
</section>
<section id="music-play-test">
<h3>3.13 Music Play Test<a class="headerlink" href="#music-play-test" title="Link to this heading"></a></h3>
<p>Icon: <img alt="Image" src="_images/1754903274021_22e00371_d44b_4d37_bb95_f5eb496763a8.png" /></p>
<p>“music player” is a simple audio test application that can be used to test the function of the sound card or as a simple audio player.</p>
<p>Application Interfaces</p>
<p>Click the Open button in the lower left corner and select test audio/home/forlinx/audio/test.mp3. Select the sound card Built-in Audio Stereo in the lower left corner.</p>
<p>There is currently a problem with the Select Sound button, which may cause the interface to get stuck.</p>
</section>
<section id="qml-video-playback-test">
<h3>3.14 QML Video Playback Test<a class="headerlink" href="#qml-video-playback-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903274388_cc91239b_6516_4ace_8e6c_40859e461400.png" /><br />
<strong>Note: Currently, only Video Modes are supported. Camera Modes are not supported.</strong><br />
Qml Video supports video playback in H264 and H265 formats, with a maximum of 4k 60fps.<br />
The qml video test program can play video based on qml. Click the icon to enter the test program interface.</p>
<p><img alt="Image" src="_images/1754903274503_8e55c17a_9d47_4f87_9623_1b9a60dde526.png" /></p>
<p>Click Select File 1 at the top, select the video file, and test the video file path:/home/forlinx/video/</p>
<p>Click Full Screen-inverted to start playing the video in full screen.</p>
<p><img alt="Image" src="_images/1754903274677_5641c4dc_a617_4970_bf15_db882508a133.png" /></p>
</section>
<section id="browser-test">
<h3>3.15 Browser Test<a class="headerlink" href="#browser-test" title="Link to this heading"></a></h3>
<p>Icon：<img alt="Image" src="_images/1754903274842_2f917d84_c9b0_44c0_b773_730617b5dff3.png" /></p>
<p><strong>Note: Before testing, check whether the time of the development board is accurate, and check the network situation. Note: If the development board time is abnormal, it will cause certificate problems.</strong></p>
<p>Click the icon to enter the browser interface and enter the official website of forlinx by default.</p>
<p><img alt="Image" src="_images/1754903274939_fe188164_2548_4913_8896_172d833369ff.png" /></p>
</section>
</section>
<section id="ok-mx9596-c-command-line-function-test">
<h2>4. OK- MX9596-C Command Line Function Test<a class="headerlink" href="#ok-mx9596-c-command-line-function-test" title="Link to this heading"></a></h2>
<p>OK-MX9596-C platform has a wealth of built-in command line tools and FORLINX test programs available to users.</p>
<ul class="simple">
<li><p>FORLINX test program source code path: sdk/appsrc/forlinx-cmd</p></li>
<li><p>Testing program path: “path”: /usr/bin</p></li>
</ul>
<section id="system-information-queries">
<h3>4.1 System Information Queries<a class="headerlink" href="#system-information-queries" title="Link to this heading"></a></h3>
<p>To view the kernel information, enter the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>uname<span class="w"> </span>-a
Linux<span class="w"> </span>ok-mx95-c<span class="w"> </span><span class="m">6</span>.6.3+<span class="w"> </span><span class="c1">#1 SMP PREEMPT Wed Jun 26 12:54:47 CST 2024 aarch64 GNU/Linux</span>
</pre></div>
</div>
<p>To view CPU information:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/proc/cpuinfo
processor<span class="w">       </span>:<span class="w"> </span><span class="m">0</span>
BogoMIPS<span class="w">        </span>:<span class="w"> </span><span class="m">48</span>.00
Features<span class="w">        </span>:<span class="w"> </span>fp<span class="w"> </span>asimd<span class="w"> </span>evtstrm<span class="w"> </span>aes<span class="w"> </span>pmull<span class="w"> </span>sha1<span class="w"> </span>sha2<span class="w"> </span>crc32<span class="w"> </span>atomics<span class="w"> </span>fphp<span class="w"> </span>asimdhp<span class="w"> </span>cpuid<span class="w"> </span>asimdrdm<span class="w"> </span>lrcpc<span class="w"> </span>dcpop<span class="w"> </span>asimddp
CPU<span class="w"> </span>implementer<span class="w"> </span>:<span class="w"> </span>0x41
CPU<span class="w"> </span>architecture:<span class="w"> </span><span class="m">8</span>
CPU<span class="w"> </span>variant<span class="w">     </span>:<span class="w"> </span>0x2
CPU<span class="w"> </span>part<span class="w">        </span>:<span class="w"> </span>0xd05
CPU<span class="w"> </span>revision<span class="w">    </span>:<span class="w"> </span><span class="m">0</span>

processor<span class="w">       </span>:<span class="w"> </span><span class="m">1</span>
BogoMIPS<span class="w">        </span>:<span class="w"> </span><span class="m">48</span>.00
Features<span class="w">        </span>:<span class="w"> </span>fp<span class="w"> </span>asimd<span class="w"> </span>evtstrm<span class="w"> </span>aes<span class="w"> </span>pmull<span class="w"> </span>sha1<span class="w"> </span>sha2<span class="w"> </span>crc32<span class="w"> </span>atomics<span class="w"> </span>fphp<span class="w"> </span>asimdhp<span class="w"> </span>cpuid<span class="w"> </span>asimdrdm<span class="w"> </span>lrcpc<span class="w"> </span>dcpop<span class="w"> </span>asimddp
CPU<span class="w"> </span>implementer<span class="w"> </span>:<span class="w"> </span>0x41
CPU<span class="w"> </span>architecture:<span class="w"> </span><span class="m">8</span>
CPU<span class="w"> </span>variant<span class="w">     </span>:<span class="w"> </span>0x2
CPU<span class="w"> </span>part<span class="w">        </span>:<span class="w"> </span>0xd05
CPU<span class="w"> </span>revision<span class="w">    </span>:<span class="w"> </span><span class="m">0</span>

processor<span class="w">       </span>:<span class="w"> </span><span class="m">2</span>
BogoMIPS<span class="w">        </span>:<span class="w"> </span><span class="m">48</span>.00
Features<span class="w">        </span>:<span class="w"> </span>fp<span class="w"> </span>asimd<span class="w"> </span>evtstrm<span class="w"> </span>aes<span class="w"> </span>pmull<span class="w"> </span>sha1<span class="w"> </span>sha2<span class="w"> </span>crc32<span class="w"> </span>atomics<span class="w"> </span>fphp<span class="w"> </span>asimdhp<span class="w"> </span>cpuid<span class="w"> </span>asimdrdm<span class="w"> </span>lrcpc<span class="w"> </span>dcpop<span class="w"> </span>asimddp
CPU<span class="w"> </span>implementer<span class="w"> </span>:<span class="w"> </span>0x41
CPU<span class="w"> </span>architecture:<span class="w"> </span><span class="m">8</span>
CPU<span class="w"> </span>variant<span class="w">     </span>:<span class="w"> </span>0x2
CPU<span class="w"> </span>part<span class="w">        </span>:<span class="w"> </span>0xd05
CPU<span class="w"> </span>revision<span class="w">    </span>:<span class="w"> </span><span class="m">0</span>

processor<span class="w">       </span>:<span class="w"> </span><span class="m">3</span>
BogoMIPS<span class="w">        </span>:<span class="w"> </span><span class="m">48</span>.00
Features<span class="w">        </span>:<span class="w"> </span>fp<span class="w"> </span>asimd<span class="w"> </span>evtstrm<span class="w"> </span>aes<span class="w"> </span>pmull<span class="w"> </span>sha1<span class="w"> </span>sha2<span class="w"> </span>crc32<span class="w"> </span>atomics<span class="w"> </span>fphp<span class="w"> </span>asimdhp<span class="w"> </span>cpuid<span class="w"> </span>asimdrdm<span class="w"> </span>lrcpc<span class="w"> </span>dcpop<span class="w"> </span>asimddp
CPU<span class="w"> </span>implementer<span class="w"> </span>:<span class="w"> </span>0x41
CPU<span class="w"> </span>architecture:<span class="w"> </span><span class="m">8</span>
CPU<span class="w"> </span>variant<span class="w">     </span>:<span class="w"> </span>0x2
CPU<span class="w"> </span>part<span class="w">        </span>:<span class="w"> </span>0xd05
CPU<span class="w"> </span>revision<span class="w">    </span>:<span class="w"> </span><span class="m">0</span>

processor<span class="w">       </span>:<span class="w"> </span><span class="m">4</span>
BogoMIPS<span class="w">        </span>:<span class="w"> </span><span class="m">48</span>.00
Features<span class="w">        </span>:<span class="w"> </span>fp<span class="w"> </span>asimd<span class="w"> </span>evtstrm<span class="w"> </span>aes<span class="w"> </span>pmull<span class="w"> </span>sha1<span class="w"> </span>sha2<span class="w"> </span>crc32<span class="w"> </span>atomics<span class="w"> </span>fphp<span class="w"> </span>asimdhp<span class="w"> </span>cpuid<span class="w"> </span>asimdrdm<span class="w"> </span>lrcpc<span class="w"> </span>dcpop<span class="w"> </span>asimddp
CPU<span class="w"> </span>implementer<span class="w"> </span>:<span class="w"> </span>0x41
CPU<span class="w"> </span>architecture:<span class="w"> </span><span class="m">8</span>
CPU<span class="w"> </span>variant<span class="w">     </span>:<span class="w"> </span>0x2
CPU<span class="w"> </span>part<span class="w">        </span>:<span class="w"> </span>0xd05
CPU<span class="w"> </span>revision<span class="w">    </span>:<span class="w"> </span><span class="m">0</span>

processor<span class="w">       </span>:<span class="w"> </span><span class="m">5</span>
BogoMIPS<span class="w">        </span>:<span class="w"> </span><span class="m">48</span>.00
Features<span class="w">        </span>:<span class="w"> </span>fp<span class="w"> </span>asimd<span class="w"> </span>evtstrm<span class="w"> </span>aes<span class="w"> </span>pmull<span class="w"> </span>sha1<span class="w"> </span>sha2<span class="w"> </span>crc32<span class="w"> </span>atomics<span class="w"> </span>fphp<span class="w"> </span>asimdhp<span class="w"> </span>cpuid<span class="w"> </span>asimdrdm<span class="w"> </span>lrcpc<span class="w"> </span>dcpop<span class="w"> </span>asimddp
CPU<span class="w"> </span>implementer<span class="w"> </span>:<span class="w"> </span>0x41
CPU<span class="w"> </span>architecture:<span class="w"> </span><span class="m">8</span>
CPU<span class="w"> </span>variant<span class="w">     </span>:<span class="w"> </span>0x2
CPU<span class="w"> </span>part<span class="w">        </span>:<span class="w"> </span>0xd05
CPU<span class="w"> </span>revision<span class="w">    </span>:<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p>View environment variable information:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>env
<span class="nv">SHELL</span><span class="o">=</span>/bin/sh
<span class="nv">EDITOR</span><span class="o">=</span>vi
<span class="nv">QTWEBENGINE_DISABLE_SANDBOX</span><span class="o">=</span><span class="m">1</span>
<span class="nv">PWD</span><span class="o">=</span>/home/root
<span class="nv">LOGNAME</span><span class="o">=</span>root
<span class="nv">XDG_SESSION_TYPE</span><span class="o">=</span>tty
<span class="nv">MOTD_SHOWN</span><span class="o">=</span>pam
<span class="nv">HOME</span><span class="o">=</span>/home/root
<span class="nv">LANG</span><span class="o">=</span>C
<span class="nv">WAYLAND_DISPLAY</span><span class="o">=</span>/run/wayland-0
<span class="nv">QT_QPA_PLATFORM</span><span class="o">=</span>wayland
<span class="nv">XDG_SESSION_CLASS</span><span class="o">=</span>user
<span class="nv">TERM</span><span class="o">=</span>linux
<span class="nv">USER</span><span class="o">=</span>root
<span class="nv">SHLVL</span><span class="o">=</span><span class="m">1</span>
<span class="nv">XDG_SESSION_ID</span><span class="o">=</span>c2
<span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span>/run/user/0
<span class="nv">PS1</span><span class="o">=</span><span class="se">\u</span>@<span class="se">\h</span>:<span class="se">\w\$</span><span class="w"> </span>
<span class="nv">TSLIB_TSDEVICE</span><span class="o">=</span>/dev/input/touchscreen0
<span class="nv">HUSHLOGIN</span><span class="o">=</span>FALSE
<span class="nv">PATH</span><span class="o">=</span>/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin
<span class="nv">DBUS_SESSION_BUS_ADDRESS</span><span class="o">=</span>unix:path<span class="o">=</span>/run/user/0/bus
<span class="nv">MAIL</span><span class="o">=</span>/var/spool/mail/root
<span class="nv">_</span><span class="o">=</span>/usr/bin/env
</pre></div>
</div>
</section>
<section id="frequency-test">
<h3>4.2 Frequency Test<a class="headerlink" href="#frequency-test" title="Link to this heading"></a></h3>
<p><strong>Note: This process changes all CPU cores at the same time.</strong></p>
<ol class="arabic simple">
<li><p>All cpufreq governor types supported in the current kernel:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span><span class="se">\</span>
/sys/devices/system/cpu/cpufreq/policy0/scaling_available_governors
conservative<span class="w"> </span>ondemand<span class="w"> </span>userspace<span class="w"> </span>powersave<span class="w"> </span>performance<span class="w"> </span>schedutil
</pre></div>
</div>
<p>The default mode is ondemand. In this mode, the CPU frequency will be adjusted according to the demand. Check the current CPU freq governor type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/devices/system/cpu/cpufreq/policy0/scaling_governor
ondemand
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>To view the frequency gears supported by the CPU:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span><span class="se">\</span>
/sys/devices/system/cpu/cpufreq/policy0/scaling_available_frequencies
<span class="m">667000</span><span class="w"> </span><span class="m">900000</span><span class="w"> </span><span class="m">1404000</span><span class="w"> </span><span class="m">1800000</span>
</pre></div>
</div>
<p>To view the current frequency:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/devices/system/cpu/cpufreq/policy0/scaling_cur_freq
<span class="m">667000</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>You can adjust the CPU frequency directly, setting governor to userspace</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>userspace<span class="w"> </span>&gt;<span class="w"> </span><span class="se">\</span>
/sys/devices/system/cpu/cpufreq/policy0/scaling_governor
</pre></div>
</div>
<p>Set frequency and view:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1800000</span><span class="w"> </span>&gt;<span class="w"> </span><span class="se">\</span>
/sys/devices/system/cpu/cpufreq/policy0/scaling_setspeed
root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/devices/system/cpu/cpufreq/policy0/scaling_cur_freq
<span class="m">1800000</span>
</pre></div>
</div>
</section>
<section id="temperature-test">
<h3><strong>4.3</strong> Temperature Test<a class="headerlink" href="#temperature-test" title="Link to this heading"></a></h3>
<p>View the temperature value:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/class/thermal/thermal_zone0/temp
<span class="m">57030</span>
</pre></div>
</div>
<p>The temperature value is 57°C.</p>
<p>The temperature control function can be tested by inputting a simulated temperature. Automotive-grade i.MX95 with a junction temperature of 125 degrees Celsius. The temperature control module will shut down the system when it reaches 125°C to prevent exceeding the temperature limit. Industrial grade i.MX95 with a junction temperature of 105 degrees Celsius. The example in this manual uses automotive grade chips. Enter the following command to simulate the process:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">125000</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/thermal/thermal_zone0/emul_temp<span class="w"> </span>
<span class="o">[</span><span class="w"> </span><span class="m">1923</span>.447235<span class="o">]</span><span class="w"> </span>thermal<span class="w"> </span>thermal_zone0:<span class="w"> </span>a55:<span class="w"> </span>critical<span class="w"> </span>temperature<span class="w"> </span>reached,<span class="w"> </span>shutting<span class="w"> </span>down
<span class="o">[</span><span class="w"> </span><span class="m">1923</span>.454969<span class="o">]</span><span class="w"> </span>reboot:<span class="w"> </span>HARDWARE<span class="w"> </span>PROTECTION<span class="w"> </span>shutdown<span class="w"> </span><span class="o">(</span>Temperature<span class="w"> </span>too<span class="w"> </span>high<span class="o">)</span>
......
<span class="o">[</span><span class="w"> </span><span class="m">1927</span>.471978<span class="o">]</span><span class="w"> </span>reboot:<span class="w"> </span>HARDWARE<span class="w"> </span>PROTECTION<span class="w"> </span>shutdown<span class="w"> </span><span class="o">(</span>Temperature<span class="w"> </span>too<span class="w"> </span>high<span class="o">)</span>
<span class="o">[</span><span class="w"> </span><span class="m">1927</span>.478059<span class="o">]</span><span class="w"> </span>ci_hdrc<span class="w"> </span>ci_hdrc.0:<span class="w"> </span>USB<span class="w"> </span>bus<span class="w"> </span><span class="m">1</span><span class="w"> </span>deregistered
<span class="o">[</span><span class="w"> </span><span class="m">1927</span>.489922<span class="o">]</span><span class="w"> </span>kvm:<span class="w"> </span>exiting<span class="w"> </span>hardware<span class="w"> </span>virtualization
<span class="o">[</span><span class="w"> </span><span class="m">1927</span>.494575<span class="o">]</span><span class="w"> </span>reboot:<span class="w"> </span>Power<span class="w"> </span>down
</pre></div>
</div>
</section>
<section id="ddr-bandwidth-test">
<h3>4.4 DDR Bandwidth Test<a class="headerlink" href="#ddr-bandwidth-test" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx9596-c:~#<span class="w"> </span>fltest_memory_bandwidth.sh
L1<span class="w"> </span>cache<span class="w"> </span>bandwidth<span class="w"> </span>rd<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span><span class="c1"># process</span>
<span class="m">0</span>.008192<span class="w"> </span><span class="m">26017</span>.45
<span class="m">0</span>.008192<span class="w"> </span><span class="m">26014</span>.21
<span class="m">0</span>.008192<span class="w"> </span><span class="m">25985</span>.90
<span class="m">0</span>.008192<span class="w"> </span><span class="m">26004</span>.77
<span class="m">0</span>.008192<span class="w"> </span><span class="m">26018</span>.93
L2<span class="w"> </span>cache<span class="w"> </span>bandwidth<span class="w"> </span>rd<span class="w"> </span><span class="nb">test</span>
<span class="m">0</span>.131072<span class="w"> </span><span class="m">11680</span>.95
<span class="m">0</span>.131072<span class="w"> </span><span class="m">11648</span>.00
<span class="m">0</span>.131072<span class="w"> </span><span class="m">11637</span>.94
<span class="m">0</span>.131072<span class="w"> </span><span class="m">11643</span>.45
<span class="m">0</span>.131072<span class="w"> </span><span class="m">11617</span>.58
Main<span class="w"> </span>mem<span class="w"> </span>bandwidth<span class="w"> </span>rd<span class="w"> </span><span class="nb">test</span>
<span class="m">52</span>.43<span class="w"> </span><span class="m">5779</span>.83
<span class="m">52</span>.43<span class="w"> </span><span class="m">5797</span>.72
<span class="m">52</span>.43<span class="w"> </span><span class="m">5779</span>.19
<span class="m">52</span>.43<span class="w"> </span><span class="m">5790</span>.68
<span class="m">52</span>.43<span class="w"> </span><span class="m">5780</span>.46
L1<span class="w"> </span>cache<span class="w"> </span>bandwidth<span class="w"> </span>wr<span class="w"> </span><span class="nb">test</span><span class="w"> </span>with<span class="w"> </span><span class="c1"># process</span>
<span class="m">0</span>.008192<span class="w"> </span><span class="m">25411</span>.28
<span class="m">0</span>.008192<span class="w"> </span><span class="m">25411</span>.28
<span class="m">0</span>.008192<span class="w"> </span><span class="m">25331</span>.32
<span class="m">0</span>.008192<span class="w"> </span><span class="m">25352</span>.87
<span class="m">0</span>.008192<span class="w"> </span><span class="m">25402</span>.05
L2<span class="w"> </span>cache<span class="w"> </span>bandwidth<span class="w"> </span>wr<span class="w"> </span><span class="nb">test</span>
<span class="m">0</span>.131072<span class="w"> </span><span class="m">12276</span>.13
<span class="m">0</span>.131072<span class="w"> </span><span class="m">12211</span>.53
<span class="m">0</span>.131072<span class="w"> </span><span class="m">12955</span>.67
<span class="m">0</span>.131072<span class="w"> </span><span class="m">12328</span>.08
<span class="m">0</span>.131072<span class="w"> </span><span class="m">12457</span>.06
Main<span class="w"> </span>mem<span class="w"> </span>bandwidth<span class="w"> </span>wr<span class="w"> </span><span class="nb">test</span>
<span class="m">52</span>.43<span class="w"> </span><span class="m">1703</span>.84
<span class="m">52</span>.43<span class="w"> </span><span class="m">1706</span>.33
<span class="m">52</span>.43<span class="w"> </span><span class="m">1706</span>.44
<span class="m">52</span>.43<span class="w"> </span><span class="m">1704</span>.34
<span class="m">52</span>.43<span class="w"> </span><span class="m">1705</span>.06
......
</pre></div>
</div>
<p>The LPDDR4x bandwidth of the mx9596 is shown above, with a read bandwidth of about 5800M/s and a write bandwidth of about 1700M/s.</p>
</section>
<section id="id2">
<h3>4.5 Watchdog Test<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>Watchdog is a frequently used function in embedded systems, and the device node for the watchdog in OK-MX9596-C is /dev/watchdog.<br />
Use fltest_watchdog to start the watchdog, set the reset time to 10s, and feed the dog regularly. This command will turn on the watchdog and perform the dog-feeding operation, so the system will not reboot.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_watchdog<span class="w"> </span>-t10<span class="w"> </span>-c
Watchdog<span class="w"> </span>Ticking<span class="w"> </span>Away!
</pre></div>
</div>
<p>When ctrl + C is used to end the test procedure, the dog feeding is stopped, the watchdog is in the open state, and the system is reset after 10s; If you do not want to reset, please enter the command to close the watchdog within 10 seconds after the end of the program:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_watchdog<span class="w"> </span>-d<span class="w">      </span>//Turn<span class="w"> </span>off<span class="w"> </span>the<span class="w"> </span>watchdog
Watchdog<span class="w"> </span>card<span class="w"> </span>disabled.
</pre></div>
</div>
<p>Start the watchdog, set the reset time for 10s, and do not feed the dog. This command turns on the watchdog, but does not feed the dog, and the system restarts after 10 seconds.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_watchdog<span class="w"> </span>-t10<span class="w"> </span>-e
Watchdog<span class="w"> </span>card<span class="w"> </span>ena<span class="o">[</span><span class="w">  </span><span class="m">157</span>.382703<span class="o">]</span><span class="w"> </span>watchdog:<span class="w"> </span>watchdog0:<span class="w"> </span>watchdog<span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span>stop!
bled.
Restart<span class="w"> </span>after<span class="w"> </span><span class="m">10</span><span class="w"> </span>seconds.
</pre></div>
</div>
<p><strong>Note: Note: This watchdog will only reset the A core but not the R core.</strong></p>
</section>
<section id="rtc-function-test">
<h3>4.6 RTC Function Test<a class="headerlink" href="#rtc-function-test" title="Link to this heading"></a></h3>
<p><strong>Note: Ensure button cell batteries are installed &amp; voltage is normal.</strong></p>
<p>RTC Test: The test primarily involves using the date and hwclock tools to set the software and hardware time. The goal is to check whether the software clock is synchronized with the RTC clock when the board is powered off and then powered on again.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>date<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;2024-06-28 14:02:00&quot;</span><span class="w">	      </span>//Set<span class="w"> </span>software<span class="w"> </span><span class="nb">time</span>
Fri<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">14</span>:02:00<span class="w"> </span>CST<span class="w"> </span><span class="m">2024</span>
root@ok-mx95-c:~#<span class="w"> </span>hwclock<span class="w"> </span>-w<span class="w">			 </span>//Synchronize<span class="w"> </span>software<span class="w"> </span><span class="nb">time</span><span class="w"> </span>to<span class="w"> </span>hardware<span class="w"> </span><span class="nb">time</span>
root@ok-mx95-c:~#<span class="w"> </span>hwclock<span class="w"> </span>-r<span class="w">			 </span>//Display<span class="w"> </span>hardware<span class="w"> </span><span class="nb">time</span>
<span class="m">2024</span>-06-28<span class="w"> </span><span class="m">14</span>:02:33.149924+08:00
</pre></div>
</div>
<p>After powering off and then powering on the development board, once the system starts, read the system time. You should see that the time is still synchronized with the RTC.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>date
Fri<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">14</span>:05:32<span class="w"> </span>CST<span class="w"> </span><span class="m">2024</span>
</pre></div>
</div>
</section>
<section id="id3">
<h3>4.7 UART Test<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<p>OK-MX9596-C development board is equipped with 4 x UART, as shown in the following table:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>UART</strong></p></th>
<th class="head text-center"><p><strong>Device Nodes</strong></p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>UART6</p></td>
<td class="text-center"><p>ttyLP5</p></td>
<td><p>RS485 level, can be used for this test.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>UART8</p></td>
<td class="text-center"><p>ttyLP7</p></td>
<td><p>RS485 level, can be used for this test.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>UART1</p></td>
<td class="text-center"><p>ttyLP0</p></td>
<td><p>The debug serial port cannot be used for this test.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>UART5</p></td>
<td class="text-center"><p>ttyLP4</p></td>
<td><p>Bluetooth can not be used for the test.</p></td>
</tr>
</tbody>
</table>
<p>485 supports commonly used baud rates such as 9600115200, with a maximum support of 4000000, parity check, CS5, CS6, CS7, CS8, and 1-bit and 2-bit stop bits.</p>
<p>In this test, ttyLP5 and ttyLP7 are used to test the serial port by short-circuiting pins 1 and 5, pins 2 and 6, pins 3 and 7 of P48 respectively.</p>
<p><img alt="Image" src="_images/1754903276675_2ae625e4_3659_47b0_a741_2ca2b2104bfa.png" /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_uarttest<span class="w"> </span>-d<span class="w"> </span>/dev/ttyLP5<span class="w"> </span>-r<span class="w"> </span><span class="p">&amp;</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="m">1003</span>
root@ok-mx95-c:~#<span class="w"> </span>fltest_uarttest<span class="w"> </span>-d<span class="w"> </span>/dev/ttyLP7<span class="w"> </span>-w
tx_0:<span class="w"> </span>b8fui4eFZ2ifziP03da602fDUKF9bVhA
rx_0:<span class="w"> </span>b8fui4eFZ2ifziP03da602fDUKF9bVhA
root@ok-mx95-c:~#<span class="w"> </span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span>+<span class="w">  </span>Done<span class="w">                    </span>fltest_uarttest<span class="w"> </span>-d<span class="w"> </span>/dev/ttyLP5<span class="w"> </span>-r
root@ok-mx95-c:~#
</pre></div>
</div>
</section>
<section id="pcie">
<h3>4.8 PCIE<a class="headerlink" href="#pcie" title="Link to this heading"></a></h3>
<p>The current A0 version CPU does not support PCIE interface.</p>
</section>
<section id="tf-test">
<h3>4.9 TF Test<a class="headerlink" href="#tf-test" title="Link to this heading"></a></h3>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>The TF card mount directory is /run/media/ and supports hot-swapping;</strong></p></li>
<li><p><strong>The system does not support the **NTFS** file system. If you are unsure about the format of the TF card, it is recommended to format it to **FAT32** or **EXFAT** before use;</strong></p></li>
<li><p><strong>After inserting the TF card, the device node is “/dev/mmcblk1 *”.</strong></p></li>
</ul>
<p>1. Insert the TF card into the TF card slot on the carrier board. The printed information is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w">  </span><span class="m">425</span>.084206<span class="o">]</span><span class="w"> </span>mmc1:<span class="w"> </span>host<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>support<span class="w"> </span>reading<span class="w"> </span>read-only<span class="w"> </span>switch,<span class="w"> </span>assuming<span class="w"> </span>write-enable
<span class="o">[</span><span class="w">  </span><span class="m">425</span>.121604<span class="o">]</span><span class="w"> </span>mmc1:<span class="w"> </span>new<span class="w"> </span>ultra<span class="w"> </span>high<span class="w"> </span>speed<span class="w"> </span>SDR104<span class="w"> </span>SDHC<span class="w"> </span>card<span class="w"> </span>at<span class="w"> </span>address<span class="w"> </span>aaaa
<span class="o">[</span><span class="w">  </span><span class="m">425</span>.128807<span class="o">]</span><span class="w"> </span>mmcblk1:<span class="w"> </span>mmc1:aaaa<span class="w"> </span>SL16G<span class="w"> </span><span class="m">14</span>.8<span class="w"> </span>GiB
<span class="o">[</span><span class="w">  </span><span class="m">425</span>.138599<span class="o">]</span><span class="w">  </span>mmcblk1:<span class="w"> </span>p1<span class="w"> </span>p2
<span class="o">[</span><span class="w">  </span><span class="m">427</span>.615710<span class="o">]</span><span class="w"> </span>EXT4-fs<span class="w"> </span><span class="o">(</span>mmcblk1p2<span class="o">)</span>:<span class="w"> </span>mounted<span class="w"> </span>filesystem<span class="w"> </span>cfc225f0-8969-46d1-aab2-f8f075645966<span class="w"> </span>r/w<span class="w"> </span>with<span class="w"> </span>ordered<span class="w"> </span>data<span class="w"> </span>mode.<span class="w"> </span>Quota<span class="w"> </span>mode:<span class="w"> </span>none.
</pre></div>
</div>
<p>2. Check the mount directory:</p>
<p>The TF card mount directory is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ls<span class="w"> </span>/run/media/<span class="w">              </span>//List<span class="w"> </span>files<span class="w"> </span><span class="k">in</span><span class="w"> </span>the/run/media<span class="w"> </span>directory
Boot-mmcblk0p1<span class="w">  </span>mmcblk1p1<span class="w">  </span>mmcblk1p2
</pre></div>
</div>
<p>3. Write test:<br />
<strong>Note: Before writing, please ensure that the TF card has enough partition space. Use the\mmcblk1p2\ partition for testing.</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/run/media/mmcblk1p2/test.bin<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">5</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>fsync<span class="w"> </span><span class="nv">oflag</span><span class="o">=</span>direct
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">45</span>.7479<span class="w"> </span>s,<span class="w"> </span><span class="m">11</span>.5<span class="w"> </span>MB/s
</pre></div>
</div>
<p>4. Read test:</p>
<p><strong>Note: To ensure the accuracy of the data, please restart the development board to test the reading speed.</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/run/media/mmcblk1p2/test.bin<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/null<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">iflag</span><span class="o">=</span>direct
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">5</span>.9345<span class="w"> </span>s,<span class="w"> </span><span class="m">88</span>.3<span class="w"> </span>MB/s
</pre></div>
</div>
<p><strong>Note: Plug and unplug the TF card after exiting the TF card mounting path.</strong></p>
</section>
<section id="emmc-test">
<h3>4.10 EMMC Test<a class="headerlink" href="#emmc-test" title="Link to this heading"></a></h3>
<p>The OK-MX9596-C platform eMMC runs in HS400 mode 200MHz clock by default. The following is a simple eMMC read/write speed test: taking the read/write ext4 file system as an example.<br />
Write test:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/data.img<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">5</span><span class="w"> </span><span class="nv">conv</span><span class="o">=</span>fsync<span class="w"> </span><span class="nv">oflag</span><span class="o">=</span>direct
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">3</span>.66049<span class="w"> </span>s,<span class="w"> </span><span class="m">143</span><span class="w"> </span>MB/s
</pre></div>
</div>
<p>Read test：<br />
<strong>Note: To ensure the accuracy of the data, please restart the development board to test the reading speed.</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/data.img<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/null<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">5</span><span class="w"> </span><span class="nv">iflag</span><span class="o">=</span>direct
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">5</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">524288000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">524</span><span class="w"> </span>MB,<span class="w"> </span><span class="m">500</span><span class="w"> </span>MiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">2</span>.29699<span class="w"> </span>s,<span class="w"> </span><span class="m">228</span><span class="w"> </span>MB/s
</pre></div>
</div>
</section>
<section id="usb">
<h3>4.11 USB<a class="headerlink" href="#usb" title="Link to this heading"></a></h3>
<p>OK-MX9596-C supports 3 x USB 2.0 interfaces and 1 x USB Type-C interface. Users can connect USB mouse, USB keyboard, U disk and other devices on the on-board USB HOST interface, and support the hot plug of the above devices.</p>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>Support hot-plugging of USB flash drive devices;</strong></p></li>
<li><p><strong>If NTFS isn’t supported and you’re unsure of the USB drive’s format, it’s best to format it to FAT32 before using it.</strong></p></li>
</ul>
<section id="usb2-0">
<h4>4.11.1 USB2.0<a class="headerlink" href="#usb2-0" title="Link to this heading"></a></h4>
<p>Connect the USB mouse to the USB interface of the OK-MX9596-C platform, and the print information of the serial port terminal is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">12554</span>.566931<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>new<span class="w"> </span>low-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">3</span><span class="w"> </span>using<span class="w"> </span>ci_hdrc
<span class="o">[</span><span class="m">12554</span>.808120<span class="o">]</span><span class="w"> </span>input:<span class="w"> </span>PixArt<span class="w"> </span>Lenovo<span class="w"> </span>USB<span class="w"> </span>Optical<span class="w"> </span>Mouse<span class="w"> </span>as<span class="w"> </span>/devices/platform/soc/4c200000.usb/ci_hdrc.0/usb1/1-1/1-1.2/1-1.2:1.0/0003:17EF:608D.0001/input/input5
<span class="o">[</span><span class="m">12554</span>.822433<span class="o">]</span><span class="w"> </span>hid-generic<span class="w"> </span><span class="m">0003</span>:17EF:608D.0001:<span class="w"> </span>input:<span class="w"> </span>USB<span class="w"> </span>HID<span class="w"> </span>v1.11<span class="w"> </span>Mouse<span class="w"> </span><span class="o">[</span>PixArt<span class="w"> </span>Lenovo<span class="w"> </span>USB<span class="w"> </span>Optical<span class="w"> </span>Mouse<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>usb-ci_hdrc.0-1.2/input0
</pre></div>
</div>
<p>At this time, the arrow cursor appears on the screen, the mouse can work normally.</p>
<p>Unplug the USB mouse, the printed information from the serial port terminal is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w">  </span><span class="m">456</span>.479673<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>USB<span class="w"> </span>disconnect,<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">3</span>
</pre></div>
</div>
<p>Next, take the U disk as an example for demonstration.</p>
<p>The terminal will print the information about the USB flash disk. Due to the different models of the USB flash disk, the displayed information may be different:</p>
<p>1. After the development board starts, insert the USB disk into the USB2.0 host interface on the development board.</p>
<p>Serial port information:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w">  </span><span class="m">529</span>.870746<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.4:<span class="w"> </span>new<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">4</span><span class="w"> </span>using<span class="w"> </span>ci_hdrc
<span class="o">[</span><span class="w">  </span><span class="m">530</span>.087135<span class="o">]</span><span class="w"> </span>usb-storage<span class="w"> </span><span class="m">1</span>-1.4:1.0:<span class="w"> </span>USB<span class="w"> </span>Mass<span class="w"> </span>Storage<span class="w"> </span>device<span class="w"> </span>detected
<span class="o">[</span><span class="w">  </span><span class="m">530</span>.099489<span class="o">]</span><span class="w"> </span>scsi<span class="w"> </span>host0:<span class="w"> </span>usb-storage<span class="w"> </span><span class="m">1</span>-1.4:1.0
<span class="o">[</span><span class="w">  </span><span class="m">531</span>.111948<span class="o">]</span><span class="w"> </span>scsi<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span>Direct-Access<span class="w">     </span>SanDisk<span class="w">  </span>Cruzer<span class="w"> </span>Blade<span class="w">     </span><span class="m">1</span>.00<span class="w"> </span>PQ:<span class="w"> </span><span class="m">0</span><span class="w"> </span>ANSI:<span class="w"> </span><span class="m">6</span>
<span class="o">[</span><span class="w">  </span><span class="m">531</span>.124889<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span><span class="m">60125184</span><span class="w"> </span><span class="m">512</span>-byte<span class="w"> </span>logical<span class="w"> </span>blocks:<span class="w"> </span><span class="o">(</span><span class="m">30</span>.8<span class="w"> </span>GB/28.7<span class="w"> </span>GiB<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">531</span>.133649<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Write<span class="w"> </span>Protect<span class="w"> </span>is<span class="w"> </span>off
<span class="o">[</span><span class="w">  </span><span class="m">531</span>.139144<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Write<span class="w"> </span>cache:<span class="w"> </span>disabled,<span class="w"> </span><span class="nb">read</span><span class="w"> </span>cache:<span class="w"> </span>enabled,<span class="w"> </span>doesn<span class="err">&#39;</span>t<span class="w"> </span>support<span class="w"> </span>DPO<span class="w"> </span>or<span class="w"> </span>FUA
<span class="o">[</span><span class="w">  </span><span class="m">531</span>.161387<span class="o">]</span><span class="w">  </span>sda:<span class="w"> </span>sda1
<span class="o">[</span><span class="w">  </span><span class="m">531</span>.164162<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Attached<span class="w"> </span>SCSI<span class="w"> </span>removable<span class="w"> </span>disk
</pre></div>
</div>
<p>2. Check the mount directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ls<span class="w"> </span>/run/media/
Boot-mmcblk0p1<span class="w">  </span>sda1
</pre></div>
</div>
<p>sda1 is the first partition of the first connected USB storage device, and so on.<br />
3. View the contents of the USB flash drive.：：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/run/media/sda1
total<span class="w"> </span><span class="m">16</span>
drwxrwx---<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>disk<span class="w">     </span><span class="m">16384</span><span class="w"> </span>Apr<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">17</span>:32<span class="w"> </span><span class="s1">&#39;System Volume Information&#39;</span>
</pre></div>
</div>
<p>4. Write test: Write speeds are limited by the specific storage device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/run/media/sda1/test<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">40</span><span class="w"> </span><span class="se">\</span>
<span class="nv">conv</span><span class="o">=</span>fsync<span class="w"> </span><span class="nv">oflag</span><span class="o">=</span>direct
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">4194304000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">4</span>.2<span class="w"> </span>GB,<span class="w"> </span><span class="m">3</span>.9<span class="w"> </span>GiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">628</span>.732<span class="w"> </span>s,<span class="w"> </span><span class="m">6</span>.7<span class="w"> </span>MB/s
</pre></div>
</div>
<p>5. Read test:<br />
<strong>Note: To ensure the accuracy of the data, please restart the development board to test the reading speed.</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/run/media/sda1/test<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/null<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">iflag</span><span class="o">=</span>direct
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">4194304000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">4</span>.2<span class="w"> </span>GB,<span class="w"> </span><span class="m">3</span>.9<span class="w"> </span>GiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">162</span>.978<span class="w"> </span>s,<span class="w"> </span><span class="m">25</span>.7<span class="w"> </span>MB/s
</pre></div>
</div>
<p><strong>Note: Unplug the USB disk after exiting the mount path.</strong></p>
</section>
<section id="usb-type-c">
<h4>4.11.2 USB TYPE-C<a class="headerlink" href="#usb-type-c" title="Link to this heading"></a></h4>
<p>OK-MX9596-C supports USB TYPE-C function and fusb302CC chip.</p>
<p>Insert the USB flash disk as the Host side for testing.</p>
<p>1. After the development board starts, connect the USB flash drive to the USB Type-C port using a Type-C to USB cable.</p>
<p>Serial port information:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w"> </span><span class="m">2218</span>.656133<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.4:<span class="w"> </span>USB<span class="w"> </span>disconnect,<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">4</span>
<span class="o">[</span><span class="w"> </span><span class="m">2218</span>.881306<span class="o">]</span><span class="w"> </span>FAT-fs<span class="w"> </span><span class="o">(</span>sda1<span class="o">)</span>:<span class="w"> </span>unable<span class="w"> </span>to<span class="w"> </span><span class="nb">read</span><span class="w"> </span>boot<span class="w"> </span>sector<span class="w"> </span>to<span class="w"> </span>mark<span class="w"> </span>fs<span class="w"> </span>as<span class="w"> </span>dirty
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.695628<span class="o">]</span><span class="w"> </span>xhci-hcd<span class="w"> </span>xhci-hcd.0.auto:<span class="w"> </span>xHCI<span class="w"> </span>Host<span class="w"> </span>Controller
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.701213<span class="o">]</span><span class="w"> </span>xhci-hcd<span class="w"> </span>xhci-hcd.0.auto:<span class="w"> </span>new<span class="w"> </span>USB<span class="w"> </span>bus<span class="w"> </span>registered,<span class="w"> </span>assigned<span class="w"> </span>bus<span class="w"> </span>number<span class="w"> </span><span class="m">2</span>
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.709374<span class="o">]</span><span class="w"> </span>xhci-hcd<span class="w"> </span>xhci-hcd.0.auto:<span class="w"> </span>hcc<span class="w"> </span>params<span class="w"> </span>0x0220fe4d<span class="w"> </span>hci<span class="w"> </span>version<span class="w"> </span>0x110<span class="w"> </span>quirks<span class="w"> </span>0x0000002001000010
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.718880<span class="o">]</span><span class="w"> </span>xhci-hcd<span class="w"> </span>xhci-hcd.0.auto:<span class="w"> </span>irq<span class="w"> </span><span class="m">229</span>,<span class="w"> </span>io<span class="w"> </span>mem<span class="w"> </span>0x4c100000
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.725122<span class="o">]</span><span class="w"> </span>xhci-hcd<span class="w"> </span>xhci-hcd.0.auto:<span class="w"> </span>xHCI<span class="w"> </span>Host<span class="w"> </span>Controller
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.730658<span class="o">]</span><span class="w"> </span>xhci-hcd<span class="w"> </span>xhci-hcd.0.auto:<span class="w"> </span>new<span class="w"> </span>USB<span class="w"> </span>bus<span class="w"> </span>registered,<span class="w"> </span>assigned<span class="w"> </span>bus<span class="w"> </span>number<span class="w"> </span><span class="m">3</span>
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.738351<span class="o">]</span><span class="w"> </span>xhci-hcd<span class="w"> </span>xhci-hcd.0.auto:<span class="w"> </span>Host<span class="w"> </span>supports<span class="w"> </span>USB<span class="w"> </span><span class="m">3</span>.0<span class="w"> </span>SuperSpeed
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.745762<span class="o">]</span><span class="w"> </span>hub<span class="w"> </span><span class="m">2</span>-0:1.0:<span class="w"> </span>USB<span class="w"> </span>hub<span class="w"> </span>found
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.749564<span class="o">]</span><span class="w"> </span>hub<span class="w"> </span><span class="m">2</span>-0:1.0:<span class="w"> </span><span class="m">1</span><span class="w"> </span>port<span class="w"> </span>detected
<span class="o">[</span><span class="w"> </span><span class="m">2276</span>.754002<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span>usb3:<span class="w"> </span>We<span class="w"> </span>don<span class="s1">&#39;t know the algorithms for LPM for this host, disabling LPM.</span>
<span class="s1">[ 2276.763094] hub 3-0:1.0: USB hub found</span>
<span class="s1">[ 2276.766906] hub 3-0:1.0: 1 port detected</span>
<span class="s1">[ 2277.258748] usb 2-1: new high-speed USB device number 2 using xhci-hcd</span>
<span class="s1">[ 2277.412579] usb-storage 2-1:1.0: USB Mass Storage device detected</span>
<span class="s1">[ 2277.419282] scsi host0: usb-storage 2-1:1.0</span>
<span class="s1">[ 2278.439603] scsi 0:0:0:0: Direct-Access     SanDisk  Cruzer Blade     1.00 PQ: 0 ANSI: 6</span>
<span class="s1">[ 2278.450545] sd 0:0:0:0: [sda] 60125184 512-byte logical blocks: (30.8 GB/28.7 GiB)</span>
<span class="s1">[ 2278.458900] sd 0:0:0:0: [sda] Write Protect is off</span>
<span class="s1">[ 2278.464111] sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#39;</span>t<span class="w"> </span>support<span class="w"> </span>DPO<span class="w"> </span>or<span class="w"> </span>FUA
<span class="o">[</span><span class="w"> </span><span class="m">2278</span>.484133<span class="o">]</span><span class="w">  </span>sda:<span class="w"> </span>sda1
<span class="o">[</span><span class="w"> </span><span class="m">2278</span>.487044<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Attached<span class="w"> </span>SCSI<span class="w"> </span>removable<span class="w"> </span>disk
</pre></div>
</div>
<p>2. Check the mount directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ls<span class="w"> </span>/run/media/
Boot-mmcblk2p1<span class="w">  </span>sda1
</pre></div>
</div>
<p>“sda1” represents the first partition of the first USB storage device inserted, and so forth.</p>
<p>3. Write test: Write speeds are limited by the specific storage device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/run/media/sda1/test<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">40</span><span class="w"> </span><span class="se">\</span>
<span class="nv">conv</span><span class="o">=</span>fsync<span class="w"> </span><span class="nv">oflag</span><span class="o">=</span>direct
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">4194304000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">4</span>.2<span class="w"> </span>GB,<span class="w"> </span><span class="m">3</span>.9<span class="w"> </span>GiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">628</span>.387<span class="w"> </span>s,<span class="w"> </span><span class="m">6</span>.7<span class="w"> </span>MB/s
</pre></div>
</div>
<p>4. Read test:<br />
<strong>Note: To ensure the accuracy of the data, please restart the development board to test the reading speed.</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/run/media/sda1/test<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/null<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>100M<span class="w"> </span><span class="nv">iflag</span><span class="o">=</span>direct
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span><span class="k">in</span>
<span class="m">40</span>+0<span class="w"> </span>records<span class="w"> </span>out
<span class="m">4194304000</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span><span class="m">4</span>.2<span class="w"> </span>GB,<span class="w"> </span><span class="m">3</span>.9<span class="w"> </span>GiB<span class="o">)</span><span class="w"> </span>copied,<span class="w"> </span><span class="m">131</span>.639<span class="w"> </span>s,<span class="w"> </span><span class="m">31</span>.9<span class="w"> </span>MB/s
</pre></div>
</div>
<p><strong>Note: Unplug the USB disk after exiting the mount path.</strong></p>
<p>5. USB TYPE-C</p>
<p>The USB TYPE-C port can also be used as the device side. Through the CC chip, it supports automatic switching between the host side and the device side.<br />
Connect the USB TYPE-C port of the development board to the PC with an appropriate USB cable, and execute the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>insmod<span class="w"> </span>/lib/modules/<span class="sb">`</span>uname<span class="w"> </span>-a<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print \</span>
<span class="s1">$3}&#39;</span><span class="sb">`</span>/kernel/drivers/usb/gadget/legacy/g_mass_storage.ko<span class="w"> </span><span class="nv">removable</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">file</span><span class="o">=</span>/dev/mmcblk0p1
<span class="o">[</span><span class="w"> </span><span class="m">2086</span>.685453<span class="o">]</span><span class="w"> </span>Mass<span class="w"> </span>Storage<span class="w"> </span>Function,<span class="w"> </span>version:<span class="w"> </span><span class="m">2009</span>/09/11
<span class="o">[</span><span class="w"> </span><span class="m">2086</span>.690678<span class="o">]</span><span class="w"> </span>LUN:<span class="w"> </span>removable<span class="w"> </span>file:<span class="w"> </span><span class="o">(</span>no<span class="w"> </span>medium<span class="o">)</span>
<span class="o">[</span><span class="w"> </span><span class="m">2086</span>.695114<span class="o">]</span><span class="w"> </span>LUN:<span class="w"> </span>removable<span class="w"> </span>file:<span class="w"> </span>/dev/mmcblk0p1
<span class="o">[</span><span class="w"> </span><span class="m">2086</span>.699756<span class="o">]</span><span class="w"> </span>Number<span class="w"> </span>of<span class="w"> </span><span class="nv">LUNs</span><span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="w"> </span><span class="m">2086</span>.702793<span class="o">]</span><span class="w"> </span>g_mass_storage<span class="w"> </span>gadget.0:<span class="w"> </span>Mass<span class="w"> </span>Storage<span class="w"> </span>Gadget,<span class="w"> </span>version:<span class="w"> </span><span class="m">2009</span>/09/11
<span class="o">[</span><span class="w"> </span><span class="m">2086</span>.710043<span class="o">]</span><span class="w"> </span>g_mass_storage<span class="w"> </span>gadget.0:<span class="w"> </span>userspace<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>provide<span class="w"> </span>iSerialNumber
<span class="o">[</span><span class="w"> </span><span class="m">2086</span>.717286<span class="o">]</span><span class="w"> </span>g_mass_storage<span class="w"> </span>gadget.0:<span class="w"> </span>g_mass_storage<span class="w"> </span>ready
</pre></div>
</div>
<p>It can be found that the PC will mount the mmcblk0p1 partition as a USB flash drive.</p>
<p><img alt="Image" src="_images/1754903277293_6d68b046_5e14_4165_9158_bb7aa0fe9357.png" /></p>
</section>
</section>
<section id="ethernet-configuration">
<h3>4.12 Ethernet Configuration<a class="headerlink" href="#ethernet-configuration" title="Link to this heading"></a></h3>
<p>OK-MX9596-C has 2 x Gigabit network ports and 1 x10 Gigabit network port on board. The default configuration of eth0 is static IP 192.168.0.232 for the gigabit network card, and the default configuration of eth1 and 10 gigabit network port eth2 is DHCP to obtain the IP address. The NIC of the OK-MX9596-C can be configured via configuration file in/etc/systemd/network.<br />
For the configuration method, please refer to the general operations of <a class="reference external" href="https://wiki.archlinux.org/title/Systemd-networkd">https://wiki.archlinux.org/title/Systemd-networkd</a>. Forlinx provides two ways to set a fixed IP address.</p>
<section id="gigabit-ethernet-static-ip-configuration">
<h4>4.12.1 Gigabit Ethernet Static IP Configuration<a class="headerlink" href="#gigabit-ethernet-static-ip-configuration" title="Link to this heading"></a></h4>
<p><strong>Note: The Gigabit Ethernet cards in the kernel are eth0 and eth1, and the IP configuration needs to ensure that the network hardware is unobstructed.</strong></p>
<p>After booting the development board, execute the following command to open the network configuration file/etc/network/interfaces</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>vi<span class="w"> </span>/etc/systemd/network/10-eth.network
</pre></div>
</div>
<p>Content as follows (slight differences may occur after software version updates; users should refer to actual information):</p>
<ul class="simple">
<li><p>Name is used to specify a network card that requires a fixed IP;</p></li>
<li><p>Address is used to specify the IP address to be fixed;</p></li>
<li><p>netmask: Used to set the subnet mask;</p></li>
<li><p>gateway: Used to specify the gateway;</p></li>
<li><p>DNS： Used to specify DNS</p></li>
</ul>
<p>Set eth0 to get IP automatically, just delete /etc/systemd/network/10-eth.network. The 10-eth. network can also be modified to follow the 11-eth. network.</p>
<p>/etc/systemd/network/11-eth.network is the configuration file that controls eth1 and is configured to obtain the IP automatically by default. You can modify 11-eth.network by referring to 10-eth.network and configure eth1 with a fixed IP address.</p>
<p>Modify to</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Match<span class="o">]</span>
<span class="nv">Name</span><span class="o">=</span>eth1
<span class="nv">KernelCommandLine</span><span class="o">=</span>!root<span class="o">=</span>/dev/nfs

<span class="o">[</span>Network<span class="o">]</span>
<span class="nv">Address</span><span class="o">=</span><span class="m">192</span>.168.0.233/24
<span class="nv">Gateway</span><span class="o">=</span><span class="m">192</span>.168.0.1
<span class="nv">DNS</span><span class="o">=</span><span class="m">114</span>.114.114.114
</pre></div>
</div>
</section>
<section id="network-port-streaming-test">
<h4>4.12.2 Network Port Streaming Test<a class="headerlink" href="#network-port-streaming-test" title="Link to this heading"></a></h4>
<section id="gigabit-network-port-streaming-test">
<h5>4.12.2.1 Gigabit Network Port Streaming Test<a class="headerlink" href="#gigabit-network-port-streaming-test" title="Link to this heading"></a></h5>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>Test the communication speed between the development board and the computer to ensure that they can communicate properly;</strong></p></li>
<li><p><strong>This test assumes iperf3 is pre-installed on Windows by default.</strong></p></li>
</ul>
<p>To test the network speed of OK-MX9596-C’s eth1 interface, you can use the network speed testing tool iperf3.<br />
Run the iperf3 server on the cmd command terminal of Windows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>D:<span class="se">\i</span>perf-3.13.64_64&gt;iperf3.exe<span class="w"> </span>-s
</pre></div>
</div>
<p><img alt="Image" src="_images/1754903277565_3fb15777_57d7_4d25_9c1c_1b329694a4ec.png" /></p>
<p>Connect the network cable to the eth1 interface. After the system is started, eth1 automatically obtains the IP. Enter the command at the serial port debugging terminal of the development board to test the sending rate of the network port:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.5<span class="w">  </span>//Please<span class="w"> </span>fill<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>host<span class="w"> </span>IP<span class="w"> </span>address<span class="w"> </span>according<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>actual<span class="w"> </span>situation
Connecting<span class="w"> </span>to<span class="w"> </span>host<span class="w"> </span><span class="m">192</span>.168.1.5,<span class="w"> </span>port<span class="w"> </span><span class="m">5201</span>
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="m">192</span>.168.1.17<span class="w"> </span>port<span class="w"> </span><span class="m">44354</span><span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.1.5<span class="w"> </span>port<span class="w"> </span><span class="m">5201</span>
<span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr<span class="w">  </span>Cwnd
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-1.00<span class="w">   </span>sec<span class="w">   </span><span class="m">114</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">954</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">417</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">1</span>.00-2.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">944</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">417</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">2</span>.00-3.00<span class="w">   </span>sec<span class="w">   </span><span class="m">112</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">939</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">437</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">3</span>.00-4.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">948</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">437</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">4</span>.00-5.00<span class="w">   </span>sec<span class="w">   </span><span class="m">112</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">940</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">437</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">5</span>.00-6.00<span class="w">   </span>sec<span class="w">   </span><span class="m">112</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">940</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">437</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">6</span>.00-7.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">945</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">437</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">7</span>.00-8.00<span class="w">   </span>sec<span class="w">   </span><span class="m">112</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">937</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">457</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">8</span>.00-9.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">945</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">457</span><span class="w"> </span>KBytes
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">9</span>.00-10.00<span class="w">  </span>sec<span class="w">   </span><span class="m">112</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">938</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">    </span><span class="m">457</span><span class="w"> </span>KBytes
-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-
<span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate<span class="w">         </span>Retr
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-10.00<span class="w">  </span>sec<span class="w">  </span><span class="m">1</span>.10<span class="w"> </span>GBytes<span class="w">   </span><span class="m">943</span><span class="w"> </span>Mbits/sec<span class="w">    </span><span class="m">0</span><span class="w">             </span>sender
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-10.00<span class="w">  </span>sec<span class="w">  </span><span class="m">1</span>.10<span class="w"> </span>GBytes<span class="w">   </span><span class="m">941</span><span class="w"> </span>Mbits/sec<span class="w">                  </span>receiver

iperf<span class="w"> </span>Done.
</pre></div>
</div>
<p>Test the receiving rate of network port:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w">  </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.5<span class="w"> </span>-R<span class="w">  </span>//Please<span class="w"> </span>fill<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>host<span class="w"> </span>IP<span class="w"> </span>address<span class="w"> </span>according<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>actual<span class="w"> </span>situation
-----------------------------------------------------------
Server<span class="w"> </span>listening<span class="w"> </span>on<span class="w"> </span><span class="m">5201</span><span class="w"> </span><span class="o">(</span><span class="nb">test</span><span class="w"> </span><span class="c1">#1)</span>
-----------------------------------------------------------
Accepted<span class="w"> </span>connection<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.5,<span class="w"> </span>port<span class="w"> </span><span class="m">52875</span>
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="m">192</span>.168.1.17<span class="w"> </span>port<span class="w"> </span><span class="m">5201</span><span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span><span class="m">192</span>.168.1.5<span class="w"> </span>port<span class="w"> </span><span class="m">52876</span>
<span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-1.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">947</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">1</span>.00-2.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">2</span>.00-3.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">3</span>.00-4.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">4</span>.00-5.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">5</span>.00-6.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">6</span>.00-7.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">7</span>.00-8.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">8</span>.00-9.00<span class="w">   </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">9</span>.00-10.00<span class="w">  </span>sec<span class="w">   </span><span class="m">113</span><span class="w"> </span>MBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">  </span><span class="m">10</span>.00-10.01<span class="w">  </span>sec<span class="w">   </span><span class="m">640</span><span class="w"> </span>KBytes<span class="w">   </span><span class="m">941</span><span class="w"> </span>Mbits/sec
-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>-
<span class="o">[</span><span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>Interval<span class="w">           </span>Transfer<span class="w">     </span>Bitrate
<span class="o">[</span><span class="w">  </span><span class="m">5</span><span class="o">]</span><span class="w">   </span><span class="m">0</span>.00-10.01<span class="w">  </span>sec<span class="w">  </span><span class="m">1</span>.11<span class="w"> </span>GBytes<span class="w">   </span><span class="m">949</span><span class="w"> </span>Mbits/sec<span class="w">                  </span>receiver
-----------------------------------------------------------
</pre></div>
</div>
<p>The OK-MX9596-C board has a Gigabit network upload bandwidth of 943 Mbps and a download bandwidth of 949 Mbps.</p>
</section>
<section id="id4">
<h5>4.12.2.1 10 Gigabit Network Port Streaming Test<a class="headerlink" href="#id4" title="Link to this heading"></a></h5>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>Test the communication speed between the development board and the computer to ensure that they can communicate properly;</strong></p></li>
<li><p><strong>In this test, the iperf3 tool is installed in windows by default, and ensure that the PC supports 10 gigabit network port communication.</strong></p></li>
</ul>
<p>Test the network speed of the OK-MX9596-C carrier board eth2 (10 Gigabit optical module port) using the network speed test tool iperf3. Please insert the optical module in the optical module port of the carrier board, and connect the PC and the development board with a network cable that supports 10 gigabit load.
Due to the limitation of single-core performance, a single test flow cannot fully utilize the 10-gigabit network port. Therefore, it is necessary to divide it into multiple test flows for simultaneous testing.
On the development board, enter the following command to set the data received by the network port to be allocated to different receive queues.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ethtool<span class="w"> </span>-K<span class="w"> </span>eth2<span class="w"> </span>receive-hashing<span class="w"> </span>on
</pre></div>
</div>
<p>To run the iperf3 server on the cmd command terminal of Windows, you need to open six cmd command terminals to execute the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>D:<span class="se">\i</span>perf-3.13.64_64&gt;iperf3<span class="w"> </span>-s<span class="w"> </span>-p<span class="w"> </span><span class="m">5201</span>
D:<span class="se">\i</span>perf-3.13.64_64&gt;iperf3<span class="w"> </span>-s<span class="w"> </span>-p<span class="w"> </span><span class="m">5202</span>
D:<span class="se">\i</span>perf-3.13.64_64&gt;iperf3<span class="w"> </span>-s<span class="w"> </span>-p<span class="w"> </span><span class="m">5203</span>
D:<span class="se">\i</span>perf-3.13.64_64&gt;iperf3<span class="w"> </span>-s<span class="w"> </span>-p<span class="w"> </span><span class="m">5204</span>
D:<span class="se">\i</span>perf-3.13.64_64&gt;iperf3<span class="w"> </span>-s<span class="w"> </span>-p<span class="w"> </span><span class="m">5205</span>
D:<span class="se">\i</span>perf-3.13.64_64&gt;iperf3<span class="w"> </span>-s<span class="w"> </span>-p<span class="w"> </span><span class="m">5206</span>
</pre></div>
</div>
<p>After confirming that the network between the PC and the 10 - gigabit network port of the development board is unobstructed, enter commands in the serial debugging terminal of the development board to test the receiving rate of the network port. Please fill in the host IP address according to the actual situation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>taskset<span class="w"> </span>-c<span class="w"> </span><span class="m">0</span><span class="w"> </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.166<span class="w"> </span>-t100<span class="w"> </span>-R<span class="w"> </span>-p<span class="w"> </span><span class="m">5201</span><span class="w"> </span>&gt;<span class="w"> </span>iperf3_cpu0.log<span class="w"> </span><span class="p">&amp;</span>
root@ok-mx95-c:~#<span class="w"> </span>taskset<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.166<span class="w"> </span>-t100<span class="w"> </span>-R<span class="w"> </span>-p<span class="w"> </span><span class="m">5202</span><span class="w"> </span>&gt;<span class="w"> </span>iperf3_cpu1.log<span class="w"> </span><span class="p">&amp;</span>
root@ok-mx95-c:~#<span class="w"> </span>taskset<span class="w"> </span>-c<span class="w"> </span><span class="m">2</span><span class="w"> </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.166<span class="w"> </span>-t100<span class="w"> </span>-R<span class="w"> </span>-p<span class="w"> </span><span class="m">5203</span><span class="w"> </span>&gt;<span class="w"> </span>iperf3_cpu2.log<span class="w"> </span><span class="p">&amp;</span>
root@ok-mx95-c:~#<span class="w"> </span>taskset<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w"> </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.166<span class="w"> </span>-t100<span class="w"> </span>-R<span class="w"> </span>-p<span class="w"> </span><span class="m">5204</span><span class="w"> </span>&gt;<span class="w"> </span>iperf3_cpu3.log<span class="w"> </span><span class="p">&amp;</span>
root@ok-mx95-c:~#<span class="w"> </span>taskset<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.166<span class="w"> </span>-t100<span class="w"> </span>-R<span class="w"> </span>-p<span class="w"> </span><span class="m">5205</span><span class="w"> </span>&gt;<span class="w"> </span>iperf3_cpu4.log<span class="w"> </span><span class="p">&amp;</span>
root@ok-mx95-c:~#<span class="w"> </span>taskset<span class="w"> </span>-c<span class="w"> </span><span class="m">5</span><span class="w"> </span>iperf3<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.1.166<span class="w"> </span>-t100<span class="w"> </span>-R<span class="w"> </span>-p<span class="w"> </span><span class="m">5206</span><span class="w"> </span>&gt;<span class="w"> </span>iperf3_cpu5.log<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>After the test is completed, the rates of the six test flows are added to obtain the actual rate of the network port. Test the receiving and sending rate of the network port, and remove the -R in the above command.</p>
</section>
</section>
</section>
<section id="network-services">
<h3>4.13 Network Services<a class="headerlink" href="#network-services" title="Link to this heading"></a></h3>
<p><strong>Note: The default IP for eth0 is 192.168.0.232.</strong></p>
<section id="web-services">
<h4>4.13.1 Web Services<a class="headerlink" href="#web-services" title="Link to this heading"></a></h4>
<p><strong>Note: To properly use this feature, the PC’s IP address must be in the same network segment as the development board’s.</strong><br />
The OK-MX9596-C development board comes with the lighttpd web server pre-installed, and the lighttpd service has been automatically started at system startup. Enter the IP address of the board into the PC browser to view the web pages in the board’s webserver, as shown in the following figure:</p>
<p><img alt="Image" src="_images/1754903277724_34462292_9237_490c_b122_46621bb596bc.png" /></p>
</section>
<section id="sftp">
<h4>4.13.2 SFTP<a class="headerlink" href="#sftp" title="Link to this heading"></a></h4>
<p>See Section 2.3.2 SSH Server.</p>
</section>
</section>
<section id="id5">
<h3>4.14 WIFI Test<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p><strong>Note: The OK-MX9596-C core board is equipped with the AW-CM358SM WiFi &amp; BT module, supporting operating frequencies of 2.4 GHz and 5 GHz.</strong></p>
<section id="sta-mode">
<h4>4.14.1 STA Mode<a class="headerlink" href="#sta-mode" title="Link to this heading"></a></h4>
<p><strong>Note:</strong></p>
<ul class="simple">
<li><p><strong>Due to the different network environments, please set up according to the actual situation when conducting this test;</strong></p></li>
<li><p><strong>The development board supports the connection of 2.4G and 5G wireless hotspots</strong>.</p></li>
</ul>
<p>This mode connects to the wireless network as a client. In the following test, the router uses WPA encryption, the connected wifi hotspot name is: H3C_708 and the password is: 123456785. Due to the different network environments, please set up according to the actual situation when conducting this test:</p>
<p>Before testing, please ensure that the WiFi firmware has been added to the corresponding path (such as sdiouart8987_combo-v0.bin loaded into the/lib/firmware/nxp path); in addition, the service that automatically loads the wifi driver is/etc/obexd_init;</p>
<p>1. Enter the following command in the development board terminal:</p>
<p>The meanings of the related parameters in the command are as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>Parameter</strong></p></th>
<th class="head"><p><strong>Meaning</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>-i</p></td>
<td><p>Wireless NIC Node Name</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>-s</p></td>
<td><p>Actual wifi hotspot connected</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>-p</p></td>
<td><p>The following parameter Password refers to the actual wifi hotspot password to connect to.</p></td>
</tr>
</tbody>
</table>
<p>The serial port prints as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_wifi_sta.sh<span class="w"> </span>-i<span class="w"> </span>mlan0<span class="w"> </span>-s<span class="w"> </span>H3C_708<span class="w"> </span>-p<span class="w"> </span><span class="m">123456785</span>.
<span class="o">[</span><span class="w">   </span><span class="m">80</span>.711437<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:08.0<span class="w"> </span>eth1:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
<span class="o">[</span><span class="w">   </span><span class="m">80</span>.736849<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
wifi<span class="w"> </span>mlan0
ssid<span class="w"> </span>H3C_708
pasw<span class="w"> </span><span class="m">123456785</span>.
<span class="o">[</span><span class="w">   </span><span class="m">82</span>.965762<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>mlan0<span class="w"> </span>START<span class="w"> </span>SCAN
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.309942<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>SCAN<span class="w"> </span>COMPLETED:<span class="w"> </span>scanned<span class="w"> </span>AP<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">8</span>
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.322241<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>HostMlme<span class="w"> </span>mlan0<span class="w"> </span>send<span class="w"> </span>auth<span class="w"> </span>to<span class="w"> </span>bssid<span class="w"> </span><span class="m">14</span>:XX:XX:XX:fc:84
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.330008<span class="o">]</span><span class="w"> </span>mlan0:<span class="w"> </span>
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.330020<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>HostMlme<span class="w"> </span>Auth<span class="w"> </span>received<span class="w"> </span>from<span class="w"> </span><span class="m">14</span>:XX:XX:XX:fc:84
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.343219<span class="o">]</span><span class="w"> </span>CMD_RESP:<span class="w"> </span>cmd<span class="w"> </span>0x121<span class="w"> </span>error,<span class="w"> </span><span class="nv">result</span><span class="o">=</span>0x2
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.347941<span class="o">]</span><span class="w"> </span>IOCTL<span class="w"> </span>failed:<span class="w"> </span>000000009539a3d5<span class="w"> </span><span class="nv">id</span><span class="o">=</span>0x200000,<span class="w"> </span><span class="nv">sub_id</span><span class="o">=</span>0x200024<span class="w"> </span><span class="nv">action</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">status_code</span><span class="o">=</span>0x3
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.356815<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span>multi-channel<span class="w"> </span>policy<span class="w"> </span>failed
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.370757<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>HostMlme<span class="w"> </span>mlan0<span class="w"> </span>Connected<span class="w"> </span>to<span class="w"> </span>bssid<span class="w"> </span><span class="m">14</span>:XX:XX:XX:fc:84<span class="w"> </span>successfully
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.380304<span class="o">]</span><span class="w"> </span>mlan0:<span class="w"> </span>
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.380324<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>Send<span class="w"> </span>EAPOL<span class="w"> </span>pkt<span class="w"> </span>to<span class="w"> </span><span class="m">14</span>:XX:XX:XX:fc:84
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.391942<span class="o">]</span><span class="w"> </span>mlan0:<span class="w"> </span>
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.391954<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>Send<span class="w"> </span>EAPOL<span class="w"> </span>pkt<span class="w"> </span>to<span class="w"> </span><span class="m">14</span>:XX:XX:XX:fc:84
<span class="o">[</span><span class="w">   </span><span class="m">87</span>.401101<span class="o">]</span><span class="w"> </span>woal_cfg80211_set_rekey_data<span class="w"> </span><span class="k">return</span>:<span class="w"> </span>gtk_rekey_offload<span class="w"> </span>is<span class="w"> </span>DISABLE
<span class="o">[</span><span class="w">   </span><span class="m">88</span>.647425<span class="o">]</span><span class="w"> </span>warning:<span class="w"> </span><span class="sb">`</span>ThreadPoolForeg<span class="s1">&#39; uses wireless extensions which will stop working for Wi-Fi 7 hardware; use nl80211</span>
<span class="s1">udhcpc: started, v1.36.1</span>
<span class="s1">Dropped protocol specifier &#39;</span>.udhcpc<span class="s1">&#39; from &#39;</span>mlan0.udhcpc<span class="s1">&#39;. Using &#39;</span>mlan0<span class="s1">&#39; (ifindex=9).</span>
<span class="s1">udhcpc: broadcasting discover</span>
<span class="s1">udhcpc: broadcasting select for 192.168.1.35, server 192.168.1.1</span>
<span class="s1">udhcpc: lease of 192.168.1.35 obtained from 192.168.1.1, lease time 86400</span>
<span class="s1">/etc/udhcpc.d/50default: Adding DNS 192.168.1.1</span>
<span class="s1">Dropped protocol specifier &#39;</span>.udhcpc<span class="s1">&#39; from &#39;</span>mlan0.udhcpc<span class="s1">&#39;. Using &#39;</span>mlan0<span class="err">&#39;</span><span class="w"> </span><span class="o">(</span><span class="nv">ifindex</span><span class="o">=</span><span class="m">9</span><span class="o">)</span>.
connect<span class="w"> </span>ok
</pre></div>
</div>
<p>2. Check whether it can ping the external network and enter the following command in the terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ping<span class="w"> </span>-I<span class="w"> </span>mlan0<span class="w"> </span>www.baidu.com<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w">    </span>//Specify<span class="w"> </span>mlan0<span class="w"> </span>network<span class="w"> </span>card<span class="w"> </span>to<span class="w"> </span>ping<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="nb">times</span>
PING<span class="w"> </span>www.baidu.com<span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">))</span><span class="w"> </span>from<span class="w"> </span><span class="m">2408</span>:8207:78d0:e200:aa41:f4ff:fe8b:b039<span class="w"> </span>mlan0:<span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">54</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1094</span><span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">54</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">85</span>.4<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">54</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">209</span><span class="w"> </span>ms

---<span class="w"> </span>www.baidu.com<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<span class="m">3</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">3</span><span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>2010ms
rtt<span class="w"> </span>min/avg/max/mdev<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">85</span>.362/462.560/1093.642/449.072<span class="w"> </span>ms,<span class="w"> </span>pipe<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
</section>
<section id="ap-mode">
<h4>4.14.2 AP Mode<a class="headerlink" href="#ap-mode" title="Link to this heading"></a></h4>
<p><strong>Note: Ensure that the Gigabit LAN card is eth1 connected to the network before performing this test.</strong></p>
<p>The hotspot name and password can be viewed in the /etc/hostapd-2.4g.conf** or /etc/hostapd-5g.conf files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_hostapd.sh<span class="w"> </span>-B<span class="w"> </span>5g
BAND<span class="w"> </span>5g
waiting...
<span class="o">[</span><span class="w">   </span><span class="m">91</span>.135537<span class="o">]</span><span class="w"> </span>...
uap0:<span class="w"> </span>interface<span class="w"> </span>state<span class="w"> </span>UNINITIALIZED-&gt;COUNTRY_UPDATE
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.396646<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>uap0<span class="w"> </span>Starting<span class="w"> </span>AP
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.400894<span class="o">]</span><span class="w"> </span>CMD_RESP:<span class="w"> </span>cmd<span class="w"> </span>0x121<span class="w"> </span>error,<span class="w"> </span><span class="nv">result</span><span class="o">=</span>0x2
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.405632<span class="o">]</span><span class="w"> </span>IOCTL<span class="w"> </span>failed:<span class="w"> </span>0000000049ba4102<span class="w"> </span><span class="nv">id</span><span class="o">=</span>0x200000,<span class="w"> </span><span class="nv">sub_id</span><span class="o">=</span>0x200024<span class="w"> </span><span class="nv">action</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">status_code</span><span class="o">=</span>0x2
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.414507<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span>multi-channel<span class="w"> </span>policy<span class="w"> </span>failed
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.419195<span class="o">]</span><span class="w"> </span>fw<span class="w"> </span>doesn<span class="err">&#39;</span>t<span class="w"> </span>support<span class="w"> </span>11ax
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.433924<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>uap0<span class="w"> </span>AP<span class="w"> </span>started
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.438359<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>HostMlme<span class="w"> </span>uap0<span class="w"> </span>send<span class="w"> </span>deauth/disassoc
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.444446<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">3</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">47</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">3</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">7</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.451595<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">94</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">7</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">15</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.458730<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">15</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">63</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">3</span>
<span class="o">[</span><span class="w">   </span><span class="m">93</span>.465847<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">15</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">1023</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">7</span>
<span class="nb">enable</span><span class="w"> </span>ap<span class="w"> </span>ok
udhcpd:<span class="w"> </span>started,<span class="w"> </span>v1.36.1
</pre></div>
</div>
<p>You can then use a mobile phone or other devices to connect to IMX95_WIFI_5G_AP.</p>
<p>The 2.4G mode is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:/#<span class="w"> </span>fltest_hostapd.sh<span class="w"> </span>-B<span class="w"> </span><span class="m">2</span>.4g
BAND<span class="w"> </span><span class="m">2</span>.4g
waiting...
<span class="o">[</span><span class="w">  </span><span class="m">325</span>.086398<span class="o">]</span><span class="w"> </span>...
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.275755<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>uap0<span class="w"> </span>Starting<span class="w"> </span>AP
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.279987<span class="o">]</span><span class="w"> </span>CMD_RESP:<span class="w"> </span>cmd<span class="w"> </span>0x121<span class="w"> </span>error,<span class="w"> </span><span class="nv">result</span><span class="o">=</span>0x2
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.284697<span class="o">]</span><span class="w"> </span>IOCTL<span class="w"> </span>failed:<span class="w"> </span>00000000f607e72d<span class="w"> </span><span class="nv">id</span><span class="o">=</span>0x200000,<span class="w"> </span><span class="nv">sub_id</span><span class="o">=</span>0x200024<span class="w"> </span><span class="nv">action</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">status_code</span><span class="o">=</span>0x2
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.293562<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span>multi-channel<span class="w"> </span>policy<span class="w"> </span>failed
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.298238<span class="o">]</span><span class="w"> </span>fw<span class="w"> </span>doesn<span class="err">&#39;</span>t<span class="w"> </span>support<span class="w"> </span>11ax
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.310849<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>uap0<span class="w"> </span>AP<span class="w"> </span>started
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.315456<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>HostMlme<span class="w"> </span>uap0<span class="w"> </span>send<span class="w"> </span>deauth/disassoc
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.321514<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">3</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">47</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">3</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">7</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.328520<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">94</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">7</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">15</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">1</span>
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.335625<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">15</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">63</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">3</span>
<span class="o">[</span><span class="w">  </span><span class="m">327</span>.342768<span class="o">]</span><span class="w"> </span>Set<span class="w"> </span><span class="nv">AC</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">txop</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">cwmin</span><span class="o">=</span><span class="m">15</span>,<span class="w"> </span><span class="nv">cwmax</span><span class="o">=</span><span class="m">1023</span><span class="w"> </span><span class="nv">aifs</span><span class="o">=</span><span class="m">7</span>
uap0:<span class="w"> </span>interface<span class="w"> </span>state<span class="w"> </span>UNINITIALIZED-&gt;ENABLED
uap0:<span class="w"> </span>AP-ENABLED
<span class="nb">enable</span><span class="w"> </span>ap<span class="w"> </span>ok
udhcpd:<span class="w"> </span>started,<span class="w"> </span>v1.36.1
</pre></div>
</div>
<p>You can then use a device such as a mobile phone to connect to the IMX95_WIFI_2.4G_AP.</p>
</section>
</section>
<section id="g-test">
<h3>4.15 4G Test<a class="headerlink" href="#g-test" title="Link to this heading"></a></h3>
<p>The OK-MX9596-C supports EC20 4G modules.<br />
<strong>Note: Before powering on the development board, insert the 4G module and SIM card, then start the board.</strong><br />
1. Connect the EC20 module to the OK-MX9596-C development board. After it is powered on and started, the USB status can be viewed through the lsusb command. The EC25 line is the 4G module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>lsusb
Bus<span class="w"> </span><span class="m">001</span><span class="w"> </span>Device<span class="w"> </span><span class="m">004</span>:<span class="w"> </span>ID<span class="w"> </span>2c7c:0125<span class="w"> </span>Quectel<span class="w"> </span>Wireless<span class="w"> </span>Solutions<span class="w"> </span>Co.,<span class="w"> </span>Ltd.<span class="w"> </span>EC25<span class="w"> </span>LTE<span class="w"> </span>modem
Bus<span class="w"> </span><span class="m">001</span><span class="w"> </span>Device<span class="w"> </span><span class="m">002</span>:<span class="w"> </span>ID<span class="w"> </span>1a40:0101<span class="w"> </span>Terminus<span class="w"> </span>Technology<span class="w"> </span>Inc.<span class="w"> </span>Hub
Bus<span class="w"> </span><span class="m">001</span><span class="w"> </span>Device<span class="w"> </span><span class="m">001</span>:<span class="w"> </span>ID<span class="w"> </span>1d6b:0002<span class="w"> </span>Linux<span class="w"> </span>Foundation<span class="w"> </span><span class="m">2</span>.0<span class="w"> </span>root<span class="w"> </span>hub
</pre></div>
</div>
<p>2. Taking the example of inserting a China Unicom SIM card to test 4G internet access, follow these steps to check if the network is working properly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_quectel.sh<span class="w"> </span><span class="p">&amp;</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="m">912</span>
root@ok-mx95-c:~#<span class="w"> </span><span class="o">[</span><span class="w">  </span><span class="m">153</span>.460864<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:08.0<span class="w"> </span>eth1:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
<span class="o">[</span><span class="w">  </span><span class="m">153</span>.642886<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>timeout<span class="w"> </span><span class="k">for</span><span class="w"> </span>tx<span class="w"> </span>ring<span class="w"> </span><span class="c1">#0 clear</span>
<span class="o">[</span><span class="w">  </span><span class="m">153</span>.798883<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>timeout<span class="w"> </span><span class="k">for</span><span class="w"> </span>tx<span class="w"> </span>ring<span class="w"> </span><span class="c1">#1 clear</span>
<span class="o">[</span><span class="w">  </span><span class="m">153</span>.958871<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>timeout<span class="w"> </span><span class="k">for</span><span class="w"> </span>tx<span class="w"> </span>ring<span class="w"> </span><span class="c1">#2 clear</span>
<span class="o">[</span><span class="w">  </span><span class="m">154</span>.114893<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>timeout<span class="w"> </span><span class="k">for</span><span class="w"> </span>tx<span class="w"> </span>ring<span class="w"> </span><span class="c1">#3 clear</span>
<span class="o">[</span><span class="w">  </span><span class="m">154</span>.270878<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>timeout<span class="w"> </span><span class="k">for</span><span class="w"> </span>tx<span class="w"> </span>ring<span class="w"> </span><span class="c1">#4 clear</span>
<span class="o">[</span><span class="w">  </span><span class="m">154</span>.426878<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>timeout<span class="w"> </span><span class="k">for</span><span class="w"> </span>tx<span class="w"> </span>ring<span class="w"> </span><span class="c1">#5 clear</span>
<span class="o">[</span><span class="w">  </span><span class="m">154</span>.433494<span class="o">]</span><span class="w"> </span>fsl_enetc4<span class="w"> </span><span class="m">0002</span>:00:10.0<span class="w"> </span>eth2:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
<span class="o">[</span><span class="m">07</span>-02_09:48:25:227<span class="o">]</span><span class="w"> </span>Quectel_QConnectManager_Linux_V1.6.0.24
<span class="o">[</span><span class="m">07</span>-02_09:48:25:228<span class="o">]</span><span class="w"> </span>Find<span class="w"> </span>/sys/bus/usb/devices/1-1.1<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>0x2c7c<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span>0x125,<span class="w"> </span><span class="nv">bus</span><span class="o">=</span>0x001,<span class="w"> </span><span class="nv">dev</span><span class="o">=</span>0x004
<span class="o">[</span><span class="m">07</span>-02_09:48:25:229<span class="o">]</span><span class="w"> </span>Auto<span class="w"> </span>find<span class="w"> </span><span class="nv">qmichannel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>/dev/qcqmi0
<span class="o">[</span><span class="m">07</span>-02_09:48:25:229<span class="o">]</span><span class="w"> </span>Auto<span class="w"> </span>find<span class="w"> </span><span class="nv">usbnet_adapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>usb0
<span class="o">[</span><span class="m">07</span>-02_09:48:25:229<span class="o">]</span><span class="w"> </span>netcard<span class="w"> </span><span class="nv">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>GobiNet,<span class="w"> </span>driver<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>V1.6.5
<span class="o">[</span><span class="m">07</span>-02_09:48:25:229<span class="o">]</span><span class="w"> </span>Modem<span class="w"> </span>works<span class="w"> </span><span class="k">in</span><span class="w"> </span>QMI<span class="w"> </span>mode
<span class="o">[</span><span class="m">07</span>-02_09:48:25:277<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientWDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>
<span class="o">[</span><span class="m">07</span>-02_09:48:25:309<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientDMS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span>
<span class="o">[</span><span class="m">07</span>-02_09:48:25:341<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientNAS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">9</span>
<span class="o">[</span><span class="m">07</span>-02_09:48:25:373<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientUIM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span>
<span class="o">[</span><span class="m">07</span>-02_09:48:25:405<span class="o">]</span><span class="w"> </span>Get<span class="w"> </span><span class="nv">clientWDA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">11</span>
<span class="o">[</span><span class="m">07</span>-02_09:48:25:437<span class="o">]</span><span class="w"> </span>requestBaseBandVersion<span class="w"> </span>EC20CEHCR06A02M1G
<span class="o">[</span><span class="m">07</span>-02_09:48:25:565<span class="o">]</span><span class="w"> </span>requestGetSIMStatus<span class="w"> </span>SIMStatus:<span class="w"> </span>SIM_READY
<span class="o">[</span><span class="m">07</span>-02_09:48:25:597<span class="o">]</span><span class="w"> </span>requestGetProfile<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>3gnet///0
<span class="o">[</span><span class="m">07</span>-02_09:48:25:629<span class="o">]</span><span class="w"> </span>requestRegistrationState2<span class="w"> </span>MCC:<span class="w"> </span><span class="m">460</span>,<span class="w"> </span>MNC:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span>PS:<span class="w"> </span>Attached,<span class="w"> </span>DataCap:<span class="w"> </span>LTE
<span class="o">[</span><span class="m">07</span>-02_09:48:25:661<span class="o">]</span><span class="w"> </span>requestQueryDataCall<span class="w"> </span>IPv4ConnectionStatus:<span class="w"> </span>DISCONNECTED
<span class="o">[</span><span class="m">07</span>-02_09:48:25:661<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span><span class="m">0</span>.0.0.0
<span class="o">[</span><span class="m">07</span>-02_09:48:25:672<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span>down
<span class="o">[</span><span class="w">  </span><span class="m">154</span>.923370<span class="o">]</span><span class="w"> </span>GobiNet<span class="w"> </span><span class="m">1</span>-1.1:1.4:<span class="w"> </span>Runtime<span class="w"> </span>PM<span class="w"> </span>usage<span class="w"> </span>count<span class="w"> </span>underflow!
<span class="o">[</span><span class="m">07</span>-02_09:48:25:724<span class="o">]</span><span class="w"> </span>requestSetupDataCall<span class="w"> </span>WdsConnectionIPv4Handle:<span class="w"> </span>0x86b528c0
<span class="o">[</span><span class="m">07</span>-02_09:48:25:885<span class="o">]</span><span class="w"> </span>ifconfig<span class="w"> </span>usb0<span class="w"> </span>up
<span class="o">[</span><span class="m">07</span>-02_09:48:25:898<span class="o">]</span><span class="w"> </span>busybox<span class="w"> </span>udhcpc<span class="w"> </span>-f<span class="w"> </span>-n<span class="w"> </span>-q<span class="w"> </span>-t<span class="w"> </span><span class="m">5</span><span class="w"> </span>-i<span class="w"> </span>usb0
udhcpc:<span class="w"> </span>started,<span class="w"> </span>v1.36.1
Dropped<span class="w"> </span>protocol<span class="w"> </span>specifier<span class="w"> </span><span class="s1">&#39;.udhcpc&#39;</span><span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;usb0.udhcpc&#39;</span>.<span class="w"> </span>Using<span class="w"> </span><span class="s1">&#39;usb0&#39;</span><span class="w"> </span><span class="o">(</span><span class="nv">ifindex</span><span class="o">=</span><span class="m">13</span><span class="o">)</span>.
udhcpc:<span class="w"> </span>broadcasting<span class="w"> </span>discover
udhcpc:<span class="w"> </span>broadcasting<span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">10</span>.217.164.168,<span class="w"> </span>server<span class="w"> </span><span class="m">10</span>.217.164.169
udhcpc:<span class="w"> </span>lease<span class="w"> </span>of<span class="w"> </span><span class="m">10</span>.217.164.168<span class="w"> </span>obtained<span class="w"> </span>from<span class="w"> </span><span class="m">10</span>.217.164.169,<span class="w"> </span>lease<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">7200</span>
Error:<span class="w"> </span>ipv4:<span class="w"> </span>Address<span class="w"> </span>already<span class="w"> </span>assigned.
<span class="o">[</span><span class="w">  </span><span class="m">155</span>.575996<span class="o">]</span><span class="w"> </span>audit:<span class="w"> </span><span class="nv">type</span><span class="o">=</span><span class="m">1334</span><span class="w"> </span>audit<span class="o">(</span><span class="m">1719884906</span>.328:18<span class="o">)</span>:<span class="w"> </span>prog-id<span class="o">=</span><span class="m">15</span><span class="w"> </span><span class="nv">op</span><span class="o">=</span>LOAD
<span class="o">[</span><span class="w">  </span><span class="m">155</span>.582903<span class="o">]</span><span class="w"> </span>audit:<span class="w"> </span><span class="nv">type</span><span class="o">=</span><span class="m">1334</span><span class="w"> </span>audit<span class="o">(</span><span class="m">1719884906</span>.336:19<span class="o">)</span>:<span class="w"> </span>prog-id<span class="o">=</span><span class="m">16</span><span class="w"> </span><span class="nv">op</span><span class="o">=</span>LOAD
</pre></div>
</div>
<p>3. As shown above, if the dial-up is successful, proceed with the Ping test to verify the network connectivity.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ping<span class="w"> </span>www.baidu.com
PING<span class="w"> </span>www.a.shifen.com<span class="w"> </span><span class="o">(</span><span class="m">110</span>.242.68.3<span class="o">)</span><span class="w"> </span><span class="m">56</span><span class="o">(</span><span class="m">84</span><span class="o">)</span><span class="w"> </span>bytes<span class="w"> </span>of<span class="w"> </span>data.
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">110</span>.242.68.3<span class="w"> </span><span class="o">(</span><span class="m">110</span>.242.68.3<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">53</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">400</span><span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">110</span>.242.68.3<span class="w"> </span><span class="o">(</span><span class="m">110</span>.242.68.3<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">53</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">680</span><span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">110</span>.242.68.3<span class="w"> </span><span class="o">(</span><span class="m">110</span>.242.68.3<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">53</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">198</span><span class="w"> </span>ms
^C64<span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">110</span>.242.68.3:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">53</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">159</span><span class="w"> </span>ms

---<span class="w"> </span>www.a.shifen.com<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<span class="m">4</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">4</span><span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>17094ms
rtt<span class="w"> </span>min/avg/max/mdev<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">158</span>.586/359.200/680.117/206.720<span class="w"> </span>ms
</pre></div>
</div>
</section>
<section id="id6">
<h3><strong>4.16 Play/Record Test</strong><a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p><strong>Note: The OK-MX9596-C development board is equipped with a NAU88C22 audio codec chip and provides one 3.5mm audio socket and two XH2.54 speaker interfaces. The onboard mic and headphone mic correspond to the left and right audio channels for recording. By default, the sound is played by the speakers, and after plugging in the headphones, it is switched to play by the headphones and mute the speakers.</strong></p>
<section id="playback-test">
<h4>4.16.1 Playback Test<a class="headerlink" href="#playback-test" title="Link to this heading"></a></h4>
<p>1. Use aplay to play the WAV file:<br />
Check the device number corresponding to the audio chip NAU88C22:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>aplay<span class="w"> </span>-l
****<span class="w"> </span>List<span class="w"> </span>of<span class="w"> </span>PLAYBACK<span class="w"> </span>Hardware<span class="w"> </span>Devices<span class="w"> </span>****
card<span class="w"> </span><span class="m">0</span>:<span class="w"> </span>btscoaudio<span class="w"> </span><span class="o">[</span>bt-sco-audio<span class="o">]</span>,<span class="w"> </span>device<span class="w"> </span><span class="m">0</span>:<span class="w"> </span>443b0000.sai-bt-sco-pcm-wb<span class="w"> </span>bt-sco-pcm-wb-0<span class="w"> </span><span class="o">[</span>443b0000.sai-bt-sco-pcm-wb<span class="w"> </span>bt-sco-pcm-wb-0<span class="o">]</span>
<span class="w">  </span>Subdevices:<span class="w"> </span><span class="m">1</span>/1
<span class="w">  </span>Subdevice<span class="w"> </span><span class="c1">#0: subdevice #0</span>
card<span class="w"> </span><span class="m">1</span>:<span class="w"> </span>nau88c22audio<span class="w"> </span><span class="o">[</span>nau88c22-audio<span class="o">]</span>,<span class="w"> </span>device<span class="w"> </span><span class="m">0</span>:<span class="w"> </span>HiFi<span class="w"> </span>nau8822-hifi-0<span class="w"> </span><span class="o">[</span>HiFi<span class="w"> </span>nau8822-hifi-0<span class="o">]</span>
<span class="w">  </span>Subdevices:<span class="w"> </span><span class="m">1</span>/1
<span class="w">  </span>Subdevice<span class="w"> </span><span class="c1">#0: subdevice #0</span>
</pre></div>
</div>
<p>As mentioned, the device corresponding to nau88c22 is card1, device0. (Note: In actual use, the device numbers may vary.)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>aplay<span class="w"> </span>-D<span class="w"> </span>hw:1,0<span class="w"> </span>-f<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/forlinx/audio/30s.wav<span class="w"> </span>
Playing<span class="w"> </span>WAVE<span class="w"> </span><span class="s1">&#39;30s.wav&#39;</span><span class="w"> </span>:<span class="w"> </span>Signed<span class="w"> </span><span class="m">16</span><span class="w"> </span>bit<span class="w"> </span>Little<span class="w"> </span>Endian,<span class="w"> </span>Rate<span class="w"> </span><span class="m">44100</span><span class="w"> </span>Hz,<span class="w"> </span>Stereo
</pre></div>
</div>
<p>When the earphone is not plugged in, it is output by the speaker. When the earphone is plugged in, the speaker is muted and output by the earphone.</p>
<p>2. Use gst-play-1.0 to play MP3 files</p>
<p>Set the default output device.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>pactl<span class="w"> </span>set-default-sink<span class="w"> </span><span class="m">1</span>
<span class="o">[</span><span class="w"> </span><span class="m">1001</span>.871018<span class="o">]</span><span class="w"> </span>nau8822<span class="w"> </span><span class="m">4</span>-001a:<span class="w"> </span><span class="nv">pll_int</span><span class="o">=</span><span class="m">7</span><span class="w"> </span><span class="nv">pll_frac</span><span class="o">=</span><span class="m">599999</span><span class="w"> </span><span class="nv">mclk_scaler</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">pre_factor</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p>Play</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-play-1.0<span class="w"> </span>/home/forlinx/audio/30s.mp3
Press<span class="w"> </span><span class="s1">&#39;k&#39;</span><span class="w"> </span>to<span class="w"> </span>see<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>keyboard<span class="w"> </span>shortcuts.
Now<span class="w"> </span>playing<span class="w"> </span>/home/forlinx/audio/30s.mp3
Prerolling...
<span class="o">======</span><span class="w"> </span>BEEP:<span class="w"> </span><span class="m">4</span>.8.3<span class="w"> </span>build<span class="w"> </span>on<span class="w"> </span>Mar<span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">07</span>:41:00.<span class="w"> </span><span class="o">======</span>
<span class="w">        </span>Core:<span class="w"> </span>MP3<span class="w"> </span>decoder<span class="w"> </span>Wrapper<span class="w">  </span>build<span class="w"> </span>on<span class="w"> </span>Sep<span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">20</span>:21:10
<span class="w"> </span>file:<span class="w"> </span>/usr/lib/imx-mm/audio-codec/wrap/lib_mp3d_wrap_arm_elinux.so.3
CODEC:<span class="w"> </span>BLN_MAD-MMCODECS_MP3D_ARM_02.13.01_ARMV8<span class="w">  </span>build<span class="w"> </span>on<span class="w"> </span>Sep<span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">17</span>:49:07.

<span class="o">===</span>!!!<span class="w"> </span>Current<span class="w"> </span>pulsesink<span class="w"> </span>device<span class="w"> </span>is<span class="w"> </span>alsa_output.platform-sound-nau88c22.stereo-fallback<span class="w"> </span>!!!<span class="o">===</span>

Redistribute<span class="w"> </span>latency...
Redistribute<span class="w"> </span>latency...
<span class="m">0</span>:00:30.0<span class="w"> </span>/<span class="w"> </span><span class="m">0</span>:00:30.0<span class="w">       </span>
Reached<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>play<span class="w"> </span>list.

root@ok-mx95-c:~#<span class="w"> </span>
</pre></div>
</div>
<p>Recording test:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>arecord<span class="w"> </span>-D<span class="w"> </span>hw:1,0<span class="w"> </span>-c2<span class="w"> </span>-f<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>-d<span class="w"> </span><span class="m">10</span><span class="w"> </span>/home/root/mic0.wav
Recording<span class="w"> </span>WAVE<span class="w"> </span><span class="s1">&#39;mic0.wav&#39;</span><span class="w"> </span>:<span class="w"> </span>Signed<span class="w"> </span><span class="m">16</span><span class="w"> </span>bit<span class="w"> </span>Little<span class="w"> </span>Endian,<span class="w"> </span>Rate<span class="w"> </span><span class="m">48000</span><span class="w"> </span>Hz,<span class="w"> </span>Stereo
</pre></div>
</div>
<ul class="simple">
<li><p>-D hw:2,0 use card2，device0 device</p></li>
<li><p>-c2，dual channel</p></li>
<li><p>-f cd，16 bit little endian, 44100, stereo</p></li>
<li><p>- d 10，record for 10 seconds</p></li>
</ul>
<p>The recording will collect the carrier board mic and the earphone mic as the left and right channels of the recording.</p>
</section>
</section>
<section id="closing-the-desktop">
<h3>4.17 Closing the Desktop<a class="headerlink" href="#closing-the-desktop" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>matrix<span class="w">                      </span>//Turn<span class="w"> </span>off<span class="w"> </span>the<span class="w"> </span>desktop
root@ok-mx95-c:~#<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>matrix<span class="w">                      </span>//Turn<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>desktop
</pre></div>
</div>
</section>
<section id="led-key-test">
<h3>4.18 LED_KEY Test<a class="headerlink" href="#led-key-test" title="Link to this heading"></a></h3>
<p>There are 4 x controllable blue LED lights and 4 x button on the carrier board. All 4 buttons can be used as GPIO interrupts, and both pressing and releasing the buttons can trigger related events.</p>
<p>The testing method is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>evtest
No<span class="w"> </span>device<span class="w"> </span>specified,<span class="w"> </span>trying<span class="w"> </span>to<span class="w"> </span>scan<span class="w"> </span>all<span class="w"> </span>of<span class="w"> </span>/dev/input/event*
Available<span class="w"> </span>devices:
/dev/input/event0:<span class="w">      </span>gpio-keys
/dev/input/event1:<span class="w">      </span>generic<span class="w"> </span>ft5x06<span class="w"> </span><span class="o">(</span><span class="m">79</span><span class="o">)</span>
/dev/input/event2:<span class="w">      </span>Goodix<span class="w"> </span>Capacitive<span class="w"> </span>TouchScreen
Select<span class="w"> </span>the<span class="w"> </span>device<span class="w"> </span>event<span class="w"> </span>number<span class="w"> </span><span class="o">[</span><span class="m">0</span>-2<span class="o">]</span>:<span class="w"> </span><span class="m">0</span>
Input<span class="w"> </span>driver<span class="w"> </span>version<span class="w"> </span>is<span class="w"> </span><span class="m">1</span>.0.1
Input<span class="w"> </span>device<span class="w"> </span>ID:<span class="w"> </span>bus<span class="w"> </span>0x19<span class="w"> </span>vendor<span class="w"> </span>0x1<span class="w"> </span>product<span class="w"> </span>0x1<span class="w"> </span>version<span class="w"> </span>0x100
Input<span class="w"> </span>device<span class="w"> </span>name:<span class="w"> </span><span class="s2">&quot;gpio-keys&quot;</span>
Supported<span class="w"> </span>events:
<span class="w">  </span>Event<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span>EV_SYN<span class="o">)</span>
<span class="w">  </span>Event<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>
<span class="w">    </span>Event<span class="w"> </span>code<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="o">(</span>KEY_A<span class="o">)</span>
<span class="w">    </span>Event<span class="w"> </span>code<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="o">(</span>KEY_D<span class="o">)</span>
<span class="w">    </span>Event<span class="w"> </span>code<span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="o">(</span>KEY_C<span class="o">)</span>
<span class="w">    </span>Event<span class="w"> </span>code<span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="o">(</span>KEY_B<span class="o">)</span>
Properties:
Testing<span class="w"> </span>...<span class="w"> </span><span class="o">(</span>interrupt<span class="w"> </span>to<span class="w"> </span><span class="nb">exit</span><span class="o">)</span>
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894047</span>.968528,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="o">(</span>KEY_A<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">1</span>//按下按键
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894047</span>.968528,<span class="w"> </span>--------------<span class="w"> </span>SYN_REPORT<span class="w"> </span>------------
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894048</span>.164475,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="o">(</span>KEY_A<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">0</span>//松开按键
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894048</span>.164475,<span class="w"> </span>--------------<span class="w"> </span>SYN_REPORT<span class="w"> </span>------------
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894048</span>.950342,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="o">(</span>KEY_B<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">1</span>
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894048</span>.950342,<span class="w"> </span>--------------<span class="w"> </span>SYN_REPORT<span class="w"> </span>------------
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894049</span>.140735,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="o">(</span>KEY_B<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">0</span>
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894049</span>.140735,<span class="w"> </span>--------------<span class="w"> </span>SYN_REPORT<span class="w"> </span>------------
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894049</span>.635309,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="o">(</span>KEY_C<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">1</span>
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894049</span>.635309,<span class="w"> </span>--------------<span class="w"> </span>SYN_REPORT<span class="w"> </span>------------
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894049</span>.808248,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="o">(</span>KEY_C<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">0</span>
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894049</span>.808248,<span class="w"> </span>--------------<span class="w"> </span>SYN_REPORT<span class="w"> </span>------------
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894050</span>.275708,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="o">(</span>KEY_D<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">1</span>
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894050</span>.275708,<span class="w"> </span>--------------<span class="w"> </span>SYN_REPORT<span class="w"> </span>------------
Event:<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1719894050</span>.460864,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>EV_KEY<span class="o">)</span>,<span class="w"> </span>code<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="o">(</span>KEY_D<span class="o">)</span>,<span class="w"> </span>value<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</section>
<section id="sqlite3-test">
<h3>4.19 SQLite3 Test<a class="headerlink" href="#sqlite3-test" title="Link to this heading"></a></h3>
<p>SQLite3 is a lightweight, ACID-compliant relational database management system with a low footprint. The OK-MX9596-C development board is ported with version 3.43.1 of sqlit3.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>sqlite3
SQLite<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.43.1<span class="w"> </span><span class="m">2023</span>-09-11<span class="w"> </span><span class="m">12</span>:01:27
Enter<span class="w"> </span><span class="s2">&quot;.help&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>usage<span class="w"> </span>hints.
Connected<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>transient<span class="w"> </span><span class="k">in</span>-memory<span class="w"> </span>database.
Use<span class="w"> </span><span class="s2">&quot;.open FILENAME&quot;</span><span class="w"> </span>to<span class="w"> </span>reopen<span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>persistent<span class="w"> </span>database.
sqlite&gt;<span class="w"> </span>create<span class="w"> </span>table<span class="w"> </span>tbl1<span class="w"> </span><span class="o">(</span>one<span class="w"> </span>varchar<span class="o">(</span><span class="m">10</span><span class="o">)</span>,<span class="w"> </span>two<span class="w"> </span>smallint<span class="o">)</span><span class="p">;</span>
sqlite&gt;<span class="w"> </span>insert<span class="w"> </span>into<span class="w"> </span>tbl1<span class="w"> </span>values<span class="o">(</span><span class="s1">&#39;hello!&#39;</span>,10<span class="o">)</span><span class="p">;</span>
sqlite&gt;<span class="w"> </span>insert<span class="w"> </span>into<span class="w"> </span>tbl1<span class="w"> </span>values<span class="o">(</span><span class="s1">&#39;goodbye&#39;</span>,<span class="w"> </span><span class="m">20</span><span class="o">)</span><span class="p">;</span>
sqlite&gt;<span class="w"> </span><span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>tbl1<span class="p">;</span>
hello!<span class="p">|</span><span class="m">10</span>
goodbye<span class="p">|</span><span class="m">20</span>
sqlite&gt;<span class="w"> </span>delete<span class="w"> </span>from<span class="w"> </span>tbl1<span class="w"> </span>where<span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;hello!&#39;</span><span class="p">;</span>
sqlite&gt;<span class="w"> </span><span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>tbl1<span class="p">;</span>
goodbye<span class="p">|</span><span class="m">20</span>
sqlite&gt;<span class="w"> </span>.quit
root@ok-mx95-c:~#
</pre></div>
</div>
</section>
<section id="pwm-test">
<h3>4.20 PWM Test<a class="headerlink" href="#pwm-test" title="Link to this heading"></a></h3>
<p>OK-MX9596-C development board has 3 x PWM, which are used for LVDS0 display backlight, mipi display backlight, and fan function.</p>
<section id="screen-backlight-test">
<h4>4.20.1 Screen Backlight Test<a class="headerlink" href="#screen-backlight-test" title="Link to this heading"></a></h4>
<p>The brightness setting range of the screen backlight is (0 - 255). 255 represents the highest brightness, and 0 means the backlight is completely turned off. Enter the system and enter the following command in the terminal to perform the backlight test.</p>
<p>1. To check the LVDS screen backlight:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/class/backlight/lvds-backlight/brightness
<span class="m">250</span>
</pre></div>
</div>
<p>2. Turn off LVDS screen backlight.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/backlight/lvds-backlight/brightness
root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/class/backlight/lvds-backlight/brightness
<span class="m">0</span>
</pre></div>
</div>
<p>3. Turn on the LVDS screen backlight.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">255</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/backlight/lvds-backlight/brightness
root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/class/backlight/lvds-backlight/brightness
<span class="m">255</span>
</pre></div>
</div>
<p>The mipi screen backlight node is/sys/class/backlight/mipi-backlight/, and the test method is the same as the LVDS screen backlight test method.</p>
</section>
<section id="fan">
<h4>4.20.2 FAN<a class="headerlink" href="#fan" title="Link to this heading"></a></h4>
<p><img alt="Image" src="_images/1754903277858_faa772f1_da04_41dd_935e_4d6b369d474b.png" /></p>
<p>The schematic diagram of the fan is shown above, which supports adjusting the fan speed through PWM function. Forlinx has added the fan PWM to the temperature control strategy, and the duty cycle of TPM5 _ CH2 will change with the CPU temperature. See the thermal _ zones node in the device tree for specific values.<br />
By default, the fan does not have the function to adjust the rotation speed. If you need to adjust the fan rotation speed, please use a fan that supports speed adjustment.</p>
</section>
</section>
<section id="can-test">
<h3>4.21 CAN Test<a class="headerlink" href="#can-test" title="Link to this heading"></a></h3>
<section id="id7">
<h4>4.21.1 CAN Test<a class="headerlink" href="#id7" title="Link to this heading"></a></h4>
<p>There are 5 x CAN on the carrier board, all of which support CANFD and are led out to the P45 and P50 connection seats.</p>
<p>The maximum bitrate supported is 1m</p>
<p><img alt="Image" src="_images/1754903277994_1be89087_d3f9_49d1_83ca_986d0785b8bc.png" /></p>
<p>Short H, L, and GND of can2 and can3, respectively, to test. The register address corresponding to can1 is larger, so can1, can2, can3, can4, and can5 correspond to the kernel device numbers can4, can0, can1, can2, and can3, respectively. Other can interface test methods are the same and will not be repeated here.</p>
<p>Set the Can service：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ifconfig<span class="w"> </span>can0<span class="w"> </span>down
root@ok-mx95-c:~#<span class="w"> </span>ifconfig<span class="w"> </span>can1<span class="w"> </span>down
root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can0<span class="w"> </span>up<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>bitrate<span class="w"> </span><span class="m">1000000</span>
root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can1<span class="w"> </span>up<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>bitrate<span class="w"> </span><span class="m">1000000</span>
</pre></div>
</div>
<p>Set can0 to receive and can1 to send:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>candump<span class="w"> </span>can0<span class="w"> </span><span class="p">&amp;</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="m">703</span>
root@ok-mx95-c:~#<span class="w"> </span>cangen<span class="w">  </span>can1
<span class="w">  </span>can0<span class="w">  </span>0E3<span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span>F0<span class="w"> </span>0E<span class="w"> </span>E0<span class="w"> </span>4F<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">16</span><span class="w"> </span>C4<span class="w"> </span>2D
<span class="w">  </span>can0<span class="w">  </span>4E5<span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span>AD<span class="w"> </span>7F<span class="w"> </span><span class="m">82</span><span class="w"> </span>4B<span class="w"> </span>9F<span class="w"> </span>F8<span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">74</span>
<span class="w">  </span>can0<span class="w">  </span>3D5<span class="w">   </span><span class="o">[</span><span class="m">4</span><span class="o">]</span><span class="w">  </span><span class="m">83</span><span class="w"> </span><span class="m">18</span><span class="w"> </span>FF<span class="w"> </span>3D
<span class="w">  </span>can0<span class="w">  </span><span class="m">214</span><span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span>9C<span class="w"> </span>DF<span class="w"> </span>D4<span class="w"> </span><span class="m">74</span><span class="w"> </span>F5<span class="w"> </span>5F<span class="w"> </span>7A<span class="w"> </span><span class="m">09</span>
<span class="w">  </span>can0<span class="w">  </span><span class="m">419</span><span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span>A8<span class="w"> </span><span class="m">22</span><span class="w"> </span>AA<span class="w"> </span>6B<span class="w"> </span><span class="m">82</span><span class="w"> </span>B5<span class="w"> </span>A4<span class="w"> </span>6B
<span class="w">  </span>can0<span class="w">  </span><span class="m">630</span><span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span>B7<span class="w"> </span><span class="m">41</span><span class="w"> </span>FC<span class="w"> </span>1D<span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="m">92</span><span class="w"> </span><span class="m">50</span>
<span class="w">  </span>can0<span class="w">  </span>4D6<span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span><span class="m">80</span><span class="w"> </span><span class="m">37</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">06</span><span class="w"> </span><span class="m">65</span><span class="w"> </span>2A<span class="w"> </span>6E
<span class="w">  </span>can0<span class="w">  </span><span class="m">290</span><span class="w">   </span><span class="o">[</span><span class="m">7</span><span class="o">]</span><span class="w">  </span>2F<span class="w"> </span>2E<span class="w"> </span>1E<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">73</span><span class="w"> </span>3B<span class="w"> </span>3F
<span class="w">  </span>can0<span class="w">  </span><span class="m">225</span><span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span>D4<span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="m">03</span><span class="w"> </span>2A<span class="w"> </span>0A<span class="w"> </span><span class="m">37</span><span class="w"> </span><span class="m">11</span><span class="w"> </span>0E
<span class="w">  </span>can0<span class="w">  </span><span class="m">328</span><span class="w">   </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w">  </span>AA
</pre></div>
</div>
<p>Set up the canfd service.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ifconfig<span class="w"> </span>can0<span class="w"> </span>down
root@ok-mx95-c:~#<span class="w"> </span>ifconfig<span class="w"> </span>can1<span class="w"> </span>down
root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can0<span class="w"> </span>up<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>bitrate<span class="w"> </span><span class="m">1000000</span><span class="w"> </span>dbitrate<span class="w"> </span><span class="m">4000000</span><span class="w"> </span>fd<span class="w"> </span>on
root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can1<span class="w"> </span>up<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>bitrate<span class="w"> </span><span class="m">1000000</span><span class="w"> </span>dbitrate<span class="w"> </span><span class="m">4000000</span><span class="w"> </span>fd<span class="w"> </span>on
</pre></div>
</div>
<p>Set can1 to receive and can0 to send:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>candump<span class="w"> </span>can1<span class="w"> </span><span class="p">&amp;</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="m">1326</span>
root@ok-mx95-c:~#<span class="w"> </span>cangen<span class="w"> </span>-m<span class="w"> </span>can0
<span class="w">  </span>can1<span class="w">  </span><span class="m">699</span><span class="w">  </span><span class="o">[</span><span class="m">03</span><span class="o">]</span><span class="w">  </span>C6<span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">76</span>
<span class="w">  </span>can1<span class="w">  </span><span class="m">322</span><span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span><span class="m">97</span><span class="w"> </span><span class="m">52</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">57</span><span class="w"> </span>B1<span class="w"> </span>B7<span class="w"> </span>3B<span class="w"> </span><span class="m">49</span>
<span class="w">  </span>can1<span class="w">  </span>043CDEEE<span class="w">   </span><span class="o">[</span><span class="m">5</span><span class="o">]</span><span class="w">  </span>remote<span class="w"> </span>request
<span class="w">  </span>can1<span class="w">       </span>28A<span class="w">   </span><span class="o">[</span><span class="m">6</span><span class="o">]</span><span class="w">  </span><span class="m">07</span><span class="w"> </span>E6<span class="w"> </span>7E<span class="w"> </span>7F<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">59</span>
<span class="w">  </span>can1<span class="w">       </span><span class="m">406</span><span class="w">   </span><span class="o">[</span><span class="m">7</span><span class="o">]</span><span class="w">  </span>C6<span class="w"> </span>FA<span class="w"> </span>BF<span class="w"> </span>5D<span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">98</span><span class="w"> </span><span class="m">79</span>
<span class="w">  </span>can1<span class="w">  </span>19E5081B<span class="w">   </span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="w"> </span>
<span class="w">  </span>can1<span class="w">       </span><span class="m">458</span><span class="w">  </span><span class="o">[</span><span class="m">05</span><span class="o">]</span><span class="w">  </span>AD<span class="w"> </span>D3<span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="m">50</span><span class="w"> </span>1E
<span class="w">  </span>can1<span class="w">       </span>28D<span class="w">   </span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="w"> </span>
<span class="w">  </span>can1<span class="w">       </span>02F<span class="w">  </span><span class="o">[</span><span class="m">03</span><span class="o">]</span><span class="w">  </span><span class="m">27</span><span class="w"> </span>F2<span class="w"> </span><span class="m">10</span>
<span class="w">  </span>can1<span class="w">  </span><span class="m">00292067</span><span class="w">   </span><span class="o">[</span><span class="m">8</span><span class="o">]</span><span class="w">  </span>EB<span class="w"> </span>1B<span class="w"> </span>4E<span class="w"> </span><span class="m">72</span><span class="w"> </span>6E<span class="w"> </span><span class="m">06</span><span class="w"> </span>A8<span class="w"> </span>3F
<span class="w">  </span>can1<span class="w">       </span>44F<span class="w">  </span><span class="o">[</span><span class="m">04</span><span class="o">]</span><span class="w">  </span><span class="m">12</span><span class="w"> </span>2F<span class="w"> </span>D8<span class="w"> </span><span class="m">28</span>
<span class="w">  </span>can1<span class="w">  </span>04960F33<span class="w">   </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w">  </span>A9
<span class="w">  </span>can1<span class="w">       </span><span class="m">133</span><span class="w">  </span><span class="o">[</span><span class="m">12</span><span class="o">]</span><span class="w">  </span><span class="m">43</span><span class="w"> </span>2B<span class="w"> </span>B5<span class="w"> </span>3A<span class="w"> </span>E0<span class="w"> </span>6C<span class="w"> </span>1C<span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">43</span><span class="w"> </span>2B<span class="w"> </span>B5<span class="w"> </span>3A
</pre></div>
</div>
</section>
<section id="other-common-commands">
<h4>4.21.2 Other Common Commands<a class="headerlink" href="#other-common-commands" title="Link to this heading"></a></h4>
<p>Check CAN bus status:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>-details<span class="w"> </span>-statistics<span class="w"> </span>link<span class="w"> </span>show<span class="w"> </span>can0
<span class="m">5</span>:<span class="w"> </span>can0:<span class="w"> </span>&lt;NOARP,UP,LOWER_UP,ECHO&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">72</span><span class="w"> </span>qdisc<span class="w"> </span>pfifo_fast<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>mode<span class="w"> </span>DEFAULT<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">10</span>
<span class="w">    </span>link/can<span class="w">  </span>promiscuity<span class="w"> </span><span class="m">0</span><span class="w"> </span>allmulti<span class="w"> </span><span class="m">0</span><span class="w"> </span>minmtu<span class="w"> </span><span class="m">0</span><span class="w"> </span>maxmtu<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span>can<span class="w"> </span>&lt;FD&gt;<span class="w"> </span>state<span class="w"> </span>ERROR-ACTIVE<span class="w"> </span><span class="o">(</span>berr-counter<span class="w"> </span>tx<span class="w"> </span><span class="m">0</span><span class="w"> </span>rx<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span>restart-ms<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<span class="w">          </span>bitrate<span class="w"> </span><span class="m">500000</span><span class="w"> </span>sample-point<span class="w"> </span><span class="m">0</span>.875
<span class="w">          </span>tq<span class="w"> </span><span class="m">25</span><span class="w"> </span>prop-seg<span class="w"> </span><span class="m">37</span><span class="w"> </span>phase-seg1<span class="w"> </span><span class="m">32</span><span class="w"> </span>phase-seg2<span class="w"> </span><span class="m">10</span><span class="w"> </span>sjw<span class="w"> </span><span class="m">5</span><span class="w"> </span>brp<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>flexcan:<span class="w"> </span>tseg1<span class="w"> </span><span class="m">2</span>..96<span class="w"> </span>tseg2<span class="w"> </span><span class="m">2</span>..32<span class="w"> </span>sjw<span class="w"> </span><span class="m">1</span>..16<span class="w"> </span>brp<span class="w"> </span><span class="m">1</span>..1024<span class="w"> </span>brp_inc<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>dbitrate<span class="w"> </span><span class="m">2000000</span><span class="w"> </span>dsample-point<span class="w"> </span><span class="m">0</span>.750
<span class="w">          </span>dtq<span class="w"> </span><span class="m">25</span><span class="w"> </span>dprop-seg<span class="w"> </span><span class="m">7</span><span class="w"> </span>dphase-seg1<span class="w"> </span><span class="m">7</span><span class="w"> </span>dphase-seg2<span class="w"> </span><span class="m">5</span><span class="w"> </span>dsjw<span class="w"> </span><span class="m">2</span><span class="w"> </span>dbrp<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>flexcan:<span class="w"> </span>dtseg1<span class="w"> </span><span class="m">2</span>..39<span class="w"> </span>dtseg2<span class="w"> </span><span class="m">2</span>..8<span class="w"> </span>dsjw<span class="w"> </span><span class="m">1</span>..4<span class="w"> </span>dbrp<span class="w"> </span><span class="m">1</span>..1024<span class="w"> </span>dbrp_inc<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>clock<span class="w"> </span><span class="m">40000000</span><span class="w"> </span>
<span class="w">          </span>re-started<span class="w"> </span>bus-errors<span class="w"> </span>arbit-lost<span class="w"> </span>error-warn<span class="w"> </span>error-pass<span class="w"> </span>bus-off
<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">         </span>numtxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>numrxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>gso_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gso_max_segs<span class="w"> </span><span class="m">65535</span><span class="w"> </span>tso_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>tso_max_segs<span class="w"> </span><span class="m">65535</span><span class="w"> </span>gro_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gso_ipv4_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gro_ipv4_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>parentbus<span class="w"> </span>platform<span class="w"> </span>parentdev<span class="w"> </span>425b0000.can<span class="w"> </span>
<span class="w">    </span>RX:<span class="w">  </span>bytes<span class="w"> </span>packets<span class="w"> </span>errors<span class="w"> </span>dropped<span class="w">  </span>missed<span class="w">   </span>mcast<span class="w">           </span>
<span class="w">          </span><span class="m">4401</span><span class="w">     </span><span class="m">459</span><span class="w">      </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span>TX:<span class="w">  </span>bytes<span class="w"> </span>packets<span class="w"> </span>errors<span class="w"> </span>dropped<span class="w"> </span>carrier<span class="w"> </span>collsns<span class="w">           </span>
<span class="w">             </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w"> </span>
</pre></div>
</div>
<p>Set the bus-off reset time of the bus:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ifconfig<span class="w"> </span>can0<span class="w"> </span>down
root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can0<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>restart-ms<span class="w"> </span><span class="m">100</span>
root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>-details<span class="w"> </span>-statistics<span class="w"> </span>link<span class="w"> </span>show<span class="w"> </span>can0
<span class="m">5</span>:<span class="w"> </span>can0:<span class="w"> </span>&lt;NOARP,ECHO&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">72</span><span class="w"> </span>qdisc<span class="w"> </span>pfifo_fast<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>mode<span class="w"> </span>DEFAULT<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">10</span>
<span class="w">    </span>link/can<span class="w">  </span>promiscuity<span class="w"> </span><span class="m">0</span><span class="w"> </span>allmulti<span class="w"> </span><span class="m">0</span><span class="w"> </span>minmtu<span class="w"> </span><span class="m">0</span><span class="w"> </span>maxmtu<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span>can<span class="w"> </span>&lt;FD&gt;<span class="w"> </span>state<span class="w"> </span>STOPPED<span class="w"> </span><span class="o">(</span>berr-counter<span class="w"> </span>tx<span class="w"> </span><span class="m">0</span><span class="w"> </span>rx<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span>restart-ms<span class="w"> </span><span class="m">100</span><span class="w"> </span>
<span class="w">          </span>bitrate<span class="w"> </span><span class="m">500000</span><span class="w"> </span>sample-point<span class="w"> </span><span class="m">0</span>.875
<span class="w">          </span>tq<span class="w"> </span><span class="m">25</span><span class="w"> </span>prop-seg<span class="w"> </span><span class="m">37</span><span class="w"> </span>phase-seg1<span class="w"> </span><span class="m">32</span><span class="w"> </span>phase-seg2<span class="w"> </span><span class="m">10</span><span class="w"> </span>sjw<span class="w"> </span><span class="m">5</span><span class="w"> </span>brp<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>flexcan:<span class="w"> </span>tseg1<span class="w"> </span><span class="m">2</span>..96<span class="w"> </span>tseg2<span class="w"> </span><span class="m">2</span>..32<span class="w"> </span>sjw<span class="w"> </span><span class="m">1</span>..16<span class="w"> </span>brp<span class="w"> </span><span class="m">1</span>..1024<span class="w"> </span>brp_inc<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>dbitrate<span class="w"> </span><span class="m">2000000</span><span class="w"> </span>dsample-point<span class="w"> </span><span class="m">0</span>.750
<span class="w">          </span>dtq<span class="w"> </span><span class="m">25</span><span class="w"> </span>dprop-seg<span class="w"> </span><span class="m">7</span><span class="w"> </span>dphase-seg1<span class="w"> </span><span class="m">7</span><span class="w"> </span>dphase-seg2<span class="w"> </span><span class="m">5</span><span class="w"> </span>dsjw<span class="w"> </span><span class="m">2</span><span class="w"> </span>dbrp<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>flexcan:<span class="w"> </span>dtseg1<span class="w"> </span><span class="m">2</span>..39<span class="w"> </span>dtseg2<span class="w"> </span><span class="m">2</span>..8<span class="w"> </span>dsjw<span class="w"> </span><span class="m">1</span>..4<span class="w"> </span>dbrp<span class="w"> </span><span class="m">1</span>..1024<span class="w"> </span>dbrp_inc<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>clock<span class="w"> </span><span class="m">40000000</span><span class="w"> </span>
<span class="w">          </span>re-started<span class="w"> </span>bus-errors<span class="w"> </span>arbit-lost<span class="w"> </span>error-warn<span class="w"> </span>error-pass<span class="w"> </span>bus-off
<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">         </span>numtxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>numrxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>gso_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gso_max_segs<span class="w"> </span><span class="m">65535</span><span class="w"> </span>tso_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>tso_max_segs<span class="w"> </span><span class="m">65535</span><span class="w"> </span>gro_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gso_ipv4_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gro_ipv4_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>parentbus<span class="w"> </span>platform<span class="w"> </span>parentdev<span class="w"> </span>425b0000.can<span class="w"> </span>
<span class="w">    </span>RX:<span class="w">  </span>bytes<span class="w"> </span>packets<span class="w"> </span>errors<span class="w"> </span>dropped<span class="w">  </span>missed<span class="w">   </span>mcast<span class="w">           </span>
<span class="w">          </span><span class="m">4401</span><span class="w">     </span><span class="m">459</span><span class="w">      </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span>TX:<span class="w">  </span>bytes<span class="w"> </span>packets<span class="w"> </span>errors<span class="w"> </span>dropped<span class="w"> </span>carrier<span class="w"> </span>collsns<span class="w">           </span>
<span class="w">             </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span>
</pre></div>
</div>
<p>Set send queue length:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>can0<span class="w"> </span>txqueuelen<span class="w"> </span><span class="m">100</span>
root@ok-mx95-c:~#<span class="w"> </span>ip<span class="w"> </span>-details<span class="w"> </span>-statistics<span class="w"> </span>link<span class="w"> </span>show<span class="w"> </span>can0
<span class="m">5</span>:<span class="w"> </span>can0:<span class="w"> </span>&lt;NOARP,ECHO&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">72</span><span class="w"> </span>qdisc<span class="w"> </span>pfifo_fast<span class="w"> </span>state<span class="w"> </span>DOWN<span class="w"> </span>mode<span class="w"> </span>DEFAULT<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">100</span>
<span class="w">    </span>link/can<span class="w">  </span>promiscuity<span class="w"> </span><span class="m">0</span><span class="w"> </span>allmulti<span class="w"> </span><span class="m">0</span><span class="w"> </span>minmtu<span class="w"> </span><span class="m">0</span><span class="w"> </span>maxmtu<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span>can<span class="w"> </span>&lt;FD&gt;<span class="w"> </span>state<span class="w"> </span>STOPPED<span class="w"> </span><span class="o">(</span>berr-counter<span class="w"> </span>tx<span class="w"> </span><span class="m">0</span><span class="w"> </span>rx<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span>restart-ms<span class="w"> </span><span class="m">100</span><span class="w"> </span>
<span class="w">          </span>bitrate<span class="w"> </span><span class="m">500000</span><span class="w"> </span>sample-point<span class="w"> </span><span class="m">0</span>.875
<span class="w">          </span>tq<span class="w"> </span><span class="m">25</span><span class="w"> </span>prop-seg<span class="w"> </span><span class="m">37</span><span class="w"> </span>phase-seg1<span class="w"> </span><span class="m">32</span><span class="w"> </span>phase-seg2<span class="w"> </span><span class="m">10</span><span class="w"> </span>sjw<span class="w"> </span><span class="m">5</span><span class="w"> </span>brp<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>flexcan:<span class="w"> </span>tseg1<span class="w"> </span><span class="m">2</span>..96<span class="w"> </span>tseg2<span class="w"> </span><span class="m">2</span>..32<span class="w"> </span>sjw<span class="w"> </span><span class="m">1</span>..16<span class="w"> </span>brp<span class="w"> </span><span class="m">1</span>..1024<span class="w"> </span>brp_inc<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>dbitrate<span class="w"> </span><span class="m">2000000</span><span class="w"> </span>dsample-point<span class="w"> </span><span class="m">0</span>.750
<span class="w">          </span>dtq<span class="w"> </span><span class="m">25</span><span class="w"> </span>dprop-seg<span class="w"> </span><span class="m">7</span><span class="w"> </span>dphase-seg1<span class="w"> </span><span class="m">7</span><span class="w"> </span>dphase-seg2<span class="w"> </span><span class="m">5</span><span class="w"> </span>dsjw<span class="w"> </span><span class="m">2</span><span class="w"> </span>dbrp<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>flexcan:<span class="w"> </span>dtseg1<span class="w"> </span><span class="m">2</span>..39<span class="w"> </span>dtseg2<span class="w"> </span><span class="m">2</span>..8<span class="w"> </span>dsjw<span class="w"> </span><span class="m">1</span>..4<span class="w"> </span>dbrp<span class="w"> </span><span class="m">1</span>..1024<span class="w"> </span>dbrp_inc<span class="w"> </span><span class="m">1</span>
<span class="w">          </span>clock<span class="w"> </span><span class="m">40000000</span><span class="w"> </span>
<span class="w">          </span>re-started<span class="w"> </span>bus-errors<span class="w"> </span>arbit-lost<span class="w"> </span>error-warn<span class="w"> </span>error-pass<span class="w"> </span>bus-off
<span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">          </span><span class="m">0</span><span class="w">         </span>numtxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>numrxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>gso_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gso_max_segs<span class="w"> </span><span class="m">65535</span><span class="w"> </span>tso_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>tso_max_segs<span class="w"> </span><span class="m">65535</span><span class="w"> </span>gro_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gso_ipv4_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gro_ipv4_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>parentbus<span class="w"> </span>platform<span class="w"> </span>parentdev<span class="w"> </span>425b0000.can<span class="w"> </span>
<span class="w">    </span>RX:<span class="w">  </span>bytes<span class="w"> </span>packets<span class="w"> </span>errors<span class="w"> </span>dropped<span class="w">  </span>missed<span class="w">   </span>mcast<span class="w">           </span>
<span class="w">          </span><span class="m">4401</span><span class="w">     </span><span class="m">459</span><span class="w">      </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span>TX:<span class="w">  </span>bytes<span class="w"> </span>packets<span class="w"> </span>errors<span class="w"> </span>dropped<span class="w"> </span>carrier<span class="w"> </span>collsns<span class="w">           </span>
<span class="w">             </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w">       </span><span class="m">0</span><span class="w"> </span>
</pre></div>
</div>
</section>
</section>
<section id="ipv6-test">
<h3>4.22 IPv6 Test<a class="headerlink" href="#ipv6-test" title="Link to this heading"></a></h3>
<p>The OK-MX9596-C platform supports IPv6, and the test command is as follows:</p>
<p>The <a class="reference external" href="http://www.baidu.xn--comIPv6pingIPv6-ve6xo73bd9geqala93c198dma3059dna706loa082e3wj1m6a9i3ftj5g5z1avkcj21mzcs5b.">www.baidu.com</a> domain name currently supports IPv6. You can verify IPv6 support by pinging this domain name.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>ping<span class="w"> </span>www.baidu.com
PING<span class="w"> </span>www.baidu.com<span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">))</span><span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">54</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">9</span>.12<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">54</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">10</span>.1<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="w"> </span><span class="o">(</span><span class="m">2408</span>:871a:2100:2:0:ff:b09f:237<span class="o">)</span>:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">54</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">9</span>.12<span class="w"> </span>ms
^C
---<span class="w"> </span>www.baidu.com<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<span class="m">3</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">3</span><span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>2003ms
rtt<span class="w"> </span>min/avg/max/mdev<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">9</span>.117/9.440/10.081/0.453<span class="w"> </span>ms
</pre></div>
</div>
</section>
<section id="adc-test">
<h3>4.23 ADC Test<a class="headerlink" href="#adc-test" title="Link to this heading"></a></h3>
<p>The development board provides 12 x ADC with single-ended inputs. Voltage sampling range 0 ~ 1.8 V.</p>
<p>All ADC are led out at the carrier board P11. Refer to the schematic to connect the ADC pins before testing.</p>
<p><img alt="Image" src="_images/1754903278080_89ed05b1_a212_4b76_bdd6_971bdaeb1060.png" /></p>
<p><strong>Note: In order to protect the board, please plug and unplug the board after power off.</strong></p>
<p>To test the single-ended input ADC _ IN0, short P11 pins 1 and 3, and enter the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio<span class="se">\:</span>device0/in_voltage0_raw
<span class="m">1623</span>
</pre></div>
</div>
<p>After the above commands are input, the value corresponding to ADC _ IN0 will be output at the terminal, the sliding rheostat R18 will be adjusted, and the value read by the above commands will change accordingly.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>cat<span class="w"> </span>/sys/bus/iio/devices/iio<span class="se">\:</span>device0/in_voltage0_raw
<span class="m">1845</span>
</pre></div>
</div>
</section>
<section id="spi-test">
<h3>4.24 SPI Test<a class="headerlink" href="#spi-test" title="Link to this heading"></a></h3>
<p>An SPI3 interface is led out from the OK-MX9596-C carrier board, and the default software configures it as spidev for loopback test. When testing, refer to the schematic to short SOUT to SIN and then test with the command below.<br />
Confirm the name of the SPI device before testing.</p>
<p><img alt="Image" src="_images/1754903278166_24280a6c_302e_47c4_8245_ac274b3c956a.png" /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>fltest_spidev_test<span class="w"> </span>-D<span class="w"> </span>/dev/spidev0.0
spi<span class="w"> </span>mode:<span class="w"> </span><span class="m">0</span>
bits<span class="w"> </span>per<span class="w"> </span>word:<span class="w"> </span><span class="m">8</span>
max<span class="w"> </span>speed:<span class="w"> </span><span class="m">500000</span><span class="w"> </span>Hz<span class="w"> </span><span class="o">(</span><span class="m">500</span><span class="w"> </span>KHz<span class="o">)</span>

FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>
<span class="m">40</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">95</span><span class="w"> </span>
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>
FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>FF<span class="w"> </span>
DE<span class="w"> </span>AD<span class="w"> </span>BE<span class="w"> </span>EF<span class="w"> </span>BA<span class="w"> </span>AD<span class="w"> </span>
F0<span class="w"> </span>0D<span class="w"> </span>
</pre></div>
</div>
</section>
<section id="bluetooth-test">
<h3>4.25 Bluetooth Test<a class="headerlink" href="#bluetooth-test" title="Link to this heading"></a></h3>
<p>The AW-CM358SM of the OK-MX9596-C development board carrier board has integrated Bluetooth. This section demonstrates the use of Bluetooth for file transfer between the phone and the development board.</p>
<p>1. Bluetooth Configuration</p>
<p>Use the following command to check the HCI status and confirm whether the Bluetooth node is enabled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>hciconfig
hci0:<span class="w">   </span>Type:<span class="w"> </span>Primary<span class="w">  </span>Bus:<span class="w"> </span>UART
<span class="w">        </span>BD<span class="w"> </span>Address:<span class="w"> </span>A8:41:F4:8B:B0:96<span class="w">  </span>ACL<span class="w"> </span>MTU:<span class="w"> </span><span class="m">1016</span>:5<span class="w">  </span>SCO<span class="w"> </span>MTU:<span class="w"> </span><span class="m">60</span>:12
<span class="w">        </span>UP<span class="w"> </span>RUNNING<span class="w"> </span>
<span class="w">        </span>RX<span class="w"> </span>bytes:1442<span class="w"> </span>acl:0<span class="w"> </span>sco:0<span class="w"> </span>events:84<span class="w"> </span>errors:0
<span class="w">        </span>TX<span class="w"> </span>bytes:1228<span class="w"> </span>acl:0<span class="w"> </span>sco:0<span class="w"> </span>commands:84<span class="w"> </span>errors:0
</pre></div>
</div>
<p>2. Enable bluetooth</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>bluetoothctl
Agent<span class="w"> </span>registered
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span>A8:41:F4:8B:B0:96<span class="w"> </span>Pairable:<span class="w"> </span>yes
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># power on  // Enable the Bluetooth device</span>
Changing<span class="w"> </span>power<span class="w"> </span>on<span class="w"> </span>succeeded
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># pairable on  // Set to pairable mode</span>
Changing<span class="w"> </span>pairable<span class="w"> </span>on<span class="w"> </span>succeeded
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># discoverable on  // Set to discoverable mode</span>
Changing<span class="w"> </span>discoverable<span class="w"> </span>on<span class="w"> </span>succeeded
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span>A8:41:F4:8B:B0:96<span class="w"> </span>Discoverable:<span class="w"> </span>yes
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># agent on  // Enable the agent</span>
Agent<span class="w"> </span>is<span class="w"> </span>already<span class="w"> </span>registered
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># default-agent  // Set the current agent as the default agent</span>
Default<span class="w"> </span>agent<span class="w"> </span>request<span class="w"> </span>successful
</pre></div>
</div>
<p>3. Bluetooth pairing</p>
<p>1. Development Board Passive Pairing;</p>
<p>Turn on Bluetooth on your phone and search for devices. A device named “ok-mx95-c” will appear. Tap on this Bluetooth device to attempt pairing. A pairing confirmation screen will appear—click “Confirm” or enter “yes” to confirm the pairing.</p>
<p>If pairing fails, please check whether pairable and discoverable are enabled.</p>
<p><img alt="Image" src="_images/1754903278266_325f6321_48e1_448b_acc9_ac8a351e89f4.png" /></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span>A8:41:F4:8B:B0:96<span class="w"> </span>Discoverable:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>zzy
Request<span class="w"> </span>confirmation
<span class="o">[</span>agent<span class="o">]</span><span class="w"> </span>Confirm<span class="w"> </span>passkey<span class="w"> </span><span class="m">103824</span><span class="w"> </span><span class="o">(</span>yes/no<span class="o">)</span>:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Bonded:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000111f-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Modalias:<span class="w"> </span>bluetooth:v000Fp1200d1436
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001105</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000110a-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000110c-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000110e-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001112</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001115</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001116</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000111f-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000112f-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001132</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001200</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001800</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001801</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00009955</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>fa88c0d0-afac-11de-8a99-0800200c9a67
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>ServicesResolved:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Paired:<span class="w"> </span>yes
Authorize<span class="w"> </span>service
<span class="o">[</span>agent<span class="o">]</span><span class="w"> </span>Authorize<span class="w"> </span>service<span class="w"> </span>0000111e-0000-1000-8000-00805f9b34fb<span class="w"> </span><span class="o">(</span>yes/no<span class="o">)</span>:<span class="w"> </span>yes
<span class="o">[</span>zzy<span class="o">]</span><span class="c1"># </span>
<span class="o">[</span>zzy<span class="o">]</span><span class="c1"># trust 14:16:9E:62:39:BD </span>

<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Trusted:<span class="w"> </span>yes
Changing<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>trust<span class="w"> </span>succeeded
</pre></div>
</div>
<p>2. Development board active pairing</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># scan on   //Start to scan</span>
Discovery<span class="w"> </span>started
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span>A8:41:F4:8B:B0:96<span class="w"> </span>Discovering:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">72</span>:54:3C:DF:60:DE<span class="w"> </span><span class="m">72</span>-54-3C-DF-60-DE
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>5A:A8:DE:11:49:41<span class="w"> </span>5A-A8-DE-11-49-41
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C0:0B:06:01:0A:38<span class="w"> </span>Mi<span class="w"> </span>Smart<span class="w"> </span>Band<span class="w"> </span><span class="m">5</span>
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>5C:E5:05:70:28:F6<span class="w"> </span>5C-E5-05-70-28-F6
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">75</span>:63:25:57:20:71<span class="w"> </span><span class="m">75</span>-63-25-57-20-71
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>5A:A8:DE:11:49:41<span class="w"> </span>RSSI:<span class="w"> </span>-79
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C0:0B:06:01:0A:38<span class="w"> </span>UUIDs:<span class="w"> </span>0000fee0-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>6C:69:FA:64:EF:5E<span class="w"> </span>6C-69-FA-64-EF-5E
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>zzy
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>2C:DB:07:C7:4F:F6<span class="w"> </span>DESKTOP-VND9V1F
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># scan off   //Turn off scanning</span>
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>2C:DB:07:C7:4F:F6<span class="w"> </span>TxPower<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>2C:DB:07:C7:4F:F6<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>6C:69:FA:64:EF:5E<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">75</span>:63:25:57:20:71<span class="w"> </span>TxPower<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">75</span>:63:25:57:20:71<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>5C:E5:05:70:28:F6<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>C0:0B:06:01:0A:38<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>5A:A8:DE:11:49:41<span class="w"> </span>TxPower<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span>5A:A8:DE:11:49:41<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">72</span>:54:3C:DF:60:DE<span class="w"> </span>RSSI<span class="w"> </span>is<span class="w"> </span>nil
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Controller<span class="w"> </span>A8:41:F4:8B:B0:96<span class="w"> </span>Discovering:<span class="w"> </span>no
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># pair 14:16:9E:62:39:BD</span>
Attempting<span class="w"> </span>to<span class="w"> </span>pair<span class="w"> </span>with<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Connected:<span class="w"> </span>yes
Request<span class="w"> </span>confirmation
<span class="o">[</span>agent<span class="o">]</span><span class="w"> </span>Confirm<span class="w"> </span>passkey<span class="w"> </span><span class="m">167225</span><span class="w"> </span><span class="o">(</span>yes/no<span class="o">)</span>:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Bonded:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Modalias:<span class="w"> </span>bluetooth:v000Fp1200d1436
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001105</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000110a-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000110c-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000110e-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001112</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001115</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001116</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000111f-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>0000112f-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001132</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001200</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001800</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00001801</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span><span class="m">00009955</span>-0000-1000-8000-00805f9b34fb
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>UUIDs:<span class="w"> </span>fa88c0d0-afac-11de-8a99-0800200c9a67
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>ServicesResolved:<span class="w"> </span>yes
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Paired:<span class="w"> </span>yes
Pairing<span class="w"> </span>successful
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>ServicesResolved:<span class="w"> </span>no
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Connected:<span class="w"> </span>no
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># trust 14:16:9E:62:39:BD</span>
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>Trusted:<span class="w"> </span>yes
Changing<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>trust<span class="w"> </span>succeeded
</pre></div>
</div>
<p>A pop-up window for confirming the key will appear on your mobile device. Please click “OK”.</p>
<p>4. Remove the device</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># devices Paired   //View paired device</span>
Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>zzy
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># remove 14:16:9E:62:39:BD   //Remove the device</span>
<span class="o">[</span><span class="w">  </span>DEL<span class="w">  </span><span class="o">]</span><span class="w"> </span>Device<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD<span class="w"> </span>zzy
Device<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>removed
<span class="o">[</span>bluetooth<span class="o">]</span><span class="c1"># </span>
</pre></div>
</div>
<p>5. Development board sends files via Bluetooth</p>
<p>To send a file, you need to enable obexd, as shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>/usr/libexec/bluetooth/obexd<span class="w"> </span>-a<span class="w"> </span>-r<span class="w"> </span>/tmp<span class="w"> </span><span class="p">&amp;</span><span class="w">  </span>//If<span class="w"> </span>you<span class="w"> </span>have<span class="w"> </span>started<span class="w"> </span>obexd,<span class="w"> </span>close<span class="w"> </span>the<span class="w"> </span>previous<span class="w"> </span>obexd<span class="w"> </span>and<span class="w"> </span>execute<span class="w"> </span>this<span class="w"> </span><span class="nb">command</span>
root@ok-mx95-c:~#<span class="w"> </span>obexctl<span class="w"> </span>
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Client<span class="w"> </span>/org/bluez/obex
<span class="o">[</span>obex<span class="o">]</span><span class="c1"># connect 14:16:9E:62:39:BD</span>
Attempting<span class="w"> </span>to<span class="w"> </span>connect<span class="w"> </span>to<span class="w"> </span><span class="m">14</span>:16:9E:62:39:BD
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Session<span class="w"> </span>/org/bluez/obex/client/session0<span class="w"> </span><span class="o">[</span>default<span class="o">]</span>
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>ObjectPush<span class="w"> </span>/org/bluez/obex/client/session0<span class="w"> </span>
Connection<span class="w"> </span>successful
<span class="o">[</span><span class="m">14</span>:16:9E:62:39:BD<span class="o">]</span><span class="c1"># send /home/forlinx/logo/logo-1920x1080.png</span>
Attempting<span class="w"> </span>to<span class="w"> </span>send<span class="w"> </span>/home/forlinx/logo/logo-1920x1080.png<span class="w"> </span>to<span class="w"> </span>/org/bluez/obex/client/session0
<span class="o">[</span><span class="w">  </span>NEW<span class="w">  </span><span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0<span class="w"> </span>
Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0
<span class="w">        </span>Status:<span class="w"> </span>queued
<span class="w">        </span>Name:<span class="w"> </span>logo-1920x1080.png
<span class="w">        </span>Size:<span class="w"> </span><span class="m">690151</span>
<span class="w">        </span>Filename:<span class="w"> </span>/home/forlinx/logo/logo-1920x1080.png
<span class="w">        </span>Session:<span class="w"> </span>/org/bluez/obex/client/session0
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0<span class="w"> </span>Status:<span class="w"> </span>active
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0<span class="w"> </span>Transferred:<span class="w"> </span><span class="m">65477</span><span class="w"> </span><span class="o">(</span>@65KB/s<span class="w"> </span>
...
<span class="o">[</span><span class="w">  </span>CHG<span class="w">  </span><span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0<span class="w"> </span>Status:<span class="w"> </span><span class="nb">complete</span>
<span class="o">[</span><span class="w">  </span>DEL<span class="w">  </span><span class="o">]</span><span class="w"> </span>Transfer<span class="w"> </span>/org/bluez/obex/client/session0/transfer0<span class="w"> </span>
<span class="o">[</span><span class="m">14</span>:16:9E:62:39:BD<span class="o">]</span><span class="c1"># disconnect </span>
Attempting<span class="w"> </span>to<span class="w"> </span>disconnect<span class="w"> </span>to<span class="w"> </span>/org/bluez/obex/client/session0
<span class="o">[</span><span class="w">  </span>DEL<span class="w">  </span><span class="o">]</span><span class="w"> </span>Session<span class="w"> </span>/org/bluez/obex/client/session0<span class="w"> </span><span class="o">[</span>default<span class="o">]</span>
<span class="o">[</span><span class="w">  </span>DEL<span class="w">  </span><span class="o">]</span><span class="w"> </span>ObjectPush<span class="w"> </span>/org/bluez/obex/client/session0<span class="w"> </span>
Disconnection<span class="w"> </span>successful
<span class="o">[</span>obex<span class="o">]</span><span class="c1"># </span>
</pre></div>
</div>
<p>6. Development board receives files via Bluetooth</p>
<p>This function is not supported at present.</p>
</section>
<section id="inter-core-communication-test">
<h3>4.26 Inter-core Communication Test<a class="headerlink" href="#inter-core-communication-test" title="Link to this heading"></a></h3>
<p>iMX95 CPU is a multi-core heterogeneous CPU that supports inter-core communication. This section tests the inter-core communication between the M7 core and the A core.</p>
<p>When connecting the development board’s debug port to a PC using a TYPE-C cable, four serial ports will be generated on the PC side. Channel A (Ch A) is the debug serial port for the Linux side, Channel B (Ch B) is the debug serial port for the M33 core, and Channel C (Ch C) is the debug serial port for the M7 core. Before the inter-core communication test, please connect the M7 core debugging serial port.</p>
<p>After powering on the development board, if the following printouts appear on the M7 core’s serial port, it indicates that the M7 core image has been loaded correctly and the RPMSG module has been started.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Start<span class="w"> </span>SRTM<span class="w"> </span>communication

RPMSG<span class="w"> </span>Ping-Pong<span class="w"> </span>FreeRTOS<span class="w"> </span>RTOS<span class="w"> </span>API<span class="w"> </span>Demo...
RPMSG<span class="w"> </span>Share<span class="w"> </span>Base<span class="w"> </span>Addr<span class="w"> </span>is<span class="w"> </span>0x88010000
Handle<span class="w"> </span>Peer<span class="w"> </span>Core<span class="w"> </span>Linkup
Link<span class="w"> </span>is<span class="w"> </span>up!
Nameservice<span class="w"> </span>announce<span class="w"> </span>sent.
</pre></div>
</div>
<p>Next, conduct the Ping-Pong communication test between heterogeneous cores.</p>
<p>The A-core Linux serial port executes the following command and prints as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>insmod<span class="w"> </span>/lib/modules/<span class="sb">`</span>uname<span class="w"> </span>-a<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $3}&#39;</span><span class="sb">`</span><span class="se">\</span>
/kernel/drivers/rpmsg/imx_rpmsg_pingpong.ko
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.645159<span class="o">]</span><span class="w"> </span>imx_rpmsg_pingpong<span class="w"> </span>virtio1.rpmsg-openamp-demo-channel.-1.30:<span class="w"> </span>new<span class="w"> </span>channel:<span class="w"> </span>0x400<span class="w"> </span>-&gt;<span class="w"> </span>0x1e!
root@ok-mx95-c:~#<span class="w"> </span><span class="o">[</span><span class="w">  </span><span class="m">424</span>.657749<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.662259<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.666770<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.671248<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
......
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.867794<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">93</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.872359<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">95</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.876934<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">97</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.881493<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.886061<span class="o">]</span><span class="w"> </span>get<span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="o">(</span>src:<span class="w"> </span>0x1e<span class="o">)</span>
<span class="o">[</span><span class="w">  </span><span class="m">424</span>.889219<span class="o">]</span><span class="w"> </span>imx_rpmsg_pingpong<span class="w"> </span>virtio1.rpmsg-openamp-demo-channel.-1.30:<span class="w"> </span>goodbye!
</pre></div>
</div>
<p>The M core side is printed as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>ping...
Sending<span class="w"> </span>pong...
Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>ping...
Sending<span class="w"> </span>pong...
Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>ping...
......
Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>ping...
Sending<span class="w"> </span>pong...
Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>ping...
Sending<span class="w"> </span>pong...
Ping<span class="w"> </span>pong<span class="w"> </span><span class="k">done</span>,<span class="w"> </span>deinitializing...
Looping<span class="w"> </span>forever...
</pre></div>
</div>
<p>Ping-Pong communication between heterogeneous cores is completed.</p>
</section>
<section id="sleep-wake-up-test">
<h3>4.27 Sleep Wake-up Test<a class="headerlink" href="#sleep-wake-up-test" title="Link to this heading"></a></h3>
<p>The OK-MX9596-C platform supports sleep wakeup. Currently, it supports serial wakeup and WAKE key wakeup.</p>
<p>Enable serial port wake-up:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>enabled<span class="w"> </span>&gt;<span class="w"> </span>/sys/class/tty/ttyLP0/power/wakeup
</pre></div>
</div>
<p>Sleep:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>mem<span class="w"> </span>&gt;<span class="w"> </span>/sys/power/state<span class="w"> </span>
<span class="o">[</span><span class="m">12842</span>.317424<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span>entry<span class="w"> </span><span class="o">(</span>deep<span class="o">)</span>
<span class="o">[</span><span class="m">12842</span>.330144<span class="o">]</span><span class="w"> </span>Filesystems<span class="w"> </span>sync:<span class="w"> </span><span class="m">0</span>.009<span class="w"> </span>seconds
<span class="o">[</span><span class="m">12842</span>.335039<span class="o">]</span><span class="w"> </span>Freezing<span class="w"> </span>user<span class="w"> </span>space<span class="w"> </span>processes
<span class="o">[</span><span class="m">12842</span>.340999<span class="o">]</span><span class="w"> </span>Freezing<span class="w"> </span>user<span class="w"> </span>space<span class="w"> </span>processes<span class="w"> </span>completed<span class="w"> </span><span class="o">(</span>elapsed<span class="w"> </span><span class="m">0</span>.001<span class="w"> </span>seconds<span class="o">)</span>
<span class="o">[</span><span class="m">12842</span>.347997<span class="o">]</span><span class="w"> </span>OOM<span class="w"> </span>killer<span class="w"> </span>disabled.
<span class="o">[</span><span class="m">12842</span>.351222<span class="o">]</span><span class="w"> </span>Freezing<span class="w"> </span>remaining<span class="w"> </span>freezable<span class="w"> </span>tasks
<span class="o">[</span><span class="m">12842</span>.356944<span class="o">]</span><span class="w"> </span>Freezing<span class="w"> </span>remaining<span class="w"> </span>freezable<span class="w"> </span>tasks<span class="w"> </span>completed<span class="w"> </span><span class="o">(</span>elapsed<span class="w"> </span><span class="m">0</span>.001<span class="w"> </span>seconds<span class="o">)</span>
<span class="o">[</span><span class="m">12842</span>.364357<span class="o">]</span><span class="w"> </span>printk:<span class="w"> </span>Suspending<span class="w"> </span>console<span class="o">(</span>s<span class="o">)</span><span class="w"> </span><span class="o">(</span>use<span class="w"> </span>no_console_suspend<span class="w"> </span>to<span class="w"> </span>debug<span class="o">)</span>
</pre></div>
</div>
<p>Serial port input and enter to wake up:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w">  </span><span class="m">903</span>.218278<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>Received<span class="w"> </span>disassociation<span class="w"> </span>request<span class="w"> </span>on<span class="w"> </span>mlan0,<span class="w"> </span>reason:<span class="w"> </span><span class="m">3</span>
<span class="o">[</span><span class="w">  </span><span class="m">903</span>.218289<span class="o">]</span><span class="w"> </span>wlan:<span class="w"> </span>REASON:<span class="w"> </span><span class="o">(</span>Deauth<span class="o">)</span><span class="w"> </span>Sending<span class="w"> </span>STA<span class="w"> </span>is<span class="w"> </span>leaving<span class="w"> </span><span class="o">(</span>or<span class="w"> </span>has<span class="w"> </span>left<span class="o">)</span><span class="w"> </span>IBSS<span class="w"> </span>or<span class="w"> </span>ESS
<span class="o">[</span><span class="w">  </span><span class="m">903</span>.243426<span class="o">]</span><span class="w"> </span>sd<span class="w"> </span><span class="m">0</span>:0:0:0:<span class="w"> </span><span class="o">[</span>sda<span class="o">]</span><span class="w"> </span>Synchronizing<span class="w"> </span>SCSI<span class="w"> </span>cache
<span class="o">[</span><span class="w">  </span><span class="m">903</span>.246522<span class="o">]</span><span class="w"> </span>None<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>WOWLAN<span class="w"> </span>triggers<span class="w"> </span>enabled
<span class="o">[</span><span class="w">  </span><span class="m">903</span>.246559<span class="o">]</span><span class="w"> </span>Suspend<span class="w"> </span>not<span class="w"> </span>allowed<span class="w"> </span>and<span class="w"> </span>retry<span class="w"> </span>again
......
<span class="o">[</span><span class="w">  </span><span class="m">907</span>.149034<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span>resume<span class="w"> </span>devices<span class="w"> </span>took<span class="w"> </span><span class="m">3</span>.372<span class="w"> </span>seconds
<span class="o">[</span><span class="w">  </span><span class="m">907</span>.345797<span class="o">]</span><span class="w"> </span>OOM<span class="w"> </span>killer<span class="w"> </span>enabled.
<span class="o">[</span><span class="w">  </span><span class="m">907</span>.348945<span class="o">]</span><span class="w"> </span>Restarting<span class="w"> </span>tasks<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>.
<span class="o">[</span><span class="w">  </span><span class="m">907</span>.355540<span class="o">]</span><span class="w"> </span>random:<span class="w"> </span>crng<span class="w"> </span>reseeded<span class="w"> </span>on<span class="w"> </span>system<span class="w"> </span>resumption
<span class="o">[</span><span class="w">  </span><span class="m">907</span>.360827<span class="o">]</span><span class="w"> </span>PM:<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span><span class="nb">exit</span>
</pre></div>
</div>
<p>Alternatively, press the WAKE key briefly on the carrier board to wake up.</p>
</section>
<section id="som-heartbeat-led-test">
<h3>4.28 SoM Heartbeat LED Test<a class="headerlink" href="#som-heartbeat-led-test" title="Link to this heading"></a></h3>
<p>OK-MX9596-C platform’s SoM is equipped with a blue LED light, which is typically used as a heartbeat LED. However, it can also be modified for other purposes.</p>
<p>1. To view trigger conditions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>enabled<span class="w"> </span>&gt;<span class="w"> </span>/sys/class/tty/ttyLP0/power/wakeup
none<span class="w"> </span>bluetooth-power<span class="w"> </span>kbd-scrolllock<span class="w"> </span>kbd-numlock<span class="w"> </span>kbd-capslock<span class="w"> </span>kbd-kanalock<span class="w"> </span>kbd-shiftlock<span class="w"> </span>kbd-altgrlock<span class="w"> </span>kbd-ctrllock<span class="w"> </span>kbd-altlock<span class="w"> </span>kbd-shiftllock<span class="w"> </span>kbd-shiftrlock<span class="w"> </span>kbd-ctrlllock<span class="w"> </span>kbd-ctrlrlock<span class="w"> </span>timer<span class="w"> </span>disk-activity<span class="w"> </span>disk-read<span class="w"> </span>disk-write<span class="w"> </span><span class="o">[</span>heartbeat<span class="o">]</span><span class="w"> </span>cpu<span class="w"> </span>cpu0<span class="w"> </span>cpu1<span class="w"> </span>cpu2<span class="w"> </span>cpu3<span class="w"> </span>cpu4<span class="w"> </span>cpu5<span class="w"> </span>default-on<span class="w"> </span>panic<span class="w"> </span>mmc0<span class="w"> </span>mmc1<span class="w"> </span>mmc2<span class="w"> </span>tcpm-source-psy-1-0022-online<span class="w"> </span>hci0-power
</pre></div>
</div>
<p>Where [heartbeat] indicates that the current trigger condition is the system heartbeat light. Write the above string in trigger to modify the trigger condition.</p>
<p>2. User Control</p>
<p>When the trigger condition of the led is set to none, the user can control the on and off of the led through the command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>none<span class="w"> </span>&gt;<span class="w"> </span>/sys/class/leds/heartbeat/trigger
root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/leds/heartbeat/brightness<span class="w">    </span>//Turn<span class="w"> </span>on<span class="w"> </span>LED<span class="w"> </span>light
root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/leds/heartbeat/brightness<span class="w">    </span>//Turn<span class="w"> </span>off<span class="w"> </span>LED<span class="w"> </span>light
</pre></div>
</div>
<p>3. Modify to heartbeat LED</p>
<p>Set the trigger condition to heartbeat.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>heartbeat<span class="w"> </span>&gt;<span class="w"> </span>/sys/class/leds/heartbeat/trigger
</pre></div>
</div>
</section>
</section>
<section id="ok-mx9596-c-platform-multimedia-test">
<h2>5. OK- MX9596-C Platform Multimedia Test<a class="headerlink" href="#ok-mx9596-c-platform-multimedia-test" title="Link to this heading"></a></h2>
<p>Some application layer software for audio and video on the OK-MX9596-C platform uses Gstreamer, which supports hardware codecs. All examples in this section based on the GStreamer command line form.</p>
<p>The OK-MX9596-C platform has an internal video processing unit, the VPU, which supports hardware codecs for video in the following formats:</p>
<p>Video Decoding: H264, H265, maximum support 4K&#64;60fps</p>
<p>Video Encoding: H264, H265, maximum support 4K&#64;60fps</p>
<p>JPEG codec:</p>
<p>Table of hardware codec parameters for the OK-MX9596-C platform:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p></p></th>
<th class="head text-center"><p><strong>Format</strong></p></th>
<th class="head text-center"><p><strong>Resolution</strong></p></th>
<th class="head text-center"><p><strong>Frame rate</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Video Decoder</strong></p></td>
<td class="text-center"><p>H.265/HEVC</p></td>
<td class="text-center"><p>4K</p></td>
<td class="text-center"><p>60 fps</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><strong>Video Decoder</strong></p></td>
<td class="text-center"><p>H.264/AVC</p></td>
<td class="text-center"><p>4K</p></td>
<td class="text-center"><p>60 fps</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><strong>Video Encoder</strong></p></td>
<td class="text-center"><p>H.264/AVC</p></td>
<td class="text-center"><p>4K</p></td>
<td class="text-center"><p>60 fps</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><strong>Video Encoder</strong></p></td>
<td class="text-center"><p>H.265/HEVC</p></td>
<td class="text-center"><p>4K</p></td>
<td class="text-center"><p>60 fps</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><strong>JPEG Decoder</strong></p></td>
<td class="text-center"><p>JPEG</p></td>
<td class="text-center"><p>8k*8k</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><strong>JPEG Encoder</strong></p></td>
<td class="text-center"><p>JPEG</p></td>
<td class="text-center"><p>8k*8k</p></td>
<td class="text-center"><p></p></td>
</tr>
</tbody>
</table>
<p><strong>Note: It is recommended to close the video before playing Desktop, and it will be displayed on the LVDS screen by default.</strong></p>
<section id="audio-and-video-playback">
<h3>5.1 Audio and Video Playback<a class="headerlink" href="#audio-and-video-playback" title="Link to this heading"></a></h3>
<p>1. Use gst-play-1.0 to play audio:</p>
<p>Gst-play-1.0 is an audio and video player based on Gstreamer, which can automatically select the appropriate plug-in for audio and video playback according to the hardware, and it is also very simple to run.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-play-1.0<span class="w"> </span>/home/forlinx/video/4k_60fps_h264-30S.mp4
</pre></div>
</div>
<p>2. Use gst-launch to play audio and video</p>
<p>Gst-launch is a common debugging tool for developers in the development phase. Compared with gplay, it is more flexible and relatively complex to use.</p>
<p>Play video only：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>filesrc<span class="w"> </span><span class="nv">location</span><span class="o">=</span>/home/forlinx/audio/30s.mp3<span class="w"> </span><span class="se">\</span>
!<span class="w"> </span>id3demux<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>mpegaudioparse<span class="w"> </span>!<span class="w"> </span>decodebin<span class="w"> </span>!<span class="w"> </span>audioconvert<span class="w"> </span>!<span class="w"> </span>audioresample<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
alsasink<span class="w"> </span><span class="nv">device</span><span class="o">=</span>plughw:1,0
</pre></div>
</div>
<p>Play video only:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>filesrc<span class="w"> </span><span class="se">\</span>
<span class="nv">location</span><span class="o">=</span>/home/forlinx/video/4k_60fps_h264-30S.mp4<span class="w"> </span><span class="nv">typefind</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
video/quicktime<span class="w"> </span>!<span class="w"> </span>aiurdemux<span class="w"> </span><span class="nv">name</span><span class="o">=</span>demux<span class="w"> </span>demux.<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>h264parse<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
v4l2h264dec<span class="w"> </span>!<span class="w"> </span>waylandsink
</pre></div>
</div>
<p>Play audio and video simultaneously:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>filesrc<span class="w"> </span><span class="se">\</span>
<span class="nv">location</span><span class="o">=</span>/home/forlinx/video/4k_60fps_h264-30S.mp4<span class="w"> </span><span class="nv">typefind</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
video/quicktime<span class="w"> </span>!<span class="w"> </span>aiurdemux<span class="w"> </span><span class="nv">name</span><span class="o">=</span>demux<span class="w"> </span>demux.<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>max-size-buffers<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
max-size-time<span class="o">=</span><span class="m">0</span><span class="w"> </span>!<span class="w"> </span>h264parse<span class="w"> </span>!<span class="w"> </span>v4l2h264dec<span class="w"> </span>!<span class="w">  </span>imxvideoconvert_g2d<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
video/x-raw,<span class="w"> </span><span class="nv">format</span><span class="o">=</span>RGB16,<span class="w"> </span><span class="nv">width</span><span class="o">=</span><span class="m">1024</span>,<span class="w"> </span><span class="nv">height</span><span class="o">=</span><span class="m">600</span><span class="w"> </span>!<span class="w"> </span>waylandsink<span class="w"> </span><span class="se">\</span>
demux.<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>max-size-buffers<span class="o">=</span><span class="m">0</span><span class="w"> </span>max-size-time<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
!<span class="w"> </span>decodebin<span class="w"> </span>!<span class="w"> </span>audioconvert<span class="w"> </span>!<span class="w"> </span>audioresample<span class="w"> </span>!<span class="w"> </span>alsasink<span class="w"> </span><span class="nv">device</span><span class="o">=</span>plughw:1,0
</pre></div>
</div>
</section>
<section id="video-hardware-encoding">
<h3>5.2 Video Hardware Encoding<a class="headerlink" href="#video-hardware-encoding" title="Link to this heading"></a></h3>
<p>i.MX95CPU supports video encoding in H264, H265 formats up to 4k 60fps.</p>
<p>Supported formats: YUV420, YUV422, YUV444.</p>
<p>1. H.264 Hardware Encoding</p>
<p>Encode the YUV420 format video into H264 format video, and use videotestsrc as the data source:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>videotestsrc<span class="w"> </span>num-buffers<span class="o">=</span><span class="m">300</span><span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
<span class="s2">&quot;video/x-raw,format=YUY2,width=3840,height=2160,framerate=60/1&quot;</span><span class="w"> </span><span class="se">\</span>
!<span class="w"> </span>v4l2h264enc<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>h264parse<span class="w"> </span>!<span class="w"> </span>qtmux<span class="w"> </span>!<span class="w"> </span>filesink<span class="w"> </span><span class="nv">location</span><span class="o">=</span>yuv2h264.mp4
</pre></div>
</div>
<p>Play encoded H264 video:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-play-1.0<span class="w"> </span>yuv2h264.mp4<span class="w"> </span>
</pre></div>
</div>
<p>Video playback can be seen on the LVDS screen.</p>
<p>2. H.265 Hardware Encoding</p>
<p>Encode YUV420 format video into H265 format video:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>videotestsrc<span class="w"> </span>num-buffers<span class="o">=</span><span class="m">300</span><span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
<span class="s2">&quot;video/x-raw,format=YUY2,width=3840,height=2160,framerate=60/1&quot;</span><span class="w"> </span><span class="se">\</span>
!<span class="w"> </span>v4l2h265enc<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>h265parse<span class="w"> </span>!<span class="w"> </span>qtmux<span class="w"> </span>!<span class="w"> </span>filesink<span class="w"> </span><span class="nv">location</span><span class="o">=</span>yuv2h265.mp4
</pre></div>
</div>
<p>Play encoded H265 video:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-play-1.0<span class="w"> </span>yuv2h265.mp4
</pre></div>
</div>
<p>You can see the video playing on the screen.</p>
</section>
<section id="video-hardware-decoding">
<h3>5.3 Video Hardware Decoding<a class="headerlink" href="#video-hardware-decoding" title="Link to this heading"></a></h3>
<p>i.MX95 CPU supports H264 and H265 video hard decoding, and supports up to 4K 60fps.</p>
<p>i.MX95 CPU performs video hardware decoding through its VPU, supporting the following output formats: YUV420 (I420/NV12/NV21).</p>
<p>1. H264 Decoding</p>
<p>Decode and play H264 video files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>filesrc<span class="w"> </span><span class="se">\</span>
<span class="nv">location</span><span class="o">=</span>/home/forlinx/video/4k_60fps_h264-30S.mp4<span class="w"> </span><span class="nv">typefind</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>!<span class="w"> </span>video/quicktime<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
aiurdemux<span class="w"> </span><span class="nv">name</span><span class="o">=</span>demux<span class="w"> </span>demux.<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>h264parse<span class="w"> </span>!<span class="w"> </span>v4l2h264dec<span class="w"> </span>!<span class="w"> </span>waylandsink
</pre></div>
</div>
<p>2. H265 Decoding</p>
<p>Decode and play H265 video files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>filesrc<span class="w"> </span><span class="se">\</span>
<span class="nv">location</span><span class="o">=</span>/home/forlinx/video/4k_60fps_h265-30S.mp4<span class="w"> </span><span class="nv">typefind</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>!<span class="w"> </span>video/quicktime<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
aiurdemux<span class="w"> </span><span class="nv">name</span><span class="o">=</span>demux<span class="w"> </span>demux.<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>h265parse<span class="w"> </span>!<span class="w"> </span>v4l2h265dec<span class="w"> </span>!<span class="w"> </span>waylandsink<span class="w"> </span>
</pre></div>
</div>
</section>
<section id="npu-test">
<h3>5.4 NPU Test<a class="headerlink" href="#npu-test" title="Link to this heading"></a></h3>
<p>i.MX95 CPU integrates a machine learning acceleration NPU internally, with a computing power of 2.0 TOPS.</p>
<p>1. TensorFlow Lite Test</p>
<p>Demo to recognize information such as people, animals, plants, locations, etc., in the input image (grace_hopper.bmp).</p>
<p><img alt="Image" src="_images/1754903280095_4a693803_4aca_4f81_a90b_2c21cedda8c1.png" /></p>
<p>grace_hopper.bmp</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/usr/bin/tensorflow-lite-2.14.0/examples/
root@ok-mx95-c:/usr/bin/tensorflow-lite-2.14.0/examples#<span class="w"> </span>./label_image<span class="w"> </span>-m<span class="w"> </span><span class="se">\</span>
mobilenet_v1_1.0_224_quant.tflite<span class="w"> </span>-i<span class="w"> </span>grace_hopper.bmp<span class="w"> </span>-l<span class="w"> </span>labels.txt<span class="w"> </span><span class="se">\</span>
--external_delegate_path<span class="o">=</span>/usr/lib/libneutron_delegate.so
INFO:<span class="w"> </span>Loaded<span class="w"> </span>model<span class="w"> </span>mobilenet_v1_1.0_224_quant.tflite
INFO:<span class="w"> </span>resolved<span class="w"> </span>reporter
INFO:<span class="w"> </span>EXTERNAL<span class="w"> </span>delegate<span class="w"> </span>created.
INFO:<span class="w"> </span>NeutronDelegate<span class="w"> </span>delegate:<span class="w"> </span><span class="m">0</span><span class="w"> </span>nodes<span class="w"> </span>delegated<span class="w"> </span>out<span class="w"> </span>of<span class="w"> </span><span class="m">31</span><span class="w"> </span>nodes<span class="w"> </span>with<span class="w"> </span><span class="m">0</span><span class="w"> </span>partitions.

INFO:<span class="w"> </span>Applied<span class="w"> </span>EXTERNAL<span class="w"> </span>delegate.
INFO:<span class="w"> </span>invoked
INFO:<span class="w"> </span>average<span class="w"> </span>time:<span class="w"> </span><span class="m">16</span>.934<span class="w"> </span>ms
INFO:<span class="w"> </span><span class="m">0</span>.764706:<span class="w"> </span><span class="m">653</span><span class="w"> </span>military<span class="w"> </span>uniform
INFO:<span class="w"> </span><span class="m">0</span>.121569:<span class="w"> </span><span class="m">907</span><span class="w"> </span>Windsor<span class="w"> </span>tie
INFO:<span class="w"> </span><span class="m">0</span>.0156863:<span class="w"> </span><span class="m">458</span><span class="w"> </span>bow<span class="w"> </span>tie
INFO:<span class="w"> </span><span class="m">0</span>.0117647:<span class="w"> </span><span class="m">466</span><span class="w"> </span>bulletproof<span class="w"> </span>vest
INFO:<span class="w"> </span><span class="m">0</span>.00784314:<span class="w"> </span><span class="m">835</span><span class="w"> </span>suit
root@ok-mx95-c://usr/bin/tensorflow-lite-2.14.0/examples#<span class="w"> </span>
</pre></div>
</div>
</section>
<section id="id8">
<h3>5.5 Camera Test<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<section id="usb-camera-test">
<h4>5.5.1 USB Camera Test<a class="headerlink" href="#usb-camera-test" title="Link to this heading"></a></h4>
<p>Check whether the UVC Camera device node is identified, as shown in the following figure/dev/video12 node, and check the format and resolution supported by the camera:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>v4l2-ctl<span class="w"> </span>--list-devices
<span class="o">[</span><span class="m">71016</span>.998500<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>reset<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">3</span><span class="w"> </span>using<span class="w"> </span>ci_hdrc
mxc-isi-cap<span class="w"> </span><span class="o">(</span>platform:4ad50000.isi<span class="o">)</span>:
<span class="w">        </span>/dev/video0
<span class="w">        </span>/dev/video1
<span class="w">        </span>/dev/video2
<span class="w">        </span>/dev/video3
<span class="w">        </span>/dev/video4
<span class="w">        </span>/dev/video5
<span class="w">        </span>/dev/video6
<span class="w">        </span>/dev/video7

mxc-jpeg<span class="w"> </span>codec<span class="w"> </span><span class="o">(</span>platform:4c500000.jpegdec<span class="o">)</span>:
<span class="w">        </span>/dev/video10

mxc-jpeg<span class="w"> </span>codec<span class="w"> </span><span class="o">(</span>platform:4c550000.jpegenc<span class="o">)</span>:
<span class="w">        </span>/dev/video11

wave6-dec<span class="w"> </span><span class="o">(</span>platform:wave6-dec<span class="o">)</span>:
<span class="w">        </span>/dev/video8

wave6-enc<span class="w"> </span><span class="o">(</span>platform:wave6-enc<span class="o">)</span>:
<span class="w">        </span>/dev/video9

UVC<span class="w"> </span>Camera<span class="w"> </span><span class="o">(</span>046d:0825<span class="o">)</span><span class="w"> </span><span class="o">(</span>usb-ci_hdrc.0-1.2<span class="o">)</span>:
<span class="w">        </span>/dev/video12
<span class="w">        </span>/dev/video13
<span class="w">        </span>/dev/media0
root@ok-mx95-c:~#<span class="w"> </span>v4l2-ctl<span class="w"> </span>--list-formats-ext<span class="w"> </span>-d<span class="w"> </span>/dev/video12
ioctl:<span class="w"> </span>VIDIOC_ENUM_FMT
<span class="w">        </span>Type:<span class="w"> </span>Video<span class="w"> </span>Capture

<span class="w">        </span><span class="o">[</span><span class="m">0</span><span class="o">]</span>:<span class="w"> </span><span class="s1">&#39;YUYV&#39;</span><span class="w"> </span><span class="o">(</span>YUYV<span class="w"> </span><span class="m">4</span>:2:2<span class="o">)</span>
<span class="w">                </span>Size:<span class="w"> </span>Discrete<span class="w"> </span>640x480
<span class="w">                        </span>Interval:<span class="w"> </span>Discrete<span class="w"> </span><span class="m">0</span>.033s<span class="w"> </span><span class="o">(</span><span class="m">30</span>.000<span class="w"> </span>fps<span class="o">)</span>
<span class="w">                        </span>Interval:<span class="w"> </span>Discrete<span class="w"> </span><span class="m">0</span>.040s<span class="w"> </span><span class="o">(</span><span class="m">25</span>.000<span class="w"> </span>fps<span class="o">)</span>
<span class="w">                        </span>Interval:<span class="w"> </span>Discrete<span class="w"> </span><span class="m">0</span>.050s<span class="w"> </span><span class="o">(</span><span class="m">20</span>.000<span class="w"> </span>fps<span class="o">)</span>
<span class="w">                        </span>Interval:<span class="w"> </span>Discrete<span class="w"> </span><span class="m">0</span>.067s<span class="w"> </span><span class="o">(</span><span class="m">15</span>.000<span class="w"> </span>fps<span class="o">)</span>
<span class="w">                        </span>Interval:<span class="w"> </span>Discrete<span class="w"> </span><span class="m">0</span>.100s<span class="w"> </span><span class="o">(</span><span class="m">10</span>.000<span class="w"> </span>fps<span class="o">)</span>
<span class="w">                        </span>Interval:<span class="w"> </span>Discrete<span class="w"> </span><span class="m">0</span>.200s<span class="w"> </span><span class="o">(</span><span class="m">5</span>.000<span class="w"> </span>fps<span class="o">)</span>
......
</pre></div>
</div>
<p>1. Camera preview:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>v4l2src<span class="w"> </span><span class="nv">device</span><span class="o">=</span>/dev/video12<span class="w"> </span>io-mode<span class="o">=</span><span class="m">2</span><span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
video/x-raw,<span class="w"> </span><span class="nv">format</span><span class="o">=</span>YUY2,<span class="w"> </span><span class="nv">width</span><span class="o">=</span><span class="m">640</span>,<span class="w"> </span><span class="nv">height</span><span class="o">=</span><span class="m">480</span>,framerate<span class="o">=</span><span class="m">30</span>/1<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
imxvideoconvert_g2d<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>video/x-raw,<span class="w"> </span><span class="nv">format</span><span class="o">=</span>RGB16,<span class="w"> </span><span class="nv">width</span><span class="o">=</span><span class="m">640</span>,<span class="w"> </span><span class="nv">height</span><span class="o">=</span><span class="m">480</span><span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
waylandsink
<span class="o">[</span><span class="m">71472</span>.578500<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>reset<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">3</span><span class="w"> </span>using<span class="w"> </span>ci_hdrc
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PAUSED<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>live<span class="w"> </span>and<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>need<span class="w"> </span>PREROLL<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>PREROLLED<span class="w"> </span>...
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PLAYING<span class="w"> </span>...
New<span class="w"> </span>clock:<span class="w"> </span>GstSystemClock
Redistribute<span class="w"> </span>latency...
^Chandling<span class="w"> </span>interrupt.
Interrupt:<span class="w"> </span>Stopping<span class="w"> </span>pipeline<span class="w"> </span>...
Execution<span class="w"> </span>ended<span class="w"> </span>after<span class="w"> </span><span class="m">0</span>:00:04.366638127
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>NULL<span class="w"> </span>...
Total<span class="w"> </span>showed<span class="w"> </span>frames<span class="w"> </span><span class="o">(</span><span class="m">70</span><span class="o">)</span>,<span class="w"> </span>playing<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>:00:04.366755461<span class="o">)</span>,<span class="w"> </span>fps<span class="w"> </span><span class="o">(</span><span class="m">16</span>.030<span class="o">)</span>.
Freeing<span class="w"> </span>pipeline<span class="w"> </span>...
</pre></div>
</div>
<p>You can see a preview of the camera on the screen. Press CTRL + C at the terminal to stop the preview.</p>
<p>2. Camera to Take Pictures</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>v4l2src<span class="w"> </span><span class="nv">device</span><span class="o">=</span>/dev/video12<span class="w"> </span>io-mode<span class="o">=</span><span class="m">2</span><span class="w"> </span>num-buffers<span class="o">=</span><span class="m">10</span><span class="w"> </span>!<span class="w"> </span>video/x-raw,format<span class="o">=</span>YUY2,width<span class="o">=</span><span class="m">640</span>,height<span class="o">=</span><span class="m">480</span>,framerate<span class="o">=</span><span class="m">30</span>/1<span class="w"> </span>!<span class="w"> </span>jpegenc<span class="w"> </span>!<span class="w"> </span>filesink<span class="w"> </span><span class="nv">location</span><span class="o">=</span>usb.jpeg
<span class="o">[</span><span class="m">71503</span>.118501<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>reset<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">3</span><span class="w"> </span>using<span class="w"> </span>ci_hdrc
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PAUSED<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>live<span class="w"> </span>and<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>need<span class="w"> </span>PREROLL<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>PREROLLED<span class="w"> </span>...
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PLAYING<span class="w"> </span>...
New<span class="w"> </span>clock:<span class="w"> </span>GstSystemClock
Redistribute<span class="w"> </span>latency...
Got<span class="w"> </span>EOS<span class="w"> </span>from<span class="w"> </span>element<span class="w"> </span><span class="s2">&quot;pipeline0&quot;</span>.
Execution<span class="w"> </span>ended<span class="w"> </span>after<span class="w"> </span><span class="m">0</span>:00:02.363499835
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>NULL<span class="w"> </span>...
Freeing<span class="w"> </span>pipeline<span class="w"> </span>...
root@ok-mx95-c:~#<span class="w"> </span>
</pre></div>
</div>
<p>After running the demo, a file named usb.jpeg will be generated in the current directory. Copy this file to a Windows environment and open it to view the captured photo.</p>
<p>3. Camera preview and video recording</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>v4l2src<span class="w"> </span><span class="nv">device</span><span class="o">=</span>/dev/video12<span class="w"> </span>io-mode<span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
num-buffers<span class="o">=</span><span class="m">300</span><span class="w"> </span>!<span class="w"> </span>video/x-raw,<span class="w"> </span><span class="nv">format</span><span class="o">=</span>YUY2,<span class="w"> </span><span class="nv">width</span><span class="o">=</span><span class="m">640</span>,<span class="w"> </span><span class="nv">height</span><span class="o">=</span><span class="m">480</span>,framerate<span class="o">=</span><span class="m">30</span>/1<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
imxvideoconvert_g2d<span class="w"> </span>!<span class="w"> </span>tee<span class="w"> </span><span class="nv">name</span><span class="o">=</span>t<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>v4l2h265enc<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>h265parse<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
qtmux<span class="w"> </span>!<span class="w"> </span>filesink<span class="w"> </span><span class="nv">location</span><span class="o">=</span>usb.mp4<span class="w"> </span>t.<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>waylandsink
<span class="o">[</span><span class="m">72049</span>.254493<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>reset<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">3</span><span class="w"> </span>using<span class="w"> </span>ci_hdrc
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PAUSED<span class="w"> </span>...

<span class="o">======</span><span class="w"> </span>V4L2ENC:<span class="w"> </span><span class="m">1</span>.22.5<span class="w"> </span>build<span class="w"> </span>on<span class="w"> </span>Mar<span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">07</span>:37:41.<span class="w"> </span><span class="o">======</span>
Pipeline<span class="w"> </span>is<span class="w"> </span>live<span class="w"> </span>and<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>need<span class="w"> </span>PREROLL<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>PREROLLED<span class="w"> </span>...
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PLAYING<span class="w"> </span>...
New<span class="w"> </span>clock:<span class="w"> </span>GstSystemClock
Redistribute<span class="w"> </span>latency...
Redistribute<span class="w"> </span>latency...
Redistribute<span class="w"> </span>latency...
Redistribute<span class="w"> </span>latency...
Got<span class="w"> </span>EOS<span class="w"> </span>from<span class="w"> </span>element<span class="w"> </span><span class="s2">&quot;pipeline0&quot;</span>.
Execution<span class="w"> </span>ended<span class="w"> </span>after<span class="w"> </span><span class="m">0</span>:00:12.318495964
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>NULL<span class="w"> </span>...
Total<span class="w"> </span>showed<span class="w"> </span>frames<span class="w"> </span><span class="o">(</span><span class="m">300</span><span class="o">)</span>,<span class="w"> </span>playing<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>:00:12.318546214<span class="o">)</span>,<span class="w"> </span>fps<span class="w"> </span><span class="o">(</span><span class="m">24</span>.354<span class="o">)</span>.
Freeing<span class="w"> </span>pipeline<span class="w"> </span>...
root@ok-mx95-c:~#<span class="w"> </span>
</pre></div>
</div>
<p>After using the above command, turn on the camera preview and recording. The camera will automatically stop transmitting data after 300 frames have been captured. After the process is completed, a file named usb.mp4 will be generated in the current directory. You can use gst-play-1.0 to play this video file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-play-1.0<span class="w"> </span>usb.mp4
</pre></div>
</div>
</section>
<section id="mipi-csi-camera-test">
<h4>5.5.2 MIPI CSI Camera Test<a class="headerlink" href="#mipi-csi-camera-test" title="Link to this heading"></a></h4>
<p>The CPU does not support ISP, so the OV13850 camera is not supported</p>
<p>Modify the power supply of the carrier board OV13850 camera to the built-in ISP OV5645 camera, which can be used for testing.</p>
<p>Check whether the OV5645 device node is identified. Through the media0 node, find that the video node corresponding to OV5645 is video 2.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>v4l2-ctl<span class="w"> </span>--list-devices
<span class="o">[</span><span class="w">  </span><span class="m">176</span>.962860<span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-1.2:<span class="w"> </span>reset<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">3</span><span class="w"> </span>using<span class="w"> </span>ci_hdrc
mxc-isi-cap<span class="w"> </span><span class="o">(</span>platform:4ad50000.isi<span class="o">)</span>:
<span class="w">        </span>/dev/video0
<span class="w">        </span>/dev/video1
<span class="w">        </span>/dev/video2
<span class="w">        </span>/dev/video3
<span class="w">        </span>/dev/video4
<span class="w">        </span>/dev/video5
<span class="w">        </span>/dev/video6
<span class="w">        </span>/dev/video7
<span class="w">        </span>/dev/media0

mxc-jpeg<span class="w"> </span>codec<span class="w"> </span><span class="o">(</span>platform:4c500000.jpegdec<span class="o">)</span>:
<span class="w">        </span>/dev/video10

mxc-jpeg<span class="w"> </span>codec<span class="w"> </span><span class="o">(</span>platform:4c550000.jpegenc<span class="o">)</span>:
<span class="w">        </span>/dev/video11

wave6-dec<span class="w"> </span><span class="o">(</span>platform:wave6-dec<span class="o">)</span>:
<span class="w">        </span>/dev/video8

wave6-enc<span class="w"> </span><span class="o">(</span>platform:wave6-enc<span class="o">)</span>:
<span class="w">        </span>/dev/video9

UVC<span class="w"> </span>Camera<span class="w"> </span><span class="o">(</span>046d:0825<span class="o">)</span><span class="w"> </span><span class="o">(</span>usb-ci_hdrc.0-1.2<span class="o">)</span>:
<span class="w">        </span>/dev/video12
<span class="w">        </span>/dev/video13
<span class="w">        </span>/dev/media1
root@ok-mx95-c:~#<span class="w"> </span>media-ctl<span class="w"> </span>-d<span class="w"> </span>/dev/media0<span class="w"> </span>-p
Media<span class="w"> </span>controller<span class="w"> </span>API<span class="w"> </span>version<span class="w"> </span><span class="m">6</span>.6.3

Media<span class="w"> </span>device<span class="w"> </span>information
------------------------
driver<span class="w">          </span>mxc-isi
model<span class="w">           </span>FSL<span class="w"> </span>Capture<span class="w"> </span>Media<span class="w"> </span>Device
serial<span class="w">          </span>
bus<span class="w"> </span>info<span class="w">        </span>platform:4ad50000.isi
hw<span class="w"> </span>revision<span class="w">     </span>0x0
driver<span class="w"> </span>version<span class="w">  </span><span class="m">6</span>.6.3

Device<span class="w"> </span>topology
-<span class="w"> </span>entity<span class="w"> </span><span class="m">1</span>:<span class="w"> </span>crossbar<span class="w"> </span><span class="o">(</span><span class="m">13</span><span class="w"> </span>pads,<span class="w"> </span><span class="m">9</span><span class="w"> </span>links<span class="o">)</span>
<span class="w">            </span><span class="nb">type</span><span class="w"> </span>V4L2<span class="w"> </span>subdev<span class="w"> </span>subtype<span class="w"> </span>Unknown<span class="w"> </span>flags<span class="w"> </span><span class="m">0</span>
<span class="w">            </span>device<span class="w"> </span>node<span class="w"> </span>name<span class="w"> </span>/dev/v4l-subdev0
<span class="w">        </span>pad0:<span class="w"> </span>Sink
<span class="w">        </span>pad1:<span class="w"> </span>Sink
<span class="w">        </span>pad2:<span class="w"> </span>Sink
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>&lt;-<span class="w"> </span><span class="s2">&quot;csidev-4ad30000.csi&quot;</span>:1<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad3:<span class="w"> </span>Sink
<span class="w">        </span>pad4:<span class="w"> </span>Sink
<span class="w">        </span>pad5:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.0&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad6:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.1&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad7:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.2&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad8:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.3&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad9:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.4&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad10:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.5&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad11:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.6&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad12:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:srgb<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.7&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
-<span class="w"> </span>entity<span class="w"> </span><span class="m">103</span>:<span class="w"> </span>csidev-4ad30000.csi<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span>pads,<span class="w"> </span><span class="m">2</span><span class="w"> </span>links<span class="o">)</span>
<span class="w">              </span><span class="nb">type</span><span class="w"> </span>V4L2<span class="w"> </span>subdev<span class="w"> </span>subtype<span class="w"> </span>Unknown<span class="w"> </span>flags<span class="w"> </span><span class="m">0</span>
<span class="w">              </span>device<span class="w"> </span>node<span class="w"> </span>name<span class="w"> </span>/dev/v4l-subdev9
<span class="w">        </span>pad0:<span class="w"> </span>Sink
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:smpte170m<span class="w"> </span>xfer:709<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>&lt;-<span class="w"> </span><span class="s2">&quot;ov5645 4-003c&quot;</span>:0<span class="w"> </span><span class="o">[]</span>
<span class="w">        </span>pad1:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:smpte170m<span class="w"> </span>xfer:709<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:lim-range<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;crossbar&quot;</span>:2<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
......
-<span class="w"> </span>entity<span class="w"> </span><span class="m">37</span>:<span class="w"> </span>mxc_isi.2<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span>pads,<span class="w"> </span><span class="m">2</span><span class="w"> </span>links<span class="o">)</span>
<span class="w">             </span><span class="nb">type</span><span class="w"> </span>V4L2<span class="w"> </span>subdev<span class="w"> </span>subtype<span class="w"> </span>Unknown<span class="w"> </span>flags<span class="w"> </span><span class="m">0</span>
<span class="w">             </span>device<span class="w"> </span>node<span class="w"> </span>name<span class="w"> </span>/dev/v4l-subdev3
<span class="w">        </span>pad0:<span class="w"> </span>Sink
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:jpeg<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:full-range
<span class="w">                 </span>compose.bounds:<span class="o">(</span><span class="m">0</span>,0<span class="o">)</span>/1920x1080
<span class="w">                 </span>compose:<span class="o">(</span><span class="m">0</span>,0<span class="o">)</span>/1920x1080<span class="o">]</span>
<span class="w">                </span>&lt;-<span class="w"> </span><span class="s2">&quot;crossbar&quot;</span>:7<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
<span class="w">        </span>pad1:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:YUV8_1X24/1920x1080<span class="w"> </span>field:none<span class="w"> </span>colorspace:jpeg<span class="w"> </span>xfer:srgb<span class="w"> </span>ycbcr:601<span class="w"> </span>quantization:full-range
<span class="w">                 </span>crop.bounds:<span class="o">(</span><span class="m">0</span>,0<span class="o">)</span>/1920x1080
<span class="w">                 </span>crop:<span class="o">(</span><span class="m">0</span>,0<span class="o">)</span>/1920x1080<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;mxc_isi.2.capture&quot;</span>:0<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>

-<span class="w"> </span>entity<span class="w"> </span><span class="m">40</span>:<span class="w"> </span>mxc_isi.2.capture<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="w"> </span>pad,<span class="w"> </span><span class="m">1</span><span class="w"> </span>link<span class="o">)</span>
<span class="w">             </span><span class="nb">type</span><span class="w"> </span>Node<span class="w"> </span>subtype<span class="w"> </span>V4L<span class="w"> </span>flags<span class="w"> </span><span class="m">0</span>
<span class="w">             </span>device<span class="w"> </span>node<span class="w"> </span>name<span class="w"> </span>/dev/video2
<span class="w">        </span>pad0:<span class="w"> </span>Sink
<span class="w">                </span>&lt;-<span class="w"> </span><span class="s2">&quot;mxc_isi.2&quot;</span>:1<span class="w"> </span><span class="o">[</span>ENABLED,IMMUTABLE<span class="o">]</span>
......
-<span class="w"> </span>entity<span class="w"> </span><span class="m">108</span>:<span class="w"> </span>ov5645<span class="w"> </span><span class="m">4</span>-003c<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="w"> </span>pad,<span class="w"> </span><span class="m">1</span><span class="w"> </span>link<span class="o">)</span>
<span class="w">              </span><span class="nb">type</span><span class="w"> </span>V4L2<span class="w"> </span>subdev<span class="w"> </span>subtype<span class="w"> </span>Sensor<span class="w"> </span>flags<span class="w"> </span><span class="m">0</span>
<span class="w">              </span>device<span class="w"> </span>node<span class="w"> </span>name<span class="w"> </span>/dev/v4l-subdev10
<span class="w">        </span>pad0:<span class="w"> </span>Source
<span class="w">                </span><span class="o">[</span>fmt:UYVY8_1X16/1920x1080
<span class="w">                 </span>crop:<span class="o">(</span><span class="m">0</span>,0<span class="o">)</span>/0x0<span class="o">]</span>
<span class="w">                </span>-&gt;<span class="w"> </span><span class="s2">&quot;csidev-4ad30000.csi&quot;</span>:0<span class="w"> </span><span class="o">[]</span>
</pre></div>
</div>
<p>1. Enable OV5645 channel</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>media-ctl<span class="w"> </span>-d<span class="w"> </span>/dev/media0<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;&#39;ov5645 4-003c&#39;:0 -&gt; &#39;csidev-4ad30000.csi&#39;:0 [1]&quot;</span>
</pre></div>
</div>
<p>2. Camera preview:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>v4l2src<span class="w"> </span><span class="nv">device</span><span class="o">=</span>/dev/video2<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
video/x-raw,format<span class="o">=</span>YUY2,width<span class="o">=</span><span class="m">1920</span>,height<span class="o">=</span><span class="m">1080</span>,framerate<span class="o">=</span><span class="m">30</span>/1<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
autovideoconvert<span class="w"> </span>!<span class="w"> </span>waylandsink
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PAUSED<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>live<span class="w"> </span>and<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>need<span class="w"> </span>PREROLL<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>PREROLLED<span class="w"> </span>...
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PLAYING<span class="w"> </span>...
New<span class="w"> </span>clock:<span class="w"> </span>GstSystemClock
Redistribute<span class="w"> </span>latency...
^Chandling<span class="w"> </span>interrupt.
Interrupt:<span class="w"> </span>Stopping<span class="w"> </span>pipeline<span class="w"> </span>...
Execution<span class="w"> </span>ended<span class="w"> </span>after<span class="w"> </span><span class="m">0</span>:00:11.193329464
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>NULL<span class="w"> </span>...
Total<span class="w"> </span>showed<span class="w"> </span>frames<span class="w"> </span><span class="o">(</span><span class="m">307</span><span class="o">)</span>,<span class="w"> </span>playing<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>:00:11.193366463<span class="o">)</span>,<span class="w"> </span>fps<span class="w"> </span><span class="o">(</span><span class="m">27</span>.427<span class="o">)</span>.
Freeing<span class="w"> </span>pipeline<span class="w"> </span>...
</pre></div>
</div>
<p>You can see a preview of the camera on the screen. Press CTRL + C at the terminal to stop the preview.</p>
<p>3. Camera to Take Pictures</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>v4l2src<span class="w"> </span><span class="nv">device</span><span class="o">=</span>/dev/video2<span class="w"> </span>io-mode<span class="o">=</span><span class="m">4</span><span class="w"> </span>num-buffers<span class="o">=</span><span class="m">10</span><span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
video/x-raw,format<span class="o">=</span>YUY2,width<span class="o">=</span><span class="m">1920</span>,height<span class="o">=</span><span class="m">1080</span>,framerate<span class="o">=</span><span class="m">30</span>/1<span class="w"> </span>!<span class="w"> </span>filesink<span class="w"> </span><span class="nv">location</span><span class="o">=</span>pic.YUV
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PAUSED<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>live<span class="w"> </span>and<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>need<span class="w"> </span>PREROLL<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>PREROLLED<span class="w"> </span>...
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PLAYING<span class="w"> </span>...
New<span class="w"> </span>clock:<span class="w"> </span>GstSystemClock
Redistribute<span class="w"> </span>latency...
Got<span class="w"> </span>EOS<span class="w"> </span>from<span class="w"> </span>element<span class="w"> </span><span class="s2">&quot;pipeline0&quot;</span>.
Execution<span class="w"> </span>ended<span class="w"> </span>after<span class="w"> </span><span class="m">0</span>:00:01.069978125
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>NULL<span class="w"> </span>...
Freeing<span class="w"> </span>pipeline<span class="w"> </span>...
root@ok-mx95-c:~#<span class="w"> </span>
</pre></div>
</div>
<p>After running, a pic. YUV will be generated in the current directory and copied to Windows. Open this file with YUV Player and you can see the photos taken. The resolution is 1920x1080, the format is YUYV, and there are 10 frames. The first few frames of pictures may be abnormal because the camera has just started without setting 3A (auto white balance, auto exposure, auto focus). The picture will become clear after the 3A setting is completed</p>
<p>4. Camera preview and video recording</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-launch-1.0<span class="w"> </span>v4l2src<span class="w"> </span><span class="nv">device</span><span class="o">=</span>/dev/video2<span class="w"> </span>io-mode<span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="se">\</span>
num-buffers<span class="o">=</span><span class="m">300</span><span class="w"> </span>!<span class="w"> </span>video/x-raw,<span class="w"> </span><span class="nv">format</span><span class="o">=</span>YUY2,<span class="w"> </span><span class="nv">width</span><span class="o">=</span><span class="m">1920</span>,<span class="w"> </span><span class="nv">height</span><span class="o">=</span><span class="m">1080</span>,framerate<span class="o">=</span><span class="m">30</span>/1<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
imxvideoconvert_g2d<span class="w"> </span>!<span class="w"> </span>tee<span class="w"> </span><span class="nv">name</span><span class="o">=</span>t<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>v4l2h265enc<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>h265parse<span class="w"> </span>!<span class="w"> </span><span class="se">\</span>
qtmux<span class="w"> </span>!<span class="w"> </span>filesink<span class="w"> </span><span class="nv">location</span><span class="o">=</span>ov5645.mp4<span class="w"> </span>t.<span class="w"> </span>!<span class="w"> </span>queue<span class="w"> </span>!<span class="w"> </span>waylandsink<span class="w"> </span>
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PAUSED<span class="w"> </span>...

<span class="o">======</span><span class="w"> </span>V4L2ENC:<span class="w"> </span><span class="m">1</span>.22.5<span class="w"> </span>build<span class="w"> </span>on<span class="w"> </span>Mar<span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">07</span>:37:41.<span class="w"> </span><span class="o">======</span>
Pipeline<span class="w"> </span>is<span class="w"> </span>live<span class="w"> </span>and<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>need<span class="w"> </span>PREROLL<span class="w"> </span>...
Pipeline<span class="w"> </span>is<span class="w"> </span>PREROLLED<span class="w"> </span>...
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>PLAYING<span class="w"> </span>...
New<span class="w"> </span>clock:<span class="w"> </span>GstSystemClock
Redistribute<span class="w"> </span>latency...
Redistribute<span class="w"> </span>latency...
Redistribute<span class="w"> </span>latency...
Redistribute<span class="w"> </span>latency...
Got<span class="w"> </span>EOS<span class="w"> </span>from<span class="w"> </span>element<span class="w"> </span><span class="s2">&quot;pipeline0&quot;</span>.
Execution<span class="w"> </span>ended<span class="w"> </span>after<span class="w"> </span><span class="m">0</span>:00:10.354177130
Setting<span class="w"> </span>pipeline<span class="w"> </span>to<span class="w"> </span>NULL<span class="w"> </span>...
Total<span class="w"> </span>showed<span class="w"> </span>frames<span class="w"> </span><span class="o">(</span><span class="m">301</span><span class="o">)</span>,<span class="w"> </span>playing<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>:00:10.354210880<span class="o">)</span>,<span class="w"> </span>fps<span class="w"> </span><span class="o">(</span><span class="m">29</span>.070<span class="o">)</span>.
Freeing<span class="w"> </span>pipeline<span class="w"> </span>...
root@ok-mx95-c:~#<span class="w"> </span>
</pre></div>
</div>
<p>After using the above command, open the camera preview and video recording, and collect 300 frames of images. After the collection is complete, the file ov5645.mp4 is generated in the current directory. Use gst-play-1.0 to play audio:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ok-mx95-c:~#<span class="w"> </span>gst-play-1.0<span class="w"> </span>ov5645.mp4
</pre></div>
</div>
</section>
</section>
</section>
<section id="system-settings">
<h2>6. System Settings<a class="headerlink" href="#system-settings" title="Link to this heading"></a></h2>
<section id="updating-logo">
<h3>6.1 Updating Logo<a class="headerlink" href="#updating-logo" title="Link to this heading"></a></h3>
<p>The logo for the OK-MX9596-C platform is based on the Weston display.</p>
<p>The principle of Weston’s logo display is to replace the background of Weston with the logo image, modify the weston configuration file /etc/xdg/weston/weston.ini, replace background-image=/home/forlinx/logo/logo-1920x1080.png with the user’s logo path.</p>
</section>
<section id="self-starting-program-settings">
<h3>6.2 Self-starting Program Settings<a class="headerlink" href="#self-starting-program-settings" title="Link to this heading"></a></h3>
<p>Forlinx has preset the boot script/etc/autorun. sh through systemd, and this script will run automatically after booting. Users can modify this script to implement the application boot self-start function.</p>
<p>Users can also set up a new systemd service to realize the automatic startup function of the application.</p>
</section>
<section id="starting-the-watchdog-under-uboot">
<h3>6.3 Starting the Watchdog Under Uboot<a class="headerlink" href="#starting-the-watchdog-under-uboot" title="Link to this heading"></a></h3>
<p>UBoot environment supports watchdog function. By default, the watchdog is not enabled. It can be activated by setting the following environment variables to initiate the watchdog’s default startup. Alternatively, the watchdog’s default startup can also be configured by modifying the device tree or the code.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>u-boot<span class="o">=</span>&gt;<span class="w"> </span>setenv<span class="w"> </span>wdt_start<span class="w"> </span><span class="m">1</span>
u-boot<span class="o">=</span>&gt;<span class="w"> </span>setenv<span class="w"> </span>wdt_timeout<span class="w"> </span><span class="m">10</span>
u-boot<span class="o">=</span>&gt;<span class="w"> </span>saveenv
Saving<span class="w"> </span>Environment<span class="w"> </span>to<span class="w"> </span>MMC...<span class="w"> </span>Writing<span class="w"> </span>to<span class="w"> </span>MMC<span class="o">(</span><span class="m">0</span><span class="o">)</span>...<span class="w"> </span>OK
</pre></div>
</div>
<p>Afterward, restart the board and you can see the following print in the startup printout, indicating that the watchdog has started:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>WDT:<span class="w">   </span>Started<span class="w"> </span>wdog@42490000<span class="w"> </span>with<span class="w"> </span>servicing<span class="w"> </span>every<span class="w"> </span>1000ms<span class="w"> </span><span class="o">(</span>10s<span class="w"> </span>timeout<span class="o">)</span>
</pre></div>
</div>
<p>After starting the watchdog, there is dog feeding under the uboot, so the watchdog reboot will not be triggered under uboot. After uboot starts the kernel, if the kernel does not reinitialize the watchdog or feed the watchdog, the watchdog will restart the system after 10 seconds.</p>
<p>The default device tree for OK-MX9596-C reinitializes the watchdog.</p>
</section>
<section id="loading-kernel-and-device-tree-via-uboot">
<h3>6.4 Loading Kernel and Device Tree via Uboot<a class="headerlink" href="#loading-kernel-and-device-tree-via-uboot" title="Link to this heading"></a></h3>
<p>OK-MX9596-C supports data transfer via TFTP under uboot. The eth0 network port is used by default.</p>
<p>A common application scenario is to load the kernel and device tree through TFTP. Please set up the TFTP server in advance. The reference command is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>u-boot<span class="o">=</span>&gt;<span class="w"> </span>setenv<span class="w"> </span>gatewayip<span class="w"> </span><span class="m">192</span>.168.1.1
u-boot<span class="o">=</span>&gt;<span class="w"> </span>setenv<span class="w"> </span>ipaddr<span class="w"> </span><span class="m">192</span>.168.1.166
u-boot<span class="o">=</span>&gt;<span class="w"> </span>setenv<span class="w"> </span>netmask<span class="w"> </span><span class="m">255</span>.255.255.0
u-boot<span class="o">=</span>&gt;<span class="w"> </span>setenv<span class="w"> </span>serverip<span class="w"> </span><span class="m">192</span>.168.1.165
u-boot<span class="o">=</span>&gt;<span class="w"> </span>ping<span class="w"> </span><span class="m">192</span>.168.1.165
Using<span class="w"> </span>enetc-0<span class="w"> </span>device
host<span class="w"> </span><span class="m">192</span>.168.1.165<span class="w"> </span>is<span class="w"> </span>alive
u-boot<span class="o">=</span>&gt;<span class="w"> </span>tftp<span class="w"> </span><span class="si">${</span><span class="nv">fdt_addr_r</span><span class="si">}</span><span class="w"> </span>OK-MX95xx-C.dtb
Using<span class="w"> </span>enetc-0<span class="w"> </span>device
TFTP<span class="w"> </span>from<span class="w"> </span>server<span class="w"> </span><span class="m">192</span>.168.1.165<span class="p">;</span><span class="w"> </span>our<span class="w"> </span>IP<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span><span class="m">192</span>.168.1.166
Filename<span class="w"> </span><span class="s1">&#39;OK-MX95xx-C.dtb&#39;</span>.
Load<span class="w"> </span>address:<span class="w"> </span>0x93000000
Loading:<span class="w"> </span><span class="c1">######</span>
<span class="w">         </span><span class="m">3</span>.1<span class="w"> </span>MiB/s
<span class="k">done</span>
Bytes<span class="w"> </span><span class="nv">transferred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">75003</span><span class="w"> </span><span class="o">(</span>124fb<span class="w"> </span>hex<span class="o">)</span>
u-boot<span class="o">=</span>&gt;<span class="w"> </span>tftp<span class="w"> </span><span class="si">${</span><span class="nv">loadaddr</span><span class="si">}</span><span class="w"> </span>Image
Using<span class="w"> </span>enetc-0<span class="w"> </span>device
TFTP<span class="w"> </span>from<span class="w"> </span>server<span class="w"> </span><span class="m">192</span>.168.1.165<span class="p">;</span><span class="w"> </span>our<span class="w"> </span>IP<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span><span class="m">192</span>.168.1.166
Filename<span class="w"> </span><span class="s1">&#39;Image&#39;</span>.
Load<span class="w"> </span>address:<span class="w"> </span>0x90400000
Loading:<span class="w"> </span><span class="c1">#################################################################</span>
......
<span class="w">        </span><span class="c1">################</span>
<span class="w">         </span><span class="m">4</span>.9<span class="w"> </span>MiB/s
<span class="k">done</span>
Bytes<span class="w"> </span><span class="nv">transferred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">35471872</span><span class="w"> </span><span class="o">(</span>21d4200<span class="w"> </span>hex<span class="o">)</span>
u-boot<span class="o">=</span>&gt;<span class="w"> </span>setenv<span class="w"> </span>bootargs<span class="w"> </span><span class="nv">console</span><span class="o">=</span>ttyLP0,115200<span class="w"> </span><span class="nv">root</span><span class="o">=</span>/dev/mmcblk0p2<span class="w"> </span>rootwait<span class="w"> </span>rw
u-boot<span class="o">=</span>&gt;<span class="w"> </span>booti<span class="w"> </span><span class="si">${</span><span class="nv">kernel_addr_r</span><span class="si">}</span><span class="w"> </span>-<span class="w"> </span><span class="si">${</span><span class="nv">fdt_addr_r</span><span class="si">}</span>
<span class="c1">## Flattened Device Tree blob at 93000000</span>
<span class="w">   </span>Booting<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>fdt<span class="w"> </span>blob<span class="w"> </span>at<span class="w"> </span>0x93000000
Working<span class="w"> </span>FDT<span class="w"> </span><span class="nb">set</span><span class="w"> </span>to<span class="w"> </span><span class="m">93000000</span>
<span class="w">   </span>Using<span class="w"> </span>Device<span class="w"> </span>Tree<span class="w"> </span><span class="k">in</span><span class="w"> </span>place<span class="w"> </span>at<span class="w"> </span><span class="m">0000000093000000</span>,<span class="w"> </span>end<span class="w"> </span>00000000930154fa
Working<span class="w"> </span>FDT<span class="w"> </span><span class="nb">set</span><span class="w"> </span>to<span class="w"> </span><span class="m">93000000</span>

Starting<span class="w"> </span>kernel<span class="w"> </span>...
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>